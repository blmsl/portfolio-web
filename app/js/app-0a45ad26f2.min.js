!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var core_1=require("@angular/core"),common_directives_1=require("./src/common_directives"),pipes_1=require("./src/pipes");__export(require("./src/pipes")),__export(require("./src/directives")),__export(require("./src/forms-deprecated")),__export(require("./src/common_directives")),__export(require("./src/location"));var localization_1=require("./src/localization");exports.NgLocalization=localization_1.NgLocalization;var CommonModule=function(){function CommonModule(){}return CommonModule.decorators=[{type:core_1.NgModule,args:[{declarations:[common_directives_1.COMMON_DIRECTIVES,pipes_1.COMMON_PIPES],exports:[common_directives_1.COMMON_DIRECTIVES,pipes_1.COMMON_PIPES]}]}],CommonModule}();exports.CommonModule=CommonModule},{"./src/common_directives":2,"./src/directives":3,"./src/forms-deprecated":19,"./src/localization":44,"./src/location":45,"./src/pipes":51,"@angular/core":154}],2:[function(require,module,exports){"use strict";var directives_1=require("./directives");exports.COMMON_DIRECTIVES=[directives_1.CORE_DIRECTIVES]},{"./directives":3}],3:[function(require,module,exports){"use strict";var core_directives_1=require("./directives/core_directives");exports.CORE_DIRECTIVES=core_directives_1.CORE_DIRECTIVES;var ng_class_1=require("./directives/ng_class");exports.NgClass=ng_class_1.NgClass;var ng_for_1=require("./directives/ng_for");exports.NgFor=ng_for_1.NgFor;var ng_if_1=require("./directives/ng_if");exports.NgIf=ng_if_1.NgIf;var ng_plural_1=require("./directives/ng_plural");exports.NgPlural=ng_plural_1.NgPlural,exports.NgPluralCase=ng_plural_1.NgPluralCase;var ng_style_1=require("./directives/ng_style");exports.NgStyle=ng_style_1.NgStyle;var ng_switch_1=require("./directives/ng_switch");exports.NgSwitch=ng_switch_1.NgSwitch,exports.NgSwitchCase=ng_switch_1.NgSwitchCase,exports.NgSwitchDefault=ng_switch_1.NgSwitchDefault;var ng_template_outlet_1=require("./directives/ng_template_outlet");exports.NgTemplateOutlet=ng_template_outlet_1.NgTemplateOutlet},{"./directives/core_directives":4,"./directives/ng_class":5,"./directives/ng_for":6,"./directives/ng_if":7,"./directives/ng_plural":8,"./directives/ng_style":9,"./directives/ng_switch":10,"./directives/ng_template_outlet":11}],4:[function(require,module,exports){"use strict";var ng_class_1=require("./ng_class"),ng_for_1=require("./ng_for"),ng_if_1=require("./ng_if"),ng_plural_1=require("./ng_plural"),ng_style_1=require("./ng_style"),ng_switch_1=require("./ng_switch"),ng_template_outlet_1=require("./ng_template_outlet");exports.CORE_DIRECTIVES=[ng_class_1.NgClass,ng_for_1.NgFor,ng_if_1.NgIf,ng_template_outlet_1.NgTemplateOutlet,ng_style_1.NgStyle,ng_switch_1.NgSwitch,ng_switch_1.NgSwitchCase,ng_switch_1.NgSwitchDefault,ng_plural_1.NgPlural,ng_plural_1.NgPluralCase]},{"./ng_class":5,"./ng_for":6,"./ng_if":7,"./ng_plural":8,"./ng_style":9,"./ng_switch":10,"./ng_template_outlet":11}],5:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),NgClass=function(){function NgClass(_iterableDiffers,_keyValueDiffers,_ngEl,_renderer){this._iterableDiffers=_iterableDiffers,this._keyValueDiffers=_keyValueDiffers,this._ngEl=_ngEl,this._renderer=_renderer,this._initialClasses=[]}return Object.defineProperty(NgClass.prototype,"initialClasses",{set:function(v){this._applyInitialClasses(!0),this._initialClasses=lang_1.isPresent(v)&&lang_1.isString(v)?v.split(" "):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(NgClass.prototype,"ngClass",{set:function(v){this._cleanupClasses(this._rawClass),lang_1.isString(v)&&(v=v.split(" ")),this._rawClass=v,this._iterableDiffer=null,this._keyValueDiffer=null,lang_1.isPresent(v)&&(collection_1.isListLikeIterable(v)?this._iterableDiffer=this._iterableDiffers.find(v).create(null):this._keyValueDiffer=this._keyValueDiffers.find(v).create(null))},enumerable:!0,configurable:!0}),NgClass.prototype.ngDoCheck=function(){if(lang_1.isPresent(this._iterableDiffer)){var changes=this._iterableDiffer.diff(this._rawClass);lang_1.isPresent(changes)&&this._applyIterableChanges(changes)}if(lang_1.isPresent(this._keyValueDiffer)){var changes=this._keyValueDiffer.diff(this._rawClass);lang_1.isPresent(changes)&&this._applyKeyValueChanges(changes)}},NgClass.prototype._cleanupClasses=function(rawClassVal){this._applyClasses(rawClassVal,!0),this._applyInitialClasses(!1)},NgClass.prototype._applyKeyValueChanges=function(changes){var _this=this;changes.forEachAddedItem(function(record){_this._toggleClass(record.key,record.currentValue)}),changes.forEachChangedItem(function(record){_this._toggleClass(record.key,record.currentValue)}),changes.forEachRemovedItem(function(record){record.previousValue&&_this._toggleClass(record.key,!1)})},NgClass.prototype._applyIterableChanges=function(changes){var _this=this;changes.forEachAddedItem(function(record){_this._toggleClass(record.item,!0)}),changes.forEachRemovedItem(function(record){_this._toggleClass(record.item,!1)})},NgClass.prototype._applyInitialClasses=function(isCleanup){var _this=this;this._initialClasses.forEach(function(className){return _this._toggleClass(className,!isCleanup)})},NgClass.prototype._applyClasses=function(rawClassVal,isCleanup){var _this=this;lang_1.isPresent(rawClassVal)&&(lang_1.isArray(rawClassVal)?rawClassVal.forEach(function(className){return _this._toggleClass(className,!isCleanup)}):rawClassVal instanceof Set?rawClassVal.forEach(function(className){return _this._toggleClass(className,!isCleanup)}):collection_1.StringMapWrapper.forEach(rawClassVal,function(expVal,className){lang_1.isPresent(expVal)&&_this._toggleClass(className,!isCleanup)}))},NgClass.prototype._toggleClass=function(className,enabled){if(className=className.trim(),className.length>0)if(className.indexOf(" ")>-1)for(var classes=className.split(/\s+/g),i=0,len=classes.length;i<len;i++)this._renderer.setElementClass(this._ngEl.nativeElement,classes[i],enabled);else this._renderer.setElementClass(this._ngEl.nativeElement,className,enabled)},NgClass.decorators=[{type:core_1.Directive,args:[{selector:"[ngClass]"}]}],NgClass.ctorParameters=[{type:core_1.IterableDiffers},{type:core_1.KeyValueDiffers},{type:core_1.ElementRef},{type:core_1.Renderer}],NgClass.propDecorators={initialClasses:[{type:core_1.Input,args:["class"]}],ngClass:[{type:core_1.Input}]},NgClass}();exports.NgClass=NgClass},{"../facade/collection":14,"../facade/lang":18,"@angular/core":154}],6:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),NgForRow=function(){function NgForRow($implicit,index,count){this.$implicit=$implicit,this.index=index,this.count=count}return Object.defineProperty(NgForRow.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(NgForRow.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(NgForRow.prototype,"even",{get:function(){return this.index%2===0},enumerable:!0,configurable:!0}),Object.defineProperty(NgForRow.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),NgForRow}();exports.NgForRow=NgForRow;var NgFor=function(){function NgFor(_viewContainer,_templateRef,_iterableDiffers,_cdr){this._viewContainer=_viewContainer,this._templateRef=_templateRef,this._iterableDiffers=_iterableDiffers,this._cdr=_cdr}return Object.defineProperty(NgFor.prototype,"ngForTemplate",{set:function(value){lang_1.isPresent(value)&&(this._templateRef=value)},enumerable:!0,configurable:!0}),NgFor.prototype.ngOnChanges=function(changes){if("ngForOf"in changes){var value=changes.ngForOf.currentValue;if(lang_1.isBlank(this._differ)&&lang_1.isPresent(value))try{this._differ=this._iterableDiffers.find(value).create(this._cdr,this.ngForTrackBy)}catch(e){throw new exceptions_1.BaseException("Cannot find a differ supporting object '"+value+"' of type '"+lang_1.getTypeNameForDebugging(value)+"'. NgFor only supports binding to Iterables such as Arrays.")}}},NgFor.prototype.ngDoCheck=function(){if(lang_1.isPresent(this._differ)){var changes=this._differ.diff(this.ngForOf);lang_1.isPresent(changes)&&this._applyChanges(changes)}},NgFor.prototype._applyChanges=function(changes){var _this=this,insertTuples=[];changes.forEachOperation(function(item,adjustedPreviousIndex,currentIndex){if(null==item.previousIndex){var view=_this._viewContainer.createEmbeddedView(_this._templateRef,new NgForRow(null,null,null),currentIndex),tuple=new RecordViewTuple(item,view);insertTuples.push(tuple)}else if(null==currentIndex)_this._viewContainer.remove(adjustedPreviousIndex);else{var view=_this._viewContainer.get(adjustedPreviousIndex);_this._viewContainer.move(view,currentIndex);var tuple=new RecordViewTuple(item,view);insertTuples.push(tuple)}});for(var i=0;i<insertTuples.length;i++)this._perViewChange(insertTuples[i].view,insertTuples[i].record);for(var i=0,ilen=this._viewContainer.length;i<ilen;i++){var viewRef=this._viewContainer.get(i);viewRef.context.index=i,viewRef.context.count=ilen}changes.forEachIdentityChange(function(record){var viewRef=_this._viewContainer.get(record.currentIndex);viewRef.context.$implicit=record.item})},NgFor.prototype._perViewChange=function(view,record){view.context.$implicit=record.item},NgFor.decorators=[{type:core_1.Directive,args:[{selector:"[ngFor][ngForOf]"}]}],NgFor.ctorParameters=[{type:core_1.ViewContainerRef},{type:core_1.TemplateRef},{type:core_1.IterableDiffers},{type:core_1.ChangeDetectorRef}],NgFor.propDecorators={ngForOf:[{type:core_1.Input}],ngForTrackBy:[{type:core_1.Input}],ngForTemplate:[{type:core_1.Input}]},NgFor}();exports.NgFor=NgFor;var RecordViewTuple=function(){function RecordViewTuple(record,view){this.record=record,this.view=view}return RecordViewTuple}()},{"../facade/exceptions":16,"../facade/lang":18,"@angular/core":154}],7:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),NgIf=function(){function NgIf(_viewContainer,_templateRef){this._viewContainer=_viewContainer,this._templateRef=_templateRef,this._prevCondition=null}return Object.defineProperty(NgIf.prototype,"ngIf",{set:function(newCondition){!newCondition||!lang_1.isBlank(this._prevCondition)&&this._prevCondition?newCondition||!lang_1.isBlank(this._prevCondition)&&!this._prevCondition||(this._prevCondition=!1,this._viewContainer.clear()):(this._prevCondition=!0,this._viewContainer.createEmbeddedView(this._templateRef))},enumerable:!0,configurable:!0}),NgIf.decorators=[{type:core_1.Directive,args:[{selector:"[ngIf]"}]}],NgIf.ctorParameters=[{type:core_1.ViewContainerRef},{type:core_1.TemplateRef}],NgIf.propDecorators={ngIf:[{type:core_1.Input}]},NgIf}();exports.NgIf=NgIf},{"../facade/lang":18,"@angular/core":154}],8:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),localization_1=require("../localization"),ng_switch_1=require("./ng_switch"),NgPlural=function(){function NgPlural(_localization){this._localization=_localization,this._caseViews={}}return Object.defineProperty(NgPlural.prototype,"ngPlural",{set:function(value){this._switchValue=value,this._updateView()},enumerable:!0,configurable:!0}),NgPlural.prototype.addCase=function(value,switchView){this._caseViews[value]=switchView},NgPlural.prototype._updateView=function(){this._clearViews();var key=localization_1.getPluralCategory(this._switchValue,Object.keys(this._caseViews),this._localization);this._activateView(this._caseViews[key])},NgPlural.prototype._clearViews=function(){lang_1.isPresent(this._activeView)&&this._activeView.destroy()},NgPlural.prototype._activateView=function(view){lang_1.isPresent(view)&&(this._activeView=view,this._activeView.create())},NgPlural.decorators=[{type:core_1.Directive,args:[{selector:"[ngPlural]"}]}],NgPlural.ctorParameters=[{type:localization_1.NgLocalization}],NgPlural.propDecorators={ngPlural:[{type:core_1.Input}]},NgPlural}();exports.NgPlural=NgPlural;var NgPluralCase=function(){function NgPluralCase(value,template,viewContainer,ngPlural){this.value=value,ngPlural.addCase(value,new ng_switch_1.SwitchView(viewContainer,template))}return NgPluralCase.decorators=[{type:core_1.Directive,args:[{selector:"[ngPluralCase]"}]}],NgPluralCase.ctorParameters=[{type:void 0,decorators:[{type:core_1.Attribute,args:["ngPluralCase"]}]},{type:core_1.TemplateRef},{type:core_1.ViewContainerRef},{type:NgPlural,decorators:[{type:core_1.Host}]}],NgPluralCase}();exports.NgPluralCase=NgPluralCase},{"../facade/lang":18,"../localization":44,"./ng_switch":10,"@angular/core":154}],9:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),NgStyle=function(){function NgStyle(_differs,_ngEl,_renderer){this._differs=_differs,this._ngEl=_ngEl,this._renderer=_renderer}return Object.defineProperty(NgStyle.prototype,"ngStyle",{set:function(v){this._ngStyle=v,lang_1.isBlank(this._differ)&&lang_1.isPresent(v)&&(this._differ=this._differs.find(this._ngStyle).create(null))},enumerable:!0,configurable:!0}),NgStyle.prototype.ngDoCheck=function(){if(lang_1.isPresent(this._differ)){var changes=this._differ.diff(this._ngStyle);lang_1.isPresent(changes)&&this._applyChanges(changes)}},NgStyle.prototype._applyChanges=function(changes){var _this=this;changes.forEachRemovedItem(function(record){_this._setStyle(record.key,null)}),changes.forEachAddedItem(function(record){_this._setStyle(record.key,record.currentValue)}),changes.forEachChangedItem(function(record){_this._setStyle(record.key,record.currentValue)})},NgStyle.prototype._setStyle=function(name,val){var nameParts=name.split("."),nameToSet=nameParts[0],valToSet=lang_1.isPresent(val)&&2===nameParts.length?""+val+nameParts[1]:val;this._renderer.setElementStyle(this._ngEl.nativeElement,nameToSet,valToSet)},NgStyle.decorators=[{type:core_1.Directive,args:[{selector:"[ngStyle]"}]}],NgStyle.ctorParameters=[{type:core_1.KeyValueDiffers},{type:core_1.ElementRef},{type:core_1.Renderer}],NgStyle.propDecorators={ngStyle:[{type:core_1.Input}]},NgStyle}();exports.NgStyle=NgStyle},{"../facade/lang":18,"@angular/core":154}],10:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),_CASE_DEFAULT=new Object,_warned=!1,SwitchView=function(){function SwitchView(_viewContainerRef,_templateRef){this._viewContainerRef=_viewContainerRef,this._templateRef=_templateRef}return SwitchView.prototype.create=function(){this._viewContainerRef.createEmbeddedView(this._templateRef)},SwitchView.prototype.destroy=function(){this._viewContainerRef.clear()},SwitchView}();exports.SwitchView=SwitchView;var NgSwitch=function(){function NgSwitch(){this._useDefault=!1,this._valueViews=new Map,this._activeViews=[]}return Object.defineProperty(NgSwitch.prototype,"ngSwitch",{set:function(value){this._emptyAllActiveViews(),this._useDefault=!1;var views=this._valueViews.get(value);lang_1.isBlank(views)&&(this._useDefault=!0,views=lang_1.normalizeBlank(this._valueViews.get(_CASE_DEFAULT))),this._activateViews(views),this._switchValue=value},enumerable:!0,configurable:!0}),NgSwitch.prototype._onCaseValueChanged=function(oldCase,newCase,view){this._deregisterView(oldCase,view),this._registerView(newCase,view),oldCase===this._switchValue?(view.destroy(),collection_1.ListWrapper.remove(this._activeViews,view)):newCase===this._switchValue&&(this._useDefault&&(this._useDefault=!1,this._emptyAllActiveViews()),view.create(),this._activeViews.push(view)),0!==this._activeViews.length||this._useDefault||(this._useDefault=!0,this._activateViews(this._valueViews.get(_CASE_DEFAULT)))},NgSwitch.prototype._emptyAllActiveViews=function(){for(var activeContainers=this._activeViews,i=0;i<activeContainers.length;i++)activeContainers[i].destroy();this._activeViews=[]},NgSwitch.prototype._activateViews=function(views){if(lang_1.isPresent(views)){for(var i=0;i<views.length;i++)views[i].create();this._activeViews=views}},NgSwitch.prototype._registerView=function(value,view){var views=this._valueViews.get(value);lang_1.isBlank(views)&&(views=[],this._valueViews.set(value,views)),views.push(view)},NgSwitch.prototype._deregisterView=function(value,view){if(value!==_CASE_DEFAULT){var views=this._valueViews.get(value);1==views.length?this._valueViews.delete(value):collection_1.ListWrapper.remove(views,view)}},NgSwitch.decorators=[{type:core_1.Directive,args:[{selector:"[ngSwitch]"}]}],NgSwitch.propDecorators={ngSwitch:[{type:core_1.Input}]},NgSwitch}();exports.NgSwitch=NgSwitch;var NgSwitchCase=function(){function NgSwitchCase(viewContainer,templateRef,ngSwitch){this._value=_CASE_DEFAULT,this._switch=ngSwitch,this._view=new SwitchView(viewContainer,templateRef)}return Object.defineProperty(NgSwitchCase.prototype,"ngSwitchCase",{set:function(value){this._switch._onCaseValueChanged(this._value,value,this._view),this._value=value},enumerable:!0,configurable:!0}),Object.defineProperty(NgSwitchCase.prototype,"ngSwitchWhen",{set:function(value){_warned||(_warned=!0,console.warn("*ngSwitchWhen is deprecated and will be removed. Use *ngSwitchCase instead")),this._switch._onCaseValueChanged(this._value,value,this._view),this._value=value},enumerable:!0,configurable:!0}),NgSwitchCase.decorators=[{type:core_1.Directive,args:[{selector:"[ngSwitchCase],[ngSwitchWhen]"}]}],NgSwitchCase.ctorParameters=[{type:core_1.ViewContainerRef},{type:core_1.TemplateRef},{type:NgSwitch,decorators:[{type:core_1.Host}]}],NgSwitchCase.propDecorators={ngSwitchCase:[{type:core_1.Input}],ngSwitchWhen:[{type:core_1.Input}]},NgSwitchCase}();exports.NgSwitchCase=NgSwitchCase;var NgSwitchDefault=function(){function NgSwitchDefault(viewContainer,templateRef,sswitch){sswitch._registerView(_CASE_DEFAULT,new SwitchView(viewContainer,templateRef))}return NgSwitchDefault.decorators=[{type:core_1.Directive,args:[{selector:"[ngSwitchDefault]"}]}],NgSwitchDefault.ctorParameters=[{type:core_1.ViewContainerRef},{type:core_1.TemplateRef},{type:NgSwitch,decorators:[{type:core_1.Host}]}],NgSwitchDefault}();exports.NgSwitchDefault=NgSwitchDefault},{"../facade/collection":14,"../facade/lang":18,"@angular/core":154}],11:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),NgTemplateOutlet=function(){function NgTemplateOutlet(_viewContainerRef){this._viewContainerRef=_viewContainerRef}return Object.defineProperty(NgTemplateOutlet.prototype,"ngOutletContext",{set:function(context){this._context=context},enumerable:!0,configurable:!0}),Object.defineProperty(NgTemplateOutlet.prototype,"ngTemplateOutlet",{set:function(templateRef){this._templateRef=templateRef},enumerable:!0,configurable:!0}),NgTemplateOutlet.prototype.ngOnChanges=function(){this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this._templateRef&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this._templateRef,this._context))},NgTemplateOutlet.decorators=[{type:core_1.Directive,args:[{selector:"[ngTemplateOutlet]"}]}],NgTemplateOutlet.ctorParameters=[{type:core_1.ViewContainerRef}],NgTemplateOutlet.propDecorators={ngOutletContext:[{type:core_1.Input}],ngTemplateOutlet:[{type:core_1.Input}]},NgTemplateOutlet}();exports.NgTemplateOutlet=NgTemplateOutlet},{"@angular/core":154}],12:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("rxjs/Subject"),Observable_1=require("rxjs/Observable");exports.Observable=Observable_1.Observable;var Subject_2=require("rxjs/Subject");exports.Subject=Subject_2.Subject;var EventEmitter=function(_super){function EventEmitter(isAsync){void 0===isAsync&&(isAsync=!1),_super.call(this),this.__isAsync=isAsync}return __extends(EventEmitter,_super),EventEmitter.prototype.emit=function(value){_super.prototype.next.call(this,value)},EventEmitter.prototype.next=function(value){_super.prototype.next.call(this,value)},EventEmitter.prototype.subscribe=function(generatorOrNext,error,complete){var schedulerFn,errorFn=function(err){return null},completeFn=function(){return null};return generatorOrNext&&"object"==typeof generatorOrNext?(schedulerFn=this.__isAsync?function(value){setTimeout(function(){return generatorOrNext.next(value)})}:function(value){generatorOrNext.next(value)},generatorOrNext.error&&(errorFn=this.__isAsync?function(err){setTimeout(function(){return generatorOrNext.error(err)})}:function(err){generatorOrNext.error(err)}),generatorOrNext.complete&&(completeFn=this.__isAsync?function(){setTimeout(function(){return generatorOrNext.complete()})}:function(){generatorOrNext.complete()})):(schedulerFn=this.__isAsync?function(value){setTimeout(function(){return generatorOrNext(value)})}:function(value){generatorOrNext(value)},error&&(errorFn=this.__isAsync?function(err){setTimeout(function(){return error(err)})}:function(err){error(err)}),complete&&(completeFn=this.__isAsync?function(){setTimeout(function(){return complete()})}:function(){complete()})),_super.prototype.subscribe.call(this,schedulerFn,errorFn,completeFn)},EventEmitter}(Subject_1.Subject);exports.EventEmitter=EventEmitter},{"rxjs/Observable":401,"rxjs/Subject":407}],13:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},BaseWrappedException=function(_super){function BaseWrappedException(message){_super.call(this,message)}return __extends(BaseWrappedException,_super),Object.defineProperty(BaseWrappedException.prototype,"wrapperMessage",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"wrapperStack",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"originalException",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"originalStack",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"context",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"message",{get:function(){return""},enumerable:!0,configurable:!0}),BaseWrappedException}(Error);exports.BaseWrappedException=BaseWrappedException},{}],14:[function(require,module,exports){"use strict";function _flattenArray(source,target){if(lang_1.isPresent(source))for(var i=0;i<source.length;i++){var item=source[i];lang_1.isArray(item)?_flattenArray(item,target):target.push(item)}return target}function isListLikeIterable(obj){return!!lang_1.isJsObject(obj)&&(lang_1.isArray(obj)||!(obj instanceof exports.Map)&&lang_1.getSymbolIterator()in obj)}function areIterablesEqual(a,b,comparator){for(var iterator1=a[lang_1.getSymbolIterator()](),iterator2=b[lang_1.getSymbolIterator()]();;){var item1=iterator1.next(),item2=iterator2.next();if(item1.done&&item2.done)return!0;if(item1.done||item2.done)return!1;if(!comparator(item1.value,item2.value))return!1}}function iterateListLike(obj,fn){if(lang_1.isArray(obj))for(var i=0;i<obj.length;i++)fn(obj[i]);else for(var item,iterator=obj[lang_1.getSymbolIterator()]();!(item=iterator.next()).done;)fn(item.value)}var lang_1=require("./lang");exports.Map=lang_1.global.Map,exports.Set=lang_1.global.Set;var createMapFromPairs=function(){try{if(1===new exports.Map([[1,2]]).size)return function(pairs){return new exports.Map(pairs)}}catch(e){}return function(pairs){for(var map=new exports.Map,i=0;i<pairs.length;i++){var pair=pairs[i];map.set(pair[0],pair[1])}return map}}(),createMapFromMap=function(){try{if(new exports.Map(new exports.Map))return function(m){return new exports.Map(m)}}catch(e){}return function(m){var map=new exports.Map;return m.forEach(function(v,k){map.set(k,v)}),map}}(),_clearValues=function(){return(new exports.Map).keys().next?function(m){for(var k,keyIterator=m.keys();!(k=keyIterator.next()).done;)m.set(k.value,null)}:function(m){m.forEach(function(v,k){m.set(k,null)})}}(),_arrayFromMap=function(){try{if((new exports.Map).values().next)return function(m,getValues){return getValues?Array.from(m.values()):Array.from(m.keys())}}catch(e){}return function(m,getValues){var res=ListWrapper.createFixedSize(m.size),i=0;return m.forEach(function(v,k){res[i]=getValues?v:k,i++}),res}}(),MapWrapper=function(){function MapWrapper(){}return MapWrapper.clone=function(m){return createMapFromMap(m)},MapWrapper.createFromStringMap=function(stringMap){var result=new exports.Map;for(var prop in stringMap)result.set(prop,stringMap[prop]);return result},MapWrapper.toStringMap=function(m){var r={};return m.forEach(function(v,k){return r[k]=v}),r},MapWrapper.createFromPairs=function(pairs){return createMapFromPairs(pairs)},MapWrapper.clearValues=function(m){_clearValues(m)},MapWrapper.iterable=function(m){return m},MapWrapper.keys=function(m){return _arrayFromMap(m,!1)},MapWrapper.values=function(m){return _arrayFromMap(m,!0)},MapWrapper}();exports.MapWrapper=MapWrapper;var StringMapWrapper=function(){function StringMapWrapper(){}return StringMapWrapper.create=function(){return{}},StringMapWrapper.contains=function(map,key){return map.hasOwnProperty(key)},StringMapWrapper.get=function(map,key){return map.hasOwnProperty(key)?map[key]:void 0},StringMapWrapper.set=function(map,key,value){map[key]=value},StringMapWrapper.keys=function(map){return Object.keys(map)},StringMapWrapper.values=function(map){return Object.keys(map).map(function(k){return map[k]})},StringMapWrapper.isEmpty=function(map){for(var prop in map)return!1;return!0},StringMapWrapper.delete=function(map,key){delete map[key]},StringMapWrapper.forEach=function(map,callback){for(var _i=0,_a=Object.keys(map);_i<_a.length;_i++){var k=_a[_i];callback(map[k],k)}},StringMapWrapper.merge=function(m1,m2){for(var m={},_i=0,_a=Object.keys(m1);_i<_a.length;_i++){var k=_a[_i];m[k]=m1[k]}for(var _b=0,_c=Object.keys(m2);_b<_c.length;_b++){var k=_c[_b];m[k]=m2[k]}return m},StringMapWrapper.equals=function(m1,m2){var k1=Object.keys(m1),k2=Object.keys(m2);if(k1.length!=k2.length)return!1;for(var key,i=0;i<k1.length;i++)if(key=k1[i],m1[key]!==m2[key])return!1;return!0},StringMapWrapper}();exports.StringMapWrapper=StringMapWrapper;var ListWrapper=function(){function ListWrapper(){}return ListWrapper.createFixedSize=function(size){return new Array(size)},ListWrapper.createGrowableSize=function(size){return new Array(size)},ListWrapper.clone=function(array){return array.slice(0)},ListWrapper.forEachWithIndex=function(array,fn){for(var i=0;i<array.length;i++)fn(array[i],i)},ListWrapper.first=function(array){return array?array[0]:null},ListWrapper.last=function(array){return array&&0!=array.length?array[array.length-1]:null},ListWrapper.indexOf=function(array,value,startIndex){return void 0===startIndex&&(startIndex=0),array.indexOf(value,startIndex)},ListWrapper.contains=function(list,el){return list.indexOf(el)!==-1},ListWrapper.reversed=function(array){var a=ListWrapper.clone(array);return a.reverse()},ListWrapper.concat=function(a,b){return a.concat(b)},ListWrapper.insert=function(list,index,value){list.splice(index,0,value)},ListWrapper.removeAt=function(list,index){var res=list[index];return list.splice(index,1),res},ListWrapper.removeAll=function(list,items){for(var i=0;i<items.length;++i){var index=list.indexOf(items[i]);list.splice(index,1)}},ListWrapper.remove=function(list,el){var index=list.indexOf(el);return index>-1&&(list.splice(index,1),!0)},ListWrapper.clear=function(list){list.length=0},ListWrapper.isEmpty=function(list){return 0==list.length},ListWrapper.fill=function(list,value,start,end){void 0===start&&(start=0),void 0===end&&(end=null),list.fill(value,start,null===end?list.length:end)},ListWrapper.equals=function(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;++i)if(a[i]!==b[i])return!1;return!0},ListWrapper.slice=function(l,from,to){return void 0===from&&(from=0),void 0===to&&(to=null),l.slice(from,null===to?void 0:to)},ListWrapper.splice=function(l,from,length){return l.splice(from,length)},ListWrapper.sort=function(l,compareFn){lang_1.isPresent(compareFn)?l.sort(compareFn):l.sort()},ListWrapper.toString=function(l){return l.toString()},ListWrapper.toJSON=function(l){return JSON.stringify(l)},ListWrapper.maximum=function(list,predicate){if(0==list.length)return null;for(var solution=null,maxValue=-(1/0),index=0;index<list.length;index++){var candidate=list[index];if(!lang_1.isBlank(candidate)){var candidateValue=predicate(candidate);candidateValue>maxValue&&(solution=candidate,maxValue=candidateValue)}}return solution},ListWrapper.flatten=function(list){var target=[];return _flattenArray(list,target),target},ListWrapper.addAll=function(list,source){for(var i=0;i<source.length;i++)list.push(source[i])},ListWrapper}();exports.ListWrapper=ListWrapper,exports.isListLikeIterable=isListLikeIterable,exports.areIterablesEqual=areIterablesEqual,exports.iterateListLike=iterateListLike;var createSetFromList=function(){var test=new exports.Set([1,2,3]);return 3===test.size?function(lst){return new exports.Set(lst)}:function(lst){var res=new exports.Set(lst);if(res.size!==lst.length)for(var i=0;i<lst.length;i++)res.add(lst[i]);return res}}(),SetWrapper=function(){function SetWrapper(){}return SetWrapper.createFromList=function(lst){return createSetFromList(lst)},SetWrapper.has=function(s,key){return s.has(key)},SetWrapper.delete=function(m,k){m.delete(k)},SetWrapper}();exports.SetWrapper=SetWrapper},{"./lang":18}],15:[function(require,module,exports){"use strict";var base_wrapped_exception_1=require("./base_wrapped_exception"),collection_1=require("./collection"),lang_1=require("./lang"),_ArrayLogger=function(){function _ArrayLogger(){this.res=[]}return _ArrayLogger.prototype.log=function(s){this.res.push(s)},_ArrayLogger.prototype.logError=function(s){this.res.push(s)},_ArrayLogger.prototype.logGroup=function(s){this.res.push(s)},_ArrayLogger.prototype.logGroupEnd=function(){},_ArrayLogger}(),ExceptionHandler=function(){function ExceptionHandler(_logger,_rethrowException){void 0===_rethrowException&&(_rethrowException=!0),this._logger=_logger,this._rethrowException=_rethrowException}return ExceptionHandler.exceptionToString=function(exception,stackTrace,reason){void 0===stackTrace&&(stackTrace=null),void 0===reason&&(reason=null);var l=new _ArrayLogger,e=new ExceptionHandler(l,(!1));return e.call(exception,stackTrace,reason),l.res.join("\n")},ExceptionHandler.prototype.call=function(exception,stackTrace,reason){void 0===stackTrace&&(stackTrace=null),void 0===reason&&(reason=null);var originalException=this._findOriginalException(exception),originalStack=this._findOriginalStack(exception),context=this._findContext(exception);if(this._logger.logGroup("EXCEPTION: "+this._extractMessage(exception)),lang_1.isPresent(stackTrace)&&lang_1.isBlank(originalStack)&&(this._logger.logError("STACKTRACE:"),this._logger.logError(this._longStackTrace(stackTrace))),
lang_1.isPresent(reason)&&this._logger.logError("REASON: "+reason),lang_1.isPresent(originalException)&&this._logger.logError("ORIGINAL EXCEPTION: "+this._extractMessage(originalException)),lang_1.isPresent(originalStack)&&(this._logger.logError("ORIGINAL STACKTRACE:"),this._logger.logError(this._longStackTrace(originalStack))),lang_1.isPresent(context)&&(this._logger.logError("ERROR CONTEXT:"),this._logger.logError(context)),this._logger.logGroupEnd(),this._rethrowException)throw exception},ExceptionHandler.prototype._extractMessage=function(exception){return exception instanceof base_wrapped_exception_1.BaseWrappedException?exception.wrapperMessage:exception.toString()},ExceptionHandler.prototype._longStackTrace=function(stackTrace){return collection_1.isListLikeIterable(stackTrace)?stackTrace.join("\n\n-----async gap-----\n"):stackTrace.toString()},ExceptionHandler.prototype._findContext=function(exception){try{return exception instanceof base_wrapped_exception_1.BaseWrappedException?lang_1.isPresent(exception.context)?exception.context:this._findContext(exception.originalException):null}catch(e){return null}},ExceptionHandler.prototype._findOriginalException=function(exception){if(!(exception instanceof base_wrapped_exception_1.BaseWrappedException))return null;for(var e=exception.originalException;e instanceof base_wrapped_exception_1.BaseWrappedException&&lang_1.isPresent(e.originalException);)e=e.originalException;return e},ExceptionHandler.prototype._findOriginalStack=function(exception){if(!(exception instanceof base_wrapped_exception_1.BaseWrappedException))return null;for(var e=exception,stack=exception.originalStack;e instanceof base_wrapped_exception_1.BaseWrappedException&&lang_1.isPresent(e.originalException);)e=e.originalException,e instanceof base_wrapped_exception_1.BaseWrappedException&&lang_1.isPresent(e.originalException)&&(stack=e.originalStack);return stack},ExceptionHandler}();exports.ExceptionHandler=ExceptionHandler},{"./base_wrapped_exception":13,"./collection":14,"./lang":18}],16:[function(require,module,exports){"use strict";function makeTypeError(message){return new TypeError(message)}function unimplemented(){throw new BaseException("unimplemented")}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},base_wrapped_exception_1=require("./base_wrapped_exception"),exception_handler_1=require("./exception_handler"),exception_handler_2=require("./exception_handler");exports.ExceptionHandler=exception_handler_2.ExceptionHandler;var BaseException=function(_super){function BaseException(message){void 0===message&&(message="--"),_super.call(this,message),this.message=message,this.stack=new Error(message).stack}return __extends(BaseException,_super),BaseException.prototype.toString=function(){return this.message},BaseException}(Error);exports.BaseException=BaseException;var WrappedException=function(_super){function WrappedException(_wrapperMessage,_originalException,_originalStack,_context){_super.call(this,_wrapperMessage),this._wrapperMessage=_wrapperMessage,this._originalException=_originalException,this._originalStack=_originalStack,this._context=_context,this._wrapperStack=new Error(_wrapperMessage).stack}return __extends(WrappedException,_super),Object.defineProperty(WrappedException.prototype,"wrapperMessage",{get:function(){return this._wrapperMessage},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"wrapperStack",{get:function(){return this._wrapperStack},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"originalException",{get:function(){return this._originalException},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"originalStack",{get:function(){return this._originalStack},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"message",{get:function(){return exception_handler_1.ExceptionHandler.exceptionToString(this)},enumerable:!0,configurable:!0}),WrappedException.prototype.toString=function(){return this.message},WrappedException}(base_wrapped_exception_1.BaseWrappedException);exports.WrappedException=WrappedException,exports.makeTypeError=makeTypeError,exports.unimplemented=unimplemented},{"./base_wrapped_exception":13,"./exception_handler":15}],17:[function(require,module,exports){"use strict";function digitModifier(inner){return function(date,locale){var result=inner(date,locale);return 1==result.length?"0"+result:result}}function hourClockExtracter(inner){return function(date,locale){var result=inner(date,locale);return result.split(" ")[1]}}function hourExtracter(inner){return function(date,locale){var result=inner(date,locale);return result.split(" ")[0]}}function timeZoneGetter(timezone){var format={hour:"2-digit",hour12:!1,timeZoneName:timezone};return function(date,locale){var result=new Intl.DateTimeFormat(locale,format).format(date);return result?result.substring(3):""}}function hour12Modify(options,value){return options.hour12=value,options}function digitCondition(prop,len){var result={};return result[prop]=2==len?"2-digit":"numeric",result}function nameCondition(prop,len){var result={};return result[prop]=len<4?"short":"long",result}function combine(options){var result={};return options.forEach(function(option){Object.assign(result,option)}),result}function datePartGetterFactory(ret){return function(date,locale){return new Intl.DateTimeFormat(locale,ret).format(date)}}function dateFormatter(format,date,locale){var match,fn,text="",parts=[];if(PATTERN_ALIASES[format])return PATTERN_ALIASES[format](date,locale);if(datePartsFormatterCache.has(format))parts=datePartsFormatterCache.get(format);else{for(DATE_FORMATS_SPLIT.exec(format);format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);datePartsFormatterCache.set(format,parts)}return parts.forEach(function(part){fn=DATE_FORMATS[part],text+=fn?fn(date,locale):"''"===part?"'":part.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}!function(NumberFormatStyle){NumberFormatStyle[NumberFormatStyle.Decimal=0]="Decimal",NumberFormatStyle[NumberFormatStyle.Percent=1]="Percent",NumberFormatStyle[NumberFormatStyle.Currency=2]="Currency"}(exports.NumberFormatStyle||(exports.NumberFormatStyle={}));var NumberFormatStyle=exports.NumberFormatStyle,NumberFormatter=function(){function NumberFormatter(){}return NumberFormatter.format=function(num,locale,style,_a){var _b=void 0===_a?{}:_a,minimumIntegerDigits=_b.minimumIntegerDigits,minimumFractionDigits=_b.minimumFractionDigits,maximumFractionDigits=_b.maximumFractionDigits,currency=_b.currency,_c=_b.currencyAsSymbol,currencyAsSymbol=void 0!==_c&&_c,options={minimumIntegerDigits:minimumIntegerDigits,minimumFractionDigits:minimumFractionDigits,maximumFractionDigits:maximumFractionDigits,style:NumberFormatStyle[style].toLowerCase()};return style==NumberFormatStyle.Currency&&(options.currency=currency,options.currencyDisplay=currencyAsSymbol?"symbol":"code"),new Intl.NumberFormat(locale,options).format(num)},NumberFormatter}();exports.NumberFormatter=NumberFormatter;var DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,PATTERN_ALIASES={yMMMdjms:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",3),digitCondition("day",1),digitCondition("hour",1),digitCondition("minute",1),digitCondition("second",1)])),yMdjm:datePartGetterFactory(combine([digitCondition("year",1),digitCondition("month",1),digitCondition("day",1),digitCondition("hour",1),digitCondition("minute",1)])),yMMMMEEEEd:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",4),nameCondition("weekday",4),digitCondition("day",1)])),yMMMMd:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",4),digitCondition("day",1)])),yMMMd:datePartGetterFactory(combine([digitCondition("year",1),nameCondition("month",3),digitCondition("day",1)])),yMd:datePartGetterFactory(combine([digitCondition("year",1),digitCondition("month",1),digitCondition("day",1)])),jms:datePartGetterFactory(combine([digitCondition("hour",1),digitCondition("second",1),digitCondition("minute",1)])),jm:datePartGetterFactory(combine([digitCondition("hour",1),digitCondition("minute",1)]))},DATE_FORMATS={yyyy:datePartGetterFactory(digitCondition("year",4)),yy:datePartGetterFactory(digitCondition("year",2)),y:datePartGetterFactory(digitCondition("year",1)),MMMM:datePartGetterFactory(nameCondition("month",4)),MMM:datePartGetterFactory(nameCondition("month",3)),MM:datePartGetterFactory(digitCondition("month",2)),M:datePartGetterFactory(digitCondition("month",1)),LLLL:datePartGetterFactory(nameCondition("month",4)),dd:datePartGetterFactory(digitCondition("day",2)),d:datePartGetterFactory(digitCondition("day",1)),HH:digitModifier(hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",2),!1)))),H:hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",1),!1))),hh:digitModifier(hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",2),!0)))),h:hourExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",1),!0))),jj:datePartGetterFactory(digitCondition("hour",2)),j:datePartGetterFactory(digitCondition("hour",1)),mm:digitModifier(datePartGetterFactory(digitCondition("minute",2))),m:datePartGetterFactory(digitCondition("minute",1)),ss:digitModifier(datePartGetterFactory(digitCondition("second",2))),s:datePartGetterFactory(digitCondition("second",1)),sss:datePartGetterFactory(digitCondition("second",3)),EEEE:datePartGetterFactory(nameCondition("weekday",4)),EEE:datePartGetterFactory(nameCondition("weekday",3)),EE:datePartGetterFactory(nameCondition("weekday",2)),E:datePartGetterFactory(nameCondition("weekday",1)),a:hourClockExtracter(datePartGetterFactory(hour12Modify(digitCondition("hour",1),!0))),Z:timeZoneGetter("short"),z:timeZoneGetter("long"),ww:datePartGetterFactory({}),w:datePartGetterFactory({}),G:datePartGetterFactory(nameCondition("era",1)),GG:datePartGetterFactory(nameCondition("era",2)),GGG:datePartGetterFactory(nameCondition("era",3)),GGGG:datePartGetterFactory(nameCondition("era",4))},datePartsFormatterCache=new Map,slice=[].slice,DateFormatter=function(){function DateFormatter(){}return DateFormatter.format=function(date,locale,pattern){return dateFormatter(pattern,date,locale)},DateFormatter}();exports.DateFormatter=DateFormatter},{}],18:[function(require,module,exports){(function(global){"use strict";function scheduleMicroTask(fn){Zone.current.scheduleMicroTask("scheduleMicrotask",fn)}function getTypeNameForDebugging(type){return type.name?type.name:typeof type}function isPresent(obj){return void 0!==obj&&null!==obj}function isBlank(obj){return void 0===obj||null===obj}function isBoolean(obj){return"boolean"==typeof obj}function isNumber(obj){return"number"==typeof obj}function isString(obj){return"string"==typeof obj}function isFunction(obj){return"function"==typeof obj}function isType(obj){return isFunction(obj)}function isStringMap(obj){return"object"==typeof obj&&null!==obj}function isStrictStringMap(obj){return isStringMap(obj)&&Object.getPrototypeOf(obj)===STRING_MAP_PROTO}function isPromise(obj){return isPresent(obj)&&isFunction(obj.then)}function isArray(obj){return Array.isArray(obj)}function isDate(obj){return obj instanceof exports.Date&&!isNaN(obj.valueOf())}function noop(){}function stringify(token){if("string"==typeof token)return token;if(void 0===token||null===token)return""+token;if(token.overriddenName)return token.overriddenName;if(token.name)return token.name;var res=token.toString(),newLineIndex=res.indexOf("\n");return newLineIndex===-1?res:res.substring(0,newLineIndex)}function serializeEnum(val){return val}function deserializeEnum(val,values){return val}function resolveEnumToken(enumValue,val){return enumValue[val]}function looseIdentical(a,b){return a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)}function getMapKey(value){return value}function normalizeBlank(obj){return isBlank(obj)?null:obj}function normalizeBool(obj){return!isBlank(obj)&&obj}function isJsObject(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function print(obj){console.log(obj)}function warn(obj){console.warn(obj)}function setValueOnPath(global,path,value){for(var parts=path.split("."),obj=global;parts.length>1;){var name=parts.shift();obj=obj.hasOwnProperty(name)&&isPresent(obj[name])?obj[name]:obj[name]={}}void 0!==obj&&null!==obj||(obj={}),obj[parts.shift()]=value}function getSymbolIterator(){if(isBlank(_symbolIterator))if(isPresent(globalScope.Symbol)&&isPresent(Symbol.iterator))_symbolIterator=Symbol.iterator;else for(var keys=Object.getOwnPropertyNames(Map.prototype),i=0;i<keys.length;++i){var key=keys[i];"entries"!==key&&"size"!==key&&Map.prototype[key]===Map.prototype.entries&&(_symbolIterator=key)}return _symbolIterator}function evalExpression(sourceUrl,expr,declarations,vars){var fnBody=declarations+"\nreturn "+expr+"\n//# sourceURL="+sourceUrl,fnArgNames=[],fnArgValues=[];for(var argName in vars)fnArgNames.push(argName),fnArgValues.push(vars[argName]);return(new(Function.bind.apply(Function,[void 0].concat(fnArgNames.concat(fnBody))))).apply(void 0,fnArgValues)}function isPrimitive(obj){return!isJsObject(obj)}function hasConstructor(value,type){return value.constructor===type}function escape(s){return _global.encodeURI(s)}function escapeRegExp(s){return s.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}var globalScope,__extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)};globalScope="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global:window,exports.scheduleMicroTask=scheduleMicroTask;var _global=globalScope;exports.global=_global,exports.Type=Function,exports.getTypeNameForDebugging=getTypeNameForDebugging,exports.Math=_global.Math,exports.Date=_global.Date,_global.assert=function(condition){},exports.isPresent=isPresent,exports.isBlank=isBlank,exports.isBoolean=isBoolean,exports.isNumber=isNumber,exports.isString=isString,exports.isFunction=isFunction,exports.isType=isType,exports.isStringMap=isStringMap;var STRING_MAP_PROTO=Object.getPrototypeOf({});exports.isStrictStringMap=isStrictStringMap,exports.isPromise=isPromise,exports.isArray=isArray,exports.isDate=isDate,exports.noop=noop,exports.stringify=stringify,exports.serializeEnum=serializeEnum,exports.deserializeEnum=deserializeEnum,exports.resolveEnumToken=resolveEnumToken;var StringWrapper=function(){function StringWrapper(){}return StringWrapper.fromCharCode=function(code){return String.fromCharCode(code)},StringWrapper.charCodeAt=function(s,index){return s.charCodeAt(index)},StringWrapper.split=function(s,regExp){return s.split(regExp)},StringWrapper.equals=function(s,s2){return s===s2},StringWrapper.stripLeft=function(s,charVal){if(s&&s.length){for(var pos=0,i=0;i<s.length&&s[i]==charVal;i++)pos++;s=s.substring(pos)}return s},StringWrapper.stripRight=function(s,charVal){if(s&&s.length){for(var pos=s.length,i=s.length-1;i>=0&&s[i]==charVal;i--)pos--;s=s.substring(0,pos)}return s},StringWrapper.replace=function(s,from,replace){return s.replace(from,replace)},StringWrapper.replaceAll=function(s,from,replace){return s.replace(from,replace)},StringWrapper.slice=function(s,from,to){return void 0===from&&(from=0),void 0===to&&(to=null),s.slice(from,null===to?void 0:to)},StringWrapper.replaceAllMapped=function(s,from,cb){return s.replace(from,function(){for(var matches=[],_i=0;_i<arguments.length;_i++)matches[_i-0]=arguments[_i];return matches.splice(-2,2),cb(matches)})},StringWrapper.contains=function(s,substr){return s.indexOf(substr)!=-1},StringWrapper.compare=function(a,b){return a<b?-1:a>b?1:0},StringWrapper}();exports.StringWrapper=StringWrapper;var StringJoiner=function(){function StringJoiner(parts){void 0===parts&&(parts=[]),this.parts=parts}return StringJoiner.prototype.add=function(part){this.parts.push(part)},StringJoiner.prototype.toString=function(){return this.parts.join("")},StringJoiner}();exports.StringJoiner=StringJoiner;var NumberParseError=function(_super){function NumberParseError(message){_super.call(this),this.message=message}return __extends(NumberParseError,_super),NumberParseError.prototype.toString=function(){return this.message},NumberParseError}(Error);exports.NumberParseError=NumberParseError;var NumberWrapper=function(){function NumberWrapper(){}return NumberWrapper.toFixed=function(n,fractionDigits){return n.toFixed(fractionDigits)},NumberWrapper.equal=function(a,b){return a===b},NumberWrapper.parseIntAutoRadix=function(text){var result=parseInt(text);if(isNaN(result))throw new NumberParseError("Invalid integer literal when parsing "+text);return result},NumberWrapper.parseInt=function(text,radix){if(10==radix){if(/^(\-|\+)?[0-9]+$/.test(text))return parseInt(text,radix)}else if(16==radix){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(text))return parseInt(text,radix)}else{var result=parseInt(text,radix);if(!isNaN(result))return result}throw new NumberParseError("Invalid integer literal when parsing "+text+" in base "+radix)},NumberWrapper.parseFloat=function(text){return parseFloat(text)},Object.defineProperty(NumberWrapper,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),NumberWrapper.isNumeric=function(value){return!isNaN(value-parseFloat(value))},NumberWrapper.isNaN=function(value){return isNaN(value)},NumberWrapper.isInteger=function(value){return Number.isInteger(value)},NumberWrapper}();exports.NumberWrapper=NumberWrapper,exports.RegExp=_global.RegExp;var FunctionWrapper=function(){function FunctionWrapper(){}return FunctionWrapper.apply=function(fn,posArgs){return fn.apply(null,posArgs)},FunctionWrapper.bind=function(fn,scope){return fn.bind(scope)},FunctionWrapper}();exports.FunctionWrapper=FunctionWrapper,exports.looseIdentical=looseIdentical,exports.getMapKey=getMapKey,exports.normalizeBlank=normalizeBlank,exports.normalizeBool=normalizeBool,exports.isJsObject=isJsObject,exports.print=print,exports.warn=warn;var Json=function(){function Json(){}return Json.parse=function(s){return _global.JSON.parse(s)},Json.stringify=function(data){return _global.JSON.stringify(data,null,2)},Json}();exports.Json=Json;var DateWrapper=function(){function DateWrapper(){}return DateWrapper.create=function(year,month,day,hour,minutes,seconds,milliseconds){return void 0===month&&(month=1),void 0===day&&(day=1),void 0===hour&&(hour=0),void 0===minutes&&(minutes=0),void 0===seconds&&(seconds=0),void 0===milliseconds&&(milliseconds=0),new exports.Date(year,month-1,day,hour,minutes,seconds,milliseconds)},DateWrapper.fromISOString=function(str){return new exports.Date(str)},DateWrapper.fromMillis=function(ms){return new exports.Date(ms)},DateWrapper.toMillis=function(date){return date.getTime()},DateWrapper.now=function(){return new exports.Date},DateWrapper.toJson=function(date){return date.toJSON()},DateWrapper}();exports.DateWrapper=DateWrapper,exports.setValueOnPath=setValueOnPath;var _symbolIterator=null;exports.getSymbolIterator=getSymbolIterator,exports.evalExpression=evalExpression,exports.isPrimitive=isPrimitive,exports.hasConstructor=hasConstructor,exports.escape=escape,exports.escapeRegExp=escapeRegExp}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),directives_1=require("./forms-deprecated/directives"),radio_control_value_accessor_1=require("./forms-deprecated/directives/radio_control_value_accessor"),form_builder_1=require("./forms-deprecated/form_builder"),directives_2=require("./forms-deprecated/directives");exports.FORM_DIRECTIVES=directives_2.FORM_DIRECTIVES,exports.RadioButtonState=directives_2.RadioButtonState;var abstract_control_directive_1=require("./forms-deprecated/directives/abstract_control_directive");exports.AbstractControlDirective=abstract_control_directive_1.AbstractControlDirective;var checkbox_value_accessor_1=require("./forms-deprecated/directives/checkbox_value_accessor");exports.CheckboxControlValueAccessor=checkbox_value_accessor_1.CheckboxControlValueAccessor;var control_container_1=require("./forms-deprecated/directives/control_container");exports.ControlContainer=control_container_1.ControlContainer;var control_value_accessor_1=require("./forms-deprecated/directives/control_value_accessor");exports.NG_VALUE_ACCESSOR=control_value_accessor_1.NG_VALUE_ACCESSOR;var default_value_accessor_1=require("./forms-deprecated/directives/default_value_accessor");exports.DefaultValueAccessor=default_value_accessor_1.DefaultValueAccessor;var ng_control_1=require("./forms-deprecated/directives/ng_control");exports.NgControl=ng_control_1.NgControl;var ng_control_group_1=require("./forms-deprecated/directives/ng_control_group");exports.NgControlGroup=ng_control_group_1.NgControlGroup;var ng_control_name_1=require("./forms-deprecated/directives/ng_control_name");exports.NgControlName=ng_control_name_1.NgControlName;var ng_control_status_1=require("./forms-deprecated/directives/ng_control_status");exports.NgControlStatus=ng_control_status_1.NgControlStatus;var ng_form_1=require("./forms-deprecated/directives/ng_form");exports.NgForm=ng_form_1.NgForm;var ng_form_control_1=require("./forms-deprecated/directives/ng_form_control");exports.NgFormControl=ng_form_control_1.NgFormControl;var ng_form_model_1=require("./forms-deprecated/directives/ng_form_model");exports.NgFormModel=ng_form_model_1.NgFormModel;var ng_model_1=require("./forms-deprecated/directives/ng_model");exports.NgModel=ng_model_1.NgModel;var select_control_value_accessor_1=require("./forms-deprecated/directives/select_control_value_accessor");exports.NgSelectOption=select_control_value_accessor_1.NgSelectOption,exports.SelectControlValueAccessor=select_control_value_accessor_1.SelectControlValueAccessor;var validators_1=require("./forms-deprecated/directives/validators");exports.MaxLengthValidator=validators_1.MaxLengthValidator,exports.MinLengthValidator=validators_1.MinLengthValidator,exports.PatternValidator=validators_1.PatternValidator,exports.RequiredValidator=validators_1.RequiredValidator;var form_builder_2=require("./forms-deprecated/form_builder");exports.FormBuilder=form_builder_2.FormBuilder;var model_1=require("./forms-deprecated/model");exports.AbstractControl=model_1.AbstractControl,exports.Control=model_1.Control,exports.ControlArray=model_1.ControlArray,exports.ControlGroup=model_1.ControlGroup;var validators_2=require("./forms-deprecated/validators");exports.NG_ASYNC_VALIDATORS=validators_2.NG_ASYNC_VALIDATORS,exports.NG_VALIDATORS=validators_2.NG_VALIDATORS,exports.Validators=validators_2.Validators,exports.FORM_PROVIDERS=[form_builder_1.FormBuilder,radio_control_value_accessor_1.RadioControlRegistry];var DeprecatedFormsModule=function(){function DeprecatedFormsModule(){}return DeprecatedFormsModule.decorators=[{type:core_1.NgModule,args:[{providers:[exports.FORM_PROVIDERS],declarations:directives_1.FORM_DIRECTIVES,exports:directives_1.FORM_DIRECTIVES}]}],DeprecatedFormsModule}();exports.DeprecatedFormsModule=DeprecatedFormsModule},{"./forms-deprecated/directives":20,"./forms-deprecated/directives/abstract_control_directive":21,"./forms-deprecated/directives/checkbox_value_accessor":22,"./forms-deprecated/directives/control_container":23,"./forms-deprecated/directives/control_value_accessor":24,"./forms-deprecated/directives/default_value_accessor":25,"./forms-deprecated/directives/ng_control":26,"./forms-deprecated/directives/ng_control_group":27,"./forms-deprecated/directives/ng_control_name":28,"./forms-deprecated/directives/ng_control_status":29,"./forms-deprecated/directives/ng_form":30,"./forms-deprecated/directives/ng_form_control":31,"./forms-deprecated/directives/ng_form_model":32,"./forms-deprecated/directives/ng_model":33,"./forms-deprecated/directives/radio_control_value_accessor":36,"./forms-deprecated/directives/select_control_value_accessor":37,"./forms-deprecated/directives/validators":40,"./forms-deprecated/form_builder":41,"./forms-deprecated/model":42,"./forms-deprecated/validators":43,"@angular/core":154}],20:[function(require,module,exports){"use strict";var checkbox_value_accessor_1=require("./directives/checkbox_value_accessor"),default_value_accessor_1=require("./directives/default_value_accessor"),ng_control_group_1=require("./directives/ng_control_group"),ng_control_name_1=require("./directives/ng_control_name"),ng_control_status_1=require("./directives/ng_control_status"),ng_form_1=require("./directives/ng_form"),ng_form_control_1=require("./directives/ng_form_control"),ng_form_model_1=require("./directives/ng_form_model"),ng_model_1=require("./directives/ng_model"),number_value_accessor_1=require("./directives/number_value_accessor"),radio_control_value_accessor_1=require("./directives/radio_control_value_accessor"),select_control_value_accessor_1=require("./directives/select_control_value_accessor"),select_multiple_control_value_accessor_1=require("./directives/select_multiple_control_value_accessor"),validators_1=require("./directives/validators"),checkbox_value_accessor_2=require("./directives/checkbox_value_accessor");exports.CheckboxControlValueAccessor=checkbox_value_accessor_2.CheckboxControlValueAccessor;var default_value_accessor_2=require("./directives/default_value_accessor");exports.DefaultValueAccessor=default_value_accessor_2.DefaultValueAccessor;var ng_control_1=require("./directives/ng_control");exports.NgControl=ng_control_1.NgControl;var ng_control_group_2=require("./directives/ng_control_group");exports.NgControlGroup=ng_control_group_2.NgControlGroup;var ng_control_name_2=require("./directives/ng_control_name");exports.NgControlName=ng_control_name_2.NgControlName;var ng_control_status_2=require("./directives/ng_control_status");exports.NgControlStatus=ng_control_status_2.NgControlStatus;var ng_form_2=require("./directives/ng_form");exports.NgForm=ng_form_2.NgForm;var ng_form_control_2=require("./directives/ng_form_control");exports.NgFormControl=ng_form_control_2.NgFormControl;var ng_form_model_2=require("./directives/ng_form_model");exports.NgFormModel=ng_form_model_2.NgFormModel;var ng_model_2=require("./directives/ng_model");exports.NgModel=ng_model_2.NgModel;var number_value_accessor_2=require("./directives/number_value_accessor");exports.NumberValueAccessor=number_value_accessor_2.NumberValueAccessor;var radio_control_value_accessor_2=require("./directives/radio_control_value_accessor");exports.RadioButtonState=radio_control_value_accessor_2.RadioButtonState,exports.RadioControlValueAccessor=radio_control_value_accessor_2.RadioControlValueAccessor;var select_control_value_accessor_2=require("./directives/select_control_value_accessor");exports.NgSelectOption=select_control_value_accessor_2.NgSelectOption,exports.SelectControlValueAccessor=select_control_value_accessor_2.SelectControlValueAccessor;var select_multiple_control_value_accessor_2=require("./directives/select_multiple_control_value_accessor");exports.NgSelectMultipleOption=select_multiple_control_value_accessor_2.NgSelectMultipleOption,exports.SelectMultipleControlValueAccessor=select_multiple_control_value_accessor_2.SelectMultipleControlValueAccessor;var validators_2=require("./directives/validators");exports.MaxLengthValidator=validators_2.MaxLengthValidator,exports.MinLengthValidator=validators_2.MinLengthValidator,exports.PatternValidator=validators_2.PatternValidator,exports.RequiredValidator=validators_2.RequiredValidator,exports.FORM_DIRECTIVES=[ng_control_name_1.NgControlName,ng_control_group_1.NgControlGroup,ng_form_control_1.NgFormControl,ng_model_1.NgModel,ng_form_model_1.NgFormModel,ng_form_1.NgForm,select_control_value_accessor_1.NgSelectOption,select_multiple_control_value_accessor_1.NgSelectMultipleOption,default_value_accessor_1.DefaultValueAccessor,number_value_accessor_1.NumberValueAccessor,checkbox_value_accessor_1.CheckboxControlValueAccessor,select_control_value_accessor_1.SelectControlValueAccessor,select_multiple_control_value_accessor_1.SelectMultipleControlValueAccessor,radio_control_value_accessor_1.RadioControlValueAccessor,ng_control_status_1.NgControlStatus,validators_1.RequiredValidator,validators_1.MinLengthValidator,validators_1.MaxLengthValidator,validators_1.PatternValidator]},{"./directives/checkbox_value_accessor":22,"./directives/default_value_accessor":25,"./directives/ng_control":26,"./directives/ng_control_group":27,"./directives/ng_control_name":28,"./directives/ng_control_status":29,"./directives/ng_form":30,"./directives/ng_form_control":31,"./directives/ng_form_model":32,"./directives/ng_model":33,"./directives/number_value_accessor":35,"./directives/radio_control_value_accessor":36,"./directives/select_control_value_accessor":37,"./directives/select_multiple_control_value_accessor":38,"./directives/validators":40}],21:[function(require,module,exports){"use strict";var exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),AbstractControlDirective=function(){function AbstractControlDirective(){}return Object.defineProperty(AbstractControlDirective.prototype,"control",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"value",{get:function(){return lang_1.isPresent(this.control)?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"valid",{get:function(){return lang_1.isPresent(this.control)?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"errors",{get:function(){return lang_1.isPresent(this.control)?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"pristine",{get:function(){return lang_1.isPresent(this.control)?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"dirty",{get:function(){return lang_1.isPresent(this.control)?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"touched",{get:function(){return lang_1.isPresent(this.control)?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"untouched",{get:function(){return lang_1.isPresent(this.control)?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),AbstractControlDirective}();exports.AbstractControlDirective=AbstractControlDirective},{"../../facade/exceptions":16,"../../facade/lang":18}],22:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),control_value_accessor_1=require("./control_value_accessor");exports.CHECKBOX_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return CheckboxControlValueAccessor}),multi:!0};var CheckboxControlValueAccessor=function(){function CheckboxControlValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=function(_){},this.onTouched=function(){}}return CheckboxControlValueAccessor.prototype.writeValue=function(value){
this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",value)},CheckboxControlValueAccessor.prototype.registerOnChange=function(fn){this.onChange=fn},CheckboxControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},CheckboxControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input[type=checkbox][ngControl],input[type=checkbox][ngFormControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[exports.CHECKBOX_VALUE_ACCESSOR]}]}],CheckboxControlValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],CheckboxControlValueAccessor}();exports.CheckboxControlValueAccessor=CheckboxControlValueAccessor},{"./control_value_accessor":24,"@angular/core":154}],23:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},abstract_control_directive_1=require("./abstract_control_directive"),ControlContainer=function(_super){function ControlContainer(){_super.apply(this,arguments)}return __extends(ControlContainer,_super),Object.defineProperty(ControlContainer.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(ControlContainer.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),ControlContainer}(abstract_control_directive_1.AbstractControlDirective);exports.ControlContainer=ControlContainer},{"./abstract_control_directive":21}],24:[function(require,module,exports){"use strict";var core_1=require("@angular/core");exports.NG_VALUE_ACCESSOR=new core_1.OpaqueToken("NgValueAccessor")},{"@angular/core":154}],25:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.DEFAULT_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return DefaultValueAccessor}),multi:!0};var DefaultValueAccessor=function(){function DefaultValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=function(_){},this.onTouched=function(){}}return DefaultValueAccessor.prototype.writeValue=function(value){var normalizedValue=lang_1.isBlank(value)?"":value;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",normalizedValue)},DefaultValueAccessor.prototype.registerOnChange=function(fn){this.onChange=fn},DefaultValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},DefaultValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input:not([type=checkbox])[ngControl],textarea[ngControl],input:not([type=checkbox])[ngFormControl],textarea[ngFormControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[exports.DEFAULT_VALUE_ACCESSOR]}]}],DefaultValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],DefaultValueAccessor}();exports.DefaultValueAccessor=DefaultValueAccessor},{"../../facade/lang":18,"./control_value_accessor":24,"@angular/core":154}],26:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../../facade/exceptions"),abstract_control_directive_1=require("./abstract_control_directive"),NgControl=function(_super){function NgControl(){_super.apply(this,arguments),this.name=null,this.valueAccessor=null}return __extends(NgControl,_super),Object.defineProperty(NgControl.prototype,"validator",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgControl.prototype,"asyncValidator",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),NgControl}(abstract_control_directive_1.AbstractControlDirective);exports.NgControl=NgControl},{"../../facade/exceptions":16,"./abstract_control_directive":21}],27:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),validators_1=require("../validators"),control_container_1=require("./control_container"),shared_1=require("./shared");exports.controlGroupProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return NgControlGroup})};var NgControlGroup=function(_super){function NgControlGroup(parent,_validators,_asyncValidators){_super.call(this),this._validators=_validators,this._asyncValidators=_asyncValidators,this._parent=parent}return __extends(NgControlGroup,_super),NgControlGroup.prototype.ngOnInit=function(){this.formDirective.addControlGroup(this)},NgControlGroup.prototype.ngOnDestroy=function(){this.formDirective.removeControlGroup(this)},Object.defineProperty(NgControlGroup.prototype,"control",{get:function(){return this.formDirective.getControlGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlGroup.prototype,"path",{get:function(){return shared_1.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlGroup.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlGroup.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlGroup.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),NgControlGroup.decorators=[{type:core_1.Directive,args:[{selector:"[ngControlGroup]",providers:[exports.controlGroupProvider],inputs:["name: ngControlGroup"],exportAs:"ngForm"}]}],NgControlGroup.ctorParameters=[{type:control_container_1.ControlContainer,decorators:[{type:core_1.Host},{type:core_1.SkipSelf}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],NgControlGroup}(control_container_1.ControlContainer);exports.NgControlGroup=NgControlGroup},{"../validators":43,"./control_container":23,"./shared":39,"@angular/core":154}],28:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),validators_1=require("../validators"),control_container_1=require("./control_container"),control_value_accessor_1=require("./control_value_accessor"),ng_control_1=require("./ng_control"),shared_1=require("./shared");exports.controlNameBinding={provide:ng_control_1.NgControl,useExisting:core_1.forwardRef(function(){return NgControlName})};var NgControlName=function(_super){function NgControlName(_parent,_validators,_asyncValidators,valueAccessors){_super.call(this),this._parent=_parent,this._validators=_validators,this._asyncValidators=_asyncValidators,this.update=new async_1.EventEmitter,this._added=!1,this.valueAccessor=shared_1.selectValueAccessor(this,valueAccessors)}return __extends(NgControlName,_super),NgControlName.prototype.ngOnChanges=function(changes){this._added||(this.formDirective.addControl(this),this._added=!0),shared_1.isPropertyUpdated(changes,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},NgControlName.prototype.ngOnDestroy=function(){this.formDirective.removeControl(this)},NgControlName.prototype.viewToModelUpdate=function(newValue){this.viewModel=newValue,this.update.emit(newValue)},Object.defineProperty(NgControlName.prototype,"path",{get:function(){return shared_1.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlName.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlName.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlName.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlName.prototype,"control",{get:function(){return this.formDirective.getControl(this)},enumerable:!0,configurable:!0}),NgControlName.decorators=[{type:core_1.Directive,args:[{selector:"[ngControl]",providers:[exports.controlNameBinding],inputs:["name: ngControl","model: ngModel"],outputs:["update: ngModelChange"],exportAs:"ngForm"}]}],NgControlName.ctorParameters=[{type:control_container_1.ControlContainer,decorators:[{type:core_1.Host},{type:core_1.SkipSelf}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[control_value_accessor_1.NG_VALUE_ACCESSOR]}]}],NgControlName}(ng_control_1.NgControl);exports.NgControlName=NgControlName},{"../../facade/async":12,"../validators":43,"./control_container":23,"./control_value_accessor":24,"./ng_control":26,"./shared":39,"@angular/core":154}],29:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../../facade/lang"),ng_control_1=require("./ng_control"),NgControlStatus=function(){function NgControlStatus(cd){this._cd=cd}return Object.defineProperty(NgControlStatus.prototype,"ngClassUntouched",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassTouched",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassPristine",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassDirty",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassValid",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassInvalid",{get:function(){return!!lang_1.isPresent(this._cd.control)&&!this._cd.control.valid},enumerable:!0,configurable:!0}),NgControlStatus.decorators=[{type:core_1.Directive,args:[{selector:"[ngControl],[ngModel],[ngFormControl]",host:{"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid"}}]}],NgControlStatus.ctorParameters=[{type:ng_control_1.NgControl,decorators:[{type:core_1.Self}]}],NgControlStatus}();exports.NgControlStatus=NgControlStatus},{"../../facade/lang":18,"./ng_control":26,"@angular/core":154}],30:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),model_1=require("../model"),validators_1=require("../validators"),control_container_1=require("./control_container"),shared_1=require("./shared");exports.formDirectiveProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return NgForm})};var _formWarningDisplayed=!1,resolvedPromise=Promise.resolve(null),NgForm=function(_super){function NgForm(validators,asyncValidators){_super.call(this),this._submitted=!1,this.ngSubmit=new async_1.EventEmitter,this._displayWarning(),this.form=new model_1.ControlGroup({},null,shared_1.composeValidators(validators),shared_1.composeAsyncValidators(asyncValidators))}return __extends(NgForm,_super),NgForm.prototype._displayWarning=function(){_formWarningDisplayed||(_formWarningDisplayed=!0,console.warn("\n      *It looks like you're using the old forms module. This will be opt-in in the next RC, and\n      will eventually be removed in favor of the new forms module. For more information, see:\n      https://docs.google.com/document/d/1RIezQqE4aEhBRmArIAS1mRIZtWFf6JxN_7B4meyWK0Y/preview\n    "))},Object.defineProperty(NgForm.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),NgForm.prototype.addControl=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path),ctrl=new model_1.Control;shared_1.setUpControl(ctrl,dir),container.registerControl(dir.name,ctrl),ctrl.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.getControl=function(dir){return this.form.find(dir.path)},NgForm.prototype.removeControl=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path);lang_1.isPresent(container)&&container.removeControl(dir.name)})},NgForm.prototype.addControlGroup=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path),group=new model_1.ControlGroup({});shared_1.setUpControlGroup(group,dir),container.registerControl(dir.name,group),group.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.removeControlGroup=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path);lang_1.isPresent(container)&&container.removeControl(dir.name)})},NgForm.prototype.getControlGroup=function(dir){return this.form.find(dir.path)},NgForm.prototype.updateModel=function(dir,value){var _this=this;resolvedPromise.then(function(){var ctrl=_this.form.find(dir.path);ctrl.updateValue(value)})},NgForm.prototype.onSubmit=function(){return this._submitted=!0,this.ngSubmit.emit(null),!1},NgForm.prototype._findContainer=function(path){return path.pop(),collection_1.ListWrapper.isEmpty(path)?this.form:this.form.find(path)},NgForm.decorators=[{type:core_1.Directive,args:[{selector:"form:not([ngNoForm]):not([ngFormModel]),ngForm,[ngForm]",providers:[exports.formDirectiveProvider],host:{"(submit)":"onSubmit()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],NgForm.ctorParameters=[{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],NgForm}(control_container_1.ControlContainer);exports.NgForm=NgForm},{"../../facade/async":12,"../../facade/collection":14,"../../facade/lang":18,"../model":42,"../validators":43,"./control_container":23,"./shared":39,"@angular/core":154}],31:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),collection_1=require("../../facade/collection"),validators_1=require("../validators"),control_value_accessor_1=require("./control_value_accessor"),ng_control_1=require("./ng_control"),shared_1=require("./shared");exports.formControlBinding={provide:ng_control_1.NgControl,useExisting:core_1.forwardRef(function(){return NgFormControl})};var NgFormControl=function(_super){function NgFormControl(_validators,_asyncValidators,valueAccessors){_super.call(this),this._validators=_validators,this._asyncValidators=_asyncValidators,this.update=new async_1.EventEmitter,this.valueAccessor=shared_1.selectValueAccessor(this,valueAccessors)}return __extends(NgFormControl,_super),NgFormControl.prototype.ngOnChanges=function(changes){this._isControlChanged(changes)&&(shared_1.setUpControl(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})),shared_1.isPropertyUpdated(changes,this.viewModel)&&(this.form.updateValue(this.model),this.viewModel=this.model)},Object.defineProperty(NgFormControl.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(NgFormControl.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgFormControl.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgFormControl.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),NgFormControl.prototype.viewToModelUpdate=function(newValue){this.viewModel=newValue,this.update.emit(newValue)},NgFormControl.prototype._isControlChanged=function(changes){return collection_1.StringMapWrapper.contains(changes,"form")},NgFormControl.decorators=[{type:core_1.Directive,args:[{selector:"[ngFormControl]",providers:[exports.formControlBinding],inputs:["form: ngFormControl","model: ngModel"],outputs:["update: ngModelChange"],exportAs:"ngForm"}]}],NgFormControl.ctorParameters=[{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[control_value_accessor_1.NG_VALUE_ACCESSOR]}]}],NgFormControl}(ng_control_1.NgControl);exports.NgFormControl=NgFormControl},{"../../facade/async":12,"../../facade/collection":14,"../validators":43,"./control_value_accessor":24,"./ng_control":26,"./shared":39,"@angular/core":154}],32:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),validators_1=require("../validators"),control_container_1=require("./control_container"),shared_1=require("./shared");exports.formDirectiveProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return NgFormModel})};var _formModelWarningDisplayed=!1,NgFormModel=function(_super){function NgFormModel(_validators,_asyncValidators){_super.call(this),this._validators=_validators,this._asyncValidators=_asyncValidators,this._submitted=!1,this.form=null,this.directives=[],this.ngSubmit=new async_1.EventEmitter,this._displayWarning()}return __extends(NgFormModel,_super),NgFormModel.prototype._displayWarning=function(){_formModelWarningDisplayed||(_formModelWarningDisplayed=!0,console.warn("\n      *It looks like you're using the old forms module. This will be opt-in in the next RC, and\n      will eventually be removed in favor of the new forms module. For more information, see:\n      https://docs.google.com/document/d/1RIezQqE4aEhBRmArIAS1mRIZtWFf6JxN_7B4meyWK0Y/preview\n    "))},NgFormModel.prototype.ngOnChanges=function(changes){if(this._checkFormPresent(),collection_1.StringMapWrapper.contains(changes,"form")){var sync=shared_1.composeValidators(this._validators);this.form.validator=validators_1.Validators.compose([this.form.validator,sync]);var async=shared_1.composeAsyncValidators(this._asyncValidators);this.form.asyncValidator=validators_1.Validators.composeAsync([this.form.asyncValidator,async]),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}this._updateDomValue()},Object.defineProperty(NgFormModel.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(NgFormModel.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(NgFormModel.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(NgFormModel.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),NgFormModel.prototype.addControl=function(dir){var ctrl=this.form.find(dir.path);shared_1.setUpControl(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1}),this.directives.push(dir)},NgFormModel.prototype.getControl=function(dir){return this.form.find(dir.path)},NgFormModel.prototype.removeControl=function(dir){collection_1.ListWrapper.remove(this.directives,dir)},NgFormModel.prototype.addControlGroup=function(dir){var ctrl=this.form.find(dir.path);shared_1.setUpControlGroup(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1})},NgFormModel.prototype.removeControlGroup=function(dir){},NgFormModel.prototype.getControlGroup=function(dir){return this.form.find(dir.path)},NgFormModel.prototype.updateModel=function(dir,value){var ctrl=this.form.find(dir.path);ctrl.updateValue(value)},NgFormModel.prototype.onSubmit=function(){return this._submitted=!0,this.ngSubmit.emit(null),!1},NgFormModel.prototype._updateDomValue=function(){var _this=this;this.directives.forEach(function(dir){var ctrl=_this.form.find(dir.path);dir.valueAccessor.writeValue(ctrl.value)})},NgFormModel.prototype._checkFormPresent=function(){if(lang_1.isBlank(this.form))throw new exceptions_1.BaseException('ngFormModel expects a form. Please pass one in. Example: <form [ngFormModel]="myCoolForm">')},NgFormModel.decorators=[{type:core_1.Directive,args:[{selector:"[ngFormModel]",providers:[exports.formDirectiveProvider],inputs:["form: ngFormModel"],host:{"(submit)":"onSubmit()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],NgFormModel.ctorParameters=[{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],NgFormModel}(control_container_1.ControlContainer);exports.NgFormModel=NgFormModel},{"../../facade/async":12,"../../facade/collection":14,"../../facade/exceptions":16,"../../facade/lang":18,"../validators":43,"./control_container":23,"./shared":39,"@angular/core":154}],33:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),model_1=require("../model"),validators_1=require("../validators"),control_value_accessor_1=require("./control_value_accessor"),ng_control_1=require("./ng_control"),shared_1=require("./shared");exports.formControlBinding={provide:ng_control_1.NgControl,useExisting:core_1.forwardRef(function(){return NgModel})};var NgModel=function(_super){function NgModel(_validators,_asyncValidators,valueAccessors){_super.call(this),this._validators=_validators,this._asyncValidators=_asyncValidators,this._control=new model_1.Control,this._added=!1,this.update=new async_1.EventEmitter,this.valueAccessor=shared_1.selectValueAccessor(this,valueAccessors)}return __extends(NgModel,_super),NgModel.prototype.ngOnChanges=function(changes){this._added||(shared_1.setUpControl(this._control,this),this._control.updateValueAndValidity({emitEvent:!1}),this._added=!0),shared_1.isPropertyUpdated(changes,this.viewModel)&&(this._control.updateValue(this.model),this.viewModel=this.model)},Object.defineProperty(NgModel.prototype,"control",{get:function(){return this._control},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),NgModel.prototype.viewToModelUpdate=function(newValue){this.viewModel=newValue,this.update.emit(newValue)},NgModel.decorators=[{type:core_1.Directive,args:[{selector:"[ngModel]:not([ngControl]):not([ngFormControl])",providers:[exports.formControlBinding],inputs:["model: ngModel"],outputs:["update: ngModelChange"],exportAs:"ngForm"}]}],NgModel.ctorParameters=[{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[control_value_accessor_1.NG_VALUE_ACCESSOR]}]}],NgModel}(ng_control_1.NgControl);exports.NgModel=NgModel},{"../../facade/async":12,"../model":42,"../validators":43,"./control_value_accessor":24,"./ng_control":26,"./shared":39,"@angular/core":154}],34:[function(require,module,exports){"use strict";function normalizeValidator(validator){return void 0!==validator.validate?function(c){return validator.validate(c)}:validator}function normalizeAsyncValidator(validator){return void 0!==validator.validate?function(c){return validator.validate(c)}:validator}exports.normalizeValidator=normalizeValidator,exports.normalizeAsyncValidator=normalizeAsyncValidator},{}],35:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.NUMBER_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return NumberValueAccessor}),multi:!0};var NumberValueAccessor=function(){function NumberValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=function(_){},this.onTouched=function(){}}return NumberValueAccessor.prototype.writeValue=function(value){var normalizedValue=lang_1.isBlank(value)?"":value;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",normalizedValue)},NumberValueAccessor.prototype.registerOnChange=function(fn){this.onChange=function(value){fn(""==value?null:lang_1.NumberWrapper.parseFloat(value))}},NumberValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},NumberValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input[type=number][ngControl],input[type=number][ngFormControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[exports.NUMBER_VALUE_ACCESSOR]}]}],NumberValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],NumberValueAccessor}();exports.NumberValueAccessor=NumberValueAccessor},{"../../facade/lang":18,"./control_value_accessor":24,"@angular/core":154}],36:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),control_value_accessor_1=require("./control_value_accessor"),ng_control_1=require("./ng_control");exports.RADIO_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return RadioControlValueAccessor}),multi:!0};var RadioControlRegistry=function(){function RadioControlRegistry(){this._accessors=[]}return RadioControlRegistry.prototype.add=function(control,accessor){this._accessors.push([control,accessor])},RadioControlRegistry.prototype.remove=function(accessor){for(var indexToRemove=-1,i=0;i<this._accessors.length;++i)this._accessors[i][1]===accessor&&(indexToRemove=i);collection_1.ListWrapper.removeAt(this._accessors,indexToRemove)},RadioControlRegistry.prototype.select=function(accessor){var _this=this;this._accessors.forEach(function(c){_this._isSameGroup(c,accessor)&&c[1]!==accessor&&c[1].fireUncheck()})},RadioControlRegistry.prototype._isSameGroup=function(controlPair,accessor){return controlPair[0].control.root===accessor._control.control.root&&controlPair[1].name===accessor.name},RadioControlRegistry.decorators=[{type:core_1.Injectable}],RadioControlRegistry}();exports.RadioControlRegistry=RadioControlRegistry;var RadioButtonState=function(){function RadioButtonState(checked,value){this.checked=checked,this.value=value}return RadioButtonState}();exports.RadioButtonState=RadioButtonState;var RadioControlValueAccessor=function(){function RadioControlValueAccessor(_renderer,_elementRef,_registry,_injector){this._renderer=_renderer,this._elementRef=_elementRef,this._registry=_registry,this._injector=_injector,this.onChange=function(){},this.onTouched=function(){}}return RadioControlValueAccessor.prototype.ngOnInit=function(){this._control=this._injector.get(ng_control_1.NgControl),this._registry.add(this._control,this)},RadioControlValueAccessor.prototype.ngOnDestroy=function(){this._registry.remove(this)},RadioControlValueAccessor.prototype.writeValue=function(value){this._state=value,lang_1.isPresent(value)&&value.checked&&this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",!0)},RadioControlValueAccessor.prototype.registerOnChange=function(fn){var _this=this;this._fn=fn,this.onChange=function(){fn(new RadioButtonState((!0),_this._state.value)),_this._registry.select(_this)}},RadioControlValueAccessor.prototype.fireUncheck=function(){this._fn(new RadioButtonState((!1),this._state.value))},RadioControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},RadioControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input[type=radio][ngControl],input[type=radio][ngFormControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[exports.RADIO_VALUE_ACCESSOR]}]}],RadioControlValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef},{type:RadioControlRegistry},{type:core_1.Injector}],RadioControlValueAccessor.propDecorators={name:[{type:core_1.Input}]},RadioControlValueAccessor}();exports.RadioControlValueAccessor=RadioControlValueAccessor},{"../../facade/collection":14,"../../facade/lang":18,"./control_value_accessor":24,"./ng_control":26,"@angular/core":154}],37:[function(require,module,exports){"use strict";function _buildValueString(id,value){
return lang_1.isBlank(id)?""+value:(lang_1.isPrimitive(value)||(value="Object"),lang_1.StringWrapper.slice(id+": "+value,0,50))}function _extractId(valueString){return valueString.split(":")[0]}var core_1=require("@angular/core"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.SELECT_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return SelectControlValueAccessor}),multi:!0};var SelectControlValueAccessor=function(){function SelectControlValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this._optionMap=new Map,this._idCounter=0,this.onChange=function(_){},this.onTouched=function(){}}return SelectControlValueAccessor.prototype.writeValue=function(value){this.value=value;var valueString=_buildValueString(this._getOptionId(value),value);this._renderer.setElementProperty(this._elementRef.nativeElement,"value",valueString)},SelectControlValueAccessor.prototype.registerOnChange=function(fn){var _this=this;this.onChange=function(valueString){_this.value=valueString,fn(_this._getOptionValue(valueString))}},SelectControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},SelectControlValueAccessor.prototype._registerOption=function(){return(this._idCounter++).toString()},SelectControlValueAccessor.prototype._getOptionId=function(value){for(var _i=0,_a=collection_1.MapWrapper.keys(this._optionMap);_i<_a.length;_i++){var id=_a[_i];if(lang_1.looseIdentical(this._optionMap.get(id),value))return id}return null},SelectControlValueAccessor.prototype._getOptionValue=function(valueString){var value=this._optionMap.get(_extractId(valueString));return lang_1.isPresent(value)?value:valueString},SelectControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"select:not([multiple])[ngControl],select:not([multiple])[ngFormControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[exports.SELECT_VALUE_ACCESSOR]}]}],SelectControlValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],SelectControlValueAccessor}();exports.SelectControlValueAccessor=SelectControlValueAccessor;var NgSelectOption=function(){function NgSelectOption(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,lang_1.isPresent(this._select)&&(this.id=this._select._registerOption())}return Object.defineProperty(NgSelectOption.prototype,"ngValue",{set:function(value){null!=this._select&&(this._select._optionMap.set(this.id,value),this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectOption.prototype,"value",{set:function(value){this._setElementValue(value),lang_1.isPresent(this._select)&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),NgSelectOption.prototype._setElementValue=function(value){this._renderer.setElementProperty(this._element.nativeElement,"value",value)},NgSelectOption.prototype.ngOnDestroy=function(){lang_1.isPresent(this._select)&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},NgSelectOption.decorators=[{type:core_1.Directive,args:[{selector:"option"}]}],NgSelectOption.ctorParameters=[{type:core_1.ElementRef},{type:core_1.Renderer},{type:SelectControlValueAccessor,decorators:[{type:core_1.Optional},{type:core_1.Host}]}],NgSelectOption.propDecorators={ngValue:[{type:core_1.Input,args:["ngValue"]}],value:[{type:core_1.Input,args:["value"]}]},NgSelectOption}();exports.NgSelectOption=NgSelectOption},{"../../facade/collection":14,"../../facade/lang":18,"./control_value_accessor":24,"@angular/core":154}],38:[function(require,module,exports){"use strict";function _buildValueString(id,value){return lang_1.isBlank(id)?""+value:(lang_1.isString(value)&&(value="'"+value+"'"),lang_1.isPrimitive(value)||(value="Object"),lang_1.StringWrapper.slice(id+": "+value,0,50))}function _extractId(valueString){return valueString.split(":")[0]}var core_1=require("@angular/core"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.SELECT_MULTIPLE_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return SelectMultipleControlValueAccessor}),multi:!0};var SelectMultipleControlValueAccessor=(function(){function HTMLCollection(){}return HTMLCollection}(),function(){function SelectMultipleControlValueAccessor(){this._optionMap=new Map,this._idCounter=0,this.onChange=function(_){},this.onTouched=function(){}}return SelectMultipleControlValueAccessor.prototype.writeValue=function(value){var _this=this;if(this.value=value,null!=value){var values=value,ids=values.map(function(v){return _this._getOptionId(v)});this._optionMap.forEach(function(opt,o){opt._setSelected(ids.indexOf(o.toString())>-1)})}},SelectMultipleControlValueAccessor.prototype.registerOnChange=function(fn){var _this=this;this.onChange=function(_){var selected=[];if(_.hasOwnProperty("selectedOptions"))for(var options=_.selectedOptions,i=0;i<options.length;i++){var opt=options.item(i),val=_this._getOptionValue(opt.value);selected.push(val)}else for(var options=_.options,i=0;i<options.length;i++){var opt=options.item(i);if(opt.selected){var val=_this._getOptionValue(opt.value);selected.push(val)}}fn(selected)}},SelectMultipleControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},SelectMultipleControlValueAccessor.prototype._registerOption=function(value){var id=(this._idCounter++).toString();return this._optionMap.set(id,value),id},SelectMultipleControlValueAccessor.prototype._getOptionId=function(value){for(var _i=0,_a=collection_1.MapWrapper.keys(this._optionMap);_i<_a.length;_i++){var id=_a[_i];if(lang_1.looseIdentical(this._optionMap.get(id)._value,value))return id}return null},SelectMultipleControlValueAccessor.prototype._getOptionValue=function(valueString){var opt=this._optionMap.get(_extractId(valueString));return lang_1.isPresent(opt)?opt._value:valueString},SelectMultipleControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"select[multiple][ngControl],select[multiple][ngFormControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[exports.SELECT_MULTIPLE_VALUE_ACCESSOR]}]}],SelectMultipleControlValueAccessor.ctorParameters=[],SelectMultipleControlValueAccessor}());exports.SelectMultipleControlValueAccessor=SelectMultipleControlValueAccessor;var NgSelectMultipleOption=function(){function NgSelectMultipleOption(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,lang_1.isPresent(this._select)&&(this.id=this._select._registerOption(this))}return Object.defineProperty(NgSelectMultipleOption.prototype,"ngValue",{set:function(value){null!=this._select&&(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectMultipleOption.prototype,"value",{set:function(value){lang_1.isPresent(this._select)?(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value)):this._setElementValue(value)},enumerable:!0,configurable:!0}),NgSelectMultipleOption.prototype._setElementValue=function(value){this._renderer.setElementProperty(this._element.nativeElement,"value",value)},NgSelectMultipleOption.prototype._setSelected=function(selected){this._renderer.setElementProperty(this._element.nativeElement,"selected",selected)},NgSelectMultipleOption.prototype.ngOnDestroy=function(){lang_1.isPresent(this._select)&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},NgSelectMultipleOption.decorators=[{type:core_1.Directive,args:[{selector:"option"}]}],NgSelectMultipleOption.ctorParameters=[{type:core_1.ElementRef},{type:core_1.Renderer},{type:SelectMultipleControlValueAccessor,decorators:[{type:core_1.Optional},{type:core_1.Host}]}],NgSelectMultipleOption.propDecorators={ngValue:[{type:core_1.Input,args:["ngValue"]}],value:[{type:core_1.Input,args:["value"]}]},NgSelectMultipleOption}();exports.NgSelectMultipleOption=NgSelectMultipleOption,exports.SELECT_DIRECTIVES=[SelectMultipleControlValueAccessor,NgSelectMultipleOption]},{"../../facade/collection":14,"../../facade/lang":18,"./control_value_accessor":24,"@angular/core":154}],39:[function(require,module,exports){"use strict";function controlPath(name,parent){var p=collection_1.ListWrapper.clone(parent.path);return p.push(name),p}function setUpControl(control,dir){lang_1.isBlank(control)&&_throwError(dir,"Cannot find control with"),lang_1.isBlank(dir.valueAccessor)&&_throwError(dir,"No value accessor for form control with"),control.validator=validators_1.Validators.compose([control.validator,dir.validator]),control.asyncValidator=validators_1.Validators.composeAsync([control.asyncValidator,dir.asyncValidator]),dir.valueAccessor.writeValue(control.value),dir.valueAccessor.registerOnChange(function(newValue){dir.viewToModelUpdate(newValue),control.updateValue(newValue,{emitModelToViewChange:!1}),control.markAsDirty()}),control.registerOnChange(function(newValue){return dir.valueAccessor.writeValue(newValue)}),dir.valueAccessor.registerOnTouched(function(){return control.markAsTouched()})}function setUpControlGroup(control,dir){lang_1.isBlank(control)&&_throwError(dir,"Cannot find control with"),control.validator=validators_1.Validators.compose([control.validator,dir.validator]),control.asyncValidator=validators_1.Validators.composeAsync([control.asyncValidator,dir.asyncValidator])}function _throwError(dir,message){var messageEnd;throw messageEnd=dir.path.length>1?"path: '"+dir.path.join(" -> ")+"'":dir.path[0]?"name: '"+dir.path+"'":"unspecified name",new exceptions_1.BaseException(message+" "+messageEnd)}function composeValidators(validators){return lang_1.isPresent(validators)?validators_1.Validators.compose(validators.map(normalize_validator_1.normalizeValidator)):null}function composeAsyncValidators(validators){return lang_1.isPresent(validators)?validators_1.Validators.composeAsync(validators.map(normalize_validator_1.normalizeAsyncValidator)):null}function isPropertyUpdated(changes,viewModel){if(!collection_1.StringMapWrapper.contains(changes,"model"))return!1;var change=changes.model;return!!change.isFirstChange()||!lang_1.looseIdentical(viewModel,change.currentValue)}function selectValueAccessor(dir,valueAccessors){if(lang_1.isBlank(valueAccessors))return null;var defaultAccessor,builtinAccessor,customAccessor;return valueAccessors.forEach(function(v){lang_1.hasConstructor(v,default_value_accessor_1.DefaultValueAccessor)?defaultAccessor=v:lang_1.hasConstructor(v,checkbox_value_accessor_1.CheckboxControlValueAccessor)||lang_1.hasConstructor(v,number_value_accessor_1.NumberValueAccessor)||lang_1.hasConstructor(v,select_control_value_accessor_1.SelectControlValueAccessor)||lang_1.hasConstructor(v,select_multiple_control_value_accessor_1.SelectMultipleControlValueAccessor)||lang_1.hasConstructor(v,radio_control_value_accessor_1.RadioControlValueAccessor)?(lang_1.isPresent(builtinAccessor)&&_throwError(dir,"More than one built-in value accessor matches form control with"),builtinAccessor=v):(lang_1.isPresent(customAccessor)&&_throwError(dir,"More than one custom value accessor matches form control with"),customAccessor=v)}),lang_1.isPresent(customAccessor)?customAccessor:lang_1.isPresent(builtinAccessor)?builtinAccessor:lang_1.isPresent(defaultAccessor)?defaultAccessor:(_throwError(dir,"No valid value accessor for form control with"),null)}var collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),validators_1=require("../validators"),checkbox_value_accessor_1=require("./checkbox_value_accessor"),default_value_accessor_1=require("./default_value_accessor"),normalize_validator_1=require("./normalize_validator"),number_value_accessor_1=require("./number_value_accessor"),radio_control_value_accessor_1=require("./radio_control_value_accessor"),select_control_value_accessor_1=require("./select_control_value_accessor"),select_multiple_control_value_accessor_1=require("./select_multiple_control_value_accessor");exports.controlPath=controlPath,exports.setUpControl=setUpControl,exports.setUpControlGroup=setUpControlGroup,exports.composeValidators=composeValidators,exports.composeAsyncValidators=composeAsyncValidators,exports.isPropertyUpdated=isPropertyUpdated,exports.selectValueAccessor=selectValueAccessor},{"../../facade/collection":14,"../../facade/exceptions":16,"../../facade/lang":18,"../validators":43,"./checkbox_value_accessor":22,"./default_value_accessor":25,"./normalize_validator":34,"./number_value_accessor":35,"./radio_control_value_accessor":36,"./select_control_value_accessor":37,"./select_multiple_control_value_accessor":38}],40:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../../facade/lang"),validators_1=require("../validators");exports.REQUIRED=validators_1.Validators.required,exports.REQUIRED_VALIDATOR={provide:validators_1.NG_VALIDATORS,useValue:exports.REQUIRED,multi:!0};var RequiredValidator=function(){function RequiredValidator(){}return RequiredValidator.decorators=[{type:core_1.Directive,args:[{selector:"[required][ngControl],[required][ngFormControl],[required][ngModel]",providers:[exports.REQUIRED_VALIDATOR]}]}],RequiredValidator}();exports.RequiredValidator=RequiredValidator,exports.MIN_LENGTH_VALIDATOR={provide:validators_1.NG_VALIDATORS,useExisting:core_1.forwardRef(function(){return MinLengthValidator}),multi:!0};var MinLengthValidator=function(){function MinLengthValidator(minLength){this._validator=validators_1.Validators.minLength(lang_1.NumberWrapper.parseInt(minLength,10))}return MinLengthValidator.prototype.validate=function(c){return this._validator(c)},MinLengthValidator.decorators=[{type:core_1.Directive,args:[{selector:"[minlength][ngControl],[minlength][ngFormControl],[minlength][ngModel]",providers:[exports.MIN_LENGTH_VALIDATOR]}]}],MinLengthValidator.ctorParameters=[{type:void 0,decorators:[{type:core_1.Attribute,args:["minlength"]}]}],MinLengthValidator}();exports.MinLengthValidator=MinLengthValidator,exports.MAX_LENGTH_VALIDATOR={provide:validators_1.NG_VALIDATORS,useExisting:core_1.forwardRef(function(){return MaxLengthValidator}),multi:!0};var MaxLengthValidator=function(){function MaxLengthValidator(maxLength){this._validator=validators_1.Validators.maxLength(lang_1.NumberWrapper.parseInt(maxLength,10))}return MaxLengthValidator.prototype.validate=function(c){return this._validator(c)},MaxLengthValidator.decorators=[{type:core_1.Directive,args:[{selector:"[maxlength][ngControl],[maxlength][ngFormControl],[maxlength][ngModel]",providers:[exports.MAX_LENGTH_VALIDATOR]}]}],MaxLengthValidator.ctorParameters=[{type:void 0,decorators:[{type:core_1.Attribute,args:["maxlength"]}]}],MaxLengthValidator}();exports.MaxLengthValidator=MaxLengthValidator,exports.PATTERN_VALIDATOR={provide:validators_1.NG_VALIDATORS,useExisting:core_1.forwardRef(function(){return PatternValidator}),multi:!0};var PatternValidator=function(){function PatternValidator(pattern){this._validator=validators_1.Validators.pattern(pattern)}return PatternValidator.prototype.validate=function(c){return this._validator(c)},PatternValidator.decorators=[{type:core_1.Directive,args:[{selector:"[pattern][ngControl],[pattern][ngFormControl],[pattern][ngModel]",providers:[exports.PATTERN_VALIDATOR]}]}],PatternValidator.ctorParameters=[{type:void 0,decorators:[{type:core_1.Attribute,args:["pattern"]}]}],PatternValidator}();exports.PatternValidator=PatternValidator},{"../../facade/lang":18,"../validators":43,"@angular/core":154}],41:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),model_1=require("./model"),FormBuilder=function(){function FormBuilder(){}return FormBuilder.prototype.group=function(controlsConfig,extra){void 0===extra&&(extra=null);var controls=this._reduceControls(controlsConfig),optionals=lang_1.isPresent(extra)?collection_1.StringMapWrapper.get(extra,"optionals"):null,validator=lang_1.isPresent(extra)?collection_1.StringMapWrapper.get(extra,"validator"):null,asyncValidator=lang_1.isPresent(extra)?collection_1.StringMapWrapper.get(extra,"asyncValidator"):null;return new model_1.ControlGroup(controls,optionals,validator,asyncValidator)},FormBuilder.prototype.control=function(value,validator,asyncValidator){return void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),new model_1.Control(value,validator,asyncValidator)},FormBuilder.prototype.array=function(controlsConfig,validator,asyncValidator){var _this=this;void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null);var controls=controlsConfig.map(function(c){return _this._createControl(c)});return new model_1.ControlArray(controls,validator,asyncValidator)},FormBuilder.prototype._reduceControls=function(controlsConfig){var _this=this,controls={};return collection_1.StringMapWrapper.forEach(controlsConfig,function(controlConfig,controlName){controls[controlName]=_this._createControl(controlConfig)}),controls},FormBuilder.prototype._createControl=function(controlConfig){if(controlConfig instanceof model_1.Control||controlConfig instanceof model_1.ControlGroup||controlConfig instanceof model_1.ControlArray)return controlConfig;if(lang_1.isArray(controlConfig)){var value=controlConfig[0],validator=controlConfig.length>1?controlConfig[1]:null,asyncValidator=controlConfig.length>2?controlConfig[2]:null;return this.control(value,validator,asyncValidator)}return this.control(controlConfig)},FormBuilder.decorators=[{type:core_1.Injectable}],FormBuilder}();exports.FormBuilder=FormBuilder},{"../facade/collection":14,"../facade/lang":18,"./model":42,"@angular/core":154}],42:[function(require,module,exports){"use strict";function isControl(control){return control instanceof AbstractControl}function _find(control,path){return lang_1.isBlank(path)?null:(path instanceof Array||(path=path.split("/")),path instanceof Array&&collection_1.ListWrapper.isEmpty(path)?null:path.reduce(function(v,name){if(v instanceof ControlGroup)return lang_1.isPresent(v.controls[name])?v.controls[name]:null;if(v instanceof ControlArray){var index=name;return lang_1.isPresent(v.at(index))?v.at(index):null}return null},control))}function toObservable(r){return lang_1.isPromise(r)?PromiseObservable_1.PromiseObservable.create(r):r}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},PromiseObservable_1=require("rxjs/observable/PromiseObservable"),async_1=require("../facade/async"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang");exports.VALID="VALID",exports.INVALID="INVALID",exports.PENDING="PENDING",exports.isControl=isControl;var AbstractControl=function(){function AbstractControl(validator,asyncValidator){this.validator=validator,this.asyncValidator=asyncValidator,this._pristine=!0,this._touched=!1}return Object.defineProperty(AbstractControl.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valid",{get:function(){return this._status===exports.VALID},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pristine",{get:function(){return this._pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"touched",{get:function(){return this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"untouched",{get:function(){return!this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valueChanges",{get:function(){return this._valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"statusChanges",{get:function(){return this._statusChanges},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pending",{get:function(){return this._status==exports.PENDING},enumerable:!0,configurable:!0}),AbstractControl.prototype.markAsTouched=function(){this._touched=!0},AbstractControl.prototype.markAsDirty=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;onlySelf=lang_1.normalizeBool(onlySelf),this._pristine=!1,lang_1.isPresent(this._parent)&&!onlySelf&&this._parent.markAsDirty({onlySelf:onlySelf})},AbstractControl.prototype.markAsPending=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;onlySelf=lang_1.normalizeBool(onlySelf),this._status=exports.PENDING,lang_1.isPresent(this._parent)&&!onlySelf&&this._parent.markAsPending({onlySelf:onlySelf})},AbstractControl.prototype.setParent=function(parent){this._parent=parent},AbstractControl.prototype.updateValueAndValidity=function(_a){var _b=void 0===_a?{}:_a,onlySelf=_b.onlySelf,emitEvent=_b.emitEvent;onlySelf=lang_1.normalizeBool(onlySelf),emitEvent=!lang_1.isPresent(emitEvent)||emitEvent,this._updateValue(),this._errors=this._runValidator(),this._status=this._calculateStatus(),this._status!=exports.VALID&&this._status!=exports.PENDING||this._runAsyncValidator(emitEvent),emitEvent&&(this._valueChanges.emit(this._value),this._statusChanges.emit(this._status)),lang_1.isPresent(this._parent)&&!onlySelf&&this._parent.updateValueAndValidity({onlySelf:onlySelf,emitEvent:emitEvent})},AbstractControl.prototype._runValidator=function(){return lang_1.isPresent(this.validator)?this.validator(this):null},AbstractControl.prototype._runAsyncValidator=function(emitEvent){var _this=this;if(lang_1.isPresent(this.asyncValidator)){this._status=exports.PENDING,this._cancelExistingSubscription();var obs=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=obs.subscribe({next:function(res){return _this.setErrors(res,{emitEvent:emitEvent})}})}},AbstractControl.prototype._cancelExistingSubscription=function(){lang_1.isPresent(this._asyncValidationSubscription)&&this._asyncValidationSubscription.unsubscribe()},AbstractControl.prototype.setErrors=function(errors,_a){var emitEvent=(void 0===_a?{}:_a).emitEvent;emitEvent=!lang_1.isPresent(emitEvent)||emitEvent,this._errors=errors,this._status=this._calculateStatus(),emitEvent&&this._statusChanges.emit(this._status),lang_1.isPresent(this._parent)&&this._parent._updateControlsErrors()},AbstractControl.prototype.find=function(path){return _find(this,path)},AbstractControl.prototype.getError=function(errorCode,path){void 0===path&&(path=null);var control=lang_1.isPresent(path)&&!collection_1.ListWrapper.isEmpty(path)?this.find(path):this;return lang_1.isPresent(control)&&lang_1.isPresent(control._errors)?collection_1.StringMapWrapper.get(control._errors,errorCode):null},AbstractControl.prototype.hasError=function(errorCode,path){return void 0===path&&(path=null),lang_1.isPresent(this.getError(errorCode,path))},Object.defineProperty(AbstractControl.prototype,"root",{get:function(){for(var x=this;lang_1.isPresent(x._parent);)x=x._parent;return x},enumerable:!0,configurable:!0}),AbstractControl.prototype._updateControlsErrors=function(){this._status=this._calculateStatus(),lang_1.isPresent(this._parent)&&this._parent._updateControlsErrors()},AbstractControl.prototype._initObservables=function(){this._valueChanges=new async_1.EventEmitter,this._statusChanges=new async_1.EventEmitter},AbstractControl.prototype._calculateStatus=function(){return lang_1.isPresent(this._errors)?exports.INVALID:this._anyControlsHaveStatus(exports.PENDING)?exports.PENDING:this._anyControlsHaveStatus(exports.INVALID)?exports.INVALID:exports.VALID},AbstractControl}();exports.AbstractControl=AbstractControl;var Control=function(_super){function Control(value,validator,asyncValidator){void 0===value&&(value=null),void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),_super.call(this,validator,asyncValidator),this._value=value,this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}return __extends(Control,_super),Control.prototype.updateValue=function(value,_a){var _b=void 0===_a?{}:_a,onlySelf=_b.onlySelf,emitEvent=_b.emitEvent,emitModelToViewChange=_b.emitModelToViewChange;emitModelToViewChange=!lang_1.isPresent(emitModelToViewChange)||emitModelToViewChange,this._value=value,lang_1.isPresent(this._onChange)&&emitModelToViewChange&&this._onChange(this._value),this.updateValueAndValidity({onlySelf:onlySelf,emitEvent:emitEvent})},Control.prototype._updateValue=function(){},Control.prototype._anyControlsHaveStatus=function(status){return!1},Control.prototype.registerOnChange=function(fn){this._onChange=fn},Control}(AbstractControl);exports.Control=Control;var ControlGroup=function(_super){function ControlGroup(controls,optionals,validator,asyncValidator){void 0===optionals&&(optionals=null),void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),_super.call(this,validator,asyncValidator),this.controls=controls,this._optionals=lang_1.isPresent(optionals)?optionals:{},this._initObservables(),this._setParentForControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return __extends(ControlGroup,_super),ControlGroup.prototype.registerControl=function(name,control){this.controls[name]=control,control.setParent(this)},ControlGroup.prototype.addControl=function(name,control){this.registerControl(name,control),this.updateValueAndValidity()},ControlGroup.prototype.removeControl=function(name){collection_1.StringMapWrapper.delete(this.controls,name),this.updateValueAndValidity()},ControlGroup.prototype.include=function(controlName){collection_1.StringMapWrapper.set(this._optionals,controlName,!0),this.updateValueAndValidity()},ControlGroup.prototype.exclude=function(controlName){collection_1.StringMapWrapper.set(this._optionals,controlName,!1),this.updateValueAndValidity()},ControlGroup.prototype.contains=function(controlName){var c=collection_1.StringMapWrapper.contains(this.controls,controlName);return c&&this._included(controlName)},ControlGroup.prototype._setParentForControls=function(){var _this=this;collection_1.StringMapWrapper.forEach(this.controls,function(control,name){control.setParent(_this)})},ControlGroup.prototype._updateValue=function(){this._value=this._reduceValue()},ControlGroup.prototype._anyControlsHaveStatus=function(status){var _this=this,res=!1;return collection_1.StringMapWrapper.forEach(this.controls,function(control,name){res=res||_this.contains(name)&&control.status==status}),res},ControlGroup.prototype._reduceValue=function(){return this._reduceChildren({},function(acc,control,name){return acc[name]=control.value,acc})},ControlGroup.prototype._reduceChildren=function(initValue,fn){var _this=this,res=initValue;return collection_1.StringMapWrapper.forEach(this.controls,function(control,name){_this._included(name)&&(res=fn(res,control,name))}),res},ControlGroup.prototype._included=function(controlName){var isOptional=collection_1.StringMapWrapper.contains(this._optionals,controlName);return!isOptional||collection_1.StringMapWrapper.get(this._optionals,controlName)},ControlGroup}(AbstractControl);exports.ControlGroup=ControlGroup;var ControlArray=function(_super){function ControlArray(controls,validator,asyncValidator){void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),_super.call(this,validator,asyncValidator),this.controls=controls,this._initObservables(),this._setParentForControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return __extends(ControlArray,_super),ControlArray.prototype.at=function(index){return this.controls[index]},ControlArray.prototype.push=function(control){this.controls.push(control),control.setParent(this),this.updateValueAndValidity()},ControlArray.prototype.insert=function(index,control){collection_1.ListWrapper.insert(this.controls,index,control),control.setParent(this),this.updateValueAndValidity()},ControlArray.prototype.removeAt=function(index){collection_1.ListWrapper.removeAt(this.controls,index),this.updateValueAndValidity()},Object.defineProperty(ControlArray.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),ControlArray.prototype._updateValue=function(){this._value=this.controls.map(function(control){return control.value})},ControlArray.prototype._anyControlsHaveStatus=function(status){return this.controls.some(function(c){return c.status==status})},ControlArray.prototype._setParentForControls=function(){var _this=this;this.controls.forEach(function(control){control.setParent(_this)})},ControlArray}(AbstractControl);exports.ControlArray=ControlArray},{"../facade/async":12,"../facade/collection":14,"../facade/lang":18,"rxjs/observable/PromiseObservable":557}],43:[function(require,module,exports){"use strict";function _convertToPromise(obj){return lang_1.isPromise(obj)?obj:toPromise_1.toPromise.call(obj)}function _executeValidators(control,validators){return validators.map(function(v){return v(control)})}function _executeAsyncValidators(control,validators){return validators.map(function(v){return v(control)})}function _mergeErrors(arrayOfErrors){var res=arrayOfErrors.reduce(function(res,errors){return lang_1.isPresent(errors)?collection_1.StringMapWrapper.merge(res,errors):res},{});return collection_1.StringMapWrapper.isEmpty(res)?null:res}var core_1=require("@angular/core"),toPromise_1=require("rxjs/operator/toPromise"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang");exports.NG_VALIDATORS=new core_1.OpaqueToken("NgValidators"),exports.NG_ASYNC_VALIDATORS=new core_1.OpaqueToken("NgAsyncValidators");var Validators=function(){function Validators(){}return Validators.required=function(control){return lang_1.isBlank(control.value)||lang_1.isString(control.value)&&""==control.value?{required:!0}:null},Validators.minLength=function(minLength){return function(control){if(lang_1.isPresent(Validators.required(control)))return null;var v=control.value;return v.length<minLength?{minlength:{requiredLength:minLength,actualLength:v.length}}:null}},Validators.maxLength=function(maxLength){return function(control){if(lang_1.isPresent(Validators.required(control)))return null;var v=control.value;return v.length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:v.length}}:null}},Validators.pattern=function(pattern){return function(control){if(lang_1.isPresent(Validators.required(control)))return null;var regex=new RegExp("^"+pattern+"$"),v=control.value;return regex.test(v)?null:{pattern:{requiredPattern:"^"+pattern+"$",actualValue:v}}}},Validators.nullValidator=function(c){return null},Validators.compose=function(validators){if(lang_1.isBlank(validators))return null;var presentValidators=validators.filter(lang_1.isPresent);return 0==presentValidators.length?null:function(control){return _mergeErrors(_executeValidators(control,presentValidators))}},Validators.composeAsync=function(validators){if(lang_1.isBlank(validators))return null;var presentValidators=validators.filter(lang_1.isPresent);
return 0==presentValidators.length?null:function(control){var promises=_executeAsyncValidators(control,presentValidators).map(_convertToPromise);return Promise.all(promises).then(_mergeErrors)}},Validators}();exports.Validators=Validators},{"../facade/collection":14,"../facade/lang":18,"@angular/core":154,"rxjs/operator/toPromise":680}],44:[function(require,module,exports){"use strict";function getPluralCategory(value,cases,ngLocalization){var nbCase="="+value;return cases.indexOf(nbCase)>-1?nbCase:ngLocalization.getPluralCategory(value)}var NgLocalization=function(){function NgLocalization(){}return NgLocalization}();exports.NgLocalization=NgLocalization,exports.getPluralCategory=getPluralCategory},{}],45:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(require("./location/platform_location")),__export(require("./location/location_strategy")),__export(require("./location/hash_location_strategy")),__export(require("./location/path_location_strategy")),__export(require("./location/location"))},{"./location/hash_location_strategy":46,"./location/location":47,"./location/location_strategy":48,"./location/path_location_strategy":49,"./location/platform_location":50}],46:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),lang_1=require("../facade/lang"),location_1=require("./location"),location_strategy_1=require("./location_strategy"),platform_location_1=require("./platform_location"),HashLocationStrategy=function(_super){function HashLocationStrategy(_platformLocation,_baseHref){_super.call(this),this._platformLocation=_platformLocation,this._baseHref="",lang_1.isPresent(_baseHref)&&(this._baseHref=_baseHref)}return __extends(HashLocationStrategy,_super),HashLocationStrategy.prototype.onPopState=function(fn){this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn)},HashLocationStrategy.prototype.getBaseHref=function(){return this._baseHref},HashLocationStrategy.prototype.path=function(includeHash){void 0===includeHash&&(includeHash=!1);var path=this._platformLocation.hash;return lang_1.isPresent(path)||(path="#"),path.length>0?path.substring(1):path},HashLocationStrategy.prototype.prepareExternalUrl=function(internal){var url=location_1.Location.joinWithSlash(this._baseHref,internal);return url.length>0?"#"+url:url},HashLocationStrategy.prototype.pushState=function(state,title,path,queryParams){var url=this.prepareExternalUrl(path+location_1.Location.normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.pushState(state,title,url)},HashLocationStrategy.prototype.replaceState=function(state,title,path,queryParams){var url=this.prepareExternalUrl(path+location_1.Location.normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.replaceState(state,title,url)},HashLocationStrategy.prototype.forward=function(){this._platformLocation.forward()},HashLocationStrategy.prototype.back=function(){this._platformLocation.back()},HashLocationStrategy.decorators=[{type:core_1.Injectable}],HashLocationStrategy.ctorParameters=[{type:platform_location_1.PlatformLocation},{type:void 0,decorators:[{type:core_1.Optional},{type:core_1.Inject,args:[location_strategy_1.APP_BASE_HREF]}]}],HashLocationStrategy}(location_strategy_1.LocationStrategy);exports.HashLocationStrategy=HashLocationStrategy},{"../facade/lang":18,"./location":47,"./location_strategy":48,"./platform_location":50,"@angular/core":154}],47:[function(require,module,exports){"use strict";function _stripBaseHref(baseHref,url){return baseHref.length>0&&url.startsWith(baseHref)?url.substring(baseHref.length):url}function _stripIndexHtml(url){return/\/index.html$/g.test(url)?url.substring(0,url.length-11):url}var core_1=require("@angular/core"),location_strategy_1=require("./location_strategy"),Location=function(){function Location(platformStrategy){var _this=this;this._subject=new core_1.EventEmitter,this._platformStrategy=platformStrategy;var browserBaseHref=this._platformStrategy.getBaseHref();this._baseHref=Location.stripTrailingSlash(_stripIndexHtml(browserBaseHref)),this._platformStrategy.onPopState(function(ev){_this._subject.emit({url:_this.path(!0),pop:!0,type:ev.type})})}return Location.prototype.path=function(includeHash){return void 0===includeHash&&(includeHash=!1),this.normalize(this._platformStrategy.path(includeHash))},Location.prototype.isCurrentPathEqualTo=function(path,query){return void 0===query&&(query=""),this.path()==this.normalize(path+Location.normalizeQueryParams(query))},Location.prototype.normalize=function(url){return Location.stripTrailingSlash(_stripBaseHref(this._baseHref,_stripIndexHtml(url)))},Location.prototype.prepareExternalUrl=function(url){return url.length>0&&!url.startsWith("/")&&(url="/"+url),this._platformStrategy.prepareExternalUrl(url)},Location.prototype.go=function(path,query){void 0===query&&(query=""),this._platformStrategy.pushState(null,"",path,query)},Location.prototype.replaceState=function(path,query){void 0===query&&(query=""),this._platformStrategy.replaceState(null,"",path,query)},Location.prototype.forward=function(){this._platformStrategy.forward()},Location.prototype.back=function(){this._platformStrategy.back()},Location.prototype.subscribe=function(onNext,onThrow,onReturn){return void 0===onThrow&&(onThrow=null),void 0===onReturn&&(onReturn=null),this._subject.subscribe({next:onNext,error:onThrow,complete:onReturn})},Location.normalizeQueryParams=function(params){return params.length>0&&"?"!=params.substring(0,1)?"?"+params:params},Location.joinWithSlash=function(start,end){if(0==start.length)return end;if(0==end.length)return start;var slashes=0;return start.endsWith("/")&&slashes++,end.startsWith("/")&&slashes++,2==slashes?start+end.substring(1):1==slashes?start+end:start+"/"+end},Location.stripTrailingSlash=function(url){return/\/$/g.test(url)&&(url=url.substring(0,url.length-1)),url},Location.decorators=[{type:core_1.Injectable}],Location.ctorParameters=[{type:location_strategy_1.LocationStrategy}],Location}();exports.Location=Location},{"./location_strategy":48,"@angular/core":154}],48:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),LocationStrategy=function(){function LocationStrategy(){}return LocationStrategy}();exports.LocationStrategy=LocationStrategy,exports.APP_BASE_HREF=new core_1.OpaqueToken("appBaseHref")},{"@angular/core":154}],49:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),location_1=require("./location"),location_strategy_1=require("./location_strategy"),platform_location_1=require("./platform_location"),PathLocationStrategy=function(_super){function PathLocationStrategy(_platformLocation,href){if(_super.call(this),this._platformLocation=_platformLocation,lang_1.isBlank(href)&&(href=this._platformLocation.getBaseHrefFromDOM()),lang_1.isBlank(href))throw new exceptions_1.BaseException("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=href}return __extends(PathLocationStrategy,_super),PathLocationStrategy.prototype.onPopState=function(fn){this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn)},PathLocationStrategy.prototype.getBaseHref=function(){return this._baseHref},PathLocationStrategy.prototype.prepareExternalUrl=function(internal){return location_1.Location.joinWithSlash(this._baseHref,internal)},PathLocationStrategy.prototype.path=function(includeHash){void 0===includeHash&&(includeHash=!1);var pathname=this._platformLocation.pathname+location_1.Location.normalizeQueryParams(this._platformLocation.search),hash=this._platformLocation.hash;return hash&&includeHash?""+pathname+hash:pathname},PathLocationStrategy.prototype.pushState=function(state,title,url,queryParams){var externalUrl=this.prepareExternalUrl(url+location_1.Location.normalizeQueryParams(queryParams));this._platformLocation.pushState(state,title,externalUrl)},PathLocationStrategy.prototype.replaceState=function(state,title,url,queryParams){var externalUrl=this.prepareExternalUrl(url+location_1.Location.normalizeQueryParams(queryParams));this._platformLocation.replaceState(state,title,externalUrl)},PathLocationStrategy.prototype.forward=function(){this._platformLocation.forward()},PathLocationStrategy.prototype.back=function(){this._platformLocation.back()},PathLocationStrategy.decorators=[{type:core_1.Injectable}],PathLocationStrategy.ctorParameters=[{type:platform_location_1.PlatformLocation},{type:void 0,decorators:[{type:core_1.Optional},{type:core_1.Inject,args:[location_strategy_1.APP_BASE_HREF]}]}],PathLocationStrategy}(location_strategy_1.LocationStrategy);exports.PathLocationStrategy=PathLocationStrategy},{"../facade/exceptions":16,"../facade/lang":18,"./location":47,"./location_strategy":48,"./platform_location":50,"@angular/core":154}],50:[function(require,module,exports){"use strict";var PlatformLocation=function(){function PlatformLocation(){}return Object.defineProperty(PlatformLocation.prototype,"pathname",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformLocation.prototype,"search",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformLocation.prototype,"hash",{get:function(){return null},enumerable:!0,configurable:!0}),PlatformLocation}();exports.PlatformLocation=PlatformLocation},{}],51:[function(require,module,exports){"use strict";var async_pipe_1=require("./pipes/async_pipe");exports.AsyncPipe=async_pipe_1.AsyncPipe;var common_pipes_1=require("./pipes/common_pipes");exports.COMMON_PIPES=common_pipes_1.COMMON_PIPES;var date_pipe_1=require("./pipes/date_pipe");exports.DatePipe=date_pipe_1.DatePipe;var i18n_plural_pipe_1=require("./pipes/i18n_plural_pipe");exports.I18nPluralPipe=i18n_plural_pipe_1.I18nPluralPipe;var i18n_select_pipe_1=require("./pipes/i18n_select_pipe");exports.I18nSelectPipe=i18n_select_pipe_1.I18nSelectPipe;var json_pipe_1=require("./pipes/json_pipe");exports.JsonPipe=json_pipe_1.JsonPipe;var lowercase_pipe_1=require("./pipes/lowercase_pipe");exports.LowerCasePipe=lowercase_pipe_1.LowerCasePipe;var number_pipe_1=require("./pipes/number_pipe");exports.CurrencyPipe=number_pipe_1.CurrencyPipe,exports.DecimalPipe=number_pipe_1.DecimalPipe,exports.PercentPipe=number_pipe_1.PercentPipe;var replace_pipe_1=require("./pipes/replace_pipe");exports.ReplacePipe=replace_pipe_1.ReplacePipe;var slice_pipe_1=require("./pipes/slice_pipe");exports.SlicePipe=slice_pipe_1.SlicePipe;var uppercase_pipe_1=require("./pipes/uppercase_pipe");exports.UpperCasePipe=uppercase_pipe_1.UpperCasePipe},{"./pipes/async_pipe":52,"./pipes/common_pipes":53,"./pipes/date_pipe":54,"./pipes/i18n_plural_pipe":55,"./pipes/i18n_select_pipe":56,"./pipes/json_pipe":58,"./pipes/lowercase_pipe":59,"./pipes/number_pipe":60,"./pipes/replace_pipe":61,"./pipes/slice_pipe":62,"./pipes/uppercase_pipe":63}],52:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),ObservableStrategy=function(){function ObservableStrategy(){}return ObservableStrategy.prototype.createSubscription=function(async,updateLatestValue){return async.subscribe({next:updateLatestValue,error:function(e){throw e}})},ObservableStrategy.prototype.dispose=function(subscription){subscription.unsubscribe()},ObservableStrategy.prototype.onDestroy=function(subscription){subscription.unsubscribe()},ObservableStrategy}(),PromiseStrategy=function(){function PromiseStrategy(){}return PromiseStrategy.prototype.createSubscription=function(async,updateLatestValue){return async.then(updateLatestValue,function(e){throw e})},PromiseStrategy.prototype.dispose=function(subscription){},PromiseStrategy.prototype.onDestroy=function(subscription){},PromiseStrategy}(),_promiseStrategy=new PromiseStrategy,_observableStrategy=new ObservableStrategy,AsyncPipe=function(){function AsyncPipe(_ref){this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=_ref}return AsyncPipe.prototype.ngOnDestroy=function(){lang_1.isPresent(this._subscription)&&this._dispose()},AsyncPipe.prototype.transform=function(obj){return lang_1.isBlank(this._obj)?(lang_1.isPresent(obj)&&this._subscribe(obj),this._latestReturnedValue=this._latestValue,this._latestValue):obj!==this._obj?(this._dispose(),this.transform(obj)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,core_1.WrappedValue.wrap(this._latestValue))},AsyncPipe.prototype._subscribe=function(obj){var _this=this;this._obj=obj,this._strategy=this._selectStrategy(obj),this._subscription=this._strategy.createSubscription(obj,function(value){return _this._updateLatestValue(obj,value)})},AsyncPipe.prototype._selectStrategy=function(obj){if(lang_1.isPromise(obj))return _promiseStrategy;if(obj.subscribe)return _observableStrategy;throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(AsyncPipe,obj)},AsyncPipe.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},AsyncPipe.prototype._updateLatestValue=function(async,value){async===this._obj&&(this._latestValue=value,this._ref.markForCheck())},AsyncPipe.decorators=[{type:core_1.Pipe,args:[{name:"async",pure:!1}]}],AsyncPipe.ctorParameters=[{type:core_1.ChangeDetectorRef}],AsyncPipe}();exports.AsyncPipe=AsyncPipe},{"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],53:[function(require,module,exports){"use strict";var async_pipe_1=require("./async_pipe"),date_pipe_1=require("./date_pipe"),i18n_plural_pipe_1=require("./i18n_plural_pipe"),i18n_select_pipe_1=require("./i18n_select_pipe"),json_pipe_1=require("./json_pipe"),lowercase_pipe_1=require("./lowercase_pipe"),number_pipe_1=require("./number_pipe"),replace_pipe_1=require("./replace_pipe"),slice_pipe_1=require("./slice_pipe"),uppercase_pipe_1=require("./uppercase_pipe");exports.COMMON_PIPES=[async_pipe_1.AsyncPipe,uppercase_pipe_1.UpperCasePipe,lowercase_pipe_1.LowerCasePipe,json_pipe_1.JsonPipe,slice_pipe_1.SlicePipe,number_pipe_1.DecimalPipe,number_pipe_1.PercentPipe,number_pipe_1.CurrencyPipe,date_pipe_1.DatePipe,replace_pipe_1.ReplacePipe,i18n_plural_pipe_1.I18nPluralPipe,i18n_select_pipe_1.I18nSelectPipe]},{"./async_pipe":52,"./date_pipe":54,"./i18n_plural_pipe":55,"./i18n_select_pipe":56,"./json_pipe":58,"./lowercase_pipe":59,"./number_pipe":60,"./replace_pipe":61,"./slice_pipe":62,"./uppercase_pipe":63}],54:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("../facade/collection"),intl_1=require("../facade/intl"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),defaultLocale="en-US",DatePipe=function(){function DatePipe(){}return DatePipe.prototype.transform=function(value,pattern){if(void 0===pattern&&(pattern="mediumDate"),lang_1.isBlank(value))return null;if(!this.supports(value))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(DatePipe,value);return lang_1.NumberWrapper.isNumeric(value)?value=lang_1.DateWrapper.fromMillis(lang_1.NumberWrapper.parseInt(value,10)):lang_1.isString(value)&&(value=lang_1.DateWrapper.fromISOString(value)),collection_1.StringMapWrapper.contains(DatePipe._ALIASES,pattern)&&(pattern=collection_1.StringMapWrapper.get(DatePipe._ALIASES,pattern)),intl_1.DateFormatter.format(value,defaultLocale,pattern)},DatePipe.prototype.supports=function(obj){return!(!lang_1.isDate(obj)&&!lang_1.NumberWrapper.isNumeric(obj))||!(!lang_1.isString(obj)||!lang_1.isDate(lang_1.DateWrapper.fromISOString(obj)))},DatePipe._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},DatePipe.decorators=[{type:core_1.Pipe,args:[{name:"date",pure:!0}]}],DatePipe}();exports.DatePipe=DatePipe},{"../facade/collection":14,"../facade/intl":17,"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],55:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),localization_1=require("../localization"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),_INTERPOLATION_REGEXP=/#/g,I18nPluralPipe=function(){function I18nPluralPipe(_localization){this._localization=_localization}return I18nPluralPipe.prototype.transform=function(value,pluralMap){if(lang_1.isBlank(value))return"";if(!lang_1.isStringMap(pluralMap))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(I18nPluralPipe,pluralMap);var key=localization_1.getPluralCategory(value,Object.keys(pluralMap),this._localization);return lang_1.StringWrapper.replaceAll(pluralMap[key],_INTERPOLATION_REGEXP,value.toString())},I18nPluralPipe.decorators=[{type:core_1.Pipe,args:[{name:"i18nPlural",pure:!0}]}],I18nPluralPipe.ctorParameters=[{type:localization_1.NgLocalization}],I18nPluralPipe}();exports.I18nPluralPipe=I18nPluralPipe},{"../facade/lang":18,"../localization":44,"./invalid_pipe_argument_exception":57,"@angular/core":154}],56:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),I18nSelectPipe=function(){function I18nSelectPipe(){}return I18nSelectPipe.prototype.transform=function(value,mapping){if(lang_1.isBlank(value))return"";if(!lang_1.isStringMap(mapping))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(I18nSelectPipe,mapping);return mapping.hasOwnProperty(value)?mapping[value]:""},I18nSelectPipe.decorators=[{type:core_1.Pipe,args:[{name:"i18nSelect",pure:!0}]}],I18nSelectPipe}();exports.I18nSelectPipe=I18nSelectPipe},{"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],57:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),InvalidPipeArgumentException=function(_super){function InvalidPipeArgumentException(type,value){_super.call(this,"Invalid argument '"+value+"' for pipe '"+lang_1.stringify(type)+"'")}return __extends(InvalidPipeArgumentException,_super),InvalidPipeArgumentException}(exceptions_1.BaseException);exports.InvalidPipeArgumentException=InvalidPipeArgumentException},{"../facade/exceptions":16,"../facade/lang":18}],58:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),JsonPipe=function(){function JsonPipe(){}return JsonPipe.prototype.transform=function(value){return lang_1.Json.stringify(value)},JsonPipe.decorators=[{type:core_1.Pipe,args:[{name:"json",pure:!1}]}],JsonPipe}();exports.JsonPipe=JsonPipe},{"../facade/lang":18,"@angular/core":154}],59:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),LowerCasePipe=function(){function LowerCasePipe(){}return LowerCasePipe.prototype.transform=function(value){if(lang_1.isBlank(value))return value;if(!lang_1.isString(value))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(LowerCasePipe,value);return value.toLowerCase()},LowerCasePipe.decorators=[{type:core_1.Pipe,args:[{name:"lowercase"}]}],LowerCasePipe}();exports.LowerCasePipe=LowerCasePipe},{"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],60:[function(require,module,exports){"use strict";function formatNumber(pipe,value,style,digits,currency,currencyAsSymbol){if(void 0===currency&&(currency=null),void 0===currencyAsSymbol&&(currencyAsSymbol=!1),lang_1.isBlank(value))return null;if(value=lang_1.isString(value)&&lang_1.NumberWrapper.isNumeric(value)?+value:value,!lang_1.isNumber(value))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(pipe,value);var minInt,minFraction,maxFraction;if(style!==intl_1.NumberFormatStyle.Currency&&(minInt=1,minFraction=0,maxFraction=3),lang_1.isPresent(digits)){var parts=digits.match(_NUMBER_FORMAT_REGEXP);if(null===parts)throw new Error(digits+" is not a valid digit info for number pipes");lang_1.isPresent(parts[1])&&(minInt=lang_1.NumberWrapper.parseIntAutoRadix(parts[1])),lang_1.isPresent(parts[3])&&(minFraction=lang_1.NumberWrapper.parseIntAutoRadix(parts[3])),lang_1.isPresent(parts[5])&&(maxFraction=lang_1.NumberWrapper.parseIntAutoRadix(parts[5]))}return intl_1.NumberFormatter.format(value,defaultLocale,style,{minimumIntegerDigits:minInt,minimumFractionDigits:minFraction,maximumFractionDigits:maxFraction,currency:currency,currencyAsSymbol:currencyAsSymbol})}var core_1=require("@angular/core"),intl_1=require("../facade/intl"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),defaultLocale="en-US",_NUMBER_FORMAT_REGEXP=/^(\d+)?\.((\d+)(\-(\d+))?)?$/,DecimalPipe=function(){function DecimalPipe(){}return DecimalPipe.prototype.transform=function(value,digits){return void 0===digits&&(digits=null),formatNumber(DecimalPipe,value,intl_1.NumberFormatStyle.Decimal,digits)},DecimalPipe.decorators=[{type:core_1.Pipe,args:[{name:"number"}]}],DecimalPipe}();exports.DecimalPipe=DecimalPipe;var PercentPipe=function(){function PercentPipe(){}return PercentPipe.prototype.transform=function(value,digits){return void 0===digits&&(digits=null),formatNumber(PercentPipe,value,intl_1.NumberFormatStyle.Percent,digits)},PercentPipe.decorators=[{type:core_1.Pipe,args:[{name:"percent"}]}],PercentPipe}();exports.PercentPipe=PercentPipe;var CurrencyPipe=function(){function CurrencyPipe(){}return CurrencyPipe.prototype.transform=function(value,currencyCode,symbolDisplay,digits){return void 0===currencyCode&&(currencyCode="USD"),void 0===symbolDisplay&&(symbolDisplay=!1),void 0===digits&&(digits=null),formatNumber(CurrencyPipe,value,intl_1.NumberFormatStyle.Currency,digits,currencyCode,symbolDisplay)},CurrencyPipe.decorators=[{type:core_1.Pipe,args:[{name:"currency"}]}],CurrencyPipe}();exports.CurrencyPipe=CurrencyPipe},{"../facade/intl":17,"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],61:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),ReplacePipe=function(){function ReplacePipe(){}return ReplacePipe.prototype.transform=function(value,pattern,replacement){if(lang_1.isBlank(value))return value;if(!this._supportedInput(value))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(ReplacePipe,value);var input=value.toString();if(!this._supportedPattern(pattern))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(ReplacePipe,pattern);if(!this._supportedReplacement(replacement))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(ReplacePipe,replacement);if(lang_1.isFunction(replacement)){var rgxPattern=lang_1.isString(pattern)?new RegExp(pattern,"g"):pattern;return lang_1.StringWrapper.replaceAllMapped(input,rgxPattern,replacement)}return pattern instanceof RegExp?lang_1.StringWrapper.replaceAll(input,pattern,replacement):lang_1.StringWrapper.replace(input,pattern,replacement)},ReplacePipe.prototype._supportedInput=function(input){return lang_1.isString(input)||lang_1.isNumber(input)},ReplacePipe.prototype._supportedPattern=function(pattern){return lang_1.isString(pattern)||pattern instanceof RegExp},ReplacePipe.prototype._supportedReplacement=function(replacement){return lang_1.isString(replacement)||lang_1.isFunction(replacement)},ReplacePipe.decorators=[{type:core_1.Pipe,args:[{name:"replace"}]}],ReplacePipe}();exports.ReplacePipe=ReplacePipe},{"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],62:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),SlicePipe=function(){function SlicePipe(){}return SlicePipe.prototype.transform=function(value,start,end){if(void 0===end&&(end=null),lang_1.isBlank(value))return value;if(!this.supports(value))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(SlicePipe,value);return lang_1.isString(value)?lang_1.StringWrapper.slice(value,start,end):collection_1.ListWrapper.slice(value,start,end)},SlicePipe.prototype.supports=function(obj){return lang_1.isString(obj)||lang_1.isArray(obj)},SlicePipe.decorators=[{type:core_1.Pipe,args:[{name:"slice",pure:!1}]}],SlicePipe}();exports.SlicePipe=SlicePipe},{"../facade/collection":14,"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],63:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),invalid_pipe_argument_exception_1=require("./invalid_pipe_argument_exception"),UpperCasePipe=function(){function UpperCasePipe(){}return UpperCasePipe.prototype.transform=function(value){if(lang_1.isBlank(value))return value;if(!lang_1.isString(value))throw new invalid_pipe_argument_exception_1.InvalidPipeArgumentException(UpperCasePipe,value);return value.toUpperCase()},UpperCasePipe.decorators=[{type:core_1.Pipe,args:[{name:"uppercase"}]}],UpperCasePipe}();exports.UpperCasePipe=UpperCasePipe},{"../facade/lang":18,"./invalid_pipe_argument_exception":57,"@angular/core":154}],64:[function(require,module,exports){"use strict";var core_1=require("@angular/core");exports.isDefaultChangeDetectionStrategy=core_1.__core_private__.isDefaultChangeDetectionStrategy,exports.ChangeDetectorStatus=core_1.__core_private__.ChangeDetectorStatus,exports.CHANGE_DETECTION_STRATEGY_VALUES=core_1.__core_private__.CHANGE_DETECTION_STRATEGY_VALUES,exports.constructDependencies=core_1.__core_private__.constructDependencies,exports.LifecycleHooks=core_1.__core_private__.LifecycleHooks,exports.LIFECYCLE_HOOKS_VALUES=core_1.__core_private__.LIFECYCLE_HOOKS_VALUES,exports.ReflectorReader=core_1.__core_private__.ReflectorReader,exports.AppElement=core_1.__core_private__.AppElement,exports.CodegenComponentFactoryResolver=core_1.__core_private__.CodegenComponentFactoryResolver,exports.AppView=core_1.__core_private__.AppView,exports.DebugAppView=core_1.__core_private__.DebugAppView,exports.NgModuleInjector=core_1.__core_private__.NgModuleInjector,exports.ViewType=core_1.__core_private__.ViewType,exports.MAX_INTERPOLATION_VALUES=core_1.__core_private__.MAX_INTERPOLATION_VALUES,exports.checkBinding=core_1.__core_private__.checkBinding,exports.flattenNestedViewRenderNodes=core_1.__core_private__.flattenNestedViewRenderNodes,exports.interpolate=core_1.__core_private__.interpolate,exports.ViewUtils=core_1.__core_private__.ViewUtils,exports.VIEW_ENCAPSULATION_VALUES=core_1.__core_private__.VIEW_ENCAPSULATION_VALUES,exports.DebugContext=core_1.__core_private__.DebugContext,exports.StaticNodeDebugInfo=core_1.__core_private__.StaticNodeDebugInfo,exports.devModeEqual=core_1.__core_private__.devModeEqual,exports.UNINITIALIZED=core_1.__core_private__.UNINITIALIZED,exports.ValueUnwrapper=core_1.__core_private__.ValueUnwrapper,exports.TemplateRef_=core_1.__core_private__.TemplateRef_,exports.RenderDebugInfo=core_1.__core_private__.RenderDebugInfo,exports.createProvider=core_1.__core_private__.createProvider,exports.isProviderLiteral=core_1.__core_private__.isProviderLiteral,exports.EMPTY_ARRAY=core_1.__core_private__.EMPTY_ARRAY,exports.EMPTY_MAP=core_1.__core_private__.EMPTY_MAP,exports.pureProxy1=core_1.__core_private__.pureProxy1,exports.pureProxy2=core_1.__core_private__.pureProxy2,exports.pureProxy3=core_1.__core_private__.pureProxy3,exports.pureProxy4=core_1.__core_private__.pureProxy4,exports.pureProxy5=core_1.__core_private__.pureProxy5,exports.pureProxy6=core_1.__core_private__.pureProxy6,exports.pureProxy7=core_1.__core_private__.pureProxy7,exports.pureProxy8=core_1.__core_private__.pureProxy8,exports.pureProxy9=core_1.__core_private__.pureProxy9,exports.pureProxy10=core_1.__core_private__.pureProxy10,exports.castByValue=core_1.__core_private__.castByValue,exports.Console=core_1.__core_private__.Console,exports.reflector=core_1.__core_private__.reflector,exports.Reflector=core_1.__core_private__.Reflector,exports.ReflectionCapabilities=core_1.__core_private__.ReflectionCapabilities,exports.NoOpAnimationPlayer=core_1.__core_private__.NoOpAnimationPlayer,exports.AnimationPlayer=core_1.__core_private__.AnimationPlayer,exports.AnimationSequencePlayer=core_1.__core_private__.AnimationSequencePlayer,exports.AnimationGroupPlayer=core_1.__core_private__.AnimationGroupPlayer,exports.AnimationKeyframe=core_1.__core_private__.AnimationKeyframe,exports.AnimationStyles=core_1.__core_private__.AnimationStyles,exports.ANY_STATE=core_1.__core_private__.ANY_STATE,exports.DEFAULT_STATE=core_1.__core_private__.DEFAULT_STATE,exports.EMPTY_STATE=core_1.__core_private__.EMPTY_STATE,exports.FILL_STYLE_FLAG=core_1.__core_private__.FILL_STYLE_FLAG,exports.prepareFinalAnimationStyles=core_1.__core_private__.prepareFinalAnimationStyles,exports.balanceAnimationKeyframes=core_1.__core_private__.balanceAnimationKeyframes,exports.flattenStyles=core_1.__core_private__.flattenStyles,exports.clearStyles=core_1.__core_private__.clearStyles,exports.collectAndResolveStyles=core_1.__core_private__.collectAndResolveStyles,exports.renderStyles=core_1.__core_private__.renderStyles},{"@angular/core":154}],65:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var i18n=require("./src/i18n/index");exports.i18n=i18n;var compiler_1=require("./src/compiler");exports.COMPILER_PROVIDERS=compiler_1.COMPILER_PROVIDERS,exports.CompileDiDependencyMetadata=compiler_1.CompileDiDependencyMetadata,exports.CompileDirectiveMetadata=compiler_1.CompileDirectiveMetadata,exports.CompileFactoryMetadata=compiler_1.CompileFactoryMetadata,exports.CompileIdentifierMetadata=compiler_1.CompileIdentifierMetadata,exports.CompileMetadataWithIdentifier=compiler_1.CompileMetadataWithIdentifier,exports.CompilePipeMetadata=compiler_1.CompilePipeMetadata,exports.CompileProviderMetadata=compiler_1.CompileProviderMetadata,exports.CompileQueryMetadata=compiler_1.CompileQueryMetadata,exports.CompileTemplateMetadata=compiler_1.CompileTemplateMetadata,exports.CompileTokenMetadata=compiler_1.CompileTokenMetadata,exports.CompileTypeMetadata=compiler_1.CompileTypeMetadata,exports.CompilerConfig=compiler_1.CompilerConfig,exports.DEFAULT_PACKAGE_URL_PROVIDER=compiler_1.DEFAULT_PACKAGE_URL_PROVIDER,exports.DirectiveResolver=compiler_1.DirectiveResolver,exports.NgModuleResolver=compiler_1.NgModuleResolver,exports.OfflineCompiler=compiler_1.OfflineCompiler,exports.PipeResolver=compiler_1.PipeResolver,
exports.RenderTypes=compiler_1.RenderTypes,exports.RuntimeCompiler=compiler_1.RuntimeCompiler,exports.SourceModule=compiler_1.SourceModule,exports.TEMPLATE_TRANSFORMS=compiler_1.TEMPLATE_TRANSFORMS,exports.UrlResolver=compiler_1.UrlResolver,exports.XHR=compiler_1.XHR,exports.analyzeAppProvidersForDeprecatedConfiguration=compiler_1.analyzeAppProvidersForDeprecatedConfiguration,exports.createOfflineCompileUrlResolver=compiler_1.createOfflineCompileUrlResolver,exports.platformCoreDynamic=compiler_1.platformCoreDynamic;var interpolation_config_1=require("./src/ml_parser/interpolation_config");exports.InterpolationConfig=interpolation_config_1.InterpolationConfig;var element_schema_registry_1=require("./src/schema/element_schema_registry");exports.ElementSchemaRegistry=element_schema_registry_1.ElementSchemaRegistry,__export(require("./src/template_parser/template_ast")),__export(require("./private_export"))},{"./private_export":66,"./src/compiler":74,"./src/i18n/index":91,"./src/ml_parser/interpolation_config":105,"./src/schema/element_schema_registry":128,"./src/template_parser/template_ast":133}],66:[function(require,module,exports){"use strict";var __compiler_private__,directive_normalizer=require("./src/directive_normalizer"),lexer=require("./src/expression_parser/lexer"),parser=require("./src/expression_parser/parser"),metadata_resolver=require("./src/metadata_resolver"),html_parser=require("./src/ml_parser/html_parser"),interpolation_config=require("./src/ml_parser/interpolation_config"),ng_module_compiler=require("./src/ng_module_compiler"),path_util=require("./src/output/path_util"),ts_emitter=require("./src/output/ts_emitter"),parse_util=require("./src/parse_util"),dom_element_schema_registry=require("./src/schema/dom_element_schema_registry"),selector=require("./src/selector"),style_compiler=require("./src/style_compiler"),template_parser=require("./src/template_parser/template_parser"),view_compiler=require("./src/view_compiler/view_compiler");!function(__compiler_private__){__compiler_private__.SelectorMatcher=selector.SelectorMatcher,__compiler_private__.CssSelector=selector.CssSelector,__compiler_private__.AssetUrl=path_util.AssetUrl,__compiler_private__.ImportGenerator=path_util.ImportGenerator,__compiler_private__.CompileMetadataResolver=metadata_resolver.CompileMetadataResolver,__compiler_private__.HtmlParser=html_parser.HtmlParser,__compiler_private__.InterpolationConfig=interpolation_config.InterpolationConfig,__compiler_private__.DirectiveNormalizer=directive_normalizer.DirectiveNormalizer,__compiler_private__.Lexer=lexer.Lexer,__compiler_private__.Parser=parser.Parser,__compiler_private__.ParseLocation=parse_util.ParseLocation,__compiler_private__.ParseError=parse_util.ParseError,__compiler_private__.ParseErrorLevel=parse_util.ParseErrorLevel,__compiler_private__.ParseSourceFile=parse_util.ParseSourceFile,__compiler_private__.ParseSourceSpan=parse_util.ParseSourceSpan,__compiler_private__.TemplateParser=template_parser.TemplateParser,__compiler_private__.DomElementSchemaRegistry=dom_element_schema_registry.DomElementSchemaRegistry,__compiler_private__.StyleCompiler=style_compiler.StyleCompiler,__compiler_private__.ViewCompiler=view_compiler.ViewCompiler,__compiler_private__.NgModuleCompiler=ng_module_compiler.NgModuleCompiler,__compiler_private__.TypeScriptEmitter=ts_emitter.TypeScriptEmitter}(__compiler_private__=exports.__compiler_private__||(exports.__compiler_private__={}))},{"./src/directive_normalizer":76,"./src/expression_parser/lexer":79,"./src/expression_parser/parser":80,"./src/metadata_resolver":100,"./src/ml_parser/html_parser":102,"./src/ml_parser/interpolation_config":105,"./src/ng_module_compiler":111,"./src/output/path_util":119,"./src/output/ts_emitter":120,"./src/parse_util":122,"./src/schema/dom_element_schema_registry":126,"./src/selector":129,"./src/style_compiler":131,"./src/template_parser/template_parser":134,"./src/view_compiler/view_compiler":152}],67:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AnimationAst=function(){function AnimationAst(){this.startTime=0,this.playTime=0}return AnimationAst}();exports.AnimationAst=AnimationAst;var AnimationStateAst=function(_super){function AnimationStateAst(){_super.apply(this,arguments)}return __extends(AnimationStateAst,_super),AnimationStateAst}(AnimationAst);exports.AnimationStateAst=AnimationStateAst;var AnimationEntryAst=function(_super){function AnimationEntryAst(name,stateDeclarations,stateTransitions){_super.call(this),this.name=name,this.stateDeclarations=stateDeclarations,this.stateTransitions=stateTransitions}return __extends(AnimationEntryAst,_super),AnimationEntryAst.prototype.visit=function(visitor,context){return visitor.visitAnimationEntry(this,context)},AnimationEntryAst}(AnimationAst);exports.AnimationEntryAst=AnimationEntryAst;var AnimationStateDeclarationAst=function(_super){function AnimationStateDeclarationAst(stateName,styles){_super.call(this),this.stateName=stateName,this.styles=styles}return __extends(AnimationStateDeclarationAst,_super),AnimationStateDeclarationAst.prototype.visit=function(visitor,context){return visitor.visitAnimationStateDeclaration(this,context)},AnimationStateDeclarationAst}(AnimationStateAst);exports.AnimationStateDeclarationAst=AnimationStateDeclarationAst;var AnimationStateTransitionExpression=function(){function AnimationStateTransitionExpression(fromState,toState){this.fromState=fromState,this.toState=toState}return AnimationStateTransitionExpression}();exports.AnimationStateTransitionExpression=AnimationStateTransitionExpression;var AnimationStateTransitionAst=function(_super){function AnimationStateTransitionAst(stateChanges,animation){_super.call(this),this.stateChanges=stateChanges,this.animation=animation}return __extends(AnimationStateTransitionAst,_super),AnimationStateTransitionAst.prototype.visit=function(visitor,context){return visitor.visitAnimationStateTransition(this,context)},AnimationStateTransitionAst}(AnimationStateAst);exports.AnimationStateTransitionAst=AnimationStateTransitionAst;var AnimationStepAst=function(_super){function AnimationStepAst(startingStyles,keyframes,duration,delay,easing){_super.call(this),this.startingStyles=startingStyles,this.keyframes=keyframes,this.duration=duration,this.delay=delay,this.easing=easing}return __extends(AnimationStepAst,_super),AnimationStepAst.prototype.visit=function(visitor,context){return visitor.visitAnimationStep(this,context)},AnimationStepAst}(AnimationAst);exports.AnimationStepAst=AnimationStepAst;var AnimationStylesAst=function(_super){function AnimationStylesAst(styles){_super.call(this),this.styles=styles}return __extends(AnimationStylesAst,_super),AnimationStylesAst.prototype.visit=function(visitor,context){return visitor.visitAnimationStyles(this,context)},AnimationStylesAst}(AnimationAst);exports.AnimationStylesAst=AnimationStylesAst;var AnimationKeyframeAst=function(_super){function AnimationKeyframeAst(offset,styles){_super.call(this),this.offset=offset,this.styles=styles}return __extends(AnimationKeyframeAst,_super),AnimationKeyframeAst.prototype.visit=function(visitor,context){return visitor.visitAnimationKeyframe(this,context)},AnimationKeyframeAst}(AnimationAst);exports.AnimationKeyframeAst=AnimationKeyframeAst;var AnimationWithStepsAst=function(_super){function AnimationWithStepsAst(steps){_super.call(this),this.steps=steps}return __extends(AnimationWithStepsAst,_super),AnimationWithStepsAst}(AnimationAst);exports.AnimationWithStepsAst=AnimationWithStepsAst;var AnimationGroupAst=function(_super){function AnimationGroupAst(steps){_super.call(this,steps)}return __extends(AnimationGroupAst,_super),AnimationGroupAst.prototype.visit=function(visitor,context){return visitor.visitAnimationGroup(this,context)},AnimationGroupAst}(AnimationWithStepsAst);exports.AnimationGroupAst=AnimationGroupAst;var AnimationSequenceAst=function(_super){function AnimationSequenceAst(steps){_super.call(this,steps)}return __extends(AnimationSequenceAst,_super),AnimationSequenceAst.prototype.visit=function(visitor,context){return visitor.visitAnimationSequence(this,context)},AnimationSequenceAst}(AnimationWithStepsAst);exports.AnimationSequenceAst=AnimationSequenceAst},{}],68:[function(require,module,exports){"use strict";function _compareToAnimationStateExpr(value,animationState){var emptyStateLiteral=o.literal(core_private_1.EMPTY_STATE);switch(animationState){case core_private_1.EMPTY_STATE:return value.equals(emptyStateLiteral);case core_private_1.ANY_STATE:return o.literal(!0);default:return value.equals(o.literal(animationState))}}function _isEndStateAnimateStep(step){if(step instanceof animation_ast_1.AnimationStepAst&&step.duration>0&&2==step.keyframes.length){var styles1=_getStylesArray(step.keyframes[0])[0],styles2=_getStylesArray(step.keyframes[1])[0];return collection_1.StringMapWrapper.isEmpty(styles1)&&collection_1.StringMapWrapper.isEmpty(styles2)}return!1}function _getStylesArray(obj){return obj.styles.styles}function _validateAnimationProperties(compiledAnimations,template){var visitor=new _AnimationTemplatePropertyVisitor(compiledAnimations);return t.templateVisitAll(visitor,template),visitor.errors}var core_private_1=require("../../core_private"),collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),t=require("../template_parser/template_ast"),animation_ast_1=require("./animation_ast"),animation_parser_1=require("./animation_parser"),CompiledAnimation=function(){function CompiledAnimation(name,statesMapStatement,statesVariableName,fnStatement,fnVariable){this.name=name,this.statesMapStatement=statesMapStatement,this.statesVariableName=statesVariableName,this.fnStatement=fnStatement,this.fnVariable=fnVariable}return CompiledAnimation}();exports.CompiledAnimation=CompiledAnimation;var AnimationCompiler=function(){function AnimationCompiler(){}return AnimationCompiler.prototype.compileComponent=function(component,template){var compiledAnimations=[],groupedErrors=[],triggerLookup={},componentName=component.type.name;if(component.template.animations.forEach(function(entry){var result=animation_parser_1.parseAnimationEntry(entry),triggerName=entry.name;if(result.errors.length>0){var errorMessage='Unable to parse the animation sequence for "'+triggerName+'" due to the following errors:';result.errors.forEach(function(error){errorMessage+="\n-- "+error.msg}),groupedErrors.push(errorMessage)}if(triggerLookup[triggerName])groupedErrors.push('The animation trigger "'+triggerName+'" has already been registered on "'+componentName+'"');else{var factoryName=componentName+"_"+entry.name,visitor=new _AnimationBuilder(triggerName,factoryName),compileResult=visitor.build(result.ast);compiledAnimations.push(compileResult),triggerLookup[entry.name]=compileResult}}),_validateAnimationProperties(compiledAnimations,template).forEach(function(entry){groupedErrors.push(entry.msg)}),groupedErrors.length>0){var errorMessageStr="Animation parsing for "+component.type.name+" has failed due to the following errors:";throw groupedErrors.forEach(function(error){return errorMessageStr+="\n- "+error}),new exceptions_1.BaseException(errorMessageStr)}return compiledAnimations},AnimationCompiler}();exports.AnimationCompiler=AnimationCompiler;var _ANIMATION_FACTORY_ELEMENT_VAR=o.variable("element"),_ANIMATION_DEFAULT_STATE_VAR=o.variable("defaultStateStyles"),_ANIMATION_FACTORY_VIEW_VAR=o.variable("view"),_ANIMATION_FACTORY_RENDERER_VAR=_ANIMATION_FACTORY_VIEW_VAR.prop("renderer"),_ANIMATION_CURRENT_STATE_VAR=o.variable("currentState"),_ANIMATION_NEXT_STATE_VAR=o.variable("nextState"),_ANIMATION_PLAYER_VAR=o.variable("player"),_ANIMATION_START_STATE_STYLES_VAR=o.variable("startStateStyles"),_ANIMATION_END_STATE_STYLES_VAR=o.variable("endStateStyles"),_ANIMATION_COLLECTED_STYLES=o.variable("collectedStyles"),EMPTY_MAP=o.literalMap([]),_AnimationBuilder=function(){function _AnimationBuilder(animationName,factoryName){this.animationName=animationName,this._fnVarName=factoryName+"_factory",this._statesMapVarName=factoryName+"_states",this._statesMapVar=o.variable(this._statesMapVarName)}return _AnimationBuilder.prototype.visitAnimationStyles=function(ast,context){var stylesArr=[];return context.isExpectingFirstStyleStep&&(stylesArr.push(_ANIMATION_START_STATE_STYLES_VAR),context.isExpectingFirstStyleStep=!1),ast.styles.forEach(function(entry){stylesArr.push(o.literalMap(collection_1.StringMapWrapper.keys(entry).map(function(key){return[key,o.literal(entry[key])]})))}),o.importExpr(identifiers_1.Identifiers.AnimationStyles).instantiate([o.importExpr(identifiers_1.Identifiers.collectAndResolveStyles).callFn([_ANIMATION_COLLECTED_STYLES,o.literalArr(stylesArr)])])},_AnimationBuilder.prototype.visitAnimationKeyframe=function(ast,context){return o.importExpr(identifiers_1.Identifiers.AnimationKeyframe).instantiate([o.literal(ast.offset),ast.styles.visit(this,context)])},_AnimationBuilder.prototype.visitAnimationStep=function(ast,context){var _this=this;if(context.endStateAnimateStep===ast)return this._visitEndStateAnimation(ast,context);var startingStylesExpr=ast.startingStyles.visit(this,context),keyframeExpressions=ast.keyframes.map(function(keyframeEntry){return keyframeEntry.visit(_this,context)});return this._callAnimateMethod(ast,startingStylesExpr,o.literalArr(keyframeExpressions))},_AnimationBuilder.prototype._visitEndStateAnimation=function(ast,context){var _this=this,startingStylesExpr=ast.startingStyles.visit(this,context),keyframeExpressions=ast.keyframes.map(function(keyframe){return keyframe.visit(_this,context)}),keyframesExpr=o.importExpr(identifiers_1.Identifiers.balanceAnimationKeyframes).callFn([_ANIMATION_COLLECTED_STYLES,_ANIMATION_END_STATE_STYLES_VAR,o.literalArr(keyframeExpressions)]);return this._callAnimateMethod(ast,startingStylesExpr,keyframesExpr)},_AnimationBuilder.prototype._callAnimateMethod=function(ast,startingStylesExpr,keyframesExpr){return _ANIMATION_FACTORY_RENDERER_VAR.callMethod("animate",[_ANIMATION_FACTORY_ELEMENT_VAR,startingStylesExpr,keyframesExpr,o.literal(ast.duration),o.literal(ast.delay),o.literal(ast.easing)])},_AnimationBuilder.prototype.visitAnimationSequence=function(ast,context){var _this=this,playerExprs=ast.steps.map(function(step){return step.visit(_this,context)});return o.importExpr(identifiers_1.Identifiers.AnimationSequencePlayer).instantiate([o.literalArr(playerExprs)])},_AnimationBuilder.prototype.visitAnimationGroup=function(ast,context){var _this=this,playerExprs=ast.steps.map(function(step){return step.visit(_this,context)});return o.importExpr(identifiers_1.Identifiers.AnimationGroupPlayer).instantiate([o.literalArr(playerExprs)])},_AnimationBuilder.prototype.visitAnimationStateDeclaration=function(ast,context){var flatStyles={};_getStylesArray(ast).forEach(function(entry){collection_1.StringMapWrapper.forEach(entry,function(value,key){flatStyles[key]=value})}),context.stateMap.registerState(ast.stateName,flatStyles)},_AnimationBuilder.prototype.visitAnimationStateTransition=function(ast,context){var steps=ast.animation.steps,lastStep=steps[steps.length-1];_isEndStateAnimateStep(lastStep)&&(context.endStateAnimateStep=lastStep),context.isExpectingFirstStyleStep=!0;var stateChangePreconditions=[];ast.stateChanges.forEach(function(stateChange){stateChangePreconditions.push(_compareToAnimationStateExpr(_ANIMATION_CURRENT_STATE_VAR,stateChange.fromState).and(_compareToAnimationStateExpr(_ANIMATION_NEXT_STATE_VAR,stateChange.toState))),stateChange.fromState!=core_private_1.ANY_STATE&&context.stateMap.registerState(stateChange.fromState),stateChange.toState!=core_private_1.ANY_STATE&&context.stateMap.registerState(stateChange.toState)});var animationPlayerExpr=ast.animation.visit(this,context),reducedStateChangesPrecondition=stateChangePreconditions.reduce(function(a,b){return a.or(b)}),precondition=_ANIMATION_PLAYER_VAR.equals(o.NULL_EXPR).and(reducedStateChangesPrecondition);return new o.IfStmt(precondition,[_ANIMATION_PLAYER_VAR.set(animationPlayerExpr).toStmt()])},_AnimationBuilder.prototype.visitAnimationEntry=function(ast,context){var _this=this;ast.stateDeclarations.forEach(function(def){return def.visit(_this,context)}),context.stateMap.registerState(core_private_1.DEFAULT_STATE,{});var statements=[];statements.push(_ANIMATION_FACTORY_VIEW_VAR.callMethod("cancelActiveAnimation",[_ANIMATION_FACTORY_ELEMENT_VAR,o.literal(this.animationName),_ANIMATION_NEXT_STATE_VAR.equals(o.literal(core_private_1.EMPTY_STATE))]).toStmt()),statements.push(_ANIMATION_COLLECTED_STYLES.set(EMPTY_MAP).toDeclStmt()),statements.push(_ANIMATION_PLAYER_VAR.set(o.NULL_EXPR).toDeclStmt()),statements.push(_ANIMATION_DEFAULT_STATE_VAR.set(this._statesMapVar.key(o.literal(core_private_1.DEFAULT_STATE))).toDeclStmt()),statements.push(_ANIMATION_START_STATE_STYLES_VAR.set(this._statesMapVar.key(_ANIMATION_CURRENT_STATE_VAR)).toDeclStmt()),statements.push(new o.IfStmt(_ANIMATION_START_STATE_STYLES_VAR.equals(o.NULL_EXPR),[_ANIMATION_START_STATE_STYLES_VAR.set(_ANIMATION_DEFAULT_STATE_VAR).toStmt()])),statements.push(_ANIMATION_END_STATE_STYLES_VAR.set(this._statesMapVar.key(_ANIMATION_NEXT_STATE_VAR)).toDeclStmt()),statements.push(new o.IfStmt(_ANIMATION_END_STATE_STYLES_VAR.equals(o.NULL_EXPR),[_ANIMATION_END_STATE_STYLES_VAR.set(_ANIMATION_DEFAULT_STATE_VAR).toStmt()]));var RENDER_STYLES_FN=o.importExpr(identifiers_1.Identifiers.renderStyles);return statements.push(RENDER_STYLES_FN.callFn([_ANIMATION_FACTORY_ELEMENT_VAR,_ANIMATION_FACTORY_RENDERER_VAR,o.importExpr(identifiers_1.Identifiers.clearStyles).callFn([_ANIMATION_START_STATE_STYLES_VAR])]).toStmt()),ast.stateTransitions.forEach(function(transAst){return statements.push(transAst.visit(_this,context))}),statements.push(new o.IfStmt(_ANIMATION_PLAYER_VAR.equals(o.NULL_EXPR),[_ANIMATION_PLAYER_VAR.set(o.importExpr(identifiers_1.Identifiers.NoOpAnimationPlayer).instantiate([])).toStmt()])),statements.push(_ANIMATION_PLAYER_VAR.callMethod("onDone",[o.fn([],[RENDER_STYLES_FN.callFn([_ANIMATION_FACTORY_ELEMENT_VAR,_ANIMATION_FACTORY_RENDERER_VAR,o.importExpr(identifiers_1.Identifiers.prepareFinalAnimationStyles).callFn([_ANIMATION_START_STATE_STYLES_VAR,_ANIMATION_END_STATE_STYLES_VAR])]).toStmt()])]).toStmt()),statements.push(_ANIMATION_FACTORY_VIEW_VAR.callMethod("queueAnimation",[_ANIMATION_FACTORY_ELEMENT_VAR,o.literal(this.animationName),_ANIMATION_PLAYER_VAR]).toStmt()),o.fn([new o.FnParam(_ANIMATION_FACTORY_VIEW_VAR.name,o.importType(identifiers_1.Identifiers.AppView,[o.DYNAMIC_TYPE])),new o.FnParam(_ANIMATION_FACTORY_ELEMENT_VAR.name,o.DYNAMIC_TYPE),new o.FnParam(_ANIMATION_CURRENT_STATE_VAR.name,o.DYNAMIC_TYPE),new o.FnParam(_ANIMATION_NEXT_STATE_VAR.name,o.DYNAMIC_TYPE)],statements)},_AnimationBuilder.prototype.build=function(ast){var context=new _AnimationBuilderContext,fnStatement=ast.visit(this,context).toDeclStmt(this._fnVarName),fnVariable=o.variable(this._fnVarName),lookupMap=[];collection_1.StringMapWrapper.forEach(context.stateMap.states,function(value,stateName){var variableValue=EMPTY_MAP;if(lang_1.isPresent(value)){var styleMap_1=[];collection_1.StringMapWrapper.forEach(value,function(value,key){styleMap_1.push([key,o.literal(value)])}),variableValue=o.literalMap(styleMap_1)}lookupMap.push([stateName,variableValue])});var compiledStatesMapExpr=this._statesMapVar.set(o.literalMap(lookupMap)).toDeclStmt();return new CompiledAnimation(this.animationName,compiledStatesMapExpr,this._statesMapVarName,fnStatement,fnVariable)},_AnimationBuilder}(),_AnimationBuilderContext=function(){function _AnimationBuilderContext(){this.stateMap=new _AnimationBuilderStateMap,this.endStateAnimateStep=null,this.isExpectingFirstStyleStep=!1}return _AnimationBuilderContext}(),_AnimationBuilderStateMap=function(){function _AnimationBuilderStateMap(){this._states={}}return Object.defineProperty(_AnimationBuilderStateMap.prototype,"states",{get:function(){return this._states},enumerable:!0,configurable:!0}),_AnimationBuilderStateMap.prototype.registerState=function(name,value){void 0===value&&(value=null);var existingEntry=this._states[name];lang_1.isBlank(existingEntry)&&(this._states[name]=value)},_AnimationBuilderStateMap}(),_AnimationTemplatePropertyVisitor=function(){function _AnimationTemplatePropertyVisitor(animations){var _this=this;this._animationRegistry={},this.errors=[],animations.forEach(function(entry){_this._animationRegistry[entry.name]=!0})}return _AnimationTemplatePropertyVisitor.prototype.visitElement=function(ast,ctx){var _this=this;ast.inputs.forEach(function(input){if(input.type==t.PropertyBindingType.Animation){var animationName=input.name;lang_1.isPresent(_this._animationRegistry[animationName])||_this.errors.push(new animation_parser_1.AnimationParseError("couldn't find an animation entry for "+animationName))}}),t.templateVisitAll(this,ast.children)},_AnimationTemplatePropertyVisitor.prototype.visitBoundText=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitText=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitEmbeddedTemplate=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitNgContent=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitAttr=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitDirective=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitEvent=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitReference=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitVariable=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitDirectiveProperty=function(ast,ctx){},_AnimationTemplatePropertyVisitor.prototype.visitElementProperty=function(ast,ctx){},_AnimationTemplatePropertyVisitor}()},{"../../core_private":64,"../facade/collection":82,"../facade/exceptions":84,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"../template_parser/template_ast":133,"./animation_ast":67,"./animation_parser":69}],69:[function(require,module,exports){"use strict";function parseAnimationEntry(entry){var errors=[],stateStyles={},transitions=[],stateDeclarationAsts=[];entry.definitions.forEach(function(def){def instanceof compile_metadata_1.CompileAnimationStateDeclarationMetadata?_parseAnimationDeclarationStates(def,errors).forEach(function(ast){stateDeclarationAsts.push(ast),stateStyles[ast.stateName]=ast.styles}):transitions.push(def)});var stateTransitionAsts=transitions.map(function(transDef){return _parseAnimationStateTransition(transDef,stateStyles,errors)}),ast=new animation_ast_1.AnimationEntryAst(entry.name,stateDeclarationAsts,stateTransitionAsts);return new ParsedAnimationResult(ast,errors)}function _parseAnimationDeclarationStates(stateMetadata,errors){var styleValues=[];stateMetadata.styles.styles.forEach(function(stylesEntry){lang_1.isStringMap(stylesEntry)?styleValues.push(stylesEntry):errors.push(new AnimationParseError("State based animations cannot contain references to other states"))});var defStyles=new animation_ast_1.AnimationStylesAst(styleValues),states=stateMetadata.stateNameExpr.split(/\s*,\s*/);return states.map(function(state){return new animation_ast_1.AnimationStateDeclarationAst(state,defStyles)})}function _parseAnimationStateTransition(transitionStateMetadata,stateStyles,errors){var styles=new styles_collection_1.StylesCollection,transitionExprs=[],transitionStates=transitionStateMetadata.stateChangeExpr.split(/\s*,\s*/);transitionStates.forEach(function(expr){_parseAnimationTransitionExpr(expr,errors).forEach(function(transExpr){transitionExprs.push(transExpr)})});var entry=_normalizeAnimationEntry(transitionStateMetadata.steps),animation=_normalizeStyleSteps(entry,stateStyles,errors),animationAst=_parseTransitionAnimation(animation,0,styles,stateStyles,errors);0==errors.length&&_fillAnimationAstStartingKeyframes(animationAst,styles,errors);var sequenceAst=animationAst instanceof animation_ast_1.AnimationSequenceAst?animationAst:new animation_ast_1.AnimationSequenceAst([animationAst]);return new animation_ast_1.AnimationStateTransitionAst(transitionExprs,sequenceAst)}function _parseAnimationTransitionExpr(eventStr,errors){var expressions=[],match=eventStr.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(!lang_1.isPresent(match)||match.length<4)return errors.push(new AnimationParseError("the provided "+eventStr+" is not of a supported format")),expressions;var fromState=match[1],separator=match[2],toState=match[3];expressions.push(new animation_ast_1.AnimationStateTransitionExpression(fromState,toState));var isFullAnyStateExpr=fromState==core_private_1.ANY_STATE&&toState==core_private_1.ANY_STATE;return"<"!=separator[0]||isFullAnyStateExpr||expressions.push(new animation_ast_1.AnimationStateTransitionExpression(toState,fromState)),expressions}function _normalizeAnimationEntry(entry){return lang_1.isArray(entry)?new compile_metadata_1.CompileAnimationSequenceMetadata(entry):entry}function _normalizeStyleMetadata(entry,stateStyles,errors){var normalizedStyles=[];return entry.styles.forEach(function(styleEntry){lang_1.isString(styleEntry)?collection_1.ListWrapper.addAll(normalizedStyles,_resolveStylesFromState(styleEntry,stateStyles,errors)):normalizedStyles.push(styleEntry)}),normalizedStyles}function _normalizeStyleSteps(entry,stateStyles,errors){var steps=_normalizeStyleStepEntry(entry,stateStyles,errors);return new compile_metadata_1.CompileAnimationSequenceMetadata(steps)}function _mergeAnimationStyles(stylesList,newItem){if(lang_1.isStringMap(newItem)&&stylesList.length>0){var lastIndex=stylesList.length-1,lastItem=stylesList[lastIndex];if(lang_1.isStringMap(lastItem))return void(stylesList[lastIndex]=collection_1.StringMapWrapper.merge(lastItem,newItem))}stylesList.push(newItem)}function _normalizeStyleStepEntry(entry,stateStyles,errors){var steps;if(!(entry instanceof compile_metadata_1.CompileAnimationWithStepsMetadata))return[entry];steps=entry.steps;var combinedStyles,newSteps=[];return steps.forEach(function(step){if(step instanceof compile_metadata_1.CompileAnimationStyleMetadata)lang_1.isPresent(combinedStyles)||(combinedStyles=[]),_normalizeStyleMetadata(step,stateStyles,errors).forEach(function(entry){_mergeAnimationStyles(combinedStyles,entry)});else{if(lang_1.isPresent(combinedStyles)&&(newSteps.push(new compile_metadata_1.CompileAnimationStyleMetadata(0,combinedStyles)),combinedStyles=null),step instanceof compile_metadata_1.CompileAnimationAnimateMetadata){var animateStyleValue=step.styles;animateStyleValue instanceof compile_metadata_1.CompileAnimationStyleMetadata?animateStyleValue.styles=_normalizeStyleMetadata(animateStyleValue,stateStyles,errors):animateStyleValue instanceof compile_metadata_1.CompileAnimationKeyframesSequenceMetadata&&animateStyleValue.steps.forEach(function(step){step.styles=_normalizeStyleMetadata(step,stateStyles,errors)})}else if(step instanceof compile_metadata_1.CompileAnimationWithStepsMetadata){var innerSteps=_normalizeStyleStepEntry(step,stateStyles,errors);step=step instanceof compile_metadata_1.CompileAnimationGroupMetadata?new compile_metadata_1.CompileAnimationGroupMetadata(innerSteps):new compile_metadata_1.CompileAnimationSequenceMetadata(innerSteps)}newSteps.push(step)}}),lang_1.isPresent(combinedStyles)&&newSteps.push(new compile_metadata_1.CompileAnimationStyleMetadata(0,combinedStyles)),newSteps}function _resolveStylesFromState(stateName,stateStyles,errors){var styles=[];if(":"!=stateName[0])errors.push(new AnimationParseError('Animation states via styles must be prefixed with a ":"'));else{var normalizedStateName=stateName.substring(1),value=stateStyles[normalizedStateName];lang_1.isPresent(value)?value.styles.forEach(function(stylesEntry){lang_1.isStringMap(stylesEntry)&&styles.push(stylesEntry)}):errors.push(new AnimationParseError('Unable to apply styles due to missing a state: "'+normalizedStateName+'"'))}return styles}function _parseAnimationKeyframes(keyframeSequence,currentTime,collectedStyles,stateStyles,errors){var totalEntries=keyframeSequence.steps.length,totalOffsets=0;keyframeSequence.steps.forEach(function(step){return totalOffsets+=lang_1.isPresent(step.offset)?1:0}),totalOffsets>0&&totalOffsets<totalEntries&&(errors.push(new AnimationParseError("Not all style() entries contain an offset for the provided keyframe()")),totalOffsets=totalEntries);var limit=totalEntries-1,margin=0==totalOffsets?1/limit:0,rawKeyframes=[],index=0,doSortKeyframes=!1,lastOffset=0;keyframeSequence.steps.forEach(function(styleMetadata){var offset=styleMetadata.offset,keyframeStyles={};styleMetadata.styles.forEach(function(entry){collection_1.StringMapWrapper.forEach(entry,function(value,prop){"offset"!=prop&&(keyframeStyles[prop]=value)})}),lang_1.isPresent(offset)?doSortKeyframes=doSortKeyframes||offset<lastOffset:offset=index==limit?_TERMINAL_KEYFRAME:margin*index,rawKeyframes.push([offset,keyframeStyles]),lastOffset=offset,index++}),doSortKeyframes&&collection_1.ListWrapper.sort(rawKeyframes,function(a,b){return a[0]<=b[0]?-1:1});var i,firstKeyframe=rawKeyframes[0];firstKeyframe[0]!=_INITIAL_KEYFRAME&&collection_1.ListWrapper.insert(rawKeyframes,0,firstKeyframe=[_INITIAL_KEYFRAME,{}]);var firstKeyframeStyles=firstKeyframe[1];limit=rawKeyframes.length-1;var lastKeyframe=rawKeyframes[limit];lastKeyframe[0]!=_TERMINAL_KEYFRAME&&(rawKeyframes.push(lastKeyframe=[_TERMINAL_KEYFRAME,{}]),limit++);var lastKeyframeStyles=lastKeyframe[1];for(i=1;i<=limit;i++){var entry=rawKeyframes[i],styles=entry[1];collection_1.StringMapWrapper.forEach(styles,function(value,prop){lang_1.isPresent(firstKeyframeStyles[prop])||(firstKeyframeStyles[prop]=core_private_1.FILL_STYLE_FLAG)})}for(i=limit-1;i>=0;i--){var entry=rawKeyframes[i],styles=entry[1];collection_1.StringMapWrapper.forEach(styles,function(value,prop){lang_1.isPresent(lastKeyframeStyles[prop])||(lastKeyframeStyles[prop]=value)})}return rawKeyframes.map(function(entry){return new animation_ast_1.AnimationKeyframeAst(entry[0],new animation_ast_1.AnimationStylesAst([entry[1]]))})}function _parseTransitionAnimation(entry,currentTime,collectedStyles,stateStyles,errors){var ast,playTime=0,startingTime=currentTime;if(entry instanceof compile_metadata_1.CompileAnimationWithStepsMetadata){var previousStyles,maxDuration=0,steps=[],isGroup=entry instanceof compile_metadata_1.CompileAnimationGroupMetadata;if(entry.steps.forEach(function(entry){var time=isGroup?startingTime:currentTime;if(entry instanceof compile_metadata_1.CompileAnimationStyleMetadata)return entry.styles.forEach(function(stylesEntry){var map=stylesEntry;collection_1.StringMapWrapper.forEach(map,function(value,prop){collectedStyles.insertAtTime(prop,time,value)})}),void(previousStyles=entry.styles);var innerAst=_parseTransitionAnimation(entry,time,collectedStyles,stateStyles,errors);if(lang_1.isPresent(previousStyles)){if(entry instanceof compile_metadata_1.CompileAnimationWithStepsMetadata){var startingStyles=new animation_ast_1.AnimationStylesAst(previousStyles);steps.push(new animation_ast_1.AnimationStepAst(startingStyles,[],0,0,""))}else{var innerStep=innerAst;collection_1.ListWrapper.addAll(innerStep.startingStyles.styles,previousStyles)}previousStyles=null}var astDuration=innerAst.playTime;currentTime+=astDuration,playTime+=astDuration,maxDuration=math_1.Math.max(astDuration,maxDuration),steps.push(innerAst)}),lang_1.isPresent(previousStyles)){var startingStyles=new animation_ast_1.AnimationStylesAst(previousStyles);steps.push(new animation_ast_1.AnimationStepAst(startingStyles,[],0,0,""))}isGroup?(ast=new animation_ast_1.AnimationGroupAst(steps),playTime=maxDuration,currentTime=startingTime+playTime):ast=new animation_ast_1.AnimationSequenceAst(steps);
}else if(entry instanceof compile_metadata_1.CompileAnimationAnimateMetadata){var keyframes,timings=_parseTimeExpression(entry.timings,errors),styles=entry.styles;if(styles instanceof compile_metadata_1.CompileAnimationKeyframesSequenceMetadata)keyframes=_parseAnimationKeyframes(styles,currentTime,collectedStyles,stateStyles,errors);else{var styleData=styles,offset=_TERMINAL_KEYFRAME,styleAst=new animation_ast_1.AnimationStylesAst(styleData.styles),keyframe=new animation_ast_1.AnimationKeyframeAst(offset,styleAst);keyframes=[keyframe]}ast=new animation_ast_1.AnimationStepAst(new animation_ast_1.AnimationStylesAst([]),keyframes,timings.duration,timings.delay,timings.easing),playTime=timings.duration+timings.delay,currentTime+=playTime,keyframes.forEach(function(keyframe){return keyframe.styles.styles.forEach(function(entry){return collection_1.StringMapWrapper.forEach(entry,function(value,prop){return collectedStyles.insertAtTime(prop,currentTime,value)})})})}else ast=new animation_ast_1.AnimationStepAst(null,[],0,0,"");return ast.playTime=playTime,ast.startTime=startingTime,ast}function _fillAnimationAstStartingKeyframes(ast,collectedStyles,errors){if(ast instanceof animation_ast_1.AnimationStepAst&&ast.keyframes.length>0){var keyframes=ast.keyframes;if(1==keyframes.length){var endKeyframe=keyframes[0],startKeyframe=_createStartKeyframeFromEndKeyframe(endKeyframe,ast.startTime,ast.playTime,collectedStyles,errors);ast.keyframes=[startKeyframe,endKeyframe]}}else ast instanceof animation_ast_1.AnimationWithStepsAst&&ast.steps.forEach(function(entry){return _fillAnimationAstStartingKeyframes(entry,collectedStyles,errors)})}function _parseTimeExpression(exp,errors){var duration,regex=/^([\.\d]+)(m?s)(?:\s+([\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?/i,delay=0,easing=null;if(lang_1.isString(exp)){var matches=exp.match(regex);if(null===matches)return errors.push(new AnimationParseError('The provided timing value "'+exp+'" is invalid.')),new _AnimationTimings(0,0,null);var durationMatch=lang_1.NumberWrapper.parseFloat(matches[1]),durationUnit=matches[2];"s"==durationUnit&&(durationMatch*=_ONE_SECOND),duration=math_1.Math.floor(durationMatch);var delayMatch=matches[3],delayUnit=matches[4];if(lang_1.isPresent(delayMatch)){var delayVal=lang_1.NumberWrapper.parseFloat(delayMatch);lang_1.isPresent(delayUnit)&&"s"==delayUnit&&(delayVal*=_ONE_SECOND),delay=math_1.Math.floor(delayVal)}var easingVal=matches[5];lang_1.isBlank(easingVal)||(easing=easingVal)}else duration=exp;return new _AnimationTimings(duration,delay,easing)}function _createStartKeyframeFromEndKeyframe(endKeyframe,startTime,duration,collectedStyles,errors){var values={},endTime=startTime+duration;return endKeyframe.styles.styles.forEach(function(styleData){collection_1.StringMapWrapper.forEach(styleData,function(val,prop){if("offset"!=prop){var resultEntry,nextEntry,value,resultIndex=collectedStyles.indexOfAtOrBeforeTime(prop,startTime);lang_1.isPresent(resultIndex)?(resultEntry=collectedStyles.getByIndex(prop,resultIndex),value=resultEntry.value,nextEntry=collectedStyles.getByIndex(prop,resultIndex+1)):value=core_private_1.FILL_STYLE_FLAG,lang_1.isPresent(nextEntry)&&!nextEntry.matches(endTime,val)&&errors.push(new AnimationParseError('The animated CSS property "'+prop+'" unexpectedly changes between steps "'+resultEntry.time+'ms" and "'+endTime+'ms" at "'+nextEntry.time+'ms"')),values[prop]=value}})}),new animation_ast_1.AnimationKeyframeAst(_INITIAL_KEYFRAME,new animation_ast_1.AnimationStylesAst([values]))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_private_1=require("../../core_private"),compile_metadata_1=require("../compile_metadata"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),math_1=require("../facade/math"),parse_util_1=require("../parse_util"),animation_ast_1=require("./animation_ast"),styles_collection_1=require("./styles_collection"),_INITIAL_KEYFRAME=0,_TERMINAL_KEYFRAME=1,_ONE_SECOND=1e3,AnimationParseError=function(_super){function AnimationParseError(message){_super.call(this,null,message)}return __extends(AnimationParseError,_super),AnimationParseError.prototype.toString=function(){return""+this.msg},AnimationParseError}(parse_util_1.ParseError);exports.AnimationParseError=AnimationParseError;var ParsedAnimationResult=function(){function ParsedAnimationResult(ast,errors){this.ast=ast,this.errors=errors}return ParsedAnimationResult}();exports.ParsedAnimationResult=ParsedAnimationResult,exports.parseAnimationEntry=parseAnimationEntry;var _AnimationTimings=function(){function _AnimationTimings(duration,delay,easing){this.duration=duration,this.delay=delay,this.easing=easing}return _AnimationTimings}()},{"../../core_private":64,"../compile_metadata":73,"../facade/collection":82,"../facade/lang":85,"../facade/math":86,"../parse_util":122,"./animation_ast":67,"./styles_collection":70}],70:[function(require,module,exports){"use strict";var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),StylesCollectionEntry=function(){function StylesCollectionEntry(time,value){this.time=time,this.value=value}return StylesCollectionEntry.prototype.matches=function(time,value){return time==this.time&&value==this.value},StylesCollectionEntry}();exports.StylesCollectionEntry=StylesCollectionEntry;var StylesCollection=function(){function StylesCollection(){this.styles={}}return StylesCollection.prototype.insertAtTime=function(property,time,value){var tuple=new StylesCollectionEntry(time,value),entries=this.styles[property];lang_1.isPresent(entries)||(entries=this.styles[property]=[]);for(var insertionIndex=0,i=entries.length-1;i>=0;i--)if(entries[i].time<=time){insertionIndex=i+1;break}collection_1.ListWrapper.insert(entries,insertionIndex,tuple)},StylesCollection.prototype.getByIndex=function(property,index){var items=this.styles[property];return lang_1.isPresent(items)?index>=items.length?null:items[index]:null},StylesCollection.prototype.indexOfAtOrBeforeTime=function(property,time){var entries=this.styles[property];if(lang_1.isPresent(entries))for(var i=entries.length-1;i>=0;i--)if(entries[i].time<=time)return i;return null},StylesCollection}();exports.StylesCollection=StylesCollection},{"../facade/collection":82,"../facade/lang":85}],71:[function(require,module,exports){"use strict";function assertArrayOfStrings(identifier,value){if(core_1.isDevMode()&&!lang_1.isBlank(value)){if(!lang_1.isArray(value))throw new Error("Expected '"+identifier+"' to be an array of strings.");for(var i=0;i<value.length;i+=1)if(!lang_1.isString(value[i]))throw new Error("Expected '"+identifier+"' to be an array of strings.")}}function assertInterpolationSymbols(identifier,value){if(lang_1.isPresent(value)&&(!lang_1.isArray(value)||2!=value.length))throw new Error("Expected '"+identifier+"' to be an array, [start, end].");if(core_1.isDevMode()&&!lang_1.isBlank(value)){var start_1=value[0],end_1=value[1];INTERPOLATION_BLACKLIST_REGEXPS.forEach(function(regexp){if(regexp.test(start_1)||regexp.test(end_1))throw new Error("['"+start_1+"', '"+end_1+"'] contains unusable interpolation symbol.")})}}var core_1=require("@angular/core"),lang_1=require("../src/facade/lang");exports.assertArrayOfStrings=assertArrayOfStrings;var INTERPOLATION_BLACKLIST_REGEXPS=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];exports.assertInterpolationSymbols=assertInterpolationSymbols},{"../src/facade/lang":85,"@angular/core":154}],72:[function(require,module,exports){"use strict";function isWhitespace(code){return code>=exports.$TAB&&code<=exports.$SPACE||code==exports.$NBSP}function isDigit(code){return exports.$0<=code&&code<=exports.$9}function isAsciiLetter(code){return code>=exports.$a&&code<=exports.$z||code>=exports.$A&&code<=exports.$Z}function isAsciiHexDigit(code){return code>=exports.$a&&code<=exports.$f||code>=exports.$A&&code<=exports.$F||isDigit(code)}exports.$EOF=0,exports.$TAB=9,exports.$LF=10,exports.$VTAB=11,exports.$FF=12,exports.$CR=13,exports.$SPACE=32,exports.$BANG=33,exports.$DQ=34,exports.$HASH=35,exports.$$=36,exports.$PERCENT=37,exports.$AMPERSAND=38,exports.$SQ=39,exports.$LPAREN=40,exports.$RPAREN=41,exports.$STAR=42,exports.$PLUS=43,exports.$COMMA=44,exports.$MINUS=45,exports.$PERIOD=46,exports.$SLASH=47,exports.$COLON=58,exports.$SEMICOLON=59,exports.$LT=60,exports.$EQ=61,exports.$GT=62,exports.$QUESTION=63,exports.$0=48,exports.$9=57,exports.$A=65,exports.$E=69,exports.$F=70,exports.$X=88,exports.$Z=90,exports.$LBRACKET=91,exports.$BACKSLASH=92,exports.$RBRACKET=93,exports.$CARET=94,exports.$_=95,exports.$a=97,exports.$e=101,exports.$f=102,exports.$n=110,exports.$r=114,exports.$t=116,exports.$u=117,exports.$v=118,exports.$x=120,exports.$z=122,exports.$LBRACE=123,exports.$BAR=124,exports.$RBRACE=125,exports.$NBSP=160,exports.$PIPE=124,exports.$TILDA=126,exports.$AT=64,exports.$BT=96,exports.isWhitespace=isWhitespace,exports.isDigit=isDigit,exports.isAsciiLetter=isAsciiLetter,exports.isAsciiHexDigit=isAsciiHexDigit},{}],73:[function(require,module,exports){"use strict";function createHostComponentMeta(compMeta){var template=selector_1.CssSelector.parse(compMeta.selector)[0].getMatchingElementTemplate();return CompileDirectiveMetadata.create({type:new CompileTypeMetadata({runtime:Object,name:compMeta.type.name+"_Host",moduleUrl:compMeta.type.moduleUrl,isHost:!0}),template:new CompileTemplateMetadata({template:template,templateUrl:"",styles:[],styleUrls:[],ngContentSelectors:[],animations:[]}),changeDetection:core_1.ChangeDetectionStrategy.Default,inputs:[],outputs:[],host:{},isComponent:!0,selector:"*",providers:[],viewProviders:[],queries:[],viewQueries:[]})}function removeIdentifierDuplicates(items){var map=new CompileIdentifierMap;return items.forEach(function(item){map.get(item)||map.add(item,item)}),map.keys()}function _normalizeArray(obj){return lang_1.isPresent(obj)?obj:[]}function isStaticSymbol(value){return lang_1.isStringMap(value)&&lang_1.isPresent(value.name)&&lang_1.isPresent(value.filePath)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),core_private_1=require("../core_private"),collection_1=require("./facade/collection"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),selector_1=require("./selector"),url_resolver_1=require("./url_resolver"),util_1=require("./util"),HOST_REG_EXP=/^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))|(\@[-\w]+)$/,UNDEFINED=new Object,CompileMetadataWithIdentifier=function(){function CompileMetadataWithIdentifier(){}return Object.defineProperty(CompileMetadataWithIdentifier.prototype,"identifier",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(CompileMetadataWithIdentifier.prototype,"runtimeCacheKey",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(CompileMetadataWithIdentifier.prototype,"assetCacheKey",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),CompileMetadataWithIdentifier.prototype.equalsTo=function(id2){return exceptions_1.unimplemented()},CompileMetadataWithIdentifier}();exports.CompileMetadataWithIdentifier=CompileMetadataWithIdentifier;var CompileAnimationEntryMetadata=function(){function CompileAnimationEntryMetadata(name,definitions){void 0===name&&(name=null),void 0===definitions&&(definitions=null),this.name=name,this.definitions=definitions}return CompileAnimationEntryMetadata}();exports.CompileAnimationEntryMetadata=CompileAnimationEntryMetadata;var CompileAnimationStateMetadata=function(){function CompileAnimationStateMetadata(){}return CompileAnimationStateMetadata}();exports.CompileAnimationStateMetadata=CompileAnimationStateMetadata;var CompileAnimationStateDeclarationMetadata=function(_super){function CompileAnimationStateDeclarationMetadata(stateNameExpr,styles){_super.call(this),this.stateNameExpr=stateNameExpr,this.styles=styles}return __extends(CompileAnimationStateDeclarationMetadata,_super),CompileAnimationStateDeclarationMetadata}(CompileAnimationStateMetadata);exports.CompileAnimationStateDeclarationMetadata=CompileAnimationStateDeclarationMetadata;var CompileAnimationStateTransitionMetadata=function(_super){function CompileAnimationStateTransitionMetadata(stateChangeExpr,steps){_super.call(this),this.stateChangeExpr=stateChangeExpr,this.steps=steps}return __extends(CompileAnimationStateTransitionMetadata,_super),CompileAnimationStateTransitionMetadata}(CompileAnimationStateMetadata);exports.CompileAnimationStateTransitionMetadata=CompileAnimationStateTransitionMetadata;var CompileAnimationMetadata=function(){function CompileAnimationMetadata(){}return CompileAnimationMetadata}();exports.CompileAnimationMetadata=CompileAnimationMetadata;var CompileAnimationKeyframesSequenceMetadata=function(_super){function CompileAnimationKeyframesSequenceMetadata(steps){void 0===steps&&(steps=[]),_super.call(this),this.steps=steps}return __extends(CompileAnimationKeyframesSequenceMetadata,_super),CompileAnimationKeyframesSequenceMetadata}(CompileAnimationMetadata);exports.CompileAnimationKeyframesSequenceMetadata=CompileAnimationKeyframesSequenceMetadata;var CompileAnimationStyleMetadata=function(_super){function CompileAnimationStyleMetadata(offset,styles){void 0===styles&&(styles=null),_super.call(this),this.offset=offset,this.styles=styles}return __extends(CompileAnimationStyleMetadata,_super),CompileAnimationStyleMetadata}(CompileAnimationMetadata);exports.CompileAnimationStyleMetadata=CompileAnimationStyleMetadata;var CompileAnimationAnimateMetadata=function(_super){function CompileAnimationAnimateMetadata(timings,styles){void 0===timings&&(timings=0),void 0===styles&&(styles=null),_super.call(this),this.timings=timings,this.styles=styles}return __extends(CompileAnimationAnimateMetadata,_super),CompileAnimationAnimateMetadata}(CompileAnimationMetadata);exports.CompileAnimationAnimateMetadata=CompileAnimationAnimateMetadata;var CompileAnimationWithStepsMetadata=function(_super){function CompileAnimationWithStepsMetadata(steps){void 0===steps&&(steps=null),_super.call(this),this.steps=steps}return __extends(CompileAnimationWithStepsMetadata,_super),CompileAnimationWithStepsMetadata}(CompileAnimationMetadata);exports.CompileAnimationWithStepsMetadata=CompileAnimationWithStepsMetadata;var CompileAnimationSequenceMetadata=function(_super){function CompileAnimationSequenceMetadata(steps){void 0===steps&&(steps=null),_super.call(this,steps)}return __extends(CompileAnimationSequenceMetadata,_super),CompileAnimationSequenceMetadata}(CompileAnimationWithStepsMetadata);exports.CompileAnimationSequenceMetadata=CompileAnimationSequenceMetadata;var CompileAnimationGroupMetadata=function(_super){function CompileAnimationGroupMetadata(steps){void 0===steps&&(steps=null),_super.call(this,steps)}return __extends(CompileAnimationGroupMetadata,_super),CompileAnimationGroupMetadata}(CompileAnimationWithStepsMetadata);exports.CompileAnimationGroupMetadata=CompileAnimationGroupMetadata;var CompileIdentifierMetadata=function(){function CompileIdentifierMetadata(_a){var _b=void 0===_a?{}:_a,runtime=_b.runtime,name=_b.name,moduleUrl=_b.moduleUrl,prefix=_b.prefix,value=_b.value;this._assetCacheKey=UNDEFINED,this.runtime=runtime,this.name=name,this.prefix=prefix,this.moduleUrl=moduleUrl,this.value=value}return Object.defineProperty(CompileIdentifierMetadata.prototype,"identifier",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(CompileIdentifierMetadata.prototype,"runtimeCacheKey",{get:function(){return this.identifier.runtime},enumerable:!0,configurable:!0}),Object.defineProperty(CompileIdentifierMetadata.prototype,"assetCacheKey",{get:function(){if(this._assetCacheKey===UNDEFINED)if(lang_1.isPresent(this.moduleUrl)&&lang_1.isPresent(url_resolver_1.getUrlScheme(this.moduleUrl))){var uri=core_private_1.reflector.importUri({filePath:this.moduleUrl,name:this.name});this._assetCacheKey=this.name+"|"+uri}else this._assetCacheKey=null;return this._assetCacheKey},enumerable:!0,configurable:!0}),CompileIdentifierMetadata.prototype.equalsTo=function(id2){var rk=this.runtimeCacheKey,ak=this.assetCacheKey;return lang_1.isPresent(rk)&&rk==id2.runtimeCacheKey||lang_1.isPresent(ak)&&ak==id2.assetCacheKey},CompileIdentifierMetadata}();exports.CompileIdentifierMetadata=CompileIdentifierMetadata;var CompileDiDependencyMetadata=function(){function CompileDiDependencyMetadata(_a){var _b=void 0===_a?{}:_a,isAttribute=_b.isAttribute,isSelf=_b.isSelf,isHost=_b.isHost,isSkipSelf=_b.isSkipSelf,isOptional=_b.isOptional,isValue=_b.isValue,query=_b.query,viewQuery=_b.viewQuery,token=_b.token,value=_b.value;this.isAttribute=lang_1.normalizeBool(isAttribute),this.isSelf=lang_1.normalizeBool(isSelf),this.isHost=lang_1.normalizeBool(isHost),this.isSkipSelf=lang_1.normalizeBool(isSkipSelf),this.isOptional=lang_1.normalizeBool(isOptional),this.isValue=lang_1.normalizeBool(isValue),this.query=query,this.viewQuery=viewQuery,this.token=token,this.value=value}return CompileDiDependencyMetadata}();exports.CompileDiDependencyMetadata=CompileDiDependencyMetadata;var CompileProviderMetadata=function(){function CompileProviderMetadata(_a){var token=_a.token,useClass=_a.useClass,useValue=_a.useValue,useExisting=_a.useExisting,useFactory=_a.useFactory,deps=_a.deps,multi=_a.multi;this.token=token,this.useClass=useClass,this.useValue=useValue,this.useExisting=useExisting,this.useFactory=useFactory,this.deps=lang_1.normalizeBlank(deps),this.multi=lang_1.normalizeBool(multi)}return CompileProviderMetadata}();exports.CompileProviderMetadata=CompileProviderMetadata;var CompileFactoryMetadata=function(_super){function CompileFactoryMetadata(_a){var runtime=_a.runtime,name=_a.name,moduleUrl=_a.moduleUrl,prefix=_a.prefix,diDeps=_a.diDeps,value=_a.value;_super.call(this,{runtime:runtime,name:name,prefix:prefix,moduleUrl:moduleUrl,value:value}),this.diDeps=_normalizeArray(diDeps)}return __extends(CompileFactoryMetadata,_super),CompileFactoryMetadata}(CompileIdentifierMetadata);exports.CompileFactoryMetadata=CompileFactoryMetadata;var CompileTokenMetadata=function(){function CompileTokenMetadata(_a){var value=_a.value,identifier=_a.identifier,identifierIsInstance=_a.identifierIsInstance;this.value=value,this.identifier=identifier,this.identifierIsInstance=lang_1.normalizeBool(identifierIsInstance)}return Object.defineProperty(CompileTokenMetadata.prototype,"runtimeCacheKey",{get:function(){return lang_1.isPresent(this.identifier)?this.identifier.runtimeCacheKey:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(CompileTokenMetadata.prototype,"assetCacheKey",{get:function(){return lang_1.isPresent(this.identifier)?this.identifier.assetCacheKey:this.value},enumerable:!0,configurable:!0}),CompileTokenMetadata.prototype.equalsTo=function(token2){var rk=this.runtimeCacheKey,ak=this.assetCacheKey;return lang_1.isPresent(rk)&&rk==token2.runtimeCacheKey||lang_1.isPresent(ak)&&ak==token2.assetCacheKey},Object.defineProperty(CompileTokenMetadata.prototype,"name",{get:function(){return lang_1.isPresent(this.value)?util_1.sanitizeIdentifier(this.value):this.identifier.name},enumerable:!0,configurable:!0}),CompileTokenMetadata}();exports.CompileTokenMetadata=CompileTokenMetadata;var CompileIdentifierMap=function(){function CompileIdentifierMap(){this._valueMap=new Map,this._values=[],this._tokens=[]}return CompileIdentifierMap.prototype.add=function(token,value){var existing=this.get(token);if(lang_1.isPresent(existing))throw new exceptions_1.BaseException("Cannot overwrite in a CompileIdentifierMap! Token: "+token.identifier.name);this._tokens.push(token),this._values.push(value);var rk=token.runtimeCacheKey;lang_1.isPresent(rk)&&this._valueMap.set(rk,value);var ak=token.assetCacheKey;lang_1.isPresent(ak)&&this._valueMap.set(ak,value)},CompileIdentifierMap.prototype.get=function(token){var result,rk=token.runtimeCacheKey,ak=token.assetCacheKey;return lang_1.isPresent(rk)&&(result=this._valueMap.get(rk)),lang_1.isBlank(result)&&lang_1.isPresent(ak)&&(result=this._valueMap.get(ak)),result},CompileIdentifierMap.prototype.keys=function(){return this._tokens},CompileIdentifierMap.prototype.values=function(){return this._values},Object.defineProperty(CompileIdentifierMap.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),CompileIdentifierMap}();exports.CompileIdentifierMap=CompileIdentifierMap;var CompileTypeMetadata=function(_super){function CompileTypeMetadata(_a){var _b=void 0===_a?{}:_a,runtime=_b.runtime,name=_b.name,moduleUrl=_b.moduleUrl,prefix=_b.prefix,isHost=_b.isHost,value=_b.value,diDeps=_b.diDeps,lifecycleHooks=_b.lifecycleHooks;_super.call(this,{runtime:runtime,name:name,moduleUrl:moduleUrl,prefix:prefix,value:value}),this.isHost=lang_1.normalizeBool(isHost),this.diDeps=_normalizeArray(diDeps),this.lifecycleHooks=_normalizeArray(lifecycleHooks)}return __extends(CompileTypeMetadata,_super),CompileTypeMetadata}(CompileIdentifierMetadata);exports.CompileTypeMetadata=CompileTypeMetadata;var CompileQueryMetadata=function(){function CompileQueryMetadata(_a){var _b=void 0===_a?{}:_a,selectors=_b.selectors,descendants=_b.descendants,first=_b.first,propertyName=_b.propertyName,read=_b.read;this.selectors=selectors,this.descendants=lang_1.normalizeBool(descendants),this.first=lang_1.normalizeBool(first),this.propertyName=propertyName,this.read=read}return CompileQueryMetadata}();exports.CompileQueryMetadata=CompileQueryMetadata;var CompileStylesheetMetadata=function(){function CompileStylesheetMetadata(_a){var _b=void 0===_a?{}:_a,moduleUrl=_b.moduleUrl,styles=_b.styles,styleUrls=_b.styleUrls;this.moduleUrl=moduleUrl,this.styles=_normalizeArray(styles),this.styleUrls=_normalizeArray(styleUrls)}return CompileStylesheetMetadata}();exports.CompileStylesheetMetadata=CompileStylesheetMetadata;var CompileTemplateMetadata=function(){function CompileTemplateMetadata(_a){var _b=void 0===_a?{}:_a,encapsulation=_b.encapsulation,template=_b.template,templateUrl=_b.templateUrl,styles=_b.styles,styleUrls=_b.styleUrls,externalStylesheets=_b.externalStylesheets,animations=_b.animations,ngContentSelectors=_b.ngContentSelectors,interpolation=_b.interpolation;if(this.encapsulation=encapsulation,this.template=template,this.templateUrl=templateUrl,this.styles=_normalizeArray(styles),this.styleUrls=_normalizeArray(styleUrls),this.externalStylesheets=_normalizeArray(externalStylesheets),this.animations=lang_1.isPresent(animations)?collection_1.ListWrapper.flatten(animations):[],this.ngContentSelectors=lang_1.isPresent(ngContentSelectors)?ngContentSelectors:[],lang_1.isPresent(interpolation)&&2!=interpolation.length)throw new exceptions_1.BaseException("'interpolation' should have a start and an end symbol.");this.interpolation=interpolation}return CompileTemplateMetadata}();exports.CompileTemplateMetadata=CompileTemplateMetadata;var CompileDirectiveMetadata=function(){function CompileDirectiveMetadata(_a){var _b=void 0===_a?{}:_a,type=_b.type,isComponent=_b.isComponent,selector=_b.selector,exportAs=_b.exportAs,changeDetection=_b.changeDetection,inputs=_b.inputs,outputs=_b.outputs,hostListeners=_b.hostListeners,hostProperties=_b.hostProperties,hostAttributes=_b.hostAttributes,providers=_b.providers,viewProviders=_b.viewProviders,queries=_b.queries,viewQueries=_b.viewQueries,entryComponents=_b.entryComponents,viewDirectives=_b.viewDirectives,viewPipes=_b.viewPipes,template=_b.template;this.type=type,this.isComponent=isComponent,this.selector=selector,this.exportAs=exportAs,this.changeDetection=changeDetection,this.inputs=inputs,this.outputs=outputs,this.hostListeners=hostListeners,this.hostProperties=hostProperties,this.hostAttributes=hostAttributes,this.providers=_normalizeArray(providers),this.viewProviders=_normalizeArray(viewProviders),this.queries=_normalizeArray(queries),this.viewQueries=_normalizeArray(viewQueries),this.entryComponents=_normalizeArray(entryComponents),this.viewDirectives=_normalizeArray(viewDirectives),this.viewPipes=_normalizeArray(viewPipes),this.template=template}return CompileDirectiveMetadata.create=function(_a){var _b=void 0===_a?{}:_a,type=_b.type,isComponent=_b.isComponent,selector=_b.selector,exportAs=_b.exportAs,changeDetection=_b.changeDetection,inputs=_b.inputs,outputs=_b.outputs,host=_b.host,providers=_b.providers,viewProviders=_b.viewProviders,queries=_b.queries,viewQueries=_b.viewQueries,entryComponents=_b.entryComponents,viewDirectives=_b.viewDirectives,viewPipes=_b.viewPipes,template=_b.template,hostListeners={},hostProperties={},hostAttributes={};lang_1.isPresent(host)&&collection_1.StringMapWrapper.forEach(host,function(value,key){var matches=key.match(HOST_REG_EXP);null===matches?hostAttributes[key]=value:lang_1.isPresent(matches[1])?hostProperties[matches[1]]=value:lang_1.isPresent(matches[2])?hostListeners[matches[2]]=value:lang_1.isPresent(matches[3])&&(hostProperties["@"+matches[3]]=value)});var inputsMap={};lang_1.isPresent(inputs)&&inputs.forEach(function(bindConfig){var parts=util_1.splitAtColon(bindConfig,[bindConfig,bindConfig]);inputsMap[parts[0]]=parts[1]});var outputsMap={};return lang_1.isPresent(outputs)&&outputs.forEach(function(bindConfig){var parts=util_1.splitAtColon(bindConfig,[bindConfig,bindConfig]);outputsMap[parts[0]]=parts[1]}),new CompileDirectiveMetadata({type:type,isComponent:lang_1.normalizeBool(isComponent),selector:selector,exportAs:exportAs,changeDetection:changeDetection,inputs:inputsMap,outputs:outputsMap,hostListeners:hostListeners,hostProperties:hostProperties,hostAttributes:hostAttributes,providers:providers,viewProviders:viewProviders,queries:queries,viewQueries:viewQueries,entryComponents:entryComponents,viewDirectives:viewDirectives,viewPipes:viewPipes,template:template})},Object.defineProperty(CompileDirectiveMetadata.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(CompileDirectiveMetadata.prototype,"runtimeCacheKey",{get:function(){return this.type.runtimeCacheKey},enumerable:!0,configurable:!0}),Object.defineProperty(CompileDirectiveMetadata.prototype,"assetCacheKey",{get:function(){return this.type.assetCacheKey},enumerable:!0,configurable:!0}),CompileDirectiveMetadata.prototype.equalsTo=function(other){return this.type.equalsTo(other.identifier)},CompileDirectiveMetadata}();exports.CompileDirectiveMetadata=CompileDirectiveMetadata,exports.createHostComponentMeta=createHostComponentMeta;var CompilePipeMetadata=function(){function CompilePipeMetadata(_a){var _b=void 0===_a?{}:_a,type=_b.type,name=_b.name,pure=_b.pure;this.type=type,this.name=name,this.pure=lang_1.normalizeBool(pure)}return Object.defineProperty(CompilePipeMetadata.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(CompilePipeMetadata.prototype,"runtimeCacheKey",{get:function(){return this.type.runtimeCacheKey},enumerable:!0,configurable:!0}),Object.defineProperty(CompilePipeMetadata.prototype,"assetCacheKey",{get:function(){return this.type.assetCacheKey},enumerable:!0,configurable:!0}),CompilePipeMetadata.prototype.equalsTo=function(other){return this.type.equalsTo(other.identifier)},CompilePipeMetadata}();exports.CompilePipeMetadata=CompilePipeMetadata;var CompileNgModuleMetadata=function(){function CompileNgModuleMetadata(_a){var _b=void 0===_a?{}:_a,type=_b.type,providers=_b.providers,declaredDirectives=_b.declaredDirectives,exportedDirectives=_b.exportedDirectives,declaredPipes=_b.declaredPipes,exportedPipes=_b.exportedPipes,entryComponents=_b.entryComponents,bootstrapComponents=_b.bootstrapComponents,importedModules=_b.importedModules,exportedModules=_b.exportedModules,schemas=_b.schemas,transitiveModule=_b.transitiveModule;this.type=type,this.declaredDirectives=_normalizeArray(declaredDirectives),this.exportedDirectives=_normalizeArray(exportedDirectives),this.declaredPipes=_normalizeArray(declaredPipes),this.exportedPipes=_normalizeArray(exportedPipes),this.providers=_normalizeArray(providers),this.entryComponents=_normalizeArray(entryComponents),this.bootstrapComponents=_normalizeArray(bootstrapComponents),this.importedModules=_normalizeArray(importedModules),this.exportedModules=_normalizeArray(exportedModules),this.schemas=_normalizeArray(schemas),this.transitiveModule=transitiveModule}return Object.defineProperty(CompileNgModuleMetadata.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(CompileNgModuleMetadata.prototype,"runtimeCacheKey",{get:function(){return this.type.runtimeCacheKey},enumerable:!0,configurable:!0}),Object.defineProperty(CompileNgModuleMetadata.prototype,"assetCacheKey",{get:function(){return this.type.assetCacheKey},enumerable:!0,configurable:!0}),CompileNgModuleMetadata.prototype.equalsTo=function(other){return this.type.equalsTo(other.identifier)},CompileNgModuleMetadata}();exports.CompileNgModuleMetadata=CompileNgModuleMetadata;var TransitiveCompileNgModuleMetadata=function(){function TransitiveCompileNgModuleMetadata(modules,providers,entryComponents,directives,pipes){var _this=this;this.modules=modules,this.providers=providers,this.entryComponents=entryComponents,this.directives=directives,this.pipes=pipes,this.directivesSet=new Set,this.pipesSet=new Set,directives.forEach(function(dir){return _this.directivesSet.add(dir.type.runtime)}),pipes.forEach(function(pipe){return _this.pipesSet.add(pipe.type.runtime)})}return TransitiveCompileNgModuleMetadata}();exports.TransitiveCompileNgModuleMetadata=TransitiveCompileNgModuleMetadata,exports.removeIdentifierDuplicates=removeIdentifierDuplicates,exports.isStaticSymbol=isStaticSymbol},{"../core_private":64,"./facade/collection":82,"./facade/exceptions":84,"./facade/lang":85,"./selector":129,"./url_resolver":136,"./util":137,"@angular/core":154}],74:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}function analyzeAppProvidersForDeprecatedConfiguration(appProviders){void 0===appProviders&&(appProviders=[]);var useDebug,useJit,defaultEncapsulation,platformDirectives=[],platformPipes=[],compilerProviders=[],deprecationMessages=[],tempInj=core_1.ReflectiveInjector.resolveAndCreate(appProviders),compilerConfig=tempInj.get(config_2.CompilerConfig,null);compilerConfig?(platformDirectives=compilerConfig.platformDirectives,platformPipes=compilerConfig.platformPipes,useJit=compilerConfig.useJit,useDebug=compilerConfig.genDebugInfo,defaultEncapsulation=compilerConfig.defaultEncapsulation,deprecationMessages.push('Passing CompilerConfig as a regular provider is deprecated. Use the "compilerOptions" parameter of "bootstrap()" or use a custom "CompilerFactory" platform provider instead.')):(platformDirectives=tempInj.get(core_1.PLATFORM_DIRECTIVES,[]),platformPipes=tempInj.get(core_1.PLATFORM_PIPES,[])),platformDirectives=collection_1.ListWrapper.flatten(platformDirectives),platformPipes=collection_1.ListWrapper.flatten(platformPipes);var xhr=tempInj.get(xhr_2.XHR,null);xhr&&(compilerProviders.push([{provide:xhr_2.XHR,useValue:xhr}]),deprecationMessages.push('Passing XHR as regular provider is deprecated. Pass the provider via "compilerOptions" instead.')),platformDirectives.length>0&&deprecationMessages.push("The PLATFORM_DIRECTIVES provider and CompilerConfig.platformDirectives is deprecated. Add the directives to an NgModule instead! "+("(Directives: "+platformDirectives.map(function(type){return lang_1.stringify(type)})+")")),platformPipes.length>0&&deprecationMessages.push("The PLATFORM_PIPES provider and CompilerConfig.platformPipes is deprecated. Add the pipes to an NgModule instead! "+("(Pipes: "+platformPipes.map(function(type){
return lang_1.stringify(type)})+")"));var compilerOptions={useJit:useJit,useDebug:useDebug,defaultEncapsulation:defaultEncapsulation,providers:compilerProviders},DynamicComponent=function(){function DynamicComponent(){}return DynamicComponent.decorators=[{type:core_1.Component,args:[{directives:platformDirectives,pipes:platformPipes,template:""}]}],DynamicComponent}();return{compilerOptions:compilerOptions,moduleDeclarations:[DynamicComponent],deprecationMessages:deprecationMessages}}function _initReflector(){core_private_1.reflector.reflectionCapabilities=new core_private_1.ReflectionCapabilities}function _mergeOptions(optionsArr){return{useDebug:_lastDefined(optionsArr.map(function(options){return options.useDebug})),useJit:_lastDefined(optionsArr.map(function(options){return options.useJit})),defaultEncapsulation:_lastDefined(optionsArr.map(function(options){return options.defaultEncapsulation})),providers:_mergeArrays(optionsArr.map(function(options){return options.providers}))}}function _lastDefined(args){for(var i=args.length-1;i>=0;i--)if(void 0!==args[i])return args[i]}function _mergeArrays(parts){var result=[];return parts.forEach(function(part){return part&&result.push.apply(result,part)}),result}var core_1=require("@angular/core");__export(require("./template_parser/template_ast"));var template_parser_1=require("./template_parser/template_parser");exports.TEMPLATE_TRANSFORMS=template_parser_1.TEMPLATE_TRANSFORMS;var config_1=require("./config");exports.CompilerConfig=config_1.CompilerConfig,exports.RenderTypes=config_1.RenderTypes,__export(require("./compile_metadata")),__export(require("./offline_compiler"));var runtime_compiler_1=require("./runtime_compiler");exports.RuntimeCompiler=runtime_compiler_1.RuntimeCompiler,__export(require("./url_resolver")),__export(require("./xhr"));var directive_resolver_1=require("./directive_resolver");exports.DirectiveResolver=directive_resolver_1.DirectiveResolver;var pipe_resolver_1=require("./pipe_resolver");exports.PipeResolver=pipe_resolver_1.PipeResolver;var ng_module_resolver_1=require("./ng_module_resolver");exports.NgModuleResolver=ng_module_resolver_1.NgModuleResolver;var lang_1=require("./facade/lang"),collection_1=require("./facade/collection"),template_parser_2=require("./template_parser/template_parser"),html_parser_1=require("./ml_parser/html_parser"),directive_normalizer_1=require("./directive_normalizer"),metadata_resolver_1=require("./metadata_resolver"),style_compiler_1=require("./style_compiler"),view_compiler_1=require("./view_compiler/view_compiler"),ng_module_compiler_1=require("./ng_module_compiler"),config_2=require("./config"),runtime_compiler_2=require("./runtime_compiler"),element_schema_registry_1=require("./schema/element_schema_registry"),dom_element_schema_registry_1=require("./schema/dom_element_schema_registry"),url_resolver_2=require("./url_resolver"),parser_1=require("./expression_parser/parser"),lexer_1=require("./expression_parser/lexer"),directive_resolver_2=require("./directive_resolver"),pipe_resolver_2=require("./pipe_resolver"),ng_module_resolver_2=require("./ng_module_resolver"),core_private_1=require("../core_private"),xhr_2=require("./xhr"),_NO_XHR={get:function(url){throw new Error("No XHR implementation has been provided. Can't read the url \""+url+'"')}};exports.COMPILER_PROVIDERS=[{provide:core_private_1.Reflector,useValue:core_private_1.reflector},{provide:core_private_1.ReflectorReader,useExisting:core_private_1.Reflector},{provide:xhr_2.XHR,useValue:_NO_XHR},core_private_1.Console,lexer_1.Lexer,parser_1.Parser,html_parser_1.HtmlParser,template_parser_2.TemplateParser,directive_normalizer_1.DirectiveNormalizer,metadata_resolver_1.CompileMetadataResolver,url_resolver_2.DEFAULT_PACKAGE_URL_PROVIDER,style_compiler_1.StyleCompiler,view_compiler_1.ViewCompiler,ng_module_compiler_1.NgModuleCompiler,{provide:config_2.CompilerConfig,useValue:new config_2.CompilerConfig},runtime_compiler_2.RuntimeCompiler,{provide:core_1.Compiler,useExisting:runtime_compiler_2.RuntimeCompiler},dom_element_schema_registry_1.DomElementSchemaRegistry,{provide:element_schema_registry_1.ElementSchemaRegistry,useExisting:dom_element_schema_registry_1.DomElementSchemaRegistry},url_resolver_2.UrlResolver,directive_resolver_2.DirectiveResolver,pipe_resolver_2.PipeResolver,ng_module_resolver_2.NgModuleResolver],exports.analyzeAppProvidersForDeprecatedConfiguration=analyzeAppProvidersForDeprecatedConfiguration;var RuntimeCompilerFactory=function(){function RuntimeCompilerFactory(defaultOptions){this._defaultOptions=[{useDebug:core_1.isDevMode(),useJit:!0,defaultEncapsulation:core_1.ViewEncapsulation.Emulated}].concat(defaultOptions)}return RuntimeCompilerFactory.prototype.createCompiler=function(options){void 0===options&&(options=[]);var mergedOptions=_mergeOptions(this._defaultOptions.concat(options)),injector=core_1.ReflectiveInjector.resolveAndCreate([exports.COMPILER_PROVIDERS,{provide:config_2.CompilerConfig,useFactory:function(){return new config_2.CompilerConfig({genDebugInfo:mergedOptions.useDebug,useJit:mergedOptions.useJit,defaultEncapsulation:mergedOptions.defaultEncapsulation,logBindingUpdate:mergedOptions.useDebug})},deps:[]},mergedOptions.providers]);return injector.get(core_1.Compiler)},RuntimeCompilerFactory.decorators=[{type:core_1.Injectable}],RuntimeCompilerFactory.ctorParameters=[{type:Array,decorators:[{type:core_1.Inject,args:[core_1.COMPILER_OPTIONS]}]}],RuntimeCompilerFactory}();exports.RuntimeCompilerFactory=RuntimeCompilerFactory,exports.platformCoreDynamic=core_1.createPlatformFactory(core_1.platformCore,"coreDynamic",[{provide:core_1.COMPILER_OPTIONS,useValue:{},multi:!0},{provide:core_1.CompilerFactory,useClass:RuntimeCompilerFactory},{provide:core_1.PLATFORM_INITIALIZER,useValue:_initReflector,multi:!0}])},{"../core_private":64,"./compile_metadata":73,"./config":75,"./directive_normalizer":76,"./directive_resolver":77,"./expression_parser/lexer":79,"./expression_parser/parser":80,"./facade/collection":82,"./facade/lang":85,"./metadata_resolver":100,"./ml_parser/html_parser":102,"./ng_module_compiler":111,"./ng_module_resolver":112,"./offline_compiler":113,"./pipe_resolver":123,"./runtime_compiler":125,"./schema/dom_element_schema_registry":126,"./schema/element_schema_registry":128,"./style_compiler":131,"./template_parser/template_ast":133,"./template_parser/template_parser":134,"./url_resolver":136,"./view_compiler/view_compiler":152,"./xhr":153,"@angular/core":154}],75:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),exceptions_1=require("../src/facade/exceptions"),identifiers_1=require("./identifiers"),CompilerConfig=function(){function CompilerConfig(_a){var _b=void 0===_a?{}:_a,_c=_b.renderTypes,renderTypes=void 0===_c?new DefaultRenderTypes:_c,_d=_b.defaultEncapsulation,defaultEncapsulation=void 0===_d?core_1.ViewEncapsulation.Emulated:_d,genDebugInfo=_b.genDebugInfo,logBindingUpdate=_b.logBindingUpdate,_e=_b.useJit,useJit=void 0===_e||_e,_f=_b.deprecatedPlatformDirectives,deprecatedPlatformDirectives=void 0===_f?[]:_f,_g=_b.deprecatedPlatformPipes,deprecatedPlatformPipes=void 0===_g?[]:_g;this.renderTypes=renderTypes,this.defaultEncapsulation=defaultEncapsulation,this._genDebugInfo=genDebugInfo,this._logBindingUpdate=logBindingUpdate,this.useJit=useJit,this.platformDirectives=deprecatedPlatformDirectives,this.platformPipes=deprecatedPlatformPipes}return Object.defineProperty(CompilerConfig.prototype,"genDebugInfo",{get:function(){return void 0===this._genDebugInfo?core_1.isDevMode():this._genDebugInfo},enumerable:!0,configurable:!0}),Object.defineProperty(CompilerConfig.prototype,"logBindingUpdate",{get:function(){return void 0===this._logBindingUpdate?core_1.isDevMode():this._logBindingUpdate},enumerable:!0,configurable:!0}),CompilerConfig}();exports.CompilerConfig=CompilerConfig;var RenderTypes=function(){function RenderTypes(){}return Object.defineProperty(RenderTypes.prototype,"renderer",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderText",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderElement",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderComment",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderNode",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderTypes.prototype,"renderEvent",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),RenderTypes}();exports.RenderTypes=RenderTypes;var DefaultRenderTypes=function(){function DefaultRenderTypes(){this.renderer=identifiers_1.Identifiers.Renderer,this.renderText=null,this.renderElement=null,this.renderComment=null,this.renderNode=null,this.renderEvent=null}return DefaultRenderTypes}();exports.DefaultRenderTypes=DefaultRenderTypes},{"../src/facade/exceptions":84,"./identifiers":98,"@angular/core":154}],76:[function(require,module,exports){"use strict";function _cloneDirectiveWithTemplate(directive,template){return new compile_metadata_1.CompileDirectiveMetadata({type:directive.type,isComponent:directive.isComponent,selector:directive.selector,exportAs:directive.exportAs,changeDetection:directive.changeDetection,inputs:directive.inputs,outputs:directive.outputs,hostListeners:directive.hostListeners,hostProperties:directive.hostProperties,hostAttributes:directive.hostAttributes,providers:directive.providers,viewProviders:directive.viewProviders,queries:directive.queries,viewQueries:directive.viewQueries,entryComponents:directive.entryComponents,template:template})}var core_1=require("@angular/core"),compile_metadata_1=require("./compile_metadata"),config_1=require("./config"),collection_1=require("./facade/collection"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),html=require("./ml_parser/ast"),html_parser_1=require("./ml_parser/html_parser"),interpolation_config_1=require("./ml_parser/interpolation_config"),style_url_resolver_1=require("./style_url_resolver"),template_preparser_1=require("./template_parser/template_preparser"),url_resolver_1=require("./url_resolver"),util_1=require("./util"),xhr_1=require("./xhr"),DirectiveNormalizer=function(){function DirectiveNormalizer(_xhr,_urlResolver,_htmlParser,_config){this._xhr=_xhr,this._urlResolver=_urlResolver,this._htmlParser=_htmlParser,this._config=_config,this._xhrCache=new Map}return DirectiveNormalizer.prototype.clearCache=function(){this._xhrCache.clear()},DirectiveNormalizer.prototype.clearCacheFor=function(normalizedDirective){var _this=this;normalizedDirective.isComponent&&(this._xhrCache.delete(normalizedDirective.template.templateUrl),normalizedDirective.template.externalStylesheets.forEach(function(stylesheet){_this._xhrCache.delete(stylesheet.moduleUrl)}))},DirectiveNormalizer.prototype._fetch=function(url){var result=this._xhrCache.get(url);return result||(result=this._xhr.get(url),this._xhrCache.set(url,result)),result},DirectiveNormalizer.prototype.normalizeDirective=function(directive){var _this=this;if(!directive.isComponent)return new util_1.SyncAsyncResult(directive,Promise.resolve(directive));var normalizedTemplateAsync,normalizedTemplateSync=null;if(lang_1.isPresent(directive.template.template))normalizedTemplateSync=this.normalizeTemplateSync(directive.type,directive.template),normalizedTemplateAsync=Promise.resolve(normalizedTemplateSync);else{if(!directive.template.templateUrl)throw new exceptions_1.BaseException("No template specified for component "+directive.type.name);normalizedTemplateAsync=this.normalizeTemplateAsync(directive.type,directive.template)}if(normalizedTemplateSync&&0===normalizedTemplateSync.styleUrls.length){var normalizedDirective=_cloneDirectiveWithTemplate(directive,normalizedTemplateSync);return new util_1.SyncAsyncResult(normalizedDirective,Promise.resolve(normalizedDirective))}return new util_1.SyncAsyncResult(null,normalizedTemplateAsync.then(function(normalizedTemplate){return _this.normalizeExternalStylesheets(normalizedTemplate)}).then(function(normalizedTemplate){return _cloneDirectiveWithTemplate(directive,normalizedTemplate)}))},DirectiveNormalizer.prototype.normalizeTemplateSync=function(directiveType,template){return this.normalizeLoadedTemplate(directiveType,template,template.template,directiveType.moduleUrl)},DirectiveNormalizer.prototype.normalizeTemplateAsync=function(directiveType,template){var _this=this,templateUrl=this._urlResolver.resolve(directiveType.moduleUrl,template.templateUrl);return this._fetch(templateUrl).then(function(value){return _this.normalizeLoadedTemplate(directiveType,template,value,templateUrl)})},DirectiveNormalizer.prototype.normalizeLoadedTemplate=function(directiveType,templateMeta,template,templateAbsUrl){var interpolationConfig=interpolation_config_1.InterpolationConfig.fromArray(templateMeta.interpolation),rootNodesAndErrors=this._htmlParser.parse(template,directiveType.name,!1,interpolationConfig);if(rootNodesAndErrors.errors.length>0){var errorString=rootNodesAndErrors.errors.join("\n");throw new exceptions_1.BaseException("Template parse errors:\n"+errorString)}var templateMetadataStyles=this.normalizeStylesheet(new compile_metadata_1.CompileStylesheetMetadata({styles:templateMeta.styles,styleUrls:templateMeta.styleUrls,moduleUrl:directiveType.moduleUrl})),visitor=new TemplatePreparseVisitor;html.visitAll(visitor,rootNodesAndErrors.rootNodes);var templateStyles=this.normalizeStylesheet(new compile_metadata_1.CompileStylesheetMetadata({styles:visitor.styles,styleUrls:visitor.styleUrls,moduleUrl:templateAbsUrl})),allStyles=templateMetadataStyles.styles.concat(templateStyles.styles),allStyleUrls=templateMetadataStyles.styleUrls.concat(templateStyles.styleUrls),encapsulation=templateMeta.encapsulation;return lang_1.isBlank(encapsulation)&&(encapsulation=this._config.defaultEncapsulation),encapsulation===core_1.ViewEncapsulation.Emulated&&0===allStyles.length&&0===allStyleUrls.length&&(encapsulation=core_1.ViewEncapsulation.None),new compile_metadata_1.CompileTemplateMetadata({encapsulation:encapsulation,template:template,templateUrl:templateAbsUrl,styles:allStyles,styleUrls:allStyleUrls,externalStylesheets:templateMeta.externalStylesheets,ngContentSelectors:visitor.ngContentSelectors,animations:templateMeta.animations,interpolation:templateMeta.interpolation})},DirectiveNormalizer.prototype.normalizeExternalStylesheets=function(templateMeta){return this._loadMissingExternalStylesheets(templateMeta.styleUrls).then(function(externalStylesheets){return new compile_metadata_1.CompileTemplateMetadata({encapsulation:templateMeta.encapsulation,template:templateMeta.template,templateUrl:templateMeta.templateUrl,styles:templateMeta.styles,styleUrls:templateMeta.styleUrls,externalStylesheets:externalStylesheets,ngContentSelectors:templateMeta.ngContentSelectors,animations:templateMeta.animations,interpolation:templateMeta.interpolation})})},DirectiveNormalizer.prototype._loadMissingExternalStylesheets=function(styleUrls,loadedStylesheets){var _this=this;return void 0===loadedStylesheets&&(loadedStylesheets=new Map),Promise.all(styleUrls.filter(function(styleUrl){return!loadedStylesheets.has(styleUrl)}).map(function(styleUrl){return _this._fetch(styleUrl).then(function(loadedStyle){var stylesheet=_this.normalizeStylesheet(new compile_metadata_1.CompileStylesheetMetadata({styles:[loadedStyle],moduleUrl:styleUrl}));return loadedStylesheets.set(styleUrl,stylesheet),_this._loadMissingExternalStylesheets(stylesheet.styleUrls,loadedStylesheets)})})).then(function(_){return collection_1.MapWrapper.values(loadedStylesheets)})},DirectiveNormalizer.prototype.normalizeStylesheet=function(stylesheet){var _this=this,allStyleUrls=stylesheet.styleUrls.filter(style_url_resolver_1.isStyleUrlResolvable).map(function(url){return _this._urlResolver.resolve(stylesheet.moduleUrl,url)}),allStyles=stylesheet.styles.map(function(style){var styleWithImports=style_url_resolver_1.extractStyleUrls(_this._urlResolver,stylesheet.moduleUrl,style);return allStyleUrls.push.apply(allStyleUrls,styleWithImports.styleUrls),styleWithImports.style});return new compile_metadata_1.CompileStylesheetMetadata({styles:allStyles,styleUrls:allStyleUrls,moduleUrl:stylesheet.moduleUrl})},DirectiveNormalizer.decorators=[{type:core_1.Injectable}],DirectiveNormalizer.ctorParameters=[{type:xhr_1.XHR},{type:url_resolver_1.UrlResolver},{type:html_parser_1.HtmlParser},{type:config_1.CompilerConfig}],DirectiveNormalizer}();exports.DirectiveNormalizer=DirectiveNormalizer;var TemplatePreparseVisitor=function(){function TemplatePreparseVisitor(){this.ngContentSelectors=[],this.styles=[],this.styleUrls=[],this.ngNonBindableStackCount=0}return TemplatePreparseVisitor.prototype.visitElement=function(ast,context){var preparsedElement=template_preparser_1.preparseElement(ast);switch(preparsedElement.type){case template_preparser_1.PreparsedElementType.NG_CONTENT:0===this.ngNonBindableStackCount&&this.ngContentSelectors.push(preparsedElement.selectAttr);break;case template_preparser_1.PreparsedElementType.STYLE:var textContent="";ast.children.forEach(function(child){child instanceof html.Text&&(textContent+=child.value)}),this.styles.push(textContent);break;case template_preparser_1.PreparsedElementType.STYLESHEET:this.styleUrls.push(preparsedElement.hrefAttr)}return preparsedElement.nonBindable&&this.ngNonBindableStackCount++,html.visitAll(this,ast.children),preparsedElement.nonBindable&&this.ngNonBindableStackCount--,null},TemplatePreparseVisitor.prototype.visitComment=function(ast,context){return null},TemplatePreparseVisitor.prototype.visitAttribute=function(ast,context){return null},TemplatePreparseVisitor.prototype.visitText=function(ast,context){return null},TemplatePreparseVisitor.prototype.visitExpansion=function(ast,context){return null},TemplatePreparseVisitor.prototype.visitExpansionCase=function(ast,context){return null},TemplatePreparseVisitor}()},{"./compile_metadata":73,"./config":75,"./facade/collection":82,"./facade/exceptions":84,"./facade/lang":85,"./ml_parser/ast":101,"./ml_parser/html_parser":102,"./ml_parser/interpolation_config":105,"./style_url_resolver":132,"./template_parser/template_preparser":135,"./url_resolver":136,"./util":137,"./xhr":153,"@angular/core":154}],77:[function(require,module,exports){"use strict";function _isDirectiveMetadata(type){return type instanceof core_1.DirectiveMetadata}var core_1=require("@angular/core"),core_private_1=require("../core_private"),collection_1=require("./facade/collection"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),util_1=require("./util"),DirectiveResolver=function(){function DirectiveResolver(_reflector){void 0===_reflector&&(_reflector=core_private_1.reflector),this._reflector=_reflector}return DirectiveResolver.prototype.resolve=function(type,throwIfNotFound){void 0===throwIfNotFound&&(throwIfNotFound=!0);var typeMetadata=this._reflector.annotations(core_1.resolveForwardRef(type));if(lang_1.isPresent(typeMetadata)){var metadata=typeMetadata.find(_isDirectiveMetadata);if(lang_1.isPresent(metadata)){var propertyMetadata=this._reflector.propMetadata(type);return this._mergeWithPropertyMetadata(metadata,propertyMetadata,type)}}if(throwIfNotFound)throw new exceptions_1.BaseException("No Directive annotation found on "+lang_1.stringify(type));return null},DirectiveResolver.prototype._mergeWithPropertyMetadata=function(dm,propertyMetadata,directiveType){var inputs=[],outputs=[],host={},queries={};return collection_1.StringMapWrapper.forEach(propertyMetadata,function(metadata,propName){metadata.forEach(function(a){if(a instanceof core_1.InputMetadata)lang_1.isPresent(a.bindingPropertyName)?inputs.push(propName+": "+a.bindingPropertyName):inputs.push(propName);else if(a instanceof core_1.OutputMetadata)lang_1.isPresent(a.bindingPropertyName)?outputs.push(propName+": "+a.bindingPropertyName):outputs.push(propName);else if(a instanceof core_1.HostBindingMetadata)lang_1.isPresent(a.hostPropertyName)?host["["+a.hostPropertyName+"]"]=propName:host["["+propName+"]"]=propName;else if(a instanceof core_1.HostListenerMetadata){var args=lang_1.isPresent(a.args)?a.args.join(", "):"";host["("+a.eventName+")"]=propName+"("+args+")"}else a instanceof core_1.QueryMetadata&&(queries[propName]=a)})}),this._merge(dm,inputs,outputs,host,queries,directiveType)},DirectiveResolver.prototype._extractPublicName=function(def){return util_1.splitAtColon(def,[null,def])[1].trim()},DirectiveResolver.prototype._merge=function(dm,inputs,outputs,host,queries,directiveType){var mergedInputs,_this=this;if(lang_1.isPresent(dm.inputs)){var inputNames_1=dm.inputs.map(function(def){return _this._extractPublicName(def)});inputs.forEach(function(inputDef){var publicName=_this._extractPublicName(inputDef);if(inputNames_1.indexOf(publicName)>-1)throw new exceptions_1.BaseException("Input '"+publicName+"' defined multiple times in '"+lang_1.stringify(directiveType)+"'")}),mergedInputs=dm.inputs.concat(inputs)}else mergedInputs=inputs;var mergedOutputs;if(lang_1.isPresent(dm.outputs)){var outputNames_1=dm.outputs.map(function(def){return _this._extractPublicName(def)});outputs.forEach(function(outputDef){var publicName=_this._extractPublicName(outputDef);if(outputNames_1.indexOf(publicName)>-1)throw new exceptions_1.BaseException("Output event '"+publicName+"' defined multiple times in '"+lang_1.stringify(directiveType)+"'")}),mergedOutputs=dm.outputs.concat(outputs)}else mergedOutputs=outputs;var mergedHost=lang_1.isPresent(dm.host)?collection_1.StringMapWrapper.merge(dm.host,host):host,mergedQueries=lang_1.isPresent(dm.queries)?collection_1.StringMapWrapper.merge(dm.queries,queries):queries;return dm instanceof core_1.ComponentMetadata?new core_1.ComponentMetadata({selector:dm.selector,inputs:mergedInputs,outputs:mergedOutputs,host:mergedHost,exportAs:dm.exportAs,moduleId:dm.moduleId,queries:mergedQueries,changeDetection:dm.changeDetection,providers:dm.providers,viewProviders:dm.viewProviders,entryComponents:dm.entryComponents,directives:dm.directives,pipes:dm.pipes,template:dm.template,templateUrl:dm.templateUrl,styles:dm.styles,styleUrls:dm.styleUrls,encapsulation:dm.encapsulation,animations:dm.animations,interpolation:dm.interpolation}):new core_1.DirectiveMetadata({selector:dm.selector,inputs:mergedInputs,outputs:mergedOutputs,host:mergedHost,exportAs:dm.exportAs,queries:mergedQueries,providers:dm.providers})},DirectiveResolver.decorators=[{type:core_1.Injectable}],DirectiveResolver.ctorParameters=[{type:core_private_1.ReflectorReader}],DirectiveResolver}();exports.DirectiveResolver=DirectiveResolver},{"../core_private":64,"./facade/collection":82,"./facade/exceptions":84,"./facade/lang":85,"./util":137,"@angular/core":154}],78:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),ParserError=function(){function ParserError(message,input,errLocation,ctxLocation){this.input=input,this.errLocation=errLocation,this.ctxLocation=ctxLocation,this.message="Parser Error: "+message+" "+errLocation+" ["+input+"] in "+ctxLocation}return ParserError}();exports.ParserError=ParserError;var ParseSpan=function(){function ParseSpan(start,end){this.start=start,this.end=end}return ParseSpan}();exports.ParseSpan=ParseSpan;var AST=function(){function AST(span){this.span=span}return AST.prototype.visit=function(visitor,context){return void 0===context&&(context=null),null},AST.prototype.toString=function(){return"AST"},AST}();exports.AST=AST;var Quote=function(_super){function Quote(span,prefix,uninterpretedExpression,location){_super.call(this,span),this.prefix=prefix,this.uninterpretedExpression=uninterpretedExpression,this.location=location}return __extends(Quote,_super),Quote.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitQuote(this,context)},Quote.prototype.toString=function(){return"Quote"},Quote}(AST);exports.Quote=Quote;var EmptyExpr=function(_super){function EmptyExpr(){_super.apply(this,arguments)}return __extends(EmptyExpr,_super),EmptyExpr.prototype.visit=function(visitor,context){void 0===context&&(context=null)},EmptyExpr}(AST);exports.EmptyExpr=EmptyExpr;var ImplicitReceiver=function(_super){function ImplicitReceiver(){_super.apply(this,arguments)}return __extends(ImplicitReceiver,_super),ImplicitReceiver.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitImplicitReceiver(this,context)},ImplicitReceiver}(AST);exports.ImplicitReceiver=ImplicitReceiver;var Chain=function(_super){function Chain(span,expressions){_super.call(this,span),this.expressions=expressions}return __extends(Chain,_super),Chain.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitChain(this,context)},Chain}(AST);exports.Chain=Chain;var Conditional=function(_super){function Conditional(span,condition,trueExp,falseExp){_super.call(this,span),this.condition=condition,this.trueExp=trueExp,this.falseExp=falseExp}return __extends(Conditional,_super),Conditional.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitConditional(this,context)},Conditional}(AST);exports.Conditional=Conditional;var PropertyRead=function(_super){function PropertyRead(span,receiver,name){_super.call(this,span),this.receiver=receiver,this.name=name}return __extends(PropertyRead,_super),PropertyRead.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitPropertyRead(this,context)},PropertyRead}(AST);exports.PropertyRead=PropertyRead;var PropertyWrite=function(_super){function PropertyWrite(span,receiver,name,value){_super.call(this,span),this.receiver=receiver,this.name=name,this.value=value}return __extends(PropertyWrite,_super),PropertyWrite.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitPropertyWrite(this,context)},PropertyWrite}(AST);exports.PropertyWrite=PropertyWrite;var SafePropertyRead=function(_super){function SafePropertyRead(span,receiver,name){_super.call(this,span),this.receiver=receiver,this.name=name}return __extends(SafePropertyRead,_super),SafePropertyRead.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitSafePropertyRead(this,context)},SafePropertyRead}(AST);exports.SafePropertyRead=SafePropertyRead;var KeyedRead=function(_super){function KeyedRead(span,obj,key){_super.call(this,span),this.obj=obj,this.key=key}return __extends(KeyedRead,_super),KeyedRead.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitKeyedRead(this,context)},KeyedRead}(AST);exports.KeyedRead=KeyedRead;var KeyedWrite=function(_super){function KeyedWrite(span,obj,key,value){_super.call(this,span),this.obj=obj,this.key=key,this.value=value}return __extends(KeyedWrite,_super),KeyedWrite.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitKeyedWrite(this,context)},KeyedWrite}(AST);exports.KeyedWrite=KeyedWrite;var BindingPipe=function(_super){function BindingPipe(span,exp,name,args){_super.call(this,span),this.exp=exp,this.name=name,this.args=args}return __extends(BindingPipe,_super),BindingPipe.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitPipe(this,context)},BindingPipe}(AST);exports.BindingPipe=BindingPipe;var LiteralPrimitive=function(_super){function LiteralPrimitive(span,value){_super.call(this,span),this.value=value}return __extends(LiteralPrimitive,_super),LiteralPrimitive.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitLiteralPrimitive(this,context)},LiteralPrimitive}(AST);exports.LiteralPrimitive=LiteralPrimitive;var LiteralArray=function(_super){function LiteralArray(span,expressions){_super.call(this,span),this.expressions=expressions}return __extends(LiteralArray,_super),LiteralArray.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitLiteralArray(this,context)},LiteralArray}(AST);exports.LiteralArray=LiteralArray;var LiteralMap=function(_super){function LiteralMap(span,keys,values){_super.call(this,span),this.keys=keys,this.values=values}return __extends(LiteralMap,_super),LiteralMap.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitLiteralMap(this,context)},LiteralMap}(AST);exports.LiteralMap=LiteralMap;var Interpolation=function(_super){function Interpolation(span,strings,expressions){_super.call(this,span),this.strings=strings,this.expressions=expressions}return __extends(Interpolation,_super),Interpolation.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitInterpolation(this,context)},Interpolation}(AST);exports.Interpolation=Interpolation;var Binary=function(_super){function Binary(span,operation,left,right){_super.call(this,span),this.operation=operation,this.left=left,this.right=right}return __extends(Binary,_super),Binary.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitBinary(this,context)},Binary}(AST);exports.Binary=Binary;var PrefixNot=function(_super){function PrefixNot(span,expression){_super.call(this,span),this.expression=expression}return __extends(PrefixNot,_super),PrefixNot.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitPrefixNot(this,context)},PrefixNot}(AST);exports.PrefixNot=PrefixNot;var MethodCall=function(_super){function MethodCall(span,receiver,name,args){_super.call(this,span),this.receiver=receiver,this.name=name,this.args=args}return __extends(MethodCall,_super),MethodCall.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitMethodCall(this,context)},MethodCall}(AST);exports.MethodCall=MethodCall;var SafeMethodCall=function(_super){function SafeMethodCall(span,receiver,name,args){_super.call(this,span),this.receiver=receiver,this.name=name,this.args=args}return __extends(SafeMethodCall,_super),SafeMethodCall.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitSafeMethodCall(this,context)},SafeMethodCall}(AST);exports.SafeMethodCall=SafeMethodCall;var FunctionCall=function(_super){function FunctionCall(span,target,args){_super.call(this,span),this.target=target,this.args=args}return __extends(FunctionCall,_super),FunctionCall.prototype.visit=function(visitor,context){return void 0===context&&(context=null),visitor.visitFunctionCall(this,context)},FunctionCall}(AST);exports.FunctionCall=FunctionCall;var ASTWithSource=function(_super){function ASTWithSource(ast,source,location,errors){_super.call(this,new ParseSpan(0,lang_1.isBlank(source)?0:source.length)),this.ast=ast,this.source=source,this.location=location,this.errors=errors}return __extends(ASTWithSource,_super),ASTWithSource.prototype.visit=function(visitor,context){return void 0===context&&(context=null),this.ast.visit(visitor,context)},ASTWithSource.prototype.toString=function(){return this.source+" in "+this.location},ASTWithSource}(AST);exports.ASTWithSource=ASTWithSource;var TemplateBinding=function(){function TemplateBinding(key,keyIsVar,name,expression){this.key=key,this.keyIsVar=keyIsVar,this.name=name,this.expression=expression}return TemplateBinding}();exports.TemplateBinding=TemplateBinding;var RecursiveAstVisitor=function(){function RecursiveAstVisitor(){}
return RecursiveAstVisitor.prototype.visitBinary=function(ast,context){return ast.left.visit(this),ast.right.visit(this),null},RecursiveAstVisitor.prototype.visitChain=function(ast,context){return this.visitAll(ast.expressions,context)},RecursiveAstVisitor.prototype.visitConditional=function(ast,context){return ast.condition.visit(this),ast.trueExp.visit(this),ast.falseExp.visit(this),null},RecursiveAstVisitor.prototype.visitPipe=function(ast,context){return ast.exp.visit(this),this.visitAll(ast.args,context),null},RecursiveAstVisitor.prototype.visitFunctionCall=function(ast,context){return ast.target.visit(this),this.visitAll(ast.args,context),null},RecursiveAstVisitor.prototype.visitImplicitReceiver=function(ast,context){return null},RecursiveAstVisitor.prototype.visitInterpolation=function(ast,context){return this.visitAll(ast.expressions,context)},RecursiveAstVisitor.prototype.visitKeyedRead=function(ast,context){return ast.obj.visit(this),ast.key.visit(this),null},RecursiveAstVisitor.prototype.visitKeyedWrite=function(ast,context){return ast.obj.visit(this),ast.key.visit(this),ast.value.visit(this),null},RecursiveAstVisitor.prototype.visitLiteralArray=function(ast,context){return this.visitAll(ast.expressions,context)},RecursiveAstVisitor.prototype.visitLiteralMap=function(ast,context){return this.visitAll(ast.values,context)},RecursiveAstVisitor.prototype.visitLiteralPrimitive=function(ast,context){return null},RecursiveAstVisitor.prototype.visitMethodCall=function(ast,context){return ast.receiver.visit(this),this.visitAll(ast.args,context)},RecursiveAstVisitor.prototype.visitPrefixNot=function(ast,context){return ast.expression.visit(this),null},RecursiveAstVisitor.prototype.visitPropertyRead=function(ast,context){return ast.receiver.visit(this),null},RecursiveAstVisitor.prototype.visitPropertyWrite=function(ast,context){return ast.receiver.visit(this),ast.value.visit(this),null},RecursiveAstVisitor.prototype.visitSafePropertyRead=function(ast,context){return ast.receiver.visit(this),null},RecursiveAstVisitor.prototype.visitSafeMethodCall=function(ast,context){return ast.receiver.visit(this),this.visitAll(ast.args,context)},RecursiveAstVisitor.prototype.visitAll=function(asts,context){var _this=this;return asts.forEach(function(ast){return ast.visit(_this,context)}),null},RecursiveAstVisitor.prototype.visitQuote=function(ast,context){return null},RecursiveAstVisitor}();exports.RecursiveAstVisitor=RecursiveAstVisitor;var AstTransformer=function(){function AstTransformer(){}return AstTransformer.prototype.visitImplicitReceiver=function(ast,context){return ast},AstTransformer.prototype.visitInterpolation=function(ast,context){return new Interpolation(ast.span,ast.strings,this.visitAll(ast.expressions))},AstTransformer.prototype.visitLiteralPrimitive=function(ast,context){return new LiteralPrimitive(ast.span,ast.value)},AstTransformer.prototype.visitPropertyRead=function(ast,context){return new PropertyRead(ast.span,ast.receiver.visit(this),ast.name)},AstTransformer.prototype.visitPropertyWrite=function(ast,context){return new PropertyWrite(ast.span,ast.receiver.visit(this),ast.name,ast.value)},AstTransformer.prototype.visitSafePropertyRead=function(ast,context){return new SafePropertyRead(ast.span,ast.receiver.visit(this),ast.name)},AstTransformer.prototype.visitMethodCall=function(ast,context){return new MethodCall(ast.span,ast.receiver.visit(this),ast.name,this.visitAll(ast.args))},AstTransformer.prototype.visitSafeMethodCall=function(ast,context){return new SafeMethodCall(ast.span,ast.receiver.visit(this),ast.name,this.visitAll(ast.args))},AstTransformer.prototype.visitFunctionCall=function(ast,context){return new FunctionCall(ast.span,ast.target.visit(this),this.visitAll(ast.args))},AstTransformer.prototype.visitLiteralArray=function(ast,context){return new LiteralArray(ast.span,this.visitAll(ast.expressions))},AstTransformer.prototype.visitLiteralMap=function(ast,context){return new LiteralMap(ast.span,ast.keys,this.visitAll(ast.values))},AstTransformer.prototype.visitBinary=function(ast,context){return new Binary(ast.span,ast.operation,ast.left.visit(this),ast.right.visit(this))},AstTransformer.prototype.visitPrefixNot=function(ast,context){return new PrefixNot(ast.span,ast.expression.visit(this))},AstTransformer.prototype.visitConditional=function(ast,context){return new Conditional(ast.span,ast.condition.visit(this),ast.trueExp.visit(this),ast.falseExp.visit(this))},AstTransformer.prototype.visitPipe=function(ast,context){return new BindingPipe(ast.span,ast.exp.visit(this),ast.name,this.visitAll(ast.args))},AstTransformer.prototype.visitKeyedRead=function(ast,context){return new KeyedRead(ast.span,ast.obj.visit(this),ast.key.visit(this))},AstTransformer.prototype.visitKeyedWrite=function(ast,context){return new KeyedWrite(ast.span,ast.obj.visit(this),ast.key.visit(this),ast.value.visit(this))},AstTransformer.prototype.visitAll=function(asts){for(var res=collection_1.ListWrapper.createFixedSize(asts.length),i=0;i<asts.length;++i)res[i]=asts[i].visit(this);return res},AstTransformer.prototype.visitChain=function(ast,context){return new Chain(ast.span,this.visitAll(ast.expressions))},AstTransformer.prototype.visitQuote=function(ast,context){return new Quote(ast.span,ast.prefix,ast.uninterpretedExpression,ast.location)},AstTransformer}();exports.AstTransformer=AstTransformer},{"../facade/collection":82,"../facade/lang":85}],79:[function(require,module,exports){"use strict";function newCharacterToken(index,code){return new Token(index,TokenType.Character,code,lang_1.StringWrapper.fromCharCode(code))}function newIdentifierToken(index,text){return new Token(index,TokenType.Identifier,0,text)}function newKeywordToken(index,text){return new Token(index,TokenType.Keyword,0,text)}function newOperatorToken(index,text){return new Token(index,TokenType.Operator,0,text)}function newStringToken(index,text){return new Token(index,TokenType.String,0,text)}function newNumberToken(index,n){return new Token(index,TokenType.Number,n,"")}function newErrorToken(index,message){return new Token(index,TokenType.Error,0,message)}function isIdentifierStart(code){return chars.$a<=code&&code<=chars.$z||chars.$A<=code&&code<=chars.$Z||code==chars.$_||code==chars.$$}function isIdentifier(input){if(0==input.length)return!1;var scanner=new _Scanner(input);if(!isIdentifierStart(scanner.peek))return!1;for(scanner.advance();scanner.peek!==chars.$EOF;){if(!isIdentifierPart(scanner.peek))return!1;scanner.advance()}return!0}function isIdentifierPart(code){return chars.isAsciiLetter(code)||chars.isDigit(code)||code==chars.$_||code==chars.$$}function isExponentStart(code){return code==chars.$e||code==chars.$E}function isExponentSign(code){return code==chars.$MINUS||code==chars.$PLUS}function isQuote(code){return code===chars.$SQ||code===chars.$DQ||code===chars.$BT}function unescape(code){switch(code){case chars.$n:return chars.$LF;case chars.$f:return chars.$FF;case chars.$r:return chars.$CR;case chars.$t:return chars.$TAB;case chars.$v:return chars.$VTAB;default:return code}}var core_1=require("@angular/core"),chars=require("../chars"),lang_1=require("../facade/lang");!function(TokenType){TokenType[TokenType.Character=0]="Character",TokenType[TokenType.Identifier=1]="Identifier",TokenType[TokenType.Keyword=2]="Keyword",TokenType[TokenType.String=3]="String",TokenType[TokenType.Operator=4]="Operator",TokenType[TokenType.Number=5]="Number",TokenType[TokenType.Error=6]="Error"}(exports.TokenType||(exports.TokenType={}));var TokenType=exports.TokenType,KEYWORDS=["var","let","null","undefined","true","false","if","else","this"],Lexer=function(){function Lexer(){}return Lexer.prototype.tokenize=function(text){for(var scanner=new _Scanner(text),tokens=[],token=scanner.scanToken();null!=token;)tokens.push(token),token=scanner.scanToken();return tokens},Lexer.decorators=[{type:core_1.Injectable}],Lexer}();exports.Lexer=Lexer;var Token=function(){function Token(index,type,numValue,strValue){this.index=index,this.type=type,this.numValue=numValue,this.strValue=strValue}return Token.prototype.isCharacter=function(code){return this.type==TokenType.Character&&this.numValue==code},Token.prototype.isNumber=function(){return this.type==TokenType.Number},Token.prototype.isString=function(){return this.type==TokenType.String},Token.prototype.isOperator=function(operater){return this.type==TokenType.Operator&&this.strValue==operater},Token.prototype.isIdentifier=function(){return this.type==TokenType.Identifier},Token.prototype.isKeyword=function(){return this.type==TokenType.Keyword},Token.prototype.isKeywordDeprecatedVar=function(){return this.type==TokenType.Keyword&&"var"==this.strValue},Token.prototype.isKeywordLet=function(){return this.type==TokenType.Keyword&&"let"==this.strValue},Token.prototype.isKeywordNull=function(){return this.type==TokenType.Keyword&&"null"==this.strValue},Token.prototype.isKeywordUndefined=function(){return this.type==TokenType.Keyword&&"undefined"==this.strValue},Token.prototype.isKeywordTrue=function(){return this.type==TokenType.Keyword&&"true"==this.strValue},Token.prototype.isKeywordFalse=function(){return this.type==TokenType.Keyword&&"false"==this.strValue},Token.prototype.isKeywordThis=function(){return this.type==TokenType.Keyword&&"this"==this.strValue},Token.prototype.isError=function(){return this.type==TokenType.Error},Token.prototype.toNumber=function(){return this.type==TokenType.Number?this.numValue:-1},Token.prototype.toString=function(){switch(this.type){case TokenType.Character:case TokenType.Identifier:case TokenType.Keyword:case TokenType.Operator:case TokenType.String:case TokenType.Error:return this.strValue;case TokenType.Number:return this.numValue.toString();default:return null}},Token}();exports.Token=Token,exports.EOF=new Token((-1),TokenType.Character,0,"");var _Scanner=function(){function _Scanner(input){this.input=input,this.peek=0,this.index=-1,this.length=input.length,this.advance()}return _Scanner.prototype.advance=function(){this.peek=++this.index>=this.length?chars.$EOF:lang_1.StringWrapper.charCodeAt(this.input,this.index)},_Scanner.prototype.scanToken=function(){for(var input=this.input,length=this.length,peek=this.peek,index=this.index;peek<=chars.$SPACE;){if(++index>=length){peek=chars.$EOF;break}peek=lang_1.StringWrapper.charCodeAt(input,index)}if(this.peek=peek,this.index=index,index>=length)return null;if(isIdentifierStart(peek))return this.scanIdentifier();if(chars.isDigit(peek))return this.scanNumber(index);var start=index;switch(peek){case chars.$PERIOD:return this.advance(),chars.isDigit(this.peek)?this.scanNumber(start):newCharacterToken(start,chars.$PERIOD);case chars.$LPAREN:case chars.$RPAREN:case chars.$LBRACE:case chars.$RBRACE:case chars.$LBRACKET:case chars.$RBRACKET:case chars.$COMMA:case chars.$COLON:case chars.$SEMICOLON:return this.scanCharacter(start,peek);case chars.$SQ:case chars.$DQ:return this.scanString();case chars.$HASH:case chars.$PLUS:case chars.$MINUS:case chars.$STAR:case chars.$SLASH:case chars.$PERCENT:case chars.$CARET:return this.scanOperator(start,lang_1.StringWrapper.fromCharCode(peek));case chars.$QUESTION:return this.scanComplexOperator(start,"?",chars.$PERIOD,".");case chars.$LT:case chars.$GT:return this.scanComplexOperator(start,lang_1.StringWrapper.fromCharCode(peek),chars.$EQ,"=");case chars.$BANG:case chars.$EQ:return this.scanComplexOperator(start,lang_1.StringWrapper.fromCharCode(peek),chars.$EQ,"=",chars.$EQ,"=");case chars.$AMPERSAND:return this.scanComplexOperator(start,"&",chars.$AMPERSAND,"&");case chars.$BAR:return this.scanComplexOperator(start,"|",chars.$BAR,"|");case chars.$NBSP:for(;chars.isWhitespace(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error("Unexpected character ["+lang_1.StringWrapper.fromCharCode(peek)+"]",0)},_Scanner.prototype.scanCharacter=function(start,code){return this.advance(),newCharacterToken(start,code)},_Scanner.prototype.scanOperator=function(start,str){return this.advance(),newOperatorToken(start,str)},_Scanner.prototype.scanComplexOperator=function(start,one,twoCode,two,threeCode,three){this.advance();var str=one;return this.peek==twoCode&&(this.advance(),str+=two),lang_1.isPresent(threeCode)&&this.peek==threeCode&&(this.advance(),str+=three),newOperatorToken(start,str)},_Scanner.prototype.scanIdentifier=function(){var start=this.index;for(this.advance();isIdentifierPart(this.peek);)this.advance();var str=this.input.substring(start,this.index);return KEYWORDS.indexOf(str)>-1?newKeywordToken(start,str):newIdentifierToken(start,str)},_Scanner.prototype.scanNumber=function(start){var simple=this.index===start;for(this.advance();;){if(chars.isDigit(this.peek));else if(this.peek==chars.$PERIOD)simple=!1;else{if(!isExponentStart(this.peek))break;if(this.advance(),isExponentSign(this.peek)&&this.advance(),!chars.isDigit(this.peek))return this.error("Invalid exponent",-1);simple=!1}this.advance()}var str=this.input.substring(start,this.index),value=simple?lang_1.NumberWrapper.parseIntAutoRadix(str):lang_1.NumberWrapper.parseFloat(str);return newNumberToken(start,value)},_Scanner.prototype.scanString=function(){var start=this.index,quote=this.peek;this.advance();for(var buffer,marker=this.index,input=this.input;this.peek!=quote;)if(this.peek==chars.$BACKSLASH){null==buffer&&(buffer=new lang_1.StringJoiner),buffer.add(input.substring(marker,this.index)),this.advance();var unescapedCode;if(this.peek==chars.$u){var hex=input.substring(this.index+1,this.index+5);try{unescapedCode=lang_1.NumberWrapper.parseInt(hex,16)}catch(e){return this.error("Invalid unicode escape [\\u"+hex+"]",0)}for(var i=0;i<5;i++)this.advance()}else unescapedCode=unescape(this.peek),this.advance();buffer.add(lang_1.StringWrapper.fromCharCode(unescapedCode)),marker=this.index}else{if(this.peek==chars.$EOF)return this.error("Unterminated quote",0);this.advance()}var last=input.substring(marker,this.index);this.advance();var unescaped=last;return null!=buffer&&(buffer.add(last),unescaped=buffer.toString()),newStringToken(start,unescaped)},_Scanner.prototype.error=function(message,offset){var position=this.index+offset;return newErrorToken(position,"Lexer Error: "+message+" at column "+position+" in expression ["+this.input+"]")},_Scanner}();exports.isIdentifier=isIdentifier,exports.isQuote=isQuote},{"../chars":72,"../facade/lang":85,"@angular/core":154}],80:[function(require,module,exports){"use strict";function _createInterpolateRegExp(config){var pattern=lang_1.escapeRegExp(config.start)+"([\\s\\S]*?)"+lang_1.escapeRegExp(config.end);return new RegExp(pattern,"g")}var core_1=require("@angular/core"),chars=require("../chars"),lang_1=require("../facade/lang"),interpolation_config_1=require("../ml_parser/interpolation_config"),ast_1=require("./ast"),lexer_1=require("./lexer"),SplitInterpolation=function(){function SplitInterpolation(strings,expressions){this.strings=strings,this.expressions=expressions}return SplitInterpolation}();exports.SplitInterpolation=SplitInterpolation;var TemplateBindingParseResult=function(){function TemplateBindingParseResult(templateBindings,warnings,errors){this.templateBindings=templateBindings,this.warnings=warnings,this.errors=errors}return TemplateBindingParseResult}();exports.TemplateBindingParseResult=TemplateBindingParseResult;var Parser=function(){function Parser(_lexer){this._lexer=_lexer,this.errors=[]}return Parser.prototype.parseAction=function(input,location,interpolationConfig){void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG),this._checkNoInterpolation(input,location,interpolationConfig);var tokens=this._lexer.tokenize(this._stripComments(input)),ast=new _ParseAST(input,location,tokens,(!0),this.errors).parseChain();return new ast_1.ASTWithSource(ast,input,location,this.errors)},Parser.prototype.parseBinding=function(input,location,interpolationConfig){void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG);var ast=this._parseBindingAst(input,location,interpolationConfig);return new ast_1.ASTWithSource(ast,input,location,this.errors)},Parser.prototype.parseSimpleBinding=function(input,location,interpolationConfig){void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG);var ast=this._parseBindingAst(input,location,interpolationConfig);return SimpleExpressionChecker.check(ast)||this._reportError("Host binding expression can only contain field access and constants",input,location),new ast_1.ASTWithSource(ast,input,location,this.errors)},Parser.prototype._reportError=function(message,input,errLocation,ctxLocation){this.errors.push(new ast_1.ParserError(message,input,errLocation,ctxLocation))},Parser.prototype._parseBindingAst=function(input,location,interpolationConfig){var quote=this._parseQuote(input,location);if(lang_1.isPresent(quote))return quote;this._checkNoInterpolation(input,location,interpolationConfig);var tokens=this._lexer.tokenize(this._stripComments(input));return new _ParseAST(input,location,tokens,(!1),this.errors).parseChain()},Parser.prototype._parseQuote=function(input,location){if(lang_1.isBlank(input))return null;var prefixSeparatorIndex=input.indexOf(":");if(prefixSeparatorIndex==-1)return null;var prefix=input.substring(0,prefixSeparatorIndex).trim();if(!lexer_1.isIdentifier(prefix))return null;var uninterpretedExpression=input.substring(prefixSeparatorIndex+1);return new ast_1.Quote(new ast_1.ParseSpan(0,input.length),prefix,uninterpretedExpression,location)},Parser.prototype.parseTemplateBindings=function(input,location){var tokens=this._lexer.tokenize(input);return new _ParseAST(input,location,tokens,(!1),this.errors).parseTemplateBindings()},Parser.prototype.parseInterpolation=function(input,location,interpolationConfig){void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG);var split=this.splitInterpolation(input,location,interpolationConfig);if(null==split)return null;for(var expressions=[],i=0;i<split.expressions.length;++i){var tokens=this._lexer.tokenize(this._stripComments(split.expressions[i])),ast=new _ParseAST(input,location,tokens,(!1),this.errors).parseChain();expressions.push(ast)}return new ast_1.ASTWithSource(new ast_1.Interpolation(new ast_1.ParseSpan(0,lang_1.isBlank(input)?0:input.length),split.strings,expressions),input,location,this.errors)},Parser.prototype.splitInterpolation=function(input,location,interpolationConfig){void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG);var regexp=_createInterpolateRegExp(interpolationConfig),parts=lang_1.StringWrapper.split(input,regexp);if(parts.length<=1)return null;for(var strings=[],expressions=[],i=0;i<parts.length;i++){var part=parts[i];i%2===0?strings.push(part):part.trim().length>0?expressions.push(part):this._reportError("Blank expressions are not allowed in interpolated strings",input,"at column "+this._findInterpolationErrorColumn(parts,i,interpolationConfig)+" in",location)}return new SplitInterpolation(strings,expressions)},Parser.prototype.wrapLiteralPrimitive=function(input,location){return new ast_1.ASTWithSource(new ast_1.LiteralPrimitive(new ast_1.ParseSpan(0,lang_1.isBlank(input)?0:input.length),input),input,location,this.errors)},Parser.prototype._stripComments=function(input){var i=this._commentStart(input);return lang_1.isPresent(i)?input.substring(0,i).trim():input},Parser.prototype._commentStart=function(input){for(var outerQuote=null,i=0;i<input.length-1;i++){var char=lang_1.StringWrapper.charCodeAt(input,i),nextChar=lang_1.StringWrapper.charCodeAt(input,i+1);if(char===chars.$SLASH&&nextChar==chars.$SLASH&&lang_1.isBlank(outerQuote))return i;outerQuote===char?outerQuote=null:lang_1.isBlank(outerQuote)&&lexer_1.isQuote(char)&&(outerQuote=char)}return null},Parser.prototype._checkNoInterpolation=function(input,location,interpolationConfig){var regexp=_createInterpolateRegExp(interpolationConfig),parts=lang_1.StringWrapper.split(input,regexp);parts.length>1&&this._reportError("Got interpolation ("+interpolationConfig.start+interpolationConfig.end+") where expression was expected",input,"at column "+this._findInterpolationErrorColumn(parts,1,interpolationConfig)+" in",location)},Parser.prototype._findInterpolationErrorColumn=function(parts,partInErrIdx,interpolationConfig){for(var errLocation="",j=0;j<partInErrIdx;j++)errLocation+=j%2===0?parts[j]:""+interpolationConfig.start+parts[j]+interpolationConfig.end;return errLocation.length},Parser.decorators=[{type:core_1.Injectable}],Parser.ctorParameters=[{type:lexer_1.Lexer}],Parser}();exports.Parser=Parser;var _ParseAST=function(){function _ParseAST(input,location,tokens,parseAction,errors){this.input=input,this.location=location,this.tokens=tokens,this.parseAction=parseAction,this.errors=errors,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.index=0}return _ParseAST.prototype.peek=function(offset){var i=this.index+offset;return i<this.tokens.length?this.tokens[i]:lexer_1.EOF},Object.defineProperty(_ParseAST.prototype,"next",{get:function(){return this.peek(0)},enumerable:!0,configurable:!0}),Object.defineProperty(_ParseAST.prototype,"inputIndex",{get:function(){return this.index<this.tokens.length?this.next.index:this.input.length},enumerable:!0,configurable:!0}),_ParseAST.prototype.span=function(start){return new ast_1.ParseSpan(start,this.inputIndex)},_ParseAST.prototype.advance=function(){this.index++},_ParseAST.prototype.optionalCharacter=function(code){return!!this.next.isCharacter(code)&&(this.advance(),!0)},_ParseAST.prototype.peekKeywordLet=function(){return this.next.isKeywordLet()},_ParseAST.prototype.peekDeprecatedKeywordVar=function(){return this.next.isKeywordDeprecatedVar()},_ParseAST.prototype.peekDeprecatedOperatorHash=function(){return this.next.isOperator("#")},_ParseAST.prototype.expectCharacter=function(code){this.optionalCharacter(code)||this.error("Missing expected "+lang_1.StringWrapper.fromCharCode(code))},_ParseAST.prototype.optionalOperator=function(op){return!!this.next.isOperator(op)&&(this.advance(),!0)},_ParseAST.prototype.expectOperator=function(operator){this.optionalOperator(operator)||this.error("Missing expected operator "+operator)},_ParseAST.prototype.expectIdentifierOrKeyword=function(){var n=this.next;return n.isIdentifier()||n.isKeyword()?(this.advance(),n.toString()):(this.error("Unexpected token "+n+", expected identifier or keyword"),"")},_ParseAST.prototype.expectIdentifierOrKeywordOrString=function(){var n=this.next;return n.isIdentifier()||n.isKeyword()||n.isString()?(this.advance(),n.toString()):(this.error("Unexpected token "+n+", expected identifier, keyword, or string"),"")},_ParseAST.prototype.parseChain=function(){for(var exprs=[],start=this.inputIndex;this.index<this.tokens.length;){var expr=this.parsePipe();if(exprs.push(expr),this.optionalCharacter(chars.$SEMICOLON))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.optionalCharacter(chars.$SEMICOLON););else this.index<this.tokens.length&&this.error("Unexpected token '"+this.next+"'")}return 0==exprs.length?new ast_1.EmptyExpr(this.span(start)):1==exprs.length?exprs[0]:new ast_1.Chain(this.span(start),exprs)},_ParseAST.prototype.parsePipe=function(){var result=this.parseExpression();if(this.optionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var name=this.expectIdentifierOrKeyword(),args=[];this.optionalCharacter(chars.$COLON);)args.push(this.parseExpression());result=new ast_1.BindingPipe(this.span(result.span.start),result,name,args)}while(this.optionalOperator("|"))}return result},_ParseAST.prototype.parseExpression=function(){return this.parseConditional()},_ParseAST.prototype.parseConditional=function(){var start=this.inputIndex,result=this.parseLogicalOr();if(this.optionalOperator("?")){var yes=this.parsePipe(),no=void 0;if(this.optionalCharacter(chars.$COLON))no=this.parsePipe();else{var end=this.inputIndex,expression=this.input.substring(start,end);this.error("Conditional expression "+expression+" requires all 3 expressions"),no=new ast_1.EmptyExpr(this.span(start))}return new ast_1.Conditional(this.span(start),result,yes,no)}return result},_ParseAST.prototype.parseLogicalOr=function(){for(var result=this.parseLogicalAnd();this.optionalOperator("||");){var right=this.parseLogicalAnd();result=new ast_1.Binary(this.span(result.span.start),"||",result,right)}return result},_ParseAST.prototype.parseLogicalAnd=function(){for(var result=this.parseEquality();this.optionalOperator("&&");){var right=this.parseEquality();result=new ast_1.Binary(this.span(result.span.start),"&&",result,right)}return result},_ParseAST.prototype.parseEquality=function(){for(var result=this.parseRelational();this.next.type==lexer_1.TokenType.Operator;){var operator=this.next.strValue;switch(operator){case"==":case"===":case"!=":case"!==":this.advance();var right=this.parseRelational();result=new ast_1.Binary(this.span(result.span.start),operator,result,right);continue}break}return result},_ParseAST.prototype.parseRelational=function(){for(var result=this.parseAdditive();this.next.type==lexer_1.TokenType.Operator;){var operator=this.next.strValue;switch(operator){case"<":case">":case"<=":case">=":this.advance();var right=this.parseAdditive();result=new ast_1.Binary(this.span(result.span.start),operator,result,right);continue}break}return result},_ParseAST.prototype.parseAdditive=function(){for(var result=this.parseMultiplicative();this.next.type==lexer_1.TokenType.Operator;){var operator=this.next.strValue;switch(operator){case"+":case"-":this.advance();var right=this.parseMultiplicative();result=new ast_1.Binary(this.span(result.span.start),operator,result,right);continue}break}return result},_ParseAST.prototype.parseMultiplicative=function(){for(var result=this.parsePrefix();this.next.type==lexer_1.TokenType.Operator;){var operator=this.next.strValue;switch(operator){case"*":case"%":case"/":this.advance();var right=this.parsePrefix();result=new ast_1.Binary(this.span(result.span.start),operator,result,right);continue}break}return result},_ParseAST.prototype.parsePrefix=function(){if(this.next.type==lexer_1.TokenType.Operator){var start=this.inputIndex,operator=this.next.strValue,result=void 0;switch(operator){case"+":return this.advance(),this.parsePrefix();case"-":return this.advance(),result=this.parsePrefix(),new ast_1.Binary(this.span(start),operator,new ast_1.LiteralPrimitive(new ast_1.ParseSpan(start,start),0),result);case"!":return this.advance(),result=this.parsePrefix(),new ast_1.PrefixNot(this.span(start),result)}}return this.parseCallChain()},_ParseAST.prototype.parseCallChain=function(){for(var result=this.parsePrimary();;)if(this.optionalCharacter(chars.$PERIOD))result=this.parseAccessMemberOrMethodCall(result,!1);else if(this.optionalOperator("?."))result=this.parseAccessMemberOrMethodCall(result,!0);else if(this.optionalCharacter(chars.$LBRACKET)){this.rbracketsExpected++;var key=this.parsePipe();if(this.rbracketsExpected--,this.expectCharacter(chars.$RBRACKET),this.optionalOperator("=")){var value=this.parseConditional();result=new ast_1.KeyedWrite(this.span(result.span.start),result,key,value)}else result=new ast_1.KeyedRead(this.span(result.span.start),result,key)}else{if(!this.optionalCharacter(chars.$LPAREN))return result;this.rparensExpected++;var args=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(chars.$RPAREN),result=new ast_1.FunctionCall(this.span(result.span.start),result,args)}},_ParseAST.prototype.parsePrimary=function(){var start=this.inputIndex;if(this.optionalCharacter(chars.$LPAREN)){this.rparensExpected++;var result=this.parsePipe();return this.rparensExpected--,this.expectCharacter(chars.$RPAREN),result}if(this.next.isKeywordNull())return this.advance(),new ast_1.LiteralPrimitive(this.span(start),null);if(this.next.isKeywordUndefined())return this.advance(),new ast_1.LiteralPrimitive(this.span(start),(void 0));if(this.next.isKeywordTrue())return this.advance(),new ast_1.LiteralPrimitive(this.span(start),(!0));if(this.next.isKeywordFalse())return this.advance(),new ast_1.LiteralPrimitive(this.span(start),(!1));if(this.next.isKeywordThis())return this.advance(),new ast_1.ImplicitReceiver(this.span(start));if(this.optionalCharacter(chars.$LBRACKET)){this.rbracketsExpected++;var elements=this.parseExpressionList(chars.$RBRACKET);return this.rbracketsExpected--,this.expectCharacter(chars.$RBRACKET),new ast_1.LiteralArray(this.span(start),elements)}if(this.next.isCharacter(chars.$LBRACE))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new ast_1.ImplicitReceiver(this.span(start)),!1);if(this.next.isNumber()){var value=this.next.toNumber();return this.advance(),new ast_1.LiteralPrimitive(this.span(start),value)}if(this.next.isString()){var literalValue=this.next.toString();return this.advance(),new ast_1.LiteralPrimitive(this.span(start),literalValue)}return this.index>=this.tokens.length?(this.error("Unexpected end of expression: "+this.input),new ast_1.EmptyExpr(this.span(start))):(this.error("Unexpected token "+this.next),new ast_1.EmptyExpr(this.span(start)))},_ParseAST.prototype.parseExpressionList=function(terminator){var result=[];if(!this.next.isCharacter(terminator))do result.push(this.parsePipe());while(this.optionalCharacter(chars.$COMMA));return result},_ParseAST.prototype.parseLiteralMap=function(){var keys=[],values=[],start=this.inputIndex;if(this.expectCharacter(chars.$LBRACE),!this.optionalCharacter(chars.$RBRACE)){this.rbracesExpected++;do{var key=this.expectIdentifierOrKeywordOrString();keys.push(key),this.expectCharacter(chars.$COLON),values.push(this.parsePipe())}while(this.optionalCharacter(chars.$COMMA));this.rbracesExpected--,this.expectCharacter(chars.$RBRACE)}return new ast_1.LiteralMap(this.span(start),keys,values)},_ParseAST.prototype.parseAccessMemberOrMethodCall=function(receiver,isSafe){void 0===isSafe&&(isSafe=!1);var start=receiver.span.start,id=this.expectIdentifierOrKeyword();if(this.optionalCharacter(chars.$LPAREN)){this.rparensExpected++;var args=this.parseCallArguments();this.expectCharacter(chars.$RPAREN),this.rparensExpected--;var span=this.span(start);return isSafe?new ast_1.SafeMethodCall(span,receiver,id,args):new ast_1.MethodCall(span,receiver,id,args)}if(isSafe)return this.optionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new ast_1.EmptyExpr(this.span(start))):new ast_1.SafePropertyRead(this.span(start),receiver,id);if(this.optionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new ast_1.EmptyExpr(this.span(start));var value=this.parseConditional();return new ast_1.PropertyWrite(this.span(start),receiver,id,value)}return new ast_1.PropertyRead(this.span(start),receiver,id)},_ParseAST.prototype.parseCallArguments=function(){if(this.next.isCharacter(chars.$RPAREN))return[];var positionals=[];do positionals.push(this.parsePipe());while(this.optionalCharacter(chars.$COMMA));return positionals},_ParseAST.prototype.expectTemplateBindingKey=function(){var result="",operatorFound=!1;do result+=this.expectIdentifierOrKeywordOrString(),operatorFound=this.optionalOperator("-"),operatorFound&&(result+="-");while(operatorFound);return result.toString()},_ParseAST.prototype.parseTemplateBindings=function(){for(var bindings=[],prefix=null,warnings=[];this.index<this.tokens.length;){var keyIsVar=this.peekKeywordLet();!keyIsVar&&this.peekDeprecatedKeywordVar()&&(keyIsVar=!0,warnings.push('"var" inside of expressions is deprecated. Use "let" instead!')),!keyIsVar&&this.peekDeprecatedOperatorHash()&&(keyIsVar=!0,warnings.push('"#" inside of expressions is deprecated. Use "let" instead!')),keyIsVar&&this.advance();var key=this.expectTemplateBindingKey();
keyIsVar||(null==prefix?prefix=key:key=prefix+key[0].toUpperCase()+key.substring(1)),this.optionalCharacter(chars.$COLON);var name=null,expression=null;if(keyIsVar)name=this.optionalOperator("=")?this.expectTemplateBindingKey():"$implicit";else if(this.next!==lexer_1.EOF&&!this.peekKeywordLet()&&!this.peekDeprecatedKeywordVar()&&!this.peekDeprecatedOperatorHash()){var start=this.inputIndex,ast=this.parsePipe(),source=this.input.substring(start,this.inputIndex);expression=new ast_1.ASTWithSource(ast,source,this.location,this.errors)}bindings.push(new ast_1.TemplateBinding(key,keyIsVar,name,expression)),this.optionalCharacter(chars.$SEMICOLON)||this.optionalCharacter(chars.$COMMA)}return new TemplateBindingParseResult(bindings,warnings,this.errors)},_ParseAST.prototype.error=function(message,index){void 0===index&&(index=null),this.errors.push(new ast_1.ParserError(message,this.input,this.locationText(index),this.location)),this.skip()},_ParseAST.prototype.locationText=function(index){return void 0===index&&(index=null),lang_1.isBlank(index)&&(index=this.index),index<this.tokens.length?"at column "+(this.tokens[index].index+1)+" in":"at the end of the expression"},_ParseAST.prototype.skip=function(){for(var n=this.next;this.index<this.tokens.length&&!n.isCharacter(chars.$SEMICOLON)&&(this.rparensExpected<=0||!n.isCharacter(chars.$RPAREN))&&(this.rbracesExpected<=0||!n.isCharacter(chars.$RBRACE))&&(this.rbracketsExpected<=0||!n.isCharacter(chars.$RBRACKET));)this.next.isError()&&this.errors.push(new ast_1.ParserError(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),n=this.next},_ParseAST}();exports._ParseAST=_ParseAST;var SimpleExpressionChecker=function(){function SimpleExpressionChecker(){this.simple=!0}return SimpleExpressionChecker.check=function(ast){var s=new SimpleExpressionChecker;return ast.visit(s),s.simple},SimpleExpressionChecker.prototype.visitImplicitReceiver=function(ast,context){},SimpleExpressionChecker.prototype.visitInterpolation=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitLiteralPrimitive=function(ast,context){},SimpleExpressionChecker.prototype.visitPropertyRead=function(ast,context){},SimpleExpressionChecker.prototype.visitPropertyWrite=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitSafePropertyRead=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitMethodCall=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitSafeMethodCall=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitFunctionCall=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitLiteralArray=function(ast,context){this.visitAll(ast.expressions)},SimpleExpressionChecker.prototype.visitLiteralMap=function(ast,context){this.visitAll(ast.values)},SimpleExpressionChecker.prototype.visitBinary=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitPrefixNot=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitConditional=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitPipe=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitKeyedRead=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitKeyedWrite=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitAll=function(asts){var _this=this;return asts.map(function(node){return node.visit(_this)})},SimpleExpressionChecker.prototype.visitChain=function(ast,context){this.simple=!1},SimpleExpressionChecker.prototype.visitQuote=function(ast,context){this.simple=!1},SimpleExpressionChecker}()},{"../chars":72,"../facade/lang":85,"../ml_parser/interpolation_config":105,"./ast":78,"./lexer":79,"@angular/core":154}],81:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],82:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{"./lang":85,dup:14}],83:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"./base_wrapped_exception":81,"./collection":82,"./lang":85,dup:15}],84:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./base_wrapped_exception":81,"./exception_handler":83,dup:16}],85:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],86:[function(require,module,exports){"use strict";var lang_1=require("./lang");exports.Math=lang_1.global.Math,exports.NaN=typeof exports.NaN},{"./lang":85}],87:[function(require,module,exports){"use strict";function digestMessage(message){return strHash(serializeNodes(message.nodes).join("")+("["+message.meaning+"]"))}function strHash(str){for(var result=0,i=0;i<str.length;++i)result=31*result+str.charCodeAt(i)>>>0;return result.toString(16)}function serializeNodes(nodes){return nodes.map(function(a){return a.visit(serializerVisitor,null)})}exports.digestMessage=digestMessage,exports.strHash=strHash;var _SerializerVisitor=function(){function _SerializerVisitor(){}return _SerializerVisitor.prototype.visitText=function(text,context){return text.value},_SerializerVisitor.prototype.visitContainer=function(container,context){var _this=this;return"["+container.children.map(function(child){return child.visit(_this)}).join(", ")+"]"},_SerializerVisitor.prototype.visitIcu=function(icu,context){var _this=this,strCases=Object.keys(icu.cases).map(function(k){return k+" {"+icu.cases[k].visit(_this)+"}"});return"{"+icu.expression+", "+icu.type+", "+strCases.join(", ")+"}"},_SerializerVisitor.prototype.visitTagPlaceholder=function(ph,context){var _this=this;return ph.isVoid?'<ph tag name="'+ph.startName+'"/>':'<ph tag name="'+ph.startName+'">'+ph.children.map(function(child){return child.visit(_this)}).join(", ")+'</ph name="'+ph.closeName+'">'},_SerializerVisitor.prototype.visitPlaceholder=function(ph,context){return'<ph name="'+ph.name+'">'+ph.value+"</ph>"},_SerializerVisitor.prototype.visitIcuPlaceholder=function(ph,context){return'<ph icu name="'+ph.name+'">'+ph.value.visit(this)+"</ph>"},_SerializerVisitor}(),serializerVisitor=new _SerializerVisitor;exports.serializeNodes=serializeNodes},{}],88:[function(require,module,exports){"use strict";function extractMessages(nodes,interpolationConfig,implicitTags,implicitAttrs){var visitor=new _Visitor(implicitTags,implicitAttrs);return visitor.extract(nodes,interpolationConfig)}function mergeTranslations(nodes,translations,interpolationConfig,implicitTags,implicitAttrs){var visitor=new _Visitor(implicitTags,implicitAttrs);return visitor.merge(nodes,translations,interpolationConfig)}function _isOpeningComment(n){return n instanceof html.Comment&&n.value&&n.value.startsWith("i18n")}function _isClosingComment(n){return n instanceof html.Comment&&n.value&&"/i18n"===n.value}function _getI18nAttr(p){return p.attrs.find(function(attr){return attr.name===_I18N_ATTR})||null}function _splitMeaningAndDesc(i18n){if(!i18n)return["",""];var pipeIndex=i18n.indexOf("|");return pipeIndex==-1?["",i18n]:[i18n.slice(0,pipeIndex),i18n.slice(pipeIndex+1)]}var html=require("../ml_parser/ast"),digest_1=require("./digest"),i18n=require("./i18n_ast"),i18n_parser_1=require("./i18n_parser"),parse_util_1=require("./parse_util"),_I18N_ATTR="i18n",_I18N_ATTR_PREFIX="i18n-",_I18N_COMMENT_PREFIX_REGEXP=/^i18n:?/;exports.extractMessages=extractMessages,exports.mergeTranslations=mergeTranslations;var ExtractionResult=function(){function ExtractionResult(messages,errors){this.messages=messages,this.errors=errors}return ExtractionResult}();exports.ExtractionResult=ExtractionResult;var _VisitorMode;!function(_VisitorMode){_VisitorMode[_VisitorMode.Extract=0]="Extract",_VisitorMode[_VisitorMode.Merge=1]="Merge"}(_VisitorMode||(_VisitorMode={}));var _Visitor=function(){function _Visitor(_implicitTags,_implicitAttrs){this._implicitTags=_implicitTags,this._implicitAttrs=_implicitAttrs,this._inI18nNode=!1,this._depth=0,this._inIcu=!1}return _Visitor.prototype.extract=function(nodes,interpolationConfig){var _this=this;return this._init(_VisitorMode.Extract,interpolationConfig),nodes.forEach(function(node){return node.visit(_this,null)}),this._inI18nBlock&&this._reportError(nodes[nodes.length-1],"Unclosed block"),new ExtractionResult(this._messages,this._errors)},_Visitor.prototype.merge=function(nodes,translations,interpolationConfig){this._init(_VisitorMode.Merge,interpolationConfig),this._translations=translations;var wrapper=new html.Element("wrapper",[],nodes,null,null,null),translatedNode=wrapper.visit(this,null);return this._inI18nBlock&&this._reportError(nodes[nodes.length-1],"Unclosed block"),translatedNode.children},_Visitor.prototype.visitExpansionCase=function(icuCase,context){var expression=html.visitAll(this,icuCase.expression,context);if(this._mode===_VisitorMode.Merge)return new html.ExpansionCase(icuCase.value,expression,icuCase.sourceSpan,icuCase.valueSourceSpan,icuCase.expSourceSpan)},_Visitor.prototype.visitExpansion=function(icu,context){this._mayBeAddBlockChildren(icu);var wasInIcu=this._inIcu;this._inIcu||(this._isInTranslatableSection&&this._addMessage([icu]),this._inIcu=!0);var cases=html.visitAll(this,icu.cases,context);return this._mode===_VisitorMode.Merge&&(icu=new html.Expansion(icu.switchValue,icu.type,cases,icu.sourceSpan,icu.switchValueSourceSpan)),this._inIcu=wasInIcu,icu},_Visitor.prototype.visitComment=function(comment,context){var isOpening=_isOpeningComment(comment);if(isOpening&&this._isInTranslatableSection)return void this._reportError(comment,"Could not start a block inside a translatable section");var isClosing=_isClosingComment(comment);if(isClosing&&!this._inI18nBlock)return void this._reportError(comment,"Trying to close an unopened block");if(!this._inI18nNode&&!this._inIcu)if(this._inI18nBlock){if(isClosing){if(this._depth==this._blockStartDepth){this._closeTranslatableSection(comment,this._blockChildren),this._inI18nBlock=!1;var message=this._addMessage(this._blockChildren,this._blockMeaningAndDesc);return this._translateMessage(comment,message)}return void this._reportError(comment,"I18N blocks should not cross element boundaries")}}else isOpening&&(this._inI18nBlock=!0,this._blockStartDepth=this._depth,this._blockChildren=[],this._blockMeaningAndDesc=comment.value.replace(_I18N_COMMENT_PREFIX_REGEXP,"").trim(),this._openTranslatableSection(comment))},_Visitor.prototype.visitText=function(text,context){return this._isInTranslatableSection&&this._mayBeAddBlockChildren(text),text},_Visitor.prototype.visitElement=function(el,context){var _this=this;this._mayBeAddBlockChildren(el),this._depth++;var childNodes,wasInI18nNode=this._inI18nNode,i18nAttr=_getI18nAttr(el),isImplicitI18n=this._implicitTags.some(function(tag){return el.name===tag});if(this._isInTranslatableSection||this._inIcu)(i18nAttr||isImplicitI18n)&&this._reportError(el,"Could not mark an element as translatable inside a translatable section"),this._mode==_VisitorMode.Extract&&html.visitAll(this,el.children),this._mode==_VisitorMode.Merge&&(childNodes=[],el.children.forEach(function(child){var visited=child.visit(_this,context);visited&&!_this._isInTranslatableSection&&(childNodes=childNodes.concat(visited))}));else{if(i18nAttr){this._inI18nNode=!0;var message=this._addMessage(el.children,i18nAttr.value);childNodes=this._translateMessage(el,message)}else if(isImplicitI18n){this._inI18nNode=!0;var message=this._addMessage(el.children);childNodes=this._translateMessage(el,message)}if(this._mode==_VisitorMode.Extract){var isTranslatable=i18nAttr||isImplicitI18n;isTranslatable&&this._openTranslatableSection(el),html.visitAll(this,el.children),isTranslatable&&this._closeTranslatableSection(el,el.children)}this._mode!==_VisitorMode.Merge||i18nAttr||isImplicitI18n||(childNodes=[],el.children.forEach(function(child){var visited=child.visit(_this,context);visited&&!_this._isInTranslatableSection&&(childNodes=childNodes.concat(visited))}))}if(this._visitAttributesOf(el),this._depth--,this._inI18nNode=wasInI18nNode,this._mode===_VisitorMode.Merge){var translatedAttrs=this._translateAttributes(el);return new html.Element(el.name,translatedAttrs,childNodes,el.sourceSpan,el.startSourceSpan,el.endSourceSpan)}},_Visitor.prototype.visitAttribute=function(attribute,context){throw new Error("unreachable code")},_Visitor.prototype._init=function(mode,interpolationConfig){this._mode=mode,this._inI18nBlock=!1,this._inI18nNode=!1,this._depth=0,this._inIcu=!1,this._msgCountAtSectionStart=void 0,this._errors=[],this._messages=[],this._createI18nMessage=i18n_parser_1.createI18nMessageFactory(interpolationConfig)},_Visitor.prototype._visitAttributesOf=function(el){var _this=this,explicitAttrNameToValue={},implicitAttrNames=this._implicitAttrs[el.name]||[];el.attrs.filter(function(attr){return attr.name.startsWith(_I18N_ATTR_PREFIX)}).forEach(function(attr){return explicitAttrNameToValue[attr.name.slice(_I18N_ATTR_PREFIX.length)]=attr.value}),el.attrs.forEach(function(attr){attr.name in explicitAttrNameToValue?_this._addMessage([attr],explicitAttrNameToValue[attr.name]):implicitAttrNames.some(function(name){return attr.name===name})&&_this._addMessage([attr])})},_Visitor.prototype._addMessage=function(ast,meaningAndDesc){if(!(0==ast.length||1==ast.length&&ast[0]instanceof html.Attribute&&!ast[0].value)){var _a=_splitMeaningAndDesc(meaningAndDesc),meaning=_a[0],description=_a[1],message=this._createI18nMessage(ast,meaning,description);return this._messages.push(message),message}},_Visitor.prototype._translateMessage=function(el,message){if(message&&this._mode===_VisitorMode.Merge){var id=digest_1.digestMessage(message),nodes=this._translations.get(id);if(nodes)return nodes;this._reportError(el,'Translation unavailable for message id="'+id+'"')}return[]},_Visitor.prototype._translateAttributes=function(el){var _this=this,attributes=el.attrs,i18nAttributeMeanings={};attributes.forEach(function(attr){attr.name.startsWith(_I18N_ATTR_PREFIX)&&(i18nAttributeMeanings[attr.name.slice(_I18N_ATTR_PREFIX.length)]=_splitMeaningAndDesc(attr.value)[0])});var translatedAttributes=[];return attributes.forEach(function(attr){if(attr.name!==_I18N_ATTR&&!attr.name.startsWith(_I18N_ATTR_PREFIX))if(i18nAttributeMeanings.hasOwnProperty(attr.name)){var meaning=i18nAttributeMeanings[attr.name],message=_this._createI18nMessage([attr],meaning,""),id=digest_1.digestMessage(message),nodes=_this._translations.get(id);if(nodes)if(nodes[0]instanceof html.Text){var value=nodes[0].value;translatedAttributes.push(new html.Attribute(attr.name,value,attr.sourceSpan))}else _this._reportError(el,'Unexpected translation for attribute "'+attr.name+'" (id="'+id+'")');else _this._reportError(el,'Translation unavailable for attribute "'+attr.name+'" (id="'+id+'")')}else translatedAttributes.push(attr)}),translatedAttributes},_Visitor.prototype._mayBeAddBlockChildren=function(node){this._inI18nBlock&&!this._inIcu&&this._depth==this._blockStartDepth&&this._blockChildren.push(node)},_Visitor.prototype._openTranslatableSection=function(node){this._isInTranslatableSection?this._reportError(node,"Unexpected section start"):this._msgCountAtSectionStart=this._messages.length},Object.defineProperty(_Visitor.prototype,"_isInTranslatableSection",{get:function(){return void 0!==this._msgCountAtSectionStart},enumerable:!0,configurable:!0}),_Visitor.prototype._closeTranslatableSection=function(node,directChildren){if(!this._isInTranslatableSection)return void this._reportError(node,"Unexpected section end");var startIndex=this._msgCountAtSectionStart,significantChildren=directChildren.reduce(function(count,node){return count+(node instanceof html.Comment?0:1)},0);if(1==significantChildren)for(var i=this._messages.length-1;i>=startIndex;i--){var ast=this._messages[i].nodes;if(!(1==ast.length&&ast[0]instanceof i18n.Text)){this._messages.splice(i,1);break}}this._msgCountAtSectionStart=void 0},_Visitor.prototype._reportError=function(node,msg){this._errors.push(new parse_util_1.I18nError(node.sourceSpan,msg))},_Visitor}()},{"../ml_parser/ast":101,"./digest":87,"./i18n_ast":89,"./i18n_parser":90,"./parse_util":93}],89:[function(require,module,exports){"use strict";var Message=function(){function Message(nodes,placeholders,meaning,description){this.nodes=nodes,this.placeholders=placeholders,this.meaning=meaning,this.description=description}return Message}();exports.Message=Message;var Text=function(){function Text(value,sourceSpan){this.value=value,this.sourceSpan=sourceSpan}return Text.prototype.visit=function(visitor,context){return visitor.visitText(this,context)},Text}();exports.Text=Text;var Container=function(){function Container(children,sourceSpan){this.children=children,this.sourceSpan=sourceSpan}return Container.prototype.visit=function(visitor,context){return visitor.visitContainer(this,context)},Container}();exports.Container=Container;var Icu=function(){function Icu(expression,type,cases,sourceSpan){this.expression=expression,this.type=type,this.cases=cases,this.sourceSpan=sourceSpan}return Icu.prototype.visit=function(visitor,context){return visitor.visitIcu(this,context)},Icu}();exports.Icu=Icu;var TagPlaceholder=function(){function TagPlaceholder(tag,attrs,startName,closeName,children,isVoid,sourceSpan){this.tag=tag,this.attrs=attrs,this.startName=startName,this.closeName=closeName,this.children=children,this.isVoid=isVoid,this.sourceSpan=sourceSpan}return TagPlaceholder.prototype.visit=function(visitor,context){return visitor.visitTagPlaceholder(this,context)},TagPlaceholder}();exports.TagPlaceholder=TagPlaceholder;var Placeholder=function(){function Placeholder(value,name,sourceSpan){void 0===name&&(name=""),this.value=value,this.name=name,this.sourceSpan=sourceSpan}return Placeholder.prototype.visit=function(visitor,context){return visitor.visitPlaceholder(this,context)},Placeholder}();exports.Placeholder=Placeholder;var IcuPlaceholder=function(){function IcuPlaceholder(value,name,sourceSpan){void 0===name&&(name=""),this.value=value,this.name=name,this.sourceSpan=sourceSpan}return IcuPlaceholder.prototype.visit=function(visitor,context){return visitor.visitIcuPlaceholder(this,context)},IcuPlaceholder}();exports.IcuPlaceholder=IcuPlaceholder},{}],90:[function(require,module,exports){"use strict";function createI18nMessageFactory(interpolationConfig){var visitor=new _I18nVisitor(_expParser,interpolationConfig);return function(nodes,meaning,description){return visitor.toI18nMessage(nodes,meaning,description)}}function _extractPlaceholderName(input){return input.split(_CUSTOM_PH_EXP)[1]}var lexer_1=require("../expression_parser/lexer"),parser_1=require("../expression_parser/parser"),html=require("../ml_parser/ast"),html_tags_1=require("../ml_parser/html_tags"),i18n=require("./i18n_ast"),placeholder_1=require("./serializers/placeholder"),_expParser=new parser_1.Parser(new lexer_1.Lexer);exports.createI18nMessageFactory=createI18nMessageFactory;var _I18nVisitor=function(){function _I18nVisitor(_expressionParser,_interpolationConfig){this._expressionParser=_expressionParser,this._interpolationConfig=_interpolationConfig}return _I18nVisitor.prototype.toI18nMessage=function(nodes,meaning,description){this._isIcu=1==nodes.length&&nodes[0]instanceof html.Expansion,this._icuDepth=0,this._placeholderRegistry=new placeholder_1.PlaceholderRegistry,this._placeholderToContent={};var i18nodes=html.visitAll(this,nodes,{});return new i18n.Message(i18nodes,this._placeholderToContent,meaning,description)},_I18nVisitor.prototype.visitElement=function(el,context){var children=html.visitAll(this,el.children),attrs={};el.attrs.forEach(function(attr){attrs[attr.name]=attr.value});var isVoid=html_tags_1.getHtmlTagDefinition(el.name).isVoid,startPhName=this._placeholderRegistry.getStartTagPlaceholderName(el.name,attrs,isVoid);this._placeholderToContent[startPhName]=el.sourceSpan.toString();var closePhName="";return isVoid||(closePhName=this._placeholderRegistry.getCloseTagPlaceholderName(el.name),this._placeholderToContent[closePhName]="</"+el.name+">"),new i18n.TagPlaceholder(el.name,attrs,startPhName,closePhName,children,isVoid,el.sourceSpan)},_I18nVisitor.prototype.visitAttribute=function(attribute,context){return this._visitTextWithInterpolation(attribute.value,attribute.sourceSpan)},_I18nVisitor.prototype.visitText=function(text,context){return this._visitTextWithInterpolation(text.value,text.sourceSpan)},_I18nVisitor.prototype.visitComment=function(comment,context){return null},_I18nVisitor.prototype.visitExpansion=function(icu,context){var _this=this;this._icuDepth++;var i18nIcuCases={},i18nIcu=new i18n.Icu(icu.switchValue,icu.type,i18nIcuCases,icu.sourceSpan);if(icu.cases.forEach(function(caze){i18nIcuCases[caze.value]=new i18n.Container(caze.expression.map(function(node){return node.visit(_this,{})}),caze.expSourceSpan)}),this._icuDepth--,this._isIcu||this._icuDepth>0)return i18nIcu;var phName=this._placeholderRegistry.getPlaceholderName("ICU",icu.sourceSpan.toString());return this._placeholderToContent[phName]=icu.sourceSpan.toString(),new i18n.IcuPlaceholder(i18nIcu,phName,icu.sourceSpan)},_I18nVisitor.prototype.visitExpansionCase=function(icuCase,context){throw new Error("Unreachable code")},_I18nVisitor.prototype._visitTextWithInterpolation=function(text,sourceSpan){var splitInterpolation=this._expressionParser.splitInterpolation(text,sourceSpan.start.toString(),this._interpolationConfig);if(!splitInterpolation)return new i18n.Text(text,sourceSpan);for(var nodes=[],container=new i18n.Container(nodes,sourceSpan),_a=this._interpolationConfig,sDelimiter=_a.start,eDelimiter=_a.end,i=0;i<splitInterpolation.strings.length-1;i++){var expression=splitInterpolation.expressions[i],baseName=_extractPlaceholderName(expression)||"INTERPOLATION",phName=this._placeholderRegistry.getPlaceholderName(baseName,expression);splitInterpolation.strings[i].length&&nodes.push(new i18n.Text(splitInterpolation.strings[i],sourceSpan)),nodes.push(new i18n.Placeholder(expression,phName,sourceSpan)),this._placeholderToContent[phName]=sDelimiter+expression+eDelimiter}var lastStringIdx=splitInterpolation.strings.length-1;return splitInterpolation.strings[lastStringIdx].length&&nodes.push(new i18n.Text(splitInterpolation.strings[lastStringIdx],sourceSpan)),container},_I18nVisitor}(),_CUSTOM_PH_EXP=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*"([\s\S]*?)"[\s\S]*\)/g},{"../expression_parser/lexer":79,"../expression_parser/parser":80,"../ml_parser/ast":101,"../ml_parser/html_tags":103,"./i18n_ast":89,"./serializers/placeholder":94}],91:[function(require,module,exports){"use strict";var message_bundle_1=require("./message_bundle");exports.MessageBundle=message_bundle_1.MessageBundle;var xmb_1=require("./serializers/xmb");exports.Xmb=xmb_1.Xmb;var xtb_1=require("./serializers/xtb");exports.Xtb=xtb_1.Xtb},{"./message_bundle":92,"./serializers/xmb":95,"./serializers/xtb":97}],92:[function(require,module,exports){"use strict";var digest_1=require("./digest"),extractor_merger_1=require("./extractor_merger"),MessageBundle=function(){function MessageBundle(_htmlParser,_implicitTags,_implicitAttrs){this._htmlParser=_htmlParser,this._implicitTags=_implicitTags,this._implicitAttrs=_implicitAttrs,this._messageMap={}}return MessageBundle.prototype.updateFromTemplate=function(html,url,interpolationConfig){var _this=this,htmlParserResult=this._htmlParser.parse(html,url,!0,interpolationConfig);if(htmlParserResult.errors.length)return htmlParserResult.errors;var i18nParserResult=extractor_merger_1.extractMessages(htmlParserResult.rootNodes,interpolationConfig,this._implicitTags,this._implicitAttrs);return i18nParserResult.errors.length?i18nParserResult.errors:void i18nParserResult.messages.forEach(function(message){_this._messageMap[digest_1.digestMessage(message)]=message})},MessageBundle.prototype.write=function(serializer){return serializer.write(this._messageMap)},MessageBundle}();exports.MessageBundle=MessageBundle},{"./digest":87,"./extractor_merger":88}],93:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},parse_util_1=require("../parse_util"),I18nError=function(_super){function I18nError(span,msg){_super.call(this,span,msg)}return __extends(I18nError,_super),I18nError}(parse_util_1.ParseError);exports.I18nError=I18nError},{"../parse_util":122}],94:[function(require,module,exports){"use strict";var TAG_TO_PLACEHOLDER_NAMES={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},PlaceholderRegistry=function(){function PlaceholderRegistry(){this._placeHolderNameCounts={},this._signatureToName={}}return PlaceholderRegistry.prototype.getStartTagPlaceholderName=function(tag,attrs,isVoid){var signature=this._hashTag(tag,attrs,isVoid);if(this._signatureToName[signature])return this._signatureToName[signature];var upperTag=tag.toUpperCase(),baseName=TAG_TO_PLACEHOLDER_NAMES[upperTag]||"TAG_"+upperTag,name=this._generateUniqueName(isVoid?baseName:"START_"+baseName);return this._signatureToName[signature]=name,name},PlaceholderRegistry.prototype.getCloseTagPlaceholderName=function(tag){var signature=this._hashClosingTag(tag);if(this._signatureToName[signature])return this._signatureToName[signature];var upperTag=tag.toUpperCase(),baseName=TAG_TO_PLACEHOLDER_NAMES[upperTag]||"TAG_"+upperTag,name=this._generateUniqueName("CLOSE_"+baseName);return this._signatureToName[signature]=name,name},PlaceholderRegistry.prototype.getPlaceholderName=function(name,content){var upperName=name.toUpperCase(),signature="PH: "+upperName+"="+content;if(this._signatureToName[signature])return this._signatureToName[signature];var uniqueName=this._generateUniqueName(upperName);return this._signatureToName[signature]=uniqueName,uniqueName},PlaceholderRegistry.prototype._hashTag=function(tag,attrs,isVoid){var start="<"+tag,strAttrs=Object.keys(attrs).sort().map(function(name){return" "+name+"="+attrs[name]}).join(""),end=isVoid?"/>":"></"+tag+">";return start+strAttrs+end},PlaceholderRegistry.prototype._hashClosingTag=function(tag){return this._hashTag("/"+tag,{},!1)},PlaceholderRegistry.prototype._generateUniqueName=function(base){var name=base,next=this._placeHolderNameCounts[name];return next?(name+="_"+next,next++):next=1,this._placeHolderNameCounts[base]=next,name},PlaceholderRegistry}();exports.PlaceholderRegistry=PlaceholderRegistry},{}],95:[function(require,module,exports){"use strict";var collection_1=require("../../facade/collection"),xml=require("./xml_helper"),_MESSAGES_TAG="messagebundle",_MESSAGE_TAG="msg",_PLACEHOLDER_TAG="ph",_EXEMPLE_TAG="ex",_DOCTYPE='<!ELEMENT messagebundle (msg)*>\n<!ATTLIST messagebundle class CDATA #IMPLIED>\n\n<!ELEMENT msg (#PCDATA|ph|source)*>\n<!ATTLIST msg id CDATA #IMPLIED>\n<!ATTLIST msg seq CDATA #IMPLIED>\n<!ATTLIST msg name CDATA #IMPLIED>\n<!ATTLIST msg desc CDATA #IMPLIED>\n<!ATTLIST msg meaning CDATA #IMPLIED>\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\n<!ATTLIST msg xml:space (default|preserve) "default">\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\n\n<!ELEMENT source (#PCDATA)>\n\n<!ELEMENT ph (#PCDATA|ex)*>\n<!ATTLIST ph name CDATA #REQUIRED>\n\n<!ELEMENT ex (#PCDATA)>',Xmb=function(){function Xmb(){}return Xmb.prototype.write=function(messageMap){var visitor=new _Visitor,rootNode=new xml.Tag(_MESSAGES_TAG);return rootNode.children.push(new xml.Text("\n")),Object.keys(messageMap).forEach(function(id){var message=messageMap[id],attrs={id:id};message.description&&(attrs.desc=message.description),message.meaning&&(attrs.meaning=message.meaning),rootNode.children.push(new xml.Text("  "),new xml.Tag(_MESSAGE_TAG,attrs,visitor.serialize(message.nodes)),new xml.Text("\n"))}),xml.serialize([new xml.Declaration({version:"1.0",encoding:"UTF-8"}),new xml.Text("\n"),new xml.Doctype(_MESSAGES_TAG,_DOCTYPE),new xml.Text("\n"),rootNode])},Xmb.prototype.load=function(content,url,placeholders){throw new Error("Unsupported")},Xmb}();exports.Xmb=Xmb;var _Visitor=function(){function _Visitor(){}return _Visitor.prototype.visitText=function(text,context){return[new xml.Text(text.value)]},_Visitor.prototype.visitContainer=function(container,context){var _this=this,nodes=[];return container.children.forEach(function(node){return nodes.push.apply(nodes,node.visit(_this))}),nodes},_Visitor.prototype.visitIcu=function(icu,context){var _this=this,nodes=[new xml.Text("{"+icu.expression+", "+icu.type+", ")];return Object.keys(icu.cases).forEach(function(c){nodes.push.apply(nodes,[new xml.Text(c+" {")].concat(icu.cases[c].visit(_this),[new xml.Text("}")]))}),nodes.push(new xml.Text("}")),nodes},_Visitor.prototype.visitTagPlaceholder=function(ph,context){var startEx=new xml.Tag(_EXEMPLE_TAG,{},[new xml.Text("<"+ph.tag+">")]),startTagPh=new xml.Tag(_PLACEHOLDER_TAG,{name:ph.startName},[startEx]);if(ph.isVoid)return[startTagPh];var closeEx=new xml.Tag(_EXEMPLE_TAG,{},[new xml.Text("</"+ph.tag+">")]),closeTagPh=new xml.Tag(_PLACEHOLDER_TAG,{name:ph.closeName},[closeEx]);return[startTagPh].concat(this.serialize(ph.children),[closeTagPh])},_Visitor.prototype.visitPlaceholder=function(ph,context){return[new xml.Tag(_PLACEHOLDER_TAG,{name:ph.name})]},_Visitor.prototype.visitIcuPlaceholder=function(ph,context){return[new xml.Tag(_PLACEHOLDER_TAG,{name:ph.name})]},_Visitor.prototype.serialize=function(nodes){var _this=this;return collection_1.ListWrapper.flatten(nodes.map(function(node){return node.visit(_this)}))},_Visitor}()},{"../../facade/collection":82,"./xml_helper":96}],96:[function(require,module,exports){"use strict";function serialize(nodes){return nodes.map(function(node){return node.visit(_visitor)}).join("")}function _escapeXml(text){return _ESCAPED_CHARS.reduce(function(text,entry){return text.replace(entry[0],entry[1])},text)}var _Visitor=function(){function _Visitor(){}return _Visitor.prototype.visitTag=function(tag){var _this=this,strAttrs=this._serializeAttributes(tag.attrs);if(0==tag.children.length)return"<"+tag.name+strAttrs+"/>";var strChildren=tag.children.map(function(node){return node.visit(_this)});return"<"+tag.name+strAttrs+">"+strChildren.join("")+"</"+tag.name+">"},_Visitor.prototype.visitText=function(text){return text.value},_Visitor.prototype.visitDeclaration=function(decl){return"<? xml"+this._serializeAttributes(decl.attrs)+" ?>"},_Visitor.prototype._serializeAttributes=function(attrs){var strAttrs=Object.keys(attrs).map(function(name){return name+'="'+attrs[name]+'"'}).join(" ");return strAttrs.length>0?" "+strAttrs:""},_Visitor.prototype.visitDoctype=function(doctype){return"<!DOCTYPE "+doctype.rootTag+" [\n"+doctype.dtd+"\n]>"},_Visitor}(),_visitor=new _Visitor;exports.serialize=serialize;var Declaration=function(){function Declaration(unescapedAttrs){var _this=this;this.attrs={},Object.keys(unescapedAttrs).forEach(function(k){_this.attrs[k]=_escapeXml(unescapedAttrs[k])})}return Declaration.prototype.visit=function(visitor){return visitor.visitDeclaration(this)},Declaration}();exports.Declaration=Declaration;var Doctype=function(){function Doctype(rootTag,dtd){this.rootTag=rootTag,this.dtd=dtd}return Doctype.prototype.visit=function(visitor){return visitor.visitDoctype(this)},Doctype}();exports.Doctype=Doctype;var Tag=function(){function Tag(name,unescapedAttrs,children){var _this=this;void 0===unescapedAttrs&&(unescapedAttrs={}),void 0===children&&(children=[]),this.name=name,
this.children=children,this.attrs={},Object.keys(unescapedAttrs).forEach(function(k){_this.attrs[k]=_escapeXml(unescapedAttrs[k])})}return Tag.prototype.visit=function(visitor){return visitor.visitTag(this)},Tag}();exports.Tag=Tag;var Text=function(){function Text(unescapedValue){this.value=_escapeXml(unescapedValue)}return Text.prototype.visit=function(visitor){return visitor.visitText(this)},Text}();exports.Text=Text;var _ESCAPED_CHARS=[[/&/g,"&amp;"],[/"/g,"&quot;"],[/'/g,"&apos;"],[/</g,"&lt;"],[/>/g,"&gt;"]]},{}],97:[function(require,module,exports){"use strict";var ml=require("../../ml_parser/ast"),xml_parser_1=require("../../ml_parser/xml_parser"),parse_util_1=require("../parse_util"),_TRANSLATIONS_TAG="translationbundle",_TRANSLATION_TAG="translation",_PLACEHOLDER_TAG="ph",Xtb=function(){function Xtb(_htmlParser,_interpolationConfig){this._htmlParser=_htmlParser,this._interpolationConfig=_interpolationConfig}return Xtb.prototype.write=function(messageMap){throw new Error("Unsupported")},Xtb.prototype.load=function(content,url,placeholders){var _this=this,result=(new xml_parser_1.XmlParser).parse(content,url);if(result.errors.length)throw new Error("xtb parse errors:\n"+result.errors.join("\n"));var _a=(new _Serializer).parse(result.rootNodes,placeholders),messages=_a.messages,errors=_a.errors;if(errors.length)throw new Error("xtb parse errors:\n"+errors.join("\n"));var messageMap={},parseErrors=[];if(Object.keys(messages).forEach(function(id){var res=_this._htmlParser.parse(messages[id],url,!0,_this._interpolationConfig);parseErrors.push.apply(parseErrors,res.errors),messageMap[id]=res.rootNodes}),parseErrors.length)throw new Error("xtb parse errors:\n"+parseErrors.join("\n"));return messageMap},Xtb}();exports.Xtb=Xtb;var _Serializer=function(){function _Serializer(){}return _Serializer.prototype.parse=function(nodes,_placeholders){return this._messages={},this._bundleDepth=0,this._translationDepth=0,this._errors=[],this._placeholders=_placeholders,ml.visitAll(this,nodes,null),{messages:this._messages,errors:this._errors}},_Serializer.prototype.visitElement=function(element,context){switch(element.name){case _TRANSLATIONS_TAG:this._bundleDepth++,this._bundleDepth>1&&this._addError(element,"<"+_TRANSLATIONS_TAG+"> elements can not be nested"),ml.visitAll(this,element.children,null),this._bundleDepth--;break;case _TRANSLATION_TAG:this._translationDepth++,this._translationDepth>1&&this._addError(element,"<"+_TRANSLATION_TAG+"> elements can not be nested");var idAttr=element.attrs.find(function(attr){return"id"===attr.name});idAttr?(this._currentPlaceholders=this._placeholders[idAttr.value]||{},this._messages[idAttr.value]=ml.visitAll(this,element.children).join("")):this._addError(element,"<"+_TRANSLATION_TAG+'> misses the "id" attribute'),this._translationDepth--;break;case _PLACEHOLDER_TAG:var nameAttr=element.attrs.find(function(attr){return"name"===attr.name});if(nameAttr){if(this._currentPlaceholders.hasOwnProperty(nameAttr.value))return this._currentPlaceholders[nameAttr.value];this._addError(element,'The placeholder "'+nameAttr.value+'" does not exists in the source message')}else this._addError(element,"<"+_PLACEHOLDER_TAG+'> misses the "name" attribute');break;default:this._addError(element,"Unexpected tag")}},_Serializer.prototype.visitAttribute=function(attribute,context){throw new Error("unreachable code")},_Serializer.prototype.visitText=function(text,context){return text.value},_Serializer.prototype.visitComment=function(comment,context){return""},_Serializer.prototype.visitExpansion=function(expansion,context){var _this=this;expansion.cases.map(function(c){return c.visit(_this,null)});return"{"+expansion.switchValue+", "+expansion.type+", strCases.join(' ')}"},_Serializer.prototype.visitExpansionCase=function(expansionCase,context){return expansionCase.value+" {"+ml.visitAll(this,expansionCase.expression,null)+"}"},_Serializer.prototype._addError=function(node,message){this._errors.push(new parse_util_1.I18nError(node.sourceSpan,message))},_Serializer}()},{"../../ml_parser/ast":101,"../../ml_parser/xml_parser":109,"../parse_util":93}],98:[function(require,module,exports){"use strict";function identifierToken(identifier){return new compile_metadata_1.CompileTokenMetadata({identifier:identifier})}var core_1=require("@angular/core"),core_private_1=require("../core_private"),compile_metadata_1=require("./compile_metadata"),util_1=require("./util"),APP_VIEW_MODULE_URL=util_1.assetUrl("core","linker/view"),VIEW_UTILS_MODULE_URL=util_1.assetUrl("core","linker/view_utils"),CD_MODULE_URL=util_1.assetUrl("core","change_detection/change_detection"),impViewUtils=core_private_1.ViewUtils,impAppView=core_private_1.AppView,impDebugAppView=core_private_1.DebugAppView,impDebugContext=core_private_1.DebugContext,impAppElement=core_private_1.AppElement,impElementRef=core_1.ElementRef,impViewContainerRef=core_1.ViewContainerRef,impChangeDetectorRef=core_1.ChangeDetectorRef,impRenderComponentType=core_1.RenderComponentType,impQueryList=core_1.QueryList,impTemplateRef=core_1.TemplateRef,impTemplateRef_=core_private_1.TemplateRef_,impValueUnwrapper=core_private_1.ValueUnwrapper,impInjector=core_1.Injector,impViewEncapsulation=core_1.ViewEncapsulation,impViewType=core_private_1.ViewType,impChangeDetectionStrategy=core_1.ChangeDetectionStrategy,impStaticNodeDebugInfo=core_private_1.StaticNodeDebugInfo,impRenderer=core_1.Renderer,impSimpleChange=core_1.SimpleChange,impUNINITIALIZED=core_private_1.UNINITIALIZED,impChangeDetectorStatus=core_private_1.ChangeDetectorStatus,impFlattenNestedViewRenderNodes=core_private_1.flattenNestedViewRenderNodes,impDevModeEqual=core_private_1.devModeEqual,impInterpolate=core_private_1.interpolate,impCheckBinding=core_private_1.checkBinding,impCastByValue=core_private_1.castByValue,impEMPTY_ARRAY=core_private_1.EMPTY_ARRAY,impEMPTY_MAP=core_private_1.EMPTY_MAP,impAnimationGroupPlayer=core_private_1.AnimationGroupPlayer,impAnimationSequencePlayer=core_private_1.AnimationSequencePlayer,impAnimationKeyframe=core_private_1.AnimationKeyframe,impAnimationStyles=core_private_1.AnimationStyles,impNoOpAnimationPlayer=core_private_1.NoOpAnimationPlayer,ANIMATION_STYLE_UTIL_ASSET_URL=util_1.assetUrl("core","animation/animation_style_util"),Identifiers=function(){function Identifiers(){}return Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS=new compile_metadata_1.CompileIdentifierMetadata({name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleUrl:util_1.assetUrl("core","metadata/di"),runtime:core_1.ANALYZE_FOR_ENTRY_COMPONENTS}),Identifiers.ViewUtils=new compile_metadata_1.CompileIdentifierMetadata({name:"ViewUtils",moduleUrl:util_1.assetUrl("core","linker/view_utils"),runtime:impViewUtils}),Identifiers.AppView=new compile_metadata_1.CompileIdentifierMetadata({name:"AppView",moduleUrl:APP_VIEW_MODULE_URL,runtime:impAppView}),Identifiers.DebugAppView=new compile_metadata_1.CompileIdentifierMetadata({name:"DebugAppView",moduleUrl:APP_VIEW_MODULE_URL,runtime:impDebugAppView}),Identifiers.AppElement=new compile_metadata_1.CompileIdentifierMetadata({name:"AppElement",moduleUrl:util_1.assetUrl("core","linker/element"),runtime:impAppElement}),Identifiers.ElementRef=new compile_metadata_1.CompileIdentifierMetadata({name:"ElementRef",moduleUrl:util_1.assetUrl("core","linker/element_ref"),runtime:impElementRef}),Identifiers.ViewContainerRef=new compile_metadata_1.CompileIdentifierMetadata({name:"ViewContainerRef",moduleUrl:util_1.assetUrl("core","linker/view_container_ref"),runtime:impViewContainerRef}),Identifiers.ChangeDetectorRef=new compile_metadata_1.CompileIdentifierMetadata({name:"ChangeDetectorRef",moduleUrl:util_1.assetUrl("core","change_detection/change_detector_ref"),runtime:impChangeDetectorRef}),Identifiers.RenderComponentType=new compile_metadata_1.CompileIdentifierMetadata({name:"RenderComponentType",moduleUrl:util_1.assetUrl("core","render/api"),runtime:impRenderComponentType}),Identifiers.QueryList=new compile_metadata_1.CompileIdentifierMetadata({name:"QueryList",moduleUrl:util_1.assetUrl("core","linker/query_list"),runtime:impQueryList}),Identifiers.TemplateRef=new compile_metadata_1.CompileIdentifierMetadata({name:"TemplateRef",moduleUrl:util_1.assetUrl("core","linker/template_ref"),runtime:impTemplateRef}),Identifiers.TemplateRef_=new compile_metadata_1.CompileIdentifierMetadata({name:"TemplateRef_",moduleUrl:util_1.assetUrl("core","linker/template_ref"),runtime:impTemplateRef_}),Identifiers.CodegenComponentFactoryResolver=new compile_metadata_1.CompileIdentifierMetadata({name:"CodegenComponentFactoryResolver",moduleUrl:util_1.assetUrl("core","linker/component_factory_resolver"),runtime:core_private_1.CodegenComponentFactoryResolver}),Identifiers.ComponentFactoryResolver=new compile_metadata_1.CompileIdentifierMetadata({name:"ComponentFactoryResolver",moduleUrl:util_1.assetUrl("core","linker/component_factory_resolver"),runtime:core_1.ComponentFactoryResolver}),Identifiers.ComponentFactory=new compile_metadata_1.CompileIdentifierMetadata({name:"ComponentFactory",runtime:core_1.ComponentFactory,moduleUrl:util_1.assetUrl("core","linker/component_factory")}),Identifiers.NgModuleFactory=new compile_metadata_1.CompileIdentifierMetadata({name:"NgModuleFactory",runtime:core_1.NgModuleFactory,moduleUrl:util_1.assetUrl("core","linker/ng_module_factory")}),Identifiers.NgModuleInjector=new compile_metadata_1.CompileIdentifierMetadata({name:"NgModuleInjector",runtime:core_private_1.NgModuleInjector,moduleUrl:util_1.assetUrl("core","linker/ng_module_factory")}),Identifiers.ValueUnwrapper=new compile_metadata_1.CompileIdentifierMetadata({name:"ValueUnwrapper",moduleUrl:CD_MODULE_URL,runtime:impValueUnwrapper}),Identifiers.Injector=new compile_metadata_1.CompileIdentifierMetadata({name:"Injector",moduleUrl:util_1.assetUrl("core","di/injector"),runtime:impInjector}),Identifiers.ViewEncapsulation=new compile_metadata_1.CompileIdentifierMetadata({name:"ViewEncapsulation",moduleUrl:util_1.assetUrl("core","metadata/view"),runtime:impViewEncapsulation}),Identifiers.ViewType=new compile_metadata_1.CompileIdentifierMetadata({name:"ViewType",moduleUrl:util_1.assetUrl("core","linker/view_type"),runtime:impViewType}),Identifiers.ChangeDetectionStrategy=new compile_metadata_1.CompileIdentifierMetadata({name:"ChangeDetectionStrategy",moduleUrl:CD_MODULE_URL,runtime:impChangeDetectionStrategy}),Identifiers.StaticNodeDebugInfo=new compile_metadata_1.CompileIdentifierMetadata({name:"StaticNodeDebugInfo",moduleUrl:util_1.assetUrl("core","linker/debug_context"),runtime:impStaticNodeDebugInfo}),Identifiers.DebugContext=new compile_metadata_1.CompileIdentifierMetadata({name:"DebugContext",moduleUrl:util_1.assetUrl("core","linker/debug_context"),runtime:impDebugContext}),Identifiers.Renderer=new compile_metadata_1.CompileIdentifierMetadata({name:"Renderer",moduleUrl:util_1.assetUrl("core","render/api"),runtime:impRenderer}),Identifiers.SimpleChange=new compile_metadata_1.CompileIdentifierMetadata({name:"SimpleChange",moduleUrl:CD_MODULE_URL,runtime:impSimpleChange}),Identifiers.UNINITIALIZED=new compile_metadata_1.CompileIdentifierMetadata({name:"UNINITIALIZED",moduleUrl:CD_MODULE_URL,runtime:impUNINITIALIZED}),Identifiers.ChangeDetectorStatus=new compile_metadata_1.CompileIdentifierMetadata({name:"ChangeDetectorStatus",moduleUrl:CD_MODULE_URL,runtime:impChangeDetectorStatus}),Identifiers.checkBinding=new compile_metadata_1.CompileIdentifierMetadata({name:"checkBinding",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:impCheckBinding}),Identifiers.flattenNestedViewRenderNodes=new compile_metadata_1.CompileIdentifierMetadata({name:"flattenNestedViewRenderNodes",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:impFlattenNestedViewRenderNodes}),Identifiers.devModeEqual=new compile_metadata_1.CompileIdentifierMetadata({name:"devModeEqual",moduleUrl:CD_MODULE_URL,runtime:impDevModeEqual}),Identifiers.interpolate=new compile_metadata_1.CompileIdentifierMetadata({name:"interpolate",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:impInterpolate}),Identifiers.castByValue=new compile_metadata_1.CompileIdentifierMetadata({name:"castByValue",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:impCastByValue}),Identifiers.EMPTY_ARRAY=new compile_metadata_1.CompileIdentifierMetadata({name:"EMPTY_ARRAY",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:impEMPTY_ARRAY}),Identifiers.EMPTY_MAP=new compile_metadata_1.CompileIdentifierMetadata({name:"EMPTY_MAP",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:impEMPTY_MAP}),Identifiers.pureProxies=[null,new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy1",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy1}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy2",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy2}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy3",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy3}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy4",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy4}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy5",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy5}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy6",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy6}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy7",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy7}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy8",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy8}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy9",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy9}),new compile_metadata_1.CompileIdentifierMetadata({name:"pureProxy10",moduleUrl:VIEW_UTILS_MODULE_URL,runtime:core_private_1.pureProxy10})],Identifiers.SecurityContext=new compile_metadata_1.CompileIdentifierMetadata({name:"SecurityContext",moduleUrl:util_1.assetUrl("core","security"),runtime:core_1.SecurityContext}),Identifiers.AnimationKeyframe=new compile_metadata_1.CompileIdentifierMetadata({name:"AnimationKeyframe",moduleUrl:util_1.assetUrl("core","animation/animation_keyframe"),runtime:impAnimationKeyframe}),Identifiers.AnimationStyles=new compile_metadata_1.CompileIdentifierMetadata({name:"AnimationStyles",moduleUrl:util_1.assetUrl("core","animation/animation_styles"),runtime:impAnimationStyles}),Identifiers.NoOpAnimationPlayer=new compile_metadata_1.CompileIdentifierMetadata({name:"NoOpAnimationPlayer",moduleUrl:util_1.assetUrl("core","animation/animation_player"),runtime:impNoOpAnimationPlayer}),Identifiers.AnimationGroupPlayer=new compile_metadata_1.CompileIdentifierMetadata({name:"AnimationGroupPlayer",moduleUrl:util_1.assetUrl("core","animation/animation_group_player"),runtime:impAnimationGroupPlayer}),Identifiers.AnimationSequencePlayer=new compile_metadata_1.CompileIdentifierMetadata({name:"AnimationSequencePlayer",moduleUrl:util_1.assetUrl("core","animation/animation_sequence_player"),runtime:impAnimationSequencePlayer}),Identifiers.prepareFinalAnimationStyles=new compile_metadata_1.CompileIdentifierMetadata({name:"prepareFinalAnimationStyles",moduleUrl:ANIMATION_STYLE_UTIL_ASSET_URL,runtime:core_private_1.prepareFinalAnimationStyles}),Identifiers.balanceAnimationKeyframes=new compile_metadata_1.CompileIdentifierMetadata({name:"balanceAnimationKeyframes",moduleUrl:ANIMATION_STYLE_UTIL_ASSET_URL,runtime:core_private_1.balanceAnimationKeyframes}),Identifiers.clearStyles=new compile_metadata_1.CompileIdentifierMetadata({name:"clearStyles",moduleUrl:ANIMATION_STYLE_UTIL_ASSET_URL,runtime:core_private_1.clearStyles}),Identifiers.renderStyles=new compile_metadata_1.CompileIdentifierMetadata({name:"renderStyles",moduleUrl:ANIMATION_STYLE_UTIL_ASSET_URL,runtime:core_private_1.renderStyles}),Identifiers.collectAndResolveStyles=new compile_metadata_1.CompileIdentifierMetadata({name:"collectAndResolveStyles",moduleUrl:ANIMATION_STYLE_UTIL_ASSET_URL,runtime:core_private_1.collectAndResolveStyles}),Identifiers}();exports.Identifiers=Identifiers,exports.identifierToken=identifierToken},{"../core_private":64,"./compile_metadata":73,"./util":137,"@angular/core":154}],99:[function(require,module,exports){"use strict";function hasLifecycleHook(hook,token){var lcInterface=LIFECYCLE_INTERFACES.get(hook),lcProp=LIFECYCLE_PROPS.get(hook);return core_private_1.reflector.hasLifecycleHook(token,lcInterface,lcProp)}var core_1=require("@angular/core"),core_private_1=require("../core_private"),collection_1=require("./facade/collection"),LIFECYCLE_INTERFACES=collection_1.MapWrapper.createFromPairs([[core_private_1.LifecycleHooks.OnInit,core_1.OnInit],[core_private_1.LifecycleHooks.OnDestroy,core_1.OnDestroy],[core_private_1.LifecycleHooks.DoCheck,core_1.DoCheck],[core_private_1.LifecycleHooks.OnChanges,core_1.OnChanges],[core_private_1.LifecycleHooks.AfterContentInit,core_1.AfterContentInit],[core_private_1.LifecycleHooks.AfterContentChecked,core_1.AfterContentChecked],[core_private_1.LifecycleHooks.AfterViewInit,core_1.AfterViewInit],[core_private_1.LifecycleHooks.AfterViewChecked,core_1.AfterViewChecked]]),LIFECYCLE_PROPS=collection_1.MapWrapper.createFromPairs([[core_private_1.LifecycleHooks.OnInit,"ngOnInit"],[core_private_1.LifecycleHooks.OnDestroy,"ngOnDestroy"],[core_private_1.LifecycleHooks.DoCheck,"ngDoCheck"],[core_private_1.LifecycleHooks.OnChanges,"ngOnChanges"],[core_private_1.LifecycleHooks.AfterContentInit,"ngAfterContentInit"],[core_private_1.LifecycleHooks.AfterContentChecked,"ngAfterContentChecked"],[core_private_1.LifecycleHooks.AfterViewInit,"ngAfterViewInit"],[core_private_1.LifecycleHooks.AfterViewChecked,"ngAfterViewChecked"]]);exports.hasLifecycleHook=hasLifecycleHook},{"../core_private":64,"./facade/collection":82,"@angular/core":154}],100:[function(require,module,exports){"use strict";function getTransitiveModules(modules,includeImports,targetModules,visitedModules){return void 0===targetModules&&(targetModules=[]),void 0===visitedModules&&(visitedModules=new Set),modules.forEach(function(ngModule){if(!visitedModules.has(ngModule.type.runtime)){visitedModules.add(ngModule.type.runtime);var nestedModules=includeImports?ngModule.importedModules.concat(ngModule.exportedModules):ngModule.exportedModules;getTransitiveModules(nestedModules,includeImports,targetModules,visitedModules),targetModules.push(ngModule)}}),targetModules}function flattenArray(tree,out){if(void 0===out&&(out=[]),tree)for(var i=0;i<tree.length;i++){var item=core_1.resolveForwardRef(tree[i]);lang_1.isArray(item)?flattenArray(item,out):out.push(item)}return out}function verifyNonBlankProviders(directiveType,providersTree,providersType){var errMsg,flat=[];flattenArray(providersTree,flat);for(var i=0;i<flat.length;i++)if(lang_1.isBlank(flat[i]))throw errMsg=flat.map(function(provider){return lang_1.isBlank(provider)?"?":lang_1.stringify(provider)}).join(", "),new exceptions_1.BaseException("One or more of "+providersType+' for "'+lang_1.stringify(directiveType)+'" were not defined: ['+errMsg+"].");return providersTree}function isValidType(value){return cpl.isStaticSymbol(value)||value instanceof lang_1.Type}function staticTypeModuleUrl(value){return cpl.isStaticSymbol(value)?value.filePath:null}function componentModuleUrl(reflector,type,cmpMetadata){if(cpl.isStaticSymbol(type))return staticTypeModuleUrl(type);if(lang_1.isPresent(cmpMetadata.moduleId)){var moduleId=cmpMetadata.moduleId,scheme=url_resolver_1.getUrlScheme(moduleId);return lang_1.isPresent(scheme)&&scheme.length>0?moduleId:"package:"+moduleId+util_1.MODULE_SUFFIX}return reflector.importUri(type)}function convertToCompileValue(value,targetIdentifiers){return util_1.visitValue(value,new _CompileValueConverter,targetIdentifiers)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),core_private_1=require("../core_private"),collection_1=require("../src/facade/collection"),assertions_1=require("./assertions"),cpl=require("./compile_metadata"),config_1=require("./config"),directive_resolver_1=require("./directive_resolver"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),identifiers_1=require("./identifiers"),lifecycle_reflector_1=require("./lifecycle_reflector"),ng_module_resolver_1=require("./ng_module_resolver"),pipe_resolver_1=require("./pipe_resolver"),element_schema_registry_1=require("./schema/element_schema_registry"),url_resolver_1=require("./url_resolver"),util_1=require("./util"),CompileMetadataResolver=function(){function CompileMetadataResolver(_ngModuleResolver,_directiveResolver,_pipeResolver,_config,_console,_schemaRegistry,_reflector){void 0===_reflector&&(_reflector=core_private_1.reflector),this._ngModuleResolver=_ngModuleResolver,this._directiveResolver=_directiveResolver,this._pipeResolver=_pipeResolver,this._config=_config,this._console=_console,this._schemaRegistry=_schemaRegistry,this._reflector=_reflector,this._directiveCache=new Map,this._pipeCache=new Map,this._ngModuleCache=new Map,this._ngModuleOfTypes=new Map,this._anonymousTypes=new Map,this._anonymousTypeIndex=0}return CompileMetadataResolver.prototype.sanitizeTokenName=function(token){var identifier=lang_1.stringify(token);if(identifier.indexOf("(")>=0){var found=this._anonymousTypes.get(token);lang_1.isBlank(found)&&(this._anonymousTypes.set(token,this._anonymousTypeIndex++),found=this._anonymousTypes.get(token)),identifier="anonymous_token_"+found+"_"}return util_1.sanitizeIdentifier(identifier)},CompileMetadataResolver.prototype.clearCacheFor=function(type){this._directiveCache.delete(type),this._pipeCache.delete(type),this._ngModuleOfTypes.delete(type),this._ngModuleCache.clear()},CompileMetadataResolver.prototype.clearCache=function(){this._directiveCache.clear(),this._pipeCache.clear(),this._ngModuleCache.clear(),this._ngModuleOfTypes.clear()},CompileMetadataResolver.prototype.getAnimationEntryMetadata=function(entry){var _this=this,defs=entry.definitions.map(function(def){return _this.getAnimationStateMetadata(def)});return new cpl.CompileAnimationEntryMetadata(entry.name,defs)},CompileMetadataResolver.prototype.getAnimationStateMetadata=function(value){if(value instanceof core_1.AnimationStateDeclarationMetadata){var styles=this.getAnimationStyleMetadata(value.styles);return new cpl.CompileAnimationStateDeclarationMetadata(value.stateNameExpr,styles)}return value instanceof core_1.AnimationStateTransitionMetadata?new cpl.CompileAnimationStateTransitionMetadata(value.stateChangeExpr,this.getAnimationMetadata(value.steps)):null},CompileMetadataResolver.prototype.getAnimationStyleMetadata=function(value){return new cpl.CompileAnimationStyleMetadata(value.offset,value.styles)},CompileMetadataResolver.prototype.getAnimationMetadata=function(value){var _this=this;if(value instanceof core_1.AnimationStyleMetadata)return this.getAnimationStyleMetadata(value);if(value instanceof core_1.AnimationKeyframesSequenceMetadata)return new cpl.CompileAnimationKeyframesSequenceMetadata(value.steps.map(function(entry){return _this.getAnimationStyleMetadata(entry)}));if(value instanceof core_1.AnimationAnimateMetadata){var animateData=this.getAnimationMetadata(value.styles);return new cpl.CompileAnimationAnimateMetadata(value.timings,animateData)}if(value instanceof core_1.AnimationWithStepsMetadata){var steps=value.steps.map(function(step){return _this.getAnimationMetadata(step)});return value instanceof core_1.AnimationGroupMetadata?new cpl.CompileAnimationGroupMetadata(steps):new cpl.CompileAnimationSequenceMetadata(steps)}return null},CompileMetadataResolver.prototype.getDirectiveMetadata=function(directiveType,throwIfNotFound){var _this=this;void 0===throwIfNotFound&&(throwIfNotFound=!0),directiveType=core_1.resolveForwardRef(directiveType);var meta=this._directiveCache.get(directiveType);if(lang_1.isBlank(meta)){var dirMeta=this._directiveResolver.resolve(directiveType,throwIfNotFound);if(!dirMeta)return null;var templateMeta=null,changeDetectionStrategy=null,viewProviders=[],moduleUrl=staticTypeModuleUrl(directiveType),viewDirectiveTypes=[],viewPipeTypes=[],entryComponentTypes=[],selector=dirMeta.selector;if(dirMeta instanceof core_1.ComponentMetadata){var cmpMeta=dirMeta;assertions_1.assertArrayOfStrings("styles",cmpMeta.styles),assertions_1.assertInterpolationSymbols("interpolation",cmpMeta.interpolation);var animations=lang_1.isPresent(cmpMeta.animations)?cmpMeta.animations.map(function(e){return _this.getAnimationEntryMetadata(e)}):null;assertions_1.assertArrayOfStrings("styles",cmpMeta.styles),assertions_1.assertArrayOfStrings("styleUrls",cmpMeta.styleUrls),templateMeta=new cpl.CompileTemplateMetadata({encapsulation:cmpMeta.encapsulation,template:cmpMeta.template,templateUrl:cmpMeta.templateUrl,styles:cmpMeta.styles,styleUrls:cmpMeta.styleUrls,animations:animations,interpolation:cmpMeta.interpolation}),changeDetectionStrategy=cmpMeta.changeDetection,lang_1.isPresent(dirMeta.viewProviders)&&(viewProviders=this.getProvidersMetadata(verifyNonBlankProviders(directiveType,dirMeta.viewProviders,"viewProviders"),[])),moduleUrl=componentModuleUrl(this._reflector,directiveType,cmpMeta),cmpMeta.entryComponents&&(entryComponentTypes=flattenArray(cmpMeta.entryComponents).map(function(type){return _this.getTypeMetadata(type,staticTypeModuleUrl(type))})),cmpMeta.directives&&(viewDirectiveTypes=flattenArray(cmpMeta.directives).map(function(type){if(!type)throw new exceptions_1.BaseException("Unexpected directive value '"+type+"' on the View of component '"+lang_1.stringify(directiveType)+"'");return _this.getTypeMetadata(type,staticTypeModuleUrl(type))})),cmpMeta.pipes&&(viewPipeTypes=flattenArray(cmpMeta.pipes).map(function(type){if(!type)throw new exceptions_1.BaseException("Unexpected pipe value '"+type+"' on the View of component '"+lang_1.stringify(directiveType)+"'");return _this.getTypeMetadata(type,staticTypeModuleUrl(type))})),selector||(selector=this._schemaRegistry.getDefaultComponentElementName())}else if(!selector)throw new exceptions_1.BaseException("Directive "+lang_1.stringify(directiveType)+" has no selector, please add it!");var providers=[];lang_1.isPresent(dirMeta.providers)&&(providers=this.getProvidersMetadata(verifyNonBlankProviders(directiveType,dirMeta.providers,"providers"),entryComponentTypes));var queries=[],viewQueries=[];lang_1.isPresent(dirMeta.queries)&&(queries=this.getQueriesMetadata(dirMeta.queries,!1,directiveType),viewQueries=this.getQueriesMetadata(dirMeta.queries,!0,directiveType)),meta=cpl.CompileDirectiveMetadata.create({selector:selector,exportAs:dirMeta.exportAs,isComponent:lang_1.isPresent(templateMeta),type:this.getTypeMetadata(directiveType,moduleUrl),template:templateMeta,changeDetection:changeDetectionStrategy,inputs:dirMeta.inputs,outputs:dirMeta.outputs,host:dirMeta.host,providers:providers,viewProviders:viewProviders,queries:queries,viewQueries:viewQueries,viewDirectives:viewDirectiveTypes,viewPipes:viewPipeTypes,entryComponents:entryComponentTypes}),this._directiveCache.set(directiveType,meta)}return meta},CompileMetadataResolver.prototype.getNgModuleMetadata=function(moduleType,throwIfNotFound){var _this=this;void 0===throwIfNotFound&&(throwIfNotFound=!0),moduleType=core_1.resolveForwardRef(moduleType);var compileMeta=this._ngModuleCache.get(moduleType);if(!compileMeta){var meta=this._ngModuleResolver.resolve(moduleType,throwIfNotFound);if(!meta)return null;var declaredDirectives_1=[],exportedDirectives_1=[],declaredPipes_1=[],exportedPipes_1=[],importedModules_1=[],exportedModules_1=[],providers_1=[],entryComponents_1=[],bootstrapComponents=[],schemas=[];meta.imports&&flattenArray(meta.imports).forEach(function(importedType){var importedModuleType;if(isValidType(importedType))importedModuleType=importedType;else if(importedType&&importedType.ngModule){var moduleWithProviders=importedType;importedModuleType=moduleWithProviders.ngModule,moduleWithProviders.providers&&providers_1.push.apply(providers_1,_this.getProvidersMetadata(moduleWithProviders.providers,entryComponents_1))}if(!importedModuleType)throw new exceptions_1.BaseException("Unexpected value '"+lang_1.stringify(importedType)+"' imported by the module '"+lang_1.stringify(moduleType)+"'");importedModules_1.push(_this.getNgModuleMetadata(importedModuleType,!1))}),meta.exports&&flattenArray(meta.exports).forEach(function(exportedType){if(!isValidType(exportedType))throw new exceptions_1.BaseException("Unexpected value '"+lang_1.stringify(exportedType)+"' exported by the module '"+lang_1.stringify(moduleType)+"'");var exportedDirMeta,exportedPipeMeta,exportedModuleMeta;if(exportedDirMeta=_this.getDirectiveMetadata(exportedType,!1))exportedDirectives_1.push(exportedDirMeta);else if(exportedPipeMeta=_this.getPipeMetadata(exportedType,!1))exportedPipes_1.push(exportedPipeMeta);else{if(!(exportedModuleMeta=_this.getNgModuleMetadata(exportedType,!1)))throw new exceptions_1.BaseException("Unexpected value '"+lang_1.stringify(exportedType)+"' exported by the module '"+lang_1.stringify(moduleType)+"'");exportedModules_1.push(exportedModuleMeta)}});var transitiveModule_1=this._getTransitiveNgModuleMetadata(importedModules_1,exportedModules_1);meta.declarations&&flattenArray(meta.declarations).forEach(function(declaredType){if(!isValidType(declaredType))throw new exceptions_1.BaseException("Unexpected value '"+lang_1.stringify(declaredType)+"' declared by the module '"+lang_1.stringify(moduleType)+"'");var declaredDirMeta,declaredPipeMeta;if(declaredDirMeta=_this.getDirectiveMetadata(declaredType,!1))_this._addDirectiveToModule(declaredDirMeta,moduleType,transitiveModule_1,declaredDirectives_1,!0);else{if(!(declaredPipeMeta=_this.getPipeMetadata(declaredType,!1)))throw new exceptions_1.BaseException("Unexpected value '"+lang_1.stringify(declaredType)+"' declared by the module '"+lang_1.stringify(moduleType)+"'");_this._addPipeToModule(declaredPipeMeta,moduleType,transitiveModule_1,declaredPipes_1,!0)}}),meta.providers&&providers_1.push.apply(providers_1,this.getProvidersMetadata(meta.providers,entryComponents_1)),meta.entryComponents&&entryComponents_1.push.apply(entryComponents_1,flattenArray(meta.entryComponents).map(function(type){return _this.getTypeMetadata(type,staticTypeModuleUrl(type))})),meta.bootstrap&&bootstrapComponents.push.apply(bootstrapComponents,flattenArray(meta.bootstrap).map(function(type){return _this.getTypeMetadata(type,staticTypeModuleUrl(type))})),entryComponents_1.push.apply(entryComponents_1,bootstrapComponents),meta.schemas&&schemas.push.apply(schemas,flattenArray(meta.schemas)),(_a=transitiveModule_1.entryComponents).push.apply(_a,entryComponents_1),(_b=transitiveModule_1.providers).push.apply(_b,providers_1),compileMeta=new cpl.CompileNgModuleMetadata({type:this.getTypeMetadata(moduleType,staticTypeModuleUrl(moduleType)),providers:providers_1,entryComponents:entryComponents_1,bootstrapComponents:bootstrapComponents,schemas:schemas,declaredDirectives:declaredDirectives_1,exportedDirectives:exportedDirectives_1,declaredPipes:declaredPipes_1,exportedPipes:exportedPipes_1,importedModules:importedModules_1,exportedModules:exportedModules_1,transitiveModule:transitiveModule_1}),transitiveModule_1.modules.push(compileMeta),this._verifyModule(compileMeta),this._ngModuleCache.set(moduleType,compileMeta)}return compileMeta;var _a,_b},CompileMetadataResolver.prototype.addComponentToModule=function(moduleType,compType){var moduleMeta=this.getNgModuleMetadata(moduleType),compMeta=this.getDirectiveMetadata(compType,!1);this._addDirectiveToModule(compMeta,moduleMeta.type.runtime,moduleMeta.transitiveModule,moduleMeta.declaredDirectives),moduleMeta.transitiveModule.entryComponents.push(compMeta.type),moduleMeta.entryComponents.push(compMeta.type),this._verifyModule(moduleMeta)},CompileMetadataResolver.prototype._verifyModule=function(moduleMeta){
var _this=this;moduleMeta.exportedDirectives.forEach(function(dirMeta){if(!moduleMeta.transitiveModule.directivesSet.has(dirMeta.type.runtime))throw new exceptions_1.BaseException("Can't export directive "+lang_1.stringify(dirMeta.type.runtime)+" from "+lang_1.stringify(moduleMeta.type.runtime)+" as it was neither declared nor imported!")}),moduleMeta.exportedPipes.forEach(function(pipeMeta){if(!moduleMeta.transitiveModule.pipesSet.has(pipeMeta.type.runtime))throw new exceptions_1.BaseException("Can't export pipe "+lang_1.stringify(pipeMeta.type.runtime)+" from "+lang_1.stringify(moduleMeta.type.runtime)+" as it was neither declared nor imported!")}),moduleMeta.entryComponents.forEach(function(entryComponentType){moduleMeta.transitiveModule.directivesSet.has(entryComponentType.runtime)||(_this._addDirectiveToModule(_this.getDirectiveMetadata(entryComponentType.runtime),moduleMeta.type.runtime,moduleMeta.transitiveModule,moduleMeta.declaredDirectives),_this._console.warn("NgModule "+lang_1.stringify(moduleMeta.type.runtime)+" uses "+lang_1.stringify(entryComponentType.runtime)+' via "entryComponents" but it was neither declared nor imported! This warning will become an error after final.'))}),moduleMeta.declaredDirectives.forEach(function(dirMeta){_this._getTransitiveViewDirectivesAndPipes(dirMeta,moduleMeta)})},CompileMetadataResolver.prototype._addTypeToModule=function(type,moduleType){var oldModule=this._ngModuleOfTypes.get(type);if(oldModule&&oldModule!==moduleType)throw new exceptions_1.BaseException("Type "+lang_1.stringify(type)+" is part of the declarations of 2 modules: "+lang_1.stringify(oldModule)+" and "+lang_1.stringify(moduleType)+"!");this._ngModuleOfTypes.set(type,moduleType)},CompileMetadataResolver.prototype._getTransitiveViewDirectivesAndPipes=function(compMeta,moduleMeta){var _this=this;if(compMeta.isComponent){var addPipe=function(pipeType){var pipeMeta=_this.getPipeMetadata(pipeType);_this._addPipeToModule(pipeMeta,moduleMeta.type.runtime,moduleMeta.transitiveModule,moduleMeta.declaredPipes)},addDirective=function(dirType){var dirMeta=_this.getDirectiveMetadata(dirType);_this._addDirectiveToModule(dirMeta,moduleMeta.type.runtime,moduleMeta.transitiveModule,moduleMeta.declaredDirectives)&&_this._getTransitiveViewDirectivesAndPipes(dirMeta,moduleMeta)};compMeta.viewPipes&&compMeta.viewPipes.forEach(function(cplType){return addPipe(cplType.runtime)}),compMeta.viewDirectives&&compMeta.viewDirectives.forEach(function(cplType){return addDirective(cplType.runtime)}),compMeta.entryComponents.forEach(function(entryComponentType){moduleMeta.transitiveModule.directivesSet.has(entryComponentType.runtime)||(_this._console.warn("Component "+lang_1.stringify(compMeta.type.runtime)+" in NgModule "+lang_1.stringify(moduleMeta.type.runtime)+" uses "+lang_1.stringify(entryComponentType.runtime)+' via "entryComponents" but it was neither declared nor imported into the module! This warning will become an error after final.'),addDirective(entryComponentType.runtime))})}},CompileMetadataResolver.prototype._getTransitiveNgModuleMetadata=function(importedModules,exportedModules){var transitiveModules=getTransitiveModules(importedModules.concat(exportedModules),!0),providers=flattenArray(transitiveModules.map(function(ngModule){return ngModule.providers})),entryComponents=flattenArray(transitiveModules.map(function(ngModule){return ngModule.entryComponents})),transitiveExportedModules=getTransitiveModules(importedModules,!1),directives=flattenArray(transitiveExportedModules.map(function(ngModule){return ngModule.exportedDirectives})),pipes=flattenArray(transitiveExportedModules.map(function(ngModule){return ngModule.exportedPipes}));return new cpl.TransitiveCompileNgModuleMetadata(transitiveModules,providers,entryComponents,directives,pipes)},CompileMetadataResolver.prototype._addDirectiveToModule=function(dirMeta,moduleType,transitiveModule,declaredDirectives,force){return void 0===force&&(force=!1),!(!force&&transitiveModule.directivesSet.has(dirMeta.type.runtime))&&(transitiveModule.directivesSet.add(dirMeta.type.runtime),transitiveModule.directives.push(dirMeta),declaredDirectives.push(dirMeta),this._addTypeToModule(dirMeta.type.runtime,moduleType),!0)},CompileMetadataResolver.prototype._addPipeToModule=function(pipeMeta,moduleType,transitiveModule,declaredPipes,force){return void 0===force&&(force=!1),!(!force&&transitiveModule.pipesSet.has(pipeMeta.type.runtime))&&(transitiveModule.pipesSet.add(pipeMeta.type.runtime),transitiveModule.pipes.push(pipeMeta),declaredPipes.push(pipeMeta),this._addTypeToModule(pipeMeta.type.runtime,moduleType),!0)},CompileMetadataResolver.prototype.getTypeMetadata=function(type,moduleUrl,dependencies){return void 0===dependencies&&(dependencies=null),type=core_1.resolveForwardRef(type),new cpl.CompileTypeMetadata({name:this.sanitizeTokenName(type),moduleUrl:moduleUrl,runtime:type,diDeps:this.getDependenciesMetadata(type,dependencies),lifecycleHooks:core_private_1.LIFECYCLE_HOOKS_VALUES.filter(function(hook){return lifecycle_reflector_1.hasLifecycleHook(hook,type)})})},CompileMetadataResolver.prototype.getFactoryMetadata=function(factory,moduleUrl,dependencies){return void 0===dependencies&&(dependencies=null),factory=core_1.resolveForwardRef(factory),new cpl.CompileFactoryMetadata({name:this.sanitizeTokenName(factory),moduleUrl:moduleUrl,runtime:factory,diDeps:this.getDependenciesMetadata(factory,dependencies)})},CompileMetadataResolver.prototype.getPipeMetadata=function(pipeType,throwIfNotFound){void 0===throwIfNotFound&&(throwIfNotFound=!0),pipeType=core_1.resolveForwardRef(pipeType);var meta=this._pipeCache.get(pipeType);if(lang_1.isBlank(meta)){var pipeMeta=this._pipeResolver.resolve(pipeType,throwIfNotFound);if(!pipeMeta)return null;meta=new cpl.CompilePipeMetadata({type:this.getTypeMetadata(pipeType,staticTypeModuleUrl(pipeType)),name:pipeMeta.name,pure:pipeMeta.pure}),this._pipeCache.set(pipeType,meta)}return meta},CompileMetadataResolver.prototype.getDependenciesMetadata=function(typeOrFunc,dependencies){var _this=this,hasUnknownDeps=!1,params=lang_1.isPresent(dependencies)?dependencies:this._reflector.parameters(typeOrFunc);lang_1.isBlank(params)&&(params=[]);var dependenciesMetadata=params.map(function(param){var isAttribute=!1,isHost=!1,isSelf=!1,isSkipSelf=!1,isOptional=!1,query=null,viewQuery=null,token=null;return lang_1.isArray(param)?param.forEach(function(paramEntry){paramEntry instanceof core_1.HostMetadata?isHost=!0:paramEntry instanceof core_1.SelfMetadata?isSelf=!0:paramEntry instanceof core_1.SkipSelfMetadata?isSkipSelf=!0:paramEntry instanceof core_1.OptionalMetadata?isOptional=!0:paramEntry instanceof core_1.AttributeMetadata?(isAttribute=!0,token=paramEntry.attributeName):paramEntry instanceof core_1.QueryMetadata?paramEntry.isViewQuery?viewQuery=paramEntry:query=paramEntry:paramEntry instanceof core_1.InjectMetadata?token=paramEntry.token:isValidType(paramEntry)&&lang_1.isBlank(token)&&(token=paramEntry)}):token=param,lang_1.isBlank(token)?(hasUnknownDeps=!0,null):new cpl.CompileDiDependencyMetadata({isAttribute:isAttribute,isHost:isHost,isSelf:isSelf,isSkipSelf:isSkipSelf,isOptional:isOptional,query:lang_1.isPresent(query)?_this.getQueryMetadata(query,null,typeOrFunc):null,viewQuery:lang_1.isPresent(viewQuery)?_this.getQueryMetadata(viewQuery,null,typeOrFunc):null,token:_this.getTokenMetadata(token)})});if(hasUnknownDeps){var depsTokens=dependenciesMetadata.map(function(dep){return dep?lang_1.stringify(dep.token):"?"}).join(", ");throw new exceptions_1.BaseException("Can't resolve all parameters for "+lang_1.stringify(typeOrFunc)+": ("+depsTokens+").")}return dependenciesMetadata},CompileMetadataResolver.prototype.getTokenMetadata=function(token){token=core_1.resolveForwardRef(token);var compileToken;return compileToken=lang_1.isString(token)?new cpl.CompileTokenMetadata({value:token}):new cpl.CompileTokenMetadata({identifier:new cpl.CompileIdentifierMetadata({runtime:token,name:this.sanitizeTokenName(token),moduleUrl:staticTypeModuleUrl(token)})})},CompileMetadataResolver.prototype.getProvidersMetadata=function(providers,targetEntryComponents){var _this=this,compileProviders=[];return providers.forEach(function(provider){provider=core_1.resolveForwardRef(provider),core_private_1.isProviderLiteral(provider)&&(provider=core_private_1.createProvider(provider));var compileProvider;if(lang_1.isArray(provider))compileProvider=_this.getProvidersMetadata(provider,targetEntryComponents);else if(provider instanceof core_1.Provider){var tokenMeta=_this.getTokenMetadata(provider.token);tokenMeta.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS))?targetEntryComponents.push.apply(targetEntryComponents,_this._getEntryComponentsFromProvider(provider)):compileProvider=_this.getProviderMetadata(provider)}else{if(!isValidType(provider))throw new exceptions_1.BaseException("Invalid provider - only instances of Provider and Type are allowed, got: "+lang_1.stringify(provider));compileProvider=_this.getTypeMetadata(provider,staticTypeModuleUrl(provider))}compileProvider&&compileProviders.push(compileProvider)}),compileProviders},CompileMetadataResolver.prototype._getEntryComponentsFromProvider=function(provider){var _this=this,components=[],collectedIdentifiers=[];if(provider.useFactory||provider.useExisting||provider.useClass)throw new exceptions_1.BaseException("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!");if(!provider.multi)throw new exceptions_1.BaseException("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!");return convertToCompileValue(provider.useValue,collectedIdentifiers),collectedIdentifiers.forEach(function(identifier){var dirMeta=_this.getDirectiveMetadata(identifier.runtime,!1);dirMeta&&components.push(dirMeta.type)}),components},CompileMetadataResolver.prototype.getProviderMetadata=function(provider){var compileDeps,compileTypeMetadata=null,compileFactoryMetadata=null;return lang_1.isPresent(provider.useClass)?(compileTypeMetadata=this.getTypeMetadata(provider.useClass,staticTypeModuleUrl(provider.useClass),provider.dependencies),compileDeps=compileTypeMetadata.diDeps):lang_1.isPresent(provider.useFactory)&&(compileFactoryMetadata=this.getFactoryMetadata(provider.useFactory,staticTypeModuleUrl(provider.useFactory),provider.dependencies),compileDeps=compileFactoryMetadata.diDeps),new cpl.CompileProviderMetadata({token:this.getTokenMetadata(provider.token),useClass:compileTypeMetadata,useValue:convertToCompileValue(provider.useValue,[]),useFactory:compileFactoryMetadata,useExisting:lang_1.isPresent(provider.useExisting)?this.getTokenMetadata(provider.useExisting):null,deps:compileDeps,multi:provider.multi})},CompileMetadataResolver.prototype.getQueriesMetadata=function(queries,isViewQuery,directiveType){var _this=this,res=[];return collection_1.StringMapWrapper.forEach(queries,function(query,propertyName){query.isViewQuery===isViewQuery&&res.push(_this.getQueryMetadata(query,propertyName,directiveType))}),res},CompileMetadataResolver.prototype.getQueryMetadata=function(q,propertyName,typeOrFunc){var selectors,_this=this;if(q.isVarBindingQuery)selectors=q.varBindings.map(function(varName){return _this.getTokenMetadata(varName)});else{if(!lang_1.isPresent(q.selector))throw new exceptions_1.BaseException("Can't construct a query for the property \""+propertyName+'" of "'+lang_1.stringify(typeOrFunc)+"\" since the query selector wasn't defined.");selectors=[this.getTokenMetadata(q.selector)]}return new cpl.CompileQueryMetadata({selectors:selectors,first:q.first,descendants:q.descendants,propertyName:propertyName,read:lang_1.isPresent(q.read)?this.getTokenMetadata(q.read):null})},CompileMetadataResolver.decorators=[{type:core_1.Injectable}],CompileMetadataResolver.ctorParameters=[{type:ng_module_resolver_1.NgModuleResolver},{type:directive_resolver_1.DirectiveResolver},{type:pipe_resolver_1.PipeResolver},{type:config_1.CompilerConfig},{type:core_private_1.Console},{type:element_schema_registry_1.ElementSchemaRegistry},{type:core_private_1.ReflectorReader}],CompileMetadataResolver}();exports.CompileMetadataResolver=CompileMetadataResolver;var _CompileValueConverter=function(_super){function _CompileValueConverter(){_super.apply(this,arguments)}return __extends(_CompileValueConverter,_super),_CompileValueConverter.prototype.visitOther=function(value,targetIdentifiers){var identifier;return identifier=cpl.isStaticSymbol(value)?new cpl.CompileIdentifierMetadata({name:value.name,moduleUrl:value.filePath,runtime:value}):new cpl.CompileIdentifierMetadata({runtime:value}),targetIdentifiers.push(identifier),identifier},_CompileValueConverter}(util_1.ValueTransformer)},{"../core_private":64,"../src/facade/collection":82,"./assertions":71,"./compile_metadata":73,"./config":75,"./directive_resolver":77,"./facade/exceptions":84,"./facade/lang":85,"./identifiers":98,"./lifecycle_reflector":99,"./ng_module_resolver":112,"./pipe_resolver":123,"./schema/element_schema_registry":128,"./url_resolver":136,"./util":137,"@angular/core":154}],101:[function(require,module,exports){"use strict";function visitAll(visitor,nodes,context){void 0===context&&(context=null);var result=[];return nodes.forEach(function(ast){var astResult=ast.visit(visitor,context);astResult&&result.push(astResult)}),result}var Text=function(){function Text(value,sourceSpan){this.value=value,this.sourceSpan=sourceSpan}return Text.prototype.visit=function(visitor,context){return visitor.visitText(this,context)},Text}();exports.Text=Text;var Expansion=function(){function Expansion(switchValue,type,cases,sourceSpan,switchValueSourceSpan){this.switchValue=switchValue,this.type=type,this.cases=cases,this.sourceSpan=sourceSpan,this.switchValueSourceSpan=switchValueSourceSpan}return Expansion.prototype.visit=function(visitor,context){return visitor.visitExpansion(this,context)},Expansion}();exports.Expansion=Expansion;var ExpansionCase=function(){function ExpansionCase(value,expression,sourceSpan,valueSourceSpan,expSourceSpan){this.value=value,this.expression=expression,this.sourceSpan=sourceSpan,this.valueSourceSpan=valueSourceSpan,this.expSourceSpan=expSourceSpan}return ExpansionCase.prototype.visit=function(visitor,context){return visitor.visitExpansionCase(this,context)},ExpansionCase}();exports.ExpansionCase=ExpansionCase;var Attribute=function(){function Attribute(name,value,sourceSpan){this.name=name,this.value=value,this.sourceSpan=sourceSpan}return Attribute.prototype.visit=function(visitor,context){return visitor.visitAttribute(this,context)},Attribute}();exports.Attribute=Attribute;var Element=function(){function Element(name,attrs,children,sourceSpan,startSourceSpan,endSourceSpan){this.name=name,this.attrs=attrs,this.children=children,this.sourceSpan=sourceSpan,this.startSourceSpan=startSourceSpan,this.endSourceSpan=endSourceSpan}return Element.prototype.visit=function(visitor,context){return visitor.visitElement(this,context)},Element}();exports.Element=Element;var Comment=function(){function Comment(value,sourceSpan){this.value=value,this.sourceSpan=sourceSpan}return Comment.prototype.visit=function(visitor,context){return visitor.visitComment(this,context)},Comment}();exports.Comment=Comment,exports.visitAll=visitAll},{}],102:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),html_tags_1=require("./html_tags"),interpolation_config_1=require("./interpolation_config"),parser_1=require("./parser"),parser_2=require("./parser");exports.ParseTreeResult=parser_2.ParseTreeResult,exports.TreeError=parser_2.TreeError;var HtmlParser=function(_super){function HtmlParser(){_super.call(this,html_tags_1.getHtmlTagDefinition)}return __extends(HtmlParser,_super),HtmlParser.prototype.parse=function(source,url,parseExpansionForms,interpolationConfig){return void 0===parseExpansionForms&&(parseExpansionForms=!1),void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG),_super.prototype.parse.call(this,source,url,parseExpansionForms,interpolationConfig)},HtmlParser.decorators=[{type:core_1.Injectable}],HtmlParser.ctorParameters=[],HtmlParser}(parser_1.Parser);exports.HtmlParser=HtmlParser},{"./html_tags":103,"./interpolation_config":105,"./parser":107,"@angular/core":154}],103:[function(require,module,exports){"use strict";function getHtmlTagDefinition(tagName){return TAG_DEFINITIONS[tagName.toLowerCase()]||_DEFAULT_TAG_DEFINITION}var tags_1=require("./tags"),HtmlTagDefinition=function(){function HtmlTagDefinition(_a){var _this=this,_b=void 0===_a?{}:_a,closedByChildren=_b.closedByChildren,requiredParents=_b.requiredParents,implicitNamespacePrefix=_b.implicitNamespacePrefix,_c=_b.contentType,contentType=void 0===_c?tags_1.TagContentType.PARSABLE_DATA:_c,_d=_b.closedByParent,closedByParent=void 0!==_d&&_d,_e=_b.isVoid,isVoid=void 0!==_e&&_e,_f=_b.ignoreFirstLf,ignoreFirstLf=void 0!==_f&&_f;this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,closedByChildren&&closedByChildren.length>0&&closedByChildren.forEach(function(tagName){return _this.closedByChildren[tagName]=!0}),this.isVoid=isVoid,this.closedByParent=closedByParent||isVoid,requiredParents&&requiredParents.length>0&&(this.requiredParents={},this.parentToAdd=requiredParents[0],requiredParents.forEach(function(tagName){return _this.requiredParents[tagName]=!0})),this.implicitNamespacePrefix=implicitNamespacePrefix,this.contentType=contentType,this.ignoreFirstLf=ignoreFirstLf}return HtmlTagDefinition.prototype.requireExtraParent=function(currentParent){if(!this.requiredParents)return!1;if(!currentParent)return!0;var lcParent=currentParent.toLowerCase();return 1!=this.requiredParents[lcParent]&&"template"!=lcParent},HtmlTagDefinition.prototype.isClosedByChild=function(name){return this.isVoid||name.toLowerCase()in this.closedByChildren},HtmlTagDefinition}();exports.HtmlTagDefinition=HtmlTagDefinition;var TAG_DEFINITIONS={base:new HtmlTagDefinition({isVoid:!0}),meta:new HtmlTagDefinition({isVoid:!0}),area:new HtmlTagDefinition({isVoid:!0}),embed:new HtmlTagDefinition({isVoid:!0}),link:new HtmlTagDefinition({isVoid:!0}),img:new HtmlTagDefinition({isVoid:!0}),input:new HtmlTagDefinition({isVoid:!0}),param:new HtmlTagDefinition({isVoid:!0}),hr:new HtmlTagDefinition({isVoid:!0}),br:new HtmlTagDefinition({isVoid:!0}),source:new HtmlTagDefinition({isVoid:!0}),track:new HtmlTagDefinition({isVoid:!0}),wbr:new HtmlTagDefinition({isVoid:!0}),p:new HtmlTagDefinition({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new HtmlTagDefinition({closedByChildren:["tbody","tfoot"]}),tbody:new HtmlTagDefinition({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new HtmlTagDefinition({closedByChildren:["tbody"],closedByParent:!0}),tr:new HtmlTagDefinition({closedByChildren:["tr"],requiredParents:["tbody","tfoot","thead"],closedByParent:!0}),td:new HtmlTagDefinition({closedByChildren:["td","th"],closedByParent:!0}),th:new HtmlTagDefinition({closedByChildren:["td","th"],closedByParent:!0}),col:new HtmlTagDefinition({requiredParents:["colgroup"],isVoid:!0}),svg:new HtmlTagDefinition({implicitNamespacePrefix:"svg"}),math:new HtmlTagDefinition({implicitNamespacePrefix:"math"}),li:new HtmlTagDefinition({closedByChildren:["li"],closedByParent:!0}),dt:new HtmlTagDefinition({closedByChildren:["dt","dd"]}),dd:new HtmlTagDefinition({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new HtmlTagDefinition({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new HtmlTagDefinition({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new HtmlTagDefinition({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new HtmlTagDefinition({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new HtmlTagDefinition({closedByChildren:["optgroup"],closedByParent:!0}),option:new HtmlTagDefinition({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new HtmlTagDefinition({ignoreFirstLf:!0}),listing:new HtmlTagDefinition({ignoreFirstLf:!0}),style:new HtmlTagDefinition({contentType:tags_1.TagContentType.RAW_TEXT}),script:new HtmlTagDefinition({contentType:tags_1.TagContentType.RAW_TEXT}),title:new HtmlTagDefinition({contentType:tags_1.TagContentType.ESCAPABLE_RAW_TEXT}),textarea:new HtmlTagDefinition({contentType:tags_1.TagContentType.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})},_DEFAULT_TAG_DEFINITION=new HtmlTagDefinition;exports.getHtmlTagDefinition=getHtmlTagDefinition},{"./tags":108}],104:[function(require,module,exports){"use strict";function expandNodes(nodes){var expander=new _Expander;return new ExpansionResult(html.visitAll(expander,nodes),expander.isExpanded,expander.errors)}function _expandPluralForm(ast,errors){var children=ast.cases.map(function(c){PLURAL_CASES.indexOf(c.value)!=-1||c.value.match(/^=\d+$/)||errors.push(new ExpansionError(c.valueSourceSpan,'Plural cases should be "=<number>" or one of '+PLURAL_CASES.join(", ")));var expansionResult=expandNodes(c.expression);return errors.push.apply(errors,expansionResult.errors),new html.Element("template",[new html.Attribute("ngPluralCase",""+c.value,c.valueSourceSpan)],expansionResult.nodes,c.sourceSpan,c.sourceSpan,c.sourceSpan)}),switchAttr=new html.Attribute("[ngPlural]",ast.switchValue,ast.switchValueSourceSpan);return new html.Element("ng-container",[switchAttr],children,ast.sourceSpan,ast.sourceSpan,ast.sourceSpan)}function _expandDefaultForm(ast,errors){var children=ast.cases.map(function(c){var expansionResult=expandNodes(c.expression);return errors.push.apply(errors,expansionResult.errors),new html.Element("template",[new html.Attribute("ngSwitchCase",""+c.value,c.valueSourceSpan)],expansionResult.nodes,c.sourceSpan,c.sourceSpan,c.sourceSpan)}),switchAttr=new html.Attribute("[ngSwitch]",ast.switchValue,ast.switchValueSourceSpan);return new html.Element("ng-container",[switchAttr],children,ast.sourceSpan,ast.sourceSpan,ast.sourceSpan)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},parse_util_1=require("../parse_util"),html=require("./ast"),PLURAL_CASES=["zero","one","two","few","many","other"];exports.expandNodes=expandNodes;var ExpansionResult=function(){function ExpansionResult(nodes,expanded,errors){this.nodes=nodes,this.expanded=expanded,this.errors=errors}return ExpansionResult}();exports.ExpansionResult=ExpansionResult;var ExpansionError=function(_super){function ExpansionError(span,errorMsg){_super.call(this,span,errorMsg)}return __extends(ExpansionError,_super),ExpansionError}(parse_util_1.ParseError);exports.ExpansionError=ExpansionError;var _Expander=function(){function _Expander(){this.isExpanded=!1,this.errors=[]}return _Expander.prototype.visitElement=function(element,context){return new html.Element(element.name,element.attrs,html.visitAll(this,element.children),element.sourceSpan,element.startSourceSpan,element.endSourceSpan)},_Expander.prototype.visitAttribute=function(attribute,context){return attribute},_Expander.prototype.visitText=function(text,context){return text},_Expander.prototype.visitComment=function(comment,context){return comment},_Expander.prototype.visitExpansion=function(icu,context){return this.isExpanded=!0,"plural"==icu.type?_expandPluralForm(icu,this.errors):_expandDefaultForm(icu,this.errors)},_Expander.prototype.visitExpansionCase=function(icuCase,context){throw new Error("Should not be reached")},_Expander}()},{"../parse_util":122,"./ast":101}],105:[function(require,module,exports){"use strict";var assertions_1=require("../assertions"),InterpolationConfig=function(){function InterpolationConfig(start,end){this.start=start,this.end=end}return InterpolationConfig.fromArray=function(markers){return markers?(assertions_1.assertInterpolationSymbols("interpolation",markers),new InterpolationConfig(markers[0],markers[1])):exports.DEFAULT_INTERPOLATION_CONFIG},InterpolationConfig}();exports.InterpolationConfig=InterpolationConfig,exports.DEFAULT_INTERPOLATION_CONFIG=new InterpolationConfig("{{","}}")},{"../assertions":71}],106:[function(require,module,exports){"use strict";function tokenize(source,url,getTagDefinition,tokenizeExpansionForms,interpolationConfig){return void 0===tokenizeExpansionForms&&(tokenizeExpansionForms=!1),void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG),new _Tokenizer(new parse_util_1.ParseSourceFile(source,url),getTagDefinition,tokenizeExpansionForms,interpolationConfig).tokenize()}function _unexpectedCharacterErrorMsg(charCode){var char=charCode===chars.$EOF?"EOF":String.fromCharCode(charCode);return'Unexpected character "'+char+'"'}function _unknownEntityErrorMsg(entitySrc){return'Unknown entity "'+entitySrc+'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax'}function isNotWhitespace(code){return!chars.isWhitespace(code)||code===chars.$EOF}function isNameEnd(code){return chars.isWhitespace(code)||code===chars.$GT||code===chars.$SLASH||code===chars.$SQ||code===chars.$DQ||code===chars.$EQ}function isPrefixEnd(code){return(code<chars.$a||chars.$z<code)&&(code<chars.$A||chars.$Z<code)&&(code<chars.$0||code>chars.$9)}function isDigitEntityEnd(code){return code==chars.$SEMICOLON||code==chars.$EOF||!chars.isAsciiHexDigit(code)}function isNamedEntityEnd(code){return code==chars.$SEMICOLON||code==chars.$EOF||!chars.isAsciiLetter(code)}function isExpansionFormStart(input,offset,interpolationConfig){var isInterpolationStart=!!interpolationConfig&&input.indexOf(interpolationConfig.start,offset)==offset;return input.charCodeAt(offset)==chars.$LBRACE&&!isInterpolationStart}function isExpansionCaseStart(peek){return peek===chars.$EQ||chars.isAsciiLetter(peek)}function compareCharCodeCaseInsensitive(code1,code2){return toUpperCaseCharCode(code1)==toUpperCaseCharCode(code2)}function toUpperCaseCharCode(code){return code>=chars.$a&&code<=chars.$z?code-chars.$a+chars.$A:code}function mergeTextTokens(srcTokens){for(var lastDstToken,dstTokens=[],i=0;i<srcTokens.length;i++){var token=srcTokens[i];lastDstToken&&lastDstToken.type==TokenType.TEXT&&token.type==TokenType.TEXT?(lastDstToken.parts[0]+=token.parts[0],lastDstToken.sourceSpan.end=token.sourceSpan.end):(lastDstToken=token,dstTokens.push(lastDstToken))}return dstTokens}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},chars=require("../chars"),parse_util_1=require("../parse_util"),interpolation_config_1=require("./interpolation_config"),tags_1=require("./tags");!function(TokenType){TokenType[TokenType.TAG_OPEN_START=0]="TAG_OPEN_START",TokenType[TokenType.TAG_OPEN_END=1]="TAG_OPEN_END",TokenType[TokenType.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",TokenType[TokenType.TAG_CLOSE=3]="TAG_CLOSE",TokenType[TokenType.TEXT=4]="TEXT",TokenType[TokenType.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",TokenType[TokenType.RAW_TEXT=6]="RAW_TEXT",TokenType[TokenType.COMMENT_START=7]="COMMENT_START",TokenType[TokenType.COMMENT_END=8]="COMMENT_END",TokenType[TokenType.CDATA_START=9]="CDATA_START",TokenType[TokenType.CDATA_END=10]="CDATA_END",TokenType[TokenType.ATTR_NAME=11]="ATTR_NAME",TokenType[TokenType.ATTR_VALUE=12]="ATTR_VALUE",TokenType[TokenType.DOC_TYPE=13]="DOC_TYPE",TokenType[TokenType.EXPANSION_FORM_START=14]="EXPANSION_FORM_START",TokenType[TokenType.EXPANSION_CASE_VALUE=15]="EXPANSION_CASE_VALUE",TokenType[TokenType.EXPANSION_CASE_EXP_START=16]="EXPANSION_CASE_EXP_START",TokenType[TokenType.EXPANSION_CASE_EXP_END=17]="EXPANSION_CASE_EXP_END",TokenType[TokenType.EXPANSION_FORM_END=18]="EXPANSION_FORM_END",TokenType[TokenType.EOF=19]="EOF"}(exports.TokenType||(exports.TokenType={}));var TokenType=exports.TokenType,Token=function(){function Token(type,parts,sourceSpan){this.type=type,this.parts=parts,this.sourceSpan=sourceSpan}return Token}();exports.Token=Token;var TokenError=function(_super){function TokenError(errorMsg,tokenType,span){_super.call(this,span,errorMsg),this.tokenType=tokenType}return __extends(TokenError,_super),TokenError}(parse_util_1.ParseError);exports.TokenError=TokenError;var TokenizeResult=function(){function TokenizeResult(tokens,errors){this.tokens=tokens,this.errors=errors}return TokenizeResult}();exports.TokenizeResult=TokenizeResult,exports.tokenize=tokenize;var _CR_OR_CRLF_REGEXP=/\r\n?/g,_ControlFlowError=function(){function _ControlFlowError(error){this.error=error}return _ControlFlowError}(),_Tokenizer=function(){function _Tokenizer(_file,_getTagDefinition,_tokenizeIcu,_interpolationConfig){void 0===_interpolationConfig&&(_interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG),this._file=_file,this._getTagDefinition=_getTagDefinition,this._tokenizeIcu=_tokenizeIcu,this._interpolationConfig=_interpolationConfig,this._peek=-1,this._nextPeek=-1,this._index=-1,this._line=0,this._column=-1,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this._input=_file.content,this._length=_file.content.length,this._advance()}return _Tokenizer.prototype._processCarriageReturns=function(content){return content.replace(_CR_OR_CRLF_REGEXP,"\n")},_Tokenizer.prototype.tokenize=function(){for(;this._peek!==chars.$EOF;){var start=this._getLocation();try{this._attemptCharCode(chars.$LT)?this._attemptCharCode(chars.$BANG)?this._attemptCharCode(chars.$LBRACKET)?this._consumeCdata(start):this._attemptCharCode(chars.$MINUS)?this._consumeComment(start):this._consumeDocType(start):this._attemptCharCode(chars.$SLASH)?this._consumeTagClose(start):this._consumeTagOpen(start):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(e){if(!(e instanceof _ControlFlowError))throw e;this.errors.push(e.error)}}return this._beginToken(TokenType.EOF),this._endToken([]),new TokenizeResult(mergeTextTokens(this.tokens),this.errors)},_Tokenizer.prototype._tokenizeExpansionForm=function(){if(isExpansionFormStart(this._input,this._index,this._interpolationConfig))return this._consumeExpansionFormStart(),!0;if(isExpansionCaseStart(this._peek)&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._peek===chars.$RBRACE){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1},_Tokenizer.prototype._getLocation=function(){return new parse_util_1.ParseLocation(this._file,this._index,this._line,this._column)},_Tokenizer.prototype._getSpan=function(start,end){return void 0===start&&(start=this._getLocation()),void 0===end&&(end=this._getLocation()),new parse_util_1.ParseSourceSpan(start,end)},_Tokenizer.prototype._beginToken=function(type,start){void 0===start&&(start=this._getLocation()),this._currentTokenStart=start,this._currentTokenType=type},_Tokenizer.prototype._endToken=function(parts,end){void 0===end&&(end=this._getLocation());var token=new Token(this._currentTokenType,parts,new parse_util_1.ParseSourceSpan(this._currentTokenStart,end));return this.tokens.push(token),this._currentTokenStart=null,this._currentTokenType=null,token},_Tokenizer.prototype._createError=function(msg,span){this._isInExpansionForm()&&(msg+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');var error=new TokenError(msg,this._currentTokenType,span);return this._currentTokenStart=null,this._currentTokenType=null,new _ControlFlowError(error)},_Tokenizer.prototype._advance=function(){if(this._index>=this._length)throw this._createError(_unexpectedCharacterErrorMsg(chars.$EOF),this._getSpan());
this._peek===chars.$LF?(this._line++,this._column=0):this._peek!==chars.$LF&&this._peek!==chars.$CR&&this._column++,this._index++,this._peek=this._index>=this._length?chars.$EOF:this._input.charCodeAt(this._index),this._nextPeek=this._index+1>=this._length?chars.$EOF:this._input.charCodeAt(this._index+1)},_Tokenizer.prototype._attemptCharCode=function(charCode){return this._peek===charCode&&(this._advance(),!0)},_Tokenizer.prototype._attemptCharCodeCaseInsensitive=function(charCode){return!!compareCharCodeCaseInsensitive(this._peek,charCode)&&(this._advance(),!0)},_Tokenizer.prototype._requireCharCode=function(charCode){var location=this._getLocation();if(!this._attemptCharCode(charCode))throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan(location,location))},_Tokenizer.prototype._attemptStr=function(chars){var len=chars.length;if(this._index+len>this._length)return!1;for(var initialPosition=this._savePosition(),i=0;i<len;i++)if(!this._attemptCharCode(chars.charCodeAt(i)))return this._restorePosition(initialPosition),!1;return!0},_Tokenizer.prototype._attemptStrCaseInsensitive=function(chars){for(var i=0;i<chars.length;i++)if(!this._attemptCharCodeCaseInsensitive(chars.charCodeAt(i)))return!1;return!0},_Tokenizer.prototype._requireStr=function(chars){var location=this._getLocation();if(!this._attemptStr(chars))throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan(location))},_Tokenizer.prototype._attemptCharCodeUntilFn=function(predicate){for(;!predicate(this._peek);)this._advance()},_Tokenizer.prototype._requireCharCodeUntilFn=function(predicate,len){var start=this._getLocation();if(this._attemptCharCodeUntilFn(predicate),this._index-start.offset<len)throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan(start,start))},_Tokenizer.prototype._attemptUntilChar=function(char){for(;this._peek!==char;)this._advance()},_Tokenizer.prototype._readChar=function(decodeEntities){if(decodeEntities&&this._peek===chars.$AMPERSAND)return this._decodeEntity();var index=this._index;return this._advance(),this._input[index]},_Tokenizer.prototype._decodeEntity=function(){var start=this._getLocation();if(this._advance(),!this._attemptCharCode(chars.$HASH)){var startPosition=this._savePosition();if(this._attemptCharCodeUntilFn(isNamedEntityEnd),this._peek!=chars.$SEMICOLON)return this._restorePosition(startPosition),"&";this._advance();var name_1=this._input.substring(start.offset+1,this._index-1),char=tags_1.NAMED_ENTITIES[name_1];if(!char)throw this._createError(_unknownEntityErrorMsg(name_1),this._getSpan(start));return char}var isHex=this._attemptCharCode(chars.$x)||this._attemptCharCode(chars.$X),numberStart=this._getLocation().offset;if(this._attemptCharCodeUntilFn(isDigitEntityEnd),this._peek!=chars.$SEMICOLON)throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan());this._advance();var strNum=this._input.substring(numberStart,this._index-1);try{var charCode=parseInt(strNum,isHex?16:10);return String.fromCharCode(charCode)}catch(e){var entity=this._input.substring(start.offset+1,this._index-1);throw this._createError(_unknownEntityErrorMsg(entity),this._getSpan(start))}},_Tokenizer.prototype._consumeRawText=function(decodeEntities,firstCharOfEnd,attemptEndRest){var tagCloseStart,textStart=this._getLocation();this._beginToken(decodeEntities?TokenType.ESCAPABLE_RAW_TEXT:TokenType.RAW_TEXT,textStart);for(var parts=[];;){if(tagCloseStart=this._getLocation(),this._attemptCharCode(firstCharOfEnd)&&attemptEndRest())break;for(this._index>tagCloseStart.offset&&parts.push(this._input.substring(tagCloseStart.offset,this._index));this._peek!==firstCharOfEnd;)parts.push(this._readChar(decodeEntities))}return this._endToken([this._processCarriageReturns(parts.join(""))],tagCloseStart)},_Tokenizer.prototype._consumeComment=function(start){var _this=this;this._beginToken(TokenType.COMMENT_START,start),this._requireCharCode(chars.$MINUS),this._endToken([]);var textToken=this._consumeRawText(!1,chars.$MINUS,function(){return _this._attemptStr("->")});this._beginToken(TokenType.COMMENT_END,textToken.sourceSpan.end),this._endToken([])},_Tokenizer.prototype._consumeCdata=function(start){var _this=this;this._beginToken(TokenType.CDATA_START,start),this._requireStr("CDATA["),this._endToken([]);var textToken=this._consumeRawText(!1,chars.$RBRACKET,function(){return _this._attemptStr("]>")});this._beginToken(TokenType.CDATA_END,textToken.sourceSpan.end),this._endToken([])},_Tokenizer.prototype._consumeDocType=function(start){this._beginToken(TokenType.DOC_TYPE,start),this._attemptUntilChar(chars.$GT),this._advance(),this._endToken([this._input.substring(start.offset+2,this._index-1)])},_Tokenizer.prototype._consumePrefixAndName=function(){for(var nameOrPrefixStart=this._index,prefix=null;this._peek!==chars.$COLON&&!isPrefixEnd(this._peek);)this._advance();var nameStart;this._peek===chars.$COLON?(this._advance(),prefix=this._input.substring(nameOrPrefixStart,this._index-1),nameStart=this._index):nameStart=nameOrPrefixStart,this._requireCharCodeUntilFn(isNameEnd,this._index===nameStart?1:0);var name=this._input.substring(nameStart,this._index);return[prefix,name]},_Tokenizer.prototype._consumeTagOpen=function(start){var tagName,lowercaseTagName,savedPos=this._savePosition();try{if(!chars.isAsciiLetter(this._peek))throw this._createError(_unexpectedCharacterErrorMsg(this._peek),this._getSpan());var nameStart=this._index;for(this._consumeTagOpenStart(start),tagName=this._input.substring(nameStart,this._index),lowercaseTagName=tagName.toLowerCase(),this._attemptCharCodeUntilFn(isNotWhitespace);this._peek!==chars.$SLASH&&this._peek!==chars.$GT;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(isNotWhitespace),this._attemptCharCode(chars.$EQ)&&(this._attemptCharCodeUntilFn(isNotWhitespace),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(isNotWhitespace);this._consumeTagOpenEnd()}catch(e){if(e instanceof _ControlFlowError)return this._restorePosition(savedPos),this._beginToken(TokenType.TEXT,start),void this._endToken(["<"]);throw e}var contentTokenType=this._getTagDefinition(tagName).contentType;contentTokenType===tags_1.TagContentType.RAW_TEXT?this._consumeRawTextWithTagClose(lowercaseTagName,!1):contentTokenType===tags_1.TagContentType.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(lowercaseTagName,!0)},_Tokenizer.prototype._consumeRawTextWithTagClose=function(lowercaseTagName,decodeEntities){var _this=this,textToken=this._consumeRawText(decodeEntities,chars.$LT,function(){return!!_this._attemptCharCode(chars.$SLASH)&&(_this._attemptCharCodeUntilFn(isNotWhitespace),!!_this._attemptStrCaseInsensitive(lowercaseTagName)&&(_this._attemptCharCodeUntilFn(isNotWhitespace),_this._attemptCharCode(chars.$GT)))});this._beginToken(TokenType.TAG_CLOSE,textToken.sourceSpan.end),this._endToken([null,lowercaseTagName])},_Tokenizer.prototype._consumeTagOpenStart=function(start){this._beginToken(TokenType.TAG_OPEN_START,start);var parts=this._consumePrefixAndName();this._endToken(parts)},_Tokenizer.prototype._consumeAttributeName=function(){this._beginToken(TokenType.ATTR_NAME);var prefixAndName=this._consumePrefixAndName();this._endToken(prefixAndName)},_Tokenizer.prototype._consumeAttributeValue=function(){this._beginToken(TokenType.ATTR_VALUE);var value;if(this._peek===chars.$SQ||this._peek===chars.$DQ){var quoteChar=this._peek;this._advance();for(var parts=[];this._peek!==quoteChar;)parts.push(this._readChar(!0));value=parts.join(""),this._advance()}else{var valueStart=this._index;this._requireCharCodeUntilFn(isNameEnd,1),value=this._input.substring(valueStart,this._index)}this._endToken([this._processCarriageReturns(value)])},_Tokenizer.prototype._consumeTagOpenEnd=function(){var tokenType=this._attemptCharCode(chars.$SLASH)?TokenType.TAG_OPEN_END_VOID:TokenType.TAG_OPEN_END;this._beginToken(tokenType),this._requireCharCode(chars.$GT),this._endToken([])},_Tokenizer.prototype._consumeTagClose=function(start){this._beginToken(TokenType.TAG_CLOSE,start),this._attemptCharCodeUntilFn(isNotWhitespace);var prefixAndName=this._consumePrefixAndName();this._attemptCharCodeUntilFn(isNotWhitespace),this._requireCharCode(chars.$GT),this._endToken(prefixAndName)},_Tokenizer.prototype._consumeExpansionFormStart=function(){this._beginToken(TokenType.EXPANSION_FORM_START,this._getLocation()),this._requireCharCode(chars.$LBRACE),this._endToken([]),this._expansionCaseStack.push(TokenType.EXPANSION_FORM_START),this._beginToken(TokenType.RAW_TEXT,this._getLocation());var condition=this._readUntil(chars.$COMMA);this._endToken([condition],this._getLocation()),this._requireCharCode(chars.$COMMA),this._attemptCharCodeUntilFn(isNotWhitespace),this._beginToken(TokenType.RAW_TEXT,this._getLocation());var type=this._readUntil(chars.$COMMA);this._endToken([type],this._getLocation()),this._requireCharCode(chars.$COMMA),this._attemptCharCodeUntilFn(isNotWhitespace)},_Tokenizer.prototype._consumeExpansionCaseStart=function(){this._beginToken(TokenType.EXPANSION_CASE_VALUE,this._getLocation());var value=this._readUntil(chars.$LBRACE).trim();this._endToken([value],this._getLocation()),this._attemptCharCodeUntilFn(isNotWhitespace),this._beginToken(TokenType.EXPANSION_CASE_EXP_START,this._getLocation()),this._requireCharCode(chars.$LBRACE),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(isNotWhitespace),this._expansionCaseStack.push(TokenType.EXPANSION_CASE_EXP_START)},_Tokenizer.prototype._consumeExpansionCaseEnd=function(){this._beginToken(TokenType.EXPANSION_CASE_EXP_END,this._getLocation()),this._requireCharCode(chars.$RBRACE),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(isNotWhitespace),this._expansionCaseStack.pop()},_Tokenizer.prototype._consumeExpansionFormEnd=function(){this._beginToken(TokenType.EXPANSION_FORM_END,this._getLocation()),this._requireCharCode(chars.$RBRACE),this._endToken([]),this._expansionCaseStack.pop()},_Tokenizer.prototype._consumeText=function(){var start=this._getLocation();this._beginToken(TokenType.TEXT,start);var parts=[];do this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(parts.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._attemptStr(this._interpolationConfig.end)&&this._inInterpolation?(parts.push(this._interpolationConfig.end),this._inInterpolation=!1):parts.push(this._readChar(!0));while(!this._isTextEnd());this._endToken([this._processCarriageReturns(parts.join(""))])},_Tokenizer.prototype._isTextEnd=function(){if(this._peek===chars.$LT||this._peek===chars.$EOF)return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(isExpansionFormStart(this._input,this._index,this._interpolationConfig))return!0;if(this._peek===chars.$RBRACE&&this._isInExpansionCase())return!0}return!1},_Tokenizer.prototype._savePosition=function(){return[this._peek,this._index,this._column,this._line,this.tokens.length]},_Tokenizer.prototype._readUntil=function(char){var start=this._index;return this._attemptUntilChar(char),this._input.substring(start,this._index)},_Tokenizer.prototype._restorePosition=function(position){this._peek=position[0],this._index=position[1],this._column=position[2],this._line=position[3];var nbTokens=position[4];nbTokens<this.tokens.length&&(this.tokens=this.tokens.slice(0,nbTokens))},_Tokenizer.prototype._isInExpansionCase=function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===TokenType.EXPANSION_CASE_EXP_START},_Tokenizer.prototype._isInExpansionForm=function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===TokenType.EXPANSION_FORM_START},_Tokenizer}()},{"../chars":72,"../parse_util":122,"./interpolation_config":105,"./tags":108}],107:[function(require,module,exports){"use strict";function lastOnStack(stack,element){return stack.length>0&&stack[stack.length-1]===element}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),parse_util_1=require("../parse_util"),html=require("./ast"),interpolation_config_1=require("./interpolation_config"),lex=require("./lexer"),tags_1=require("./tags"),TreeError=function(_super){function TreeError(elementName,span,msg){_super.call(this,span,msg),this.elementName=elementName}return __extends(TreeError,_super),TreeError.create=function(elementName,span,msg){return new TreeError(elementName,span,msg)},TreeError}(parse_util_1.ParseError);exports.TreeError=TreeError;var ParseTreeResult=function(){function ParseTreeResult(rootNodes,errors){this.rootNodes=rootNodes,this.errors=errors}return ParseTreeResult}();exports.ParseTreeResult=ParseTreeResult;var Parser=function(){function Parser(_getTagDefinition){this._getTagDefinition=_getTagDefinition}return Parser.prototype.parse=function(source,url,parseExpansionForms,interpolationConfig){void 0===parseExpansionForms&&(parseExpansionForms=!1),void 0===interpolationConfig&&(interpolationConfig=interpolation_config_1.DEFAULT_INTERPOLATION_CONFIG);var tokensAndErrors=lex.tokenize(source,url,this._getTagDefinition,parseExpansionForms,interpolationConfig),treeAndErrors=new _TreeBuilder(tokensAndErrors.tokens,this._getTagDefinition).build();return new ParseTreeResult(treeAndErrors.rootNodes,tokensAndErrors.errors.concat(treeAndErrors.errors))},Parser}();exports.Parser=Parser;var _TreeBuilder=function(){function _TreeBuilder(tokens,getTagDefinition){this.tokens=tokens,this.getTagDefinition=getTagDefinition,this._index=-1,this._rootNodes=[],this._errors=[],this._elementStack=[],this._advance()}return _TreeBuilder.prototype.build=function(){for(;this._peek.type!==lex.TokenType.EOF;)this._peek.type===lex.TokenType.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===lex.TokenType.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===lex.TokenType.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===lex.TokenType.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===lex.TokenType.TEXT||this._peek.type===lex.TokenType.RAW_TEXT||this._peek.type===lex.TokenType.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===lex.TokenType.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance();return new ParseTreeResult(this._rootNodes,this._errors)},_TreeBuilder.prototype._advance=function(){var prev=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],prev},_TreeBuilder.prototype._advanceIf=function(type){return this._peek.type===type?this._advance():null},_TreeBuilder.prototype._consumeCdata=function(startToken){this._consumeText(this._advance()),this._advanceIf(lex.TokenType.CDATA_END)},_TreeBuilder.prototype._consumeComment=function(token){var text=this._advanceIf(lex.TokenType.RAW_TEXT);this._advanceIf(lex.TokenType.COMMENT_END);var value=lang_1.isPresent(text)?text.parts[0].trim():null;this._addToParent(new html.Comment(value,token.sourceSpan))},_TreeBuilder.prototype._consumeExpansion=function(token){for(var switchValue=this._advance(),type=this._advance(),cases=[];this._peek.type===lex.TokenType.EXPANSION_CASE_VALUE;){var expCase=this._parseExpansionCase();if(lang_1.isBlank(expCase))return;cases.push(expCase)}if(this._peek.type!==lex.TokenType.EXPANSION_FORM_END)return void this._errors.push(TreeError.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));var sourceSpan=new parse_util_1.ParseSourceSpan(token.sourceSpan.start,this._peek.sourceSpan.end);this._addToParent(new html.Expansion(switchValue.parts[0],type.parts[0],cases,sourceSpan,switchValue.sourceSpan)),this._advance()},_TreeBuilder.prototype._parseExpansionCase=function(){var value=this._advance();if(this._peek.type!==lex.TokenType.EXPANSION_CASE_EXP_START)return this._errors.push(TreeError.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;var start=this._advance(),exp=this._collectExpansionExpTokens(start);if(lang_1.isBlank(exp))return null;var end=this._advance();exp.push(new lex.Token(lex.TokenType.EOF,[],end.sourceSpan));var parsedExp=new _TreeBuilder(exp,this.getTagDefinition).build();if(parsedExp.errors.length>0)return this._errors=this._errors.concat(parsedExp.errors),null;var sourceSpan=new parse_util_1.ParseSourceSpan(value.sourceSpan.start,end.sourceSpan.end),expSourceSpan=new parse_util_1.ParseSourceSpan(start.sourceSpan.start,end.sourceSpan.end);return new html.ExpansionCase(value.parts[0],parsedExp.rootNodes,sourceSpan,value.sourceSpan,expSourceSpan)},_TreeBuilder.prototype._collectExpansionExpTokens=function(start){for(var exp=[],expansionFormStack=[lex.TokenType.EXPANSION_CASE_EXP_START];;){if(this._peek.type!==lex.TokenType.EXPANSION_FORM_START&&this._peek.type!==lex.TokenType.EXPANSION_CASE_EXP_START||expansionFormStack.push(this._peek.type),this._peek.type===lex.TokenType.EXPANSION_CASE_EXP_END){if(!lastOnStack(expansionFormStack,lex.TokenType.EXPANSION_CASE_EXP_START))return this._errors.push(TreeError.create(null,start.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(expansionFormStack.pop(),0==expansionFormStack.length)return exp}if(this._peek.type===lex.TokenType.EXPANSION_FORM_END){if(!lastOnStack(expansionFormStack,lex.TokenType.EXPANSION_FORM_START))return this._errors.push(TreeError.create(null,start.sourceSpan,"Invalid ICU message. Missing '}'.")),null;expansionFormStack.pop()}if(this._peek.type===lex.TokenType.EOF)return this._errors.push(TreeError.create(null,start.sourceSpan,"Invalid ICU message. Missing '}'.")),null;exp.push(this._advance())}},_TreeBuilder.prototype._consumeText=function(token){var text=token.parts[0];if(text.length>0&&"\n"==text[0]){var parent_1=this._getParentElement();lang_1.isPresent(parent_1)&&0==parent_1.children.length&&this.getTagDefinition(parent_1.name).ignoreFirstLf&&(text=text.substring(1))}text.length>0&&this._addToParent(new html.Text(text,token.sourceSpan))},_TreeBuilder.prototype._closeVoidElement=function(){if(this._elementStack.length>0){var el=collection_1.ListWrapper.last(this._elementStack);this.getTagDefinition(el.name).isVoid&&this._elementStack.pop()}},_TreeBuilder.prototype._consumeStartTag=function(startTagToken){for(var prefix=startTagToken.parts[0],name=startTagToken.parts[1],attrs=[];this._peek.type===lex.TokenType.ATTR_NAME;)attrs.push(this._consumeAttr(this._advance()));var fullName=this._getElementFullName(prefix,name,this._getParentElement()),selfClosing=!1;if(this._peek.type===lex.TokenType.TAG_OPEN_END_VOID){this._advance(),selfClosing=!0;var tagDef=this.getTagDefinition(fullName);tagDef.canSelfClose||null!==tags_1.getNsPrefix(fullName)||tagDef.isVoid||this._errors.push(TreeError.create(fullName,startTagToken.sourceSpan,'Only void and foreign elements can be self closed "'+startTagToken.parts[1]+'"'))}else this._peek.type===lex.TokenType.TAG_OPEN_END&&(this._advance(),selfClosing=!1);var end=this._peek.sourceSpan.start,span=new parse_util_1.ParseSourceSpan(startTagToken.sourceSpan.start,end),el=new html.Element(fullName,attrs,[],span,span,null);this._pushElement(el),selfClosing&&(this._popElement(fullName),el.endSourceSpan=span)},_TreeBuilder.prototype._pushElement=function(el){if(this._elementStack.length>0){var parentEl=collection_1.ListWrapper.last(this._elementStack);this.getTagDefinition(parentEl.name).isClosedByChild(el.name)&&this._elementStack.pop()}var tagDef=this.getTagDefinition(el.name),_a=this._getParentElementSkippingContainers(),parent=_a.parent,container=_a.container;if(lang_1.isPresent(parent)&&tagDef.requireExtraParent(parent.name)){var newParent=new html.Element(tagDef.parentToAdd,[],[],el.sourceSpan,el.startSourceSpan,el.endSourceSpan);this._insertBeforeContainer(parent,container,newParent)}this._addToParent(el),this._elementStack.push(el)},_TreeBuilder.prototype._consumeEndTag=function(endTagToken){var fullName=this._getElementFullName(endTagToken.parts[0],endTagToken.parts[1],this._getParentElement());this._getParentElement()&&(this._getParentElement().endSourceSpan=endTagToken.sourceSpan),this.getTagDefinition(fullName).isVoid?this._errors.push(TreeError.create(fullName,endTagToken.sourceSpan,'Void elements do not have end tags "'+endTagToken.parts[1]+'"')):this._popElement(fullName)||this._errors.push(TreeError.create(fullName,endTagToken.sourceSpan,'Unexpected closing tag "'+endTagToken.parts[1]+'"'))},_TreeBuilder.prototype._popElement=function(fullName){for(var stackIndex=this._elementStack.length-1;stackIndex>=0;stackIndex--){var el=this._elementStack[stackIndex];if(el.name==fullName)return collection_1.ListWrapper.splice(this._elementStack,stackIndex,this._elementStack.length-stackIndex),!0;if(!this.getTagDefinition(el.name).closedByParent)return!1}return!1},_TreeBuilder.prototype._consumeAttr=function(attrName){var fullName=tags_1.mergeNsAndName(attrName.parts[0],attrName.parts[1]),end=attrName.sourceSpan.end,value="";if(this._peek.type===lex.TokenType.ATTR_VALUE){var valueToken=this._advance();value=valueToken.parts[0],end=valueToken.sourceSpan.end}return new html.Attribute(fullName,value,new parse_util_1.ParseSourceSpan(attrName.sourceSpan.start,end))},_TreeBuilder.prototype._getParentElement=function(){return this._elementStack.length>0?collection_1.ListWrapper.last(this._elementStack):null},_TreeBuilder.prototype._getParentElementSkippingContainers=function(){for(var container=null,i=this._elementStack.length-1;i>=0;i--){if("ng-container"!==this._elementStack[i].name)return{parent:this._elementStack[i],container:container};container=this._elementStack[i]}return{parent:collection_1.ListWrapper.last(this._elementStack),container:container}},_TreeBuilder.prototype._addToParent=function(node){var parent=this._getParentElement();lang_1.isPresent(parent)?parent.children.push(node):this._rootNodes.push(node)},_TreeBuilder.prototype._insertBeforeContainer=function(parent,container,node){if(container){if(parent){var index=parent.children.indexOf(container);parent.children[index]=node}else this._rootNodes.push(node);node.children.push(container),this._elementStack.splice(this._elementStack.indexOf(container),0,node)}else this._addToParent(node),this._elementStack.push(node)},_TreeBuilder.prototype._getElementFullName=function(prefix,localName,parentElement){return lang_1.isBlank(prefix)&&(prefix=this.getTagDefinition(localName).implicitNamespacePrefix,lang_1.isBlank(prefix)&&lang_1.isPresent(parentElement)&&(prefix=tags_1.getNsPrefix(parentElement.name))),tags_1.mergeNsAndName(prefix,localName)},_TreeBuilder}()},{"../facade/collection":82,"../facade/lang":85,"../parse_util":122,"./ast":101,"./interpolation_config":105,"./lexer":106,"./tags":108}],108:[function(require,module,exports){"use strict";function splitNsName(elementName){if(":"!=elementName[0])return[null,elementName];var colonIndex=elementName.indexOf(":",1);if(colonIndex==-1)throw new Error('Unsupported format "'+elementName+'" expecting ":namespace:name"');return[elementName.slice(1,colonIndex),elementName.slice(colonIndex+1)]}function getNsPrefix(fullName){return null===fullName?null:splitNsName(fullName)[0]}function mergeNsAndName(prefix,localName){return prefix?":"+prefix+":"+localName:localName}!function(TagContentType){TagContentType[TagContentType.RAW_TEXT=0]="RAW_TEXT",TagContentType[TagContentType.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",TagContentType[TagContentType.PARSABLE_DATA=2]="PARSABLE_DATA"}(exports.TagContentType||(exports.TagContentType={}));exports.TagContentType;exports.splitNsName=splitNsName,exports.getNsPrefix=getNsPrefix,exports.mergeNsAndName=mergeNsAndName,exports.NAMED_ENTITIES={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",alefsym:"",Alpha:"",alpha:"",amp:"&",and:"",ang:"",apos:"'",Aring:"",aring:"",asymp:"",Atilde:"",atilde:"",Auml:"",auml:"",bdquo:"",Beta:"",beta:"",brvbar:"",bull:"",cap:"",Ccedil:"",ccedil:"",cedil:"",cent:"",Chi:"",chi:"",circ:"",clubs:"",cong:"",copy:"",crarr:"",cup:"",curren:"",dagger:"",Dagger:"",darr:"",dArr:"",deg:"",Delta:"",delta:"",diams:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",empty:"",emsp:"",ensp:"",Epsilon:"",epsilon:"",equiv:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",exist:"",fnof:"",forall:"",frac12:"",frac14:"",frac34:"",frasl:"",Gamma:"",gamma:"",ge:"",gt:">",harr:"",hArr:"",hearts:"",hellip:"",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",image:"",infin:"",int:"",Iota:"",iota:"",iquest:"",isin:"",Iuml:"",iuml:"",Kappa:"",kappa:"",Lambda:"",lambda:"",lang:"",laquo:"",larr:"",lArr:"",lceil:"",ldquo:"",le:"",lfloor:"",lowast:"",loz:"",lrm:"",lsaquo:"",lsquo:"",lt:"<",macr:"",mdash:"",micro:"",middot:"",minus:"",Mu:"",mu:"",nabla:"",nbsp:"",ndash:"",ne:"",ni:"",not:"",notin:"",nsub:"",Ntilde:"",ntilde:"",Nu:"",nu:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",OElig:"",oelig:"",Ograve:"",ograve:"",oline:"",Omega:"",omega:"",Omicron:"",omicron:"",oplus:"",or:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",otimes:"",Ouml:"",ouml:"",para:"",permil:"",perp:"",Phi:"",phi:"",Pi:"",pi:"",piv:"",plusmn:"",pound:"",prime:"",Prime:"",prod:"",prop:"",Psi:"",psi:"",quot:'"',radic:"",rang:"",raquo:"",rarr:"",rArr:"",rceil:"",rdquo:"",real:"",reg:"",rfloor:"",Rho:"",rho:"",rlm:"",rsaquo:"",rsquo:"",sbquo:"",Scaron:"",scaron:"",sdot:"",sect:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sim:"",spades:"",sub:"",sube:"",sum:"",sup:"",sup1:"",sup2:"",sup3:"",supe:"",szlig:"",Tau:"",tau:"",there4:"",Theta:"",theta:"",thetasym:"",thinsp:"",THORN:"",thorn:"",tilde:"",times:"",trade:"",Uacute:"",uacute:"",uarr:"",uArr:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",upsih:"",Upsilon:"",upsilon:"",Uuml:"",uuml:"",weierp:"",Xi:"",xi:"",Yacute:"",yacute:"",yen:"",yuml:"",Yuml:"",Zeta:"",zeta:"",zwj:"",zwnj:""}},{}],109:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},parser_1=require("./parser"),xml_tags_1=require("./xml_tags"),parser_2=require("./parser");exports.ParseTreeResult=parser_2.ParseTreeResult,exports.TreeError=parser_2.TreeError;var XmlParser=function(_super){function XmlParser(){_super.call(this,xml_tags_1.getXmlTagDefinition)}return __extends(XmlParser,_super),XmlParser.prototype.parse=function(source,url,parseExpansionForms){return void 0===parseExpansionForms&&(parseExpansionForms=!1),_super.prototype.parse.call(this,source,url,parseExpansionForms,null)},XmlParser}(parser_1.Parser);exports.XmlParser=XmlParser},{"./parser":107,"./xml_tags":110}],110:[function(require,module,exports){"use strict";function getXmlTagDefinition(tagName){return _TAG_DEFINITION}var tags_1=require("./tags"),XmlTagDefinition=function(){function XmlTagDefinition(){this.closedByParent=!1,this.contentType=tags_1.TagContentType.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0}return XmlTagDefinition.prototype.requireExtraParent=function(currentParent){return!1},XmlTagDefinition.prototype.isClosedByChild=function(name){return!1},XmlTagDefinition}();exports.XmlTagDefinition=XmlTagDefinition;var _TAG_DEFINITION=new XmlTagDefinition;exports.getXmlTagDefinition=getXmlTagDefinition},{"./tags":108}],111:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),core_private_1=require("../core_private"),compile_metadata_1=require("./compile_metadata"),lang_1=require("./facade/lang"),identifiers_1=require("./identifiers"),o=require("./output/output_ast"),value_util_1=require("./output/value_util"),parse_util_1=require("./parse_util"),provider_analyzer_1=require("./provider_analyzer"),util_1=require("./util"),ComponentFactoryDependency=function(){function ComponentFactoryDependency(comp,placeholder){this.comp=comp,this.placeholder=placeholder}return ComponentFactoryDependency}();exports.ComponentFactoryDependency=ComponentFactoryDependency;var NgModuleCompileResult=function(){function NgModuleCompileResult(statements,ngModuleFactoryVar,dependencies){this.statements=statements,this.ngModuleFactoryVar=ngModuleFactoryVar,this.dependencies=dependencies}return NgModuleCompileResult}();exports.NgModuleCompileResult=NgModuleCompileResult;var NgModuleCompiler=function(){function NgModuleCompiler(){}return NgModuleCompiler.prototype.compile=function(ngModuleMeta,extraProviders){var sourceFileName=lang_1.isPresent(ngModuleMeta.type.moduleUrl)?"in NgModule "+ngModuleMeta.type.name+" in "+ngModuleMeta.type.moduleUrl:"in NgModule "+ngModuleMeta.type.name,sourceFile=new parse_util_1.ParseSourceFile("",sourceFileName),sourceSpan=new parse_util_1.ParseSourceSpan(new parse_util_1.ParseLocation(sourceFile,null,null,null),new parse_util_1.ParseLocation(sourceFile,null,null,null)),deps=[],bootstrapComponentFactories=[],entryComponentFactories=ngModuleMeta.transitiveModule.entryComponents.map(function(entryComponent){var id=new compile_metadata_1.CompileIdentifierMetadata({name:entryComponent.name});return ngModuleMeta.bootstrapComponents.indexOf(entryComponent)>-1&&bootstrapComponentFactories.push(id),deps.push(new ComponentFactoryDependency(entryComponent,id)),id}),builder=new _InjectorBuilder(ngModuleMeta,entryComponentFactories,bootstrapComponentFactories,sourceSpan),providerParser=new provider_analyzer_1.NgModuleProviderAnalyzer(ngModuleMeta,extraProviders,sourceSpan);providerParser.parse().forEach(function(provider){return builder.addProvider(provider)});var injectorClass=builder.build(),ngModuleFactoryVar=ngModuleMeta.type.name+"NgFactory",ngModuleFactoryStmt=o.variable(ngModuleFactoryVar).set(o.importExpr(identifiers_1.Identifiers.NgModuleFactory).instantiate([o.variable(injectorClass.name),o.importExpr(ngModuleMeta.type)],o.importType(identifiers_1.Identifiers.NgModuleFactory,[o.importType(ngModuleMeta.type)],[o.TypeModifier.Const]))).toDeclStmt(null,[o.StmtModifier.Final]);return new NgModuleCompileResult([injectorClass,ngModuleFactoryStmt],ngModuleFactoryVar,deps)},NgModuleCompiler.decorators=[{type:core_1.Injectable}],NgModuleCompiler}();exports.NgModuleCompiler=NgModuleCompiler;var _InjectorBuilder=function(){function _InjectorBuilder(_ngModuleMeta,_entryComponentFactories,_bootstrapComponentFactories,_sourceSpan){this._ngModuleMeta=_ngModuleMeta,this._entryComponentFactories=_entryComponentFactories,this._bootstrapComponentFactories=_bootstrapComponentFactories,this._sourceSpan=_sourceSpan,this._instances=new compile_metadata_1.CompileIdentifierMap,this._fields=[],this._createStmts=[],this._destroyStmts=[],this._getters=[]}return _InjectorBuilder.prototype.addProvider=function(resolvedProvider){var _this=this,providerValueExpressions=resolvedProvider.providers.map(function(provider){return _this._getProviderValue(provider)}),propName="_"+resolvedProvider.token.name+"_"+this._instances.size,instance=this._createProviderProperty(propName,resolvedProvider,providerValueExpressions,resolvedProvider.multiProvider,resolvedProvider.eager);resolvedProvider.lifecycleHooks.indexOf(core_private_1.LifecycleHooks.OnDestroy)!==-1&&this._destroyStmts.push(instance.callMethod("ngOnDestroy",[]).toStmt()),this._instances.add(resolvedProvider.token,instance)},_InjectorBuilder.prototype.build=function(){var _this=this,getMethodStmts=this._instances.keys().map(function(token){var providerExpr=_this._instances.get(token);return new o.IfStmt(InjectMethodVars.token.identical(util_1.createDiTokenExpression(token)),[new o.ReturnStatement(providerExpr)]);
}),methods=[new o.ClassMethod("createInternal",[],this._createStmts.concat(new o.ReturnStatement(this._instances.get(identifiers_1.identifierToken(this._ngModuleMeta.type)))),o.importType(this._ngModuleMeta.type)),new o.ClassMethod("getInternal",[new o.FnParam(InjectMethodVars.token.name,o.DYNAMIC_TYPE),new o.FnParam(InjectMethodVars.notFoundResult.name,o.DYNAMIC_TYPE)],getMethodStmts.concat([new o.ReturnStatement(InjectMethodVars.notFoundResult)]),o.DYNAMIC_TYPE),new o.ClassMethod("destroyInternal",[],this._destroyStmts)],ctor=new o.ClassMethod(null,[new o.FnParam(InjectorProps.parent.name,o.importType(identifiers_1.Identifiers.Injector))],[o.SUPER_EXPR.callFn([o.variable(InjectorProps.parent.name),o.literalArr(this._entryComponentFactories.map(function(componentFactory){return o.importExpr(componentFactory)})),o.literalArr(this._bootstrapComponentFactories.map(function(componentFactory){return o.importExpr(componentFactory)}))]).toStmt()]),injClassName=this._ngModuleMeta.type.name+"Injector";return new o.ClassStmt(injClassName,o.importExpr(identifiers_1.Identifiers.NgModuleInjector,[o.importType(this._ngModuleMeta.type)]),this._fields,this._getters,ctor,methods)},_InjectorBuilder.prototype._getProviderValue=function(provider){var result,_this=this;if(lang_1.isPresent(provider.useExisting))result=this._getDependency(new compile_metadata_1.CompileDiDependencyMetadata({token:provider.useExisting}));else if(lang_1.isPresent(provider.useFactory)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useFactory.diDeps,depsExpr=deps.map(function(dep){return _this._getDependency(dep)});result=o.importExpr(provider.useFactory).callFn(depsExpr)}else if(lang_1.isPresent(provider.useClass)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useClass.diDeps,depsExpr=deps.map(function(dep){return _this._getDependency(dep)});result=o.importExpr(provider.useClass).instantiate(depsExpr,o.importType(provider.useClass))}else result=value_util_1.convertValueToOutputAst(provider.useValue);return result},_InjectorBuilder.prototype._createProviderProperty=function(propName,provider,providerValueExpressions,isMulti,isEager){var resolvedProviderValueExpr,type;if(isMulti?(resolvedProviderValueExpr=o.literalArr(providerValueExpressions),type=new o.ArrayType(o.DYNAMIC_TYPE)):(resolvedProviderValueExpr=providerValueExpressions[0],type=providerValueExpressions[0].type),lang_1.isBlank(type)&&(type=o.DYNAMIC_TYPE),isEager)this._fields.push(new o.ClassField(propName,type)),this._createStmts.push(o.THIS_EXPR.prop(propName).set(resolvedProviderValueExpr).toStmt());else{var internalField="_"+propName;this._fields.push(new o.ClassField(internalField,type));var getterStmts=[new o.IfStmt(o.THIS_EXPR.prop(internalField).isBlank(),[o.THIS_EXPR.prop(internalField).set(resolvedProviderValueExpr).toStmt()]),new o.ReturnStatement(o.THIS_EXPR.prop(internalField))];this._getters.push(new o.ClassGetter(propName,getterStmts,type))}return o.THIS_EXPR.prop(propName)},_InjectorBuilder.prototype._getDependency=function(dep){var result=null;if(dep.isValue&&(result=o.literal(dep.value)),dep.isSkipSelf||(dep.token&&(dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.Injector))||dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ComponentFactoryResolver)))&&(result=o.THIS_EXPR),lang_1.isBlank(result)&&(result=this._instances.get(dep.token))),lang_1.isBlank(result)){var args=[util_1.createDiTokenExpression(dep.token)];dep.isOptional&&args.push(o.NULL_EXPR),result=InjectorProps.parent.callMethod("get",args)}return result},_InjectorBuilder}(),InjectorProps=function(){function InjectorProps(){}return InjectorProps.parent=o.THIS_EXPR.prop("parent"),InjectorProps}(),InjectMethodVars=function(){function InjectMethodVars(){}return InjectMethodVars.token=o.variable("token"),InjectMethodVars.notFoundResult=o.variable("notFoundResult"),InjectMethodVars}()},{"../core_private":64,"./compile_metadata":73,"./facade/lang":85,"./identifiers":98,"./output/output_ast":116,"./output/value_util":121,"./parse_util":122,"./provider_analyzer":124,"./util":137,"@angular/core":154}],112:[function(require,module,exports){"use strict";function _isNgModuleMetadata(obj){return obj instanceof core_1.NgModuleMetadata}var core_1=require("@angular/core"),core_private_1=require("../core_private"),exceptions_1=require("../src/facade/exceptions"),lang_1=require("./facade/lang"),NgModuleResolver=function(){function NgModuleResolver(_reflector){void 0===_reflector&&(_reflector=core_private_1.reflector),this._reflector=_reflector}return NgModuleResolver.prototype.resolve=function(type,throwIfNotFound){void 0===throwIfNotFound&&(throwIfNotFound=!0);var ngModuleMeta=this._reflector.annotations(type).find(_isNgModuleMetadata);if(lang_1.isPresent(ngModuleMeta))return ngModuleMeta;if(throwIfNotFound)throw new exceptions_1.BaseException("No NgModule metadata found for '"+lang_1.stringify(type)+"'.");return null},NgModuleResolver.decorators=[{type:core_1.Injectable}],NgModuleResolver.ctorParameters=[{type:core_private_1.ReflectorReader}],NgModuleResolver}();exports.NgModuleResolver=NgModuleResolver},{"../core_private":64,"../src/facade/exceptions":84,"./facade/lang":85,"@angular/core":154}],113:[function(require,module,exports){"use strict";function _resolveViewStatements(compileResult){return compileResult.dependencies.forEach(function(dep){if(dep instanceof view_compiler_1.ViewFactoryDependency){var vfd=dep;vfd.placeholder.moduleUrl=_ngfactoryModuleUrl(vfd.comp.moduleUrl)}else if(dep instanceof view_compiler_1.ComponentFactoryDependency){var cfd=dep;cfd.placeholder.name=_componentFactoryName(cfd.comp),cfd.placeholder.moduleUrl=_ngfactoryModuleUrl(cfd.comp.moduleUrl)}}),compileResult.statements}function _resolveStyleStatements(compileResult,fileSuffix){return compileResult.dependencies.forEach(function(dep){dep.valuePlaceholder.moduleUrl=_stylesModuleUrl(dep.moduleUrl,dep.isShimmed,fileSuffix)}),compileResult.statements}function _ngfactoryModuleUrl(compUrl){var urlWithSuffix=_splitLastSuffix(compUrl);return urlWithSuffix[0]+".ngfactory"+urlWithSuffix[1]}function _componentFactoryName(comp){return comp.name+"NgFactory"}function _stylesModuleUrl(stylesheetUrl,shim,suffix){return shim?stylesheetUrl+".shim"+suffix:""+stylesheetUrl+suffix}function _assertComponent(meta){if(!meta.isComponent)throw new exceptions_1.BaseException("Could not compile '"+meta.type.name+"' because it is not a component.")}function _splitLastSuffix(path){var lastDot=path.lastIndexOf(".");return lastDot!==-1?[path.substring(0,lastDot),path.substring(lastDot)]:[path,""]}var compile_metadata_1=require("./compile_metadata"),collection_1=require("./facade/collection"),exceptions_1=require("./facade/exceptions"),identifiers_1=require("./identifiers"),o=require("./output/output_ast"),view_compiler_1=require("./view_compiler/view_compiler"),SourceModule=function(){function SourceModule(moduleUrl,source){this.moduleUrl=moduleUrl,this.source=source}return SourceModule}();exports.SourceModule=SourceModule;var NgModulesSummary=function(){function NgModulesSummary(ngModuleByComponent){this.ngModuleByComponent=ngModuleByComponent}return NgModulesSummary}();exports.NgModulesSummary=NgModulesSummary;var OfflineCompiler=function(){function OfflineCompiler(_metadataResolver,_directiveNormalizer,_templateParser,_styleCompiler,_viewCompiler,_ngModuleCompiler,_outputEmitter){this._metadataResolver=_metadataResolver,this._directiveNormalizer=_directiveNormalizer,this._templateParser=_templateParser,this._styleCompiler=_styleCompiler,this._viewCompiler=_viewCompiler,this._ngModuleCompiler=_ngModuleCompiler,this._outputEmitter=_outputEmitter}return OfflineCompiler.prototype.analyzeModules=function(ngModules){var _this=this,ngModuleByComponent=new Map;return ngModules.forEach(function(ngModule){var ngModuleMeta=_this._metadataResolver.getNgModuleMetadata(ngModule);ngModuleMeta.declaredDirectives.forEach(function(dirMeta){dirMeta.isComponent&&ngModuleByComponent.set(dirMeta.type.runtime,ngModuleMeta)})}),new NgModulesSummary(ngModuleByComponent)},OfflineCompiler.prototype.clearCache=function(){this._directiveNormalizer.clearCache(),this._metadataResolver.clearCache()},OfflineCompiler.prototype.compile=function(moduleUrl,ngModulesSummary,components,ngModules){var _this=this,fileSuffix=_splitLastSuffix(moduleUrl)[1],statements=[],exportedVars=[],outputSourceModules=[];return exportedVars.push.apply(exportedVars,ngModules.map(function(ngModuleType){return _this._compileModule(ngModuleType,statements)})),Promise.all(components.map(function(compType){var compMeta=_this._metadataResolver.getDirectiveMetadata(compType),ngModule=ngModulesSummary.ngModuleByComponent.get(compType);if(!ngModule)throw new exceptions_1.BaseException("Cannot determine the module for component "+compMeta.type.name+"!");return Promise.all([compMeta].concat(ngModule.transitiveModule.directives).map(function(dirMeta){return _this._directiveNormalizer.normalizeDirective(dirMeta).asyncResult})).then(function(normalizedCompWithDirectives){var compMeta=normalizedCompWithDirectives[0],dirMetas=normalizedCompWithDirectives.slice(1);_assertComponent(compMeta);var stylesCompileResults=_this._styleCompiler.compileComponent(compMeta);stylesCompileResults.externalStylesheets.forEach(function(compiledStyleSheet){outputSourceModules.push(_this._codgenStyles(compiledStyleSheet,fileSuffix))}),exportedVars.push(_this._compileComponentFactory(compMeta,fileSuffix,statements)),exportedVars.push(_this._compileComponent(compMeta,dirMetas,ngModule.transitiveModule.pipes,ngModule.schemas,stylesCompileResults.componentStylesheet,fileSuffix,statements))})})).then(function(){return statements.length>0&&outputSourceModules.unshift(_this._codegenSourceModule(_ngfactoryModuleUrl(moduleUrl),statements,exportedVars)),outputSourceModules})},OfflineCompiler.prototype._compileModule=function(ngModuleType,targetStatements){var ngModule=this._metadataResolver.getNgModuleMetadata(ngModuleType),appCompileResult=this._ngModuleCompiler.compile(ngModule,[]);return appCompileResult.dependencies.forEach(function(dep){dep.placeholder.name=_componentFactoryName(dep.comp),dep.placeholder.moduleUrl=_ngfactoryModuleUrl(dep.comp.moduleUrl)}),targetStatements.push.apply(targetStatements,appCompileResult.statements),appCompileResult.ngModuleFactoryVar},OfflineCompiler.prototype._compileComponentFactory=function(compMeta,fileSuffix,targetStatements){var hostMeta=compile_metadata_1.createHostComponentMeta(compMeta),hostViewFactoryVar=this._compileComponent(hostMeta,[compMeta],[],[],null,fileSuffix,targetStatements),compFactoryVar=_componentFactoryName(compMeta.type);return targetStatements.push(o.variable(compFactoryVar).set(o.importExpr(identifiers_1.Identifiers.ComponentFactory,[o.importType(compMeta.type)]).instantiate([o.literal(compMeta.selector),o.variable(hostViewFactoryVar),o.importExpr(compMeta.type)],o.importType(identifiers_1.Identifiers.ComponentFactory,[o.importType(compMeta.type)],[o.TypeModifier.Const]))).toDeclStmt(null,[o.StmtModifier.Final])),compFactoryVar},OfflineCompiler.prototype._compileComponent=function(compMeta,directives,pipes,schemas,componentStyles,fileSuffix,targetStatements){var parsedTemplate=this._templateParser.parse(compMeta,compMeta.template.template,directives,pipes,schemas,compMeta.type.name),stylesExpr=componentStyles?o.variable(componentStyles.stylesVar):o.literalArr([]),viewResult=this._viewCompiler.compileComponent(compMeta,parsedTemplate,stylesExpr,pipes);return componentStyles&&collection_1.ListWrapper.addAll(targetStatements,_resolveStyleStatements(componentStyles,fileSuffix)),collection_1.ListWrapper.addAll(targetStatements,_resolveViewStatements(viewResult)),viewResult.viewFactoryVar},OfflineCompiler.prototype._codgenStyles=function(stylesCompileResult,fileSuffix){return _resolveStyleStatements(stylesCompileResult,fileSuffix),this._codegenSourceModule(_stylesModuleUrl(stylesCompileResult.meta.moduleUrl,stylesCompileResult.isShimmed,fileSuffix),stylesCompileResult.statements,[stylesCompileResult.stylesVar])},OfflineCompiler.prototype._codegenSourceModule=function(moduleUrl,statements,exportedVars){return new SourceModule(moduleUrl,this._outputEmitter.emitStatements(moduleUrl,statements,exportedVars))},OfflineCompiler}();exports.OfflineCompiler=OfflineCompiler},{"./compile_metadata":73,"./facade/collection":82,"./facade/exceptions":84,"./identifiers":98,"./output/output_ast":116,"./view_compiler/view_compiler":152}],114:[function(require,module,exports){"use strict";function escapeSingleQuoteString(input,escapeDollar){if(lang_1.isBlank(input))return null;var body=lang_1.StringWrapper.replaceAllMapped(input,_SINGLE_QUOTE_ESCAPE_STRING_RE,function(match){return"$"==match[0]?escapeDollar?"\\$":"$":"\n"==match[0]?"\\n":"\r"==match[0]?"\\r":"\\"+match[0]});return"'"+body+"'"}function _createIndent(count){for(var res="",i=0;i<count;i++)res+="  ";return res}var exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),o=require("./output_ast"),_SINGLE_QUOTE_ESCAPE_STRING_RE=/'|\\|\n|\r|\$/g;exports.CATCH_ERROR_VAR=o.variable("error"),exports.CATCH_STACK_VAR=o.variable("stack");var OutputEmitter=function(){function OutputEmitter(){}return OutputEmitter}();exports.OutputEmitter=OutputEmitter;var _EmittedLine=function(){function _EmittedLine(indent){this.indent=indent,this.parts=[]}return _EmittedLine}(),EmitterVisitorContext=function(){function EmitterVisitorContext(_exportedVars,_indent){this._exportedVars=_exportedVars,this._indent=_indent,this._classes=[],this._lines=[new _EmittedLine(_indent)]}return EmitterVisitorContext.createRoot=function(exportedVars){return new EmitterVisitorContext(exportedVars,0)},Object.defineProperty(EmitterVisitorContext.prototype,"_currentLine",{get:function(){return this._lines[this._lines.length-1]},enumerable:!0,configurable:!0}),EmitterVisitorContext.prototype.isExportedVar=function(varName){return this._exportedVars.indexOf(varName)!==-1},EmitterVisitorContext.prototype.println=function(lastPart){void 0===lastPart&&(lastPart=""),this.print(lastPart,!0)},EmitterVisitorContext.prototype.lineIsEmpty=function(){return 0===this._currentLine.parts.length},EmitterVisitorContext.prototype.print=function(part,newLine){void 0===newLine&&(newLine=!1),part.length>0&&this._currentLine.parts.push(part),newLine&&this._lines.push(new _EmittedLine(this._indent))},EmitterVisitorContext.prototype.removeEmptyLastLine=function(){this.lineIsEmpty()&&this._lines.pop()},EmitterVisitorContext.prototype.incIndent=function(){this._indent++,this._currentLine.indent=this._indent},EmitterVisitorContext.prototype.decIndent=function(){this._indent--,this._currentLine.indent=this._indent},EmitterVisitorContext.prototype.pushClass=function(clazz){this._classes.push(clazz)},EmitterVisitorContext.prototype.popClass=function(){return this._classes.pop()},Object.defineProperty(EmitterVisitorContext.prototype,"currentClass",{get:function(){return this._classes.length>0?this._classes[this._classes.length-1]:null},enumerable:!0,configurable:!0}),EmitterVisitorContext.prototype.toSource=function(){var lines=this._lines;return 0===lines[lines.length-1].parts.length&&(lines=lines.slice(0,lines.length-1)),lines.map(function(line){return line.parts.length>0?_createIndent(line.indent)+line.parts.join(""):""}).join("\n")},EmitterVisitorContext}();exports.EmitterVisitorContext=EmitterVisitorContext;var AbstractEmitterVisitor=function(){function AbstractEmitterVisitor(_escapeDollarInStrings){this._escapeDollarInStrings=_escapeDollarInStrings}return AbstractEmitterVisitor.prototype.visitExpressionStmt=function(stmt,ctx){return stmt.expr.visitExpression(this,ctx),ctx.println(";"),null},AbstractEmitterVisitor.prototype.visitReturnStmt=function(stmt,ctx){return ctx.print("return "),stmt.value.visitExpression(this,ctx),ctx.println(";"),null},AbstractEmitterVisitor.prototype.visitIfStmt=function(stmt,ctx){ctx.print("if ("),stmt.condition.visitExpression(this,ctx),ctx.print(") {");var hasElseCase=lang_1.isPresent(stmt.falseCase)&&stmt.falseCase.length>0;return stmt.trueCase.length<=1&&!hasElseCase?(ctx.print(" "),this.visitAllStatements(stmt.trueCase,ctx),ctx.removeEmptyLastLine(),ctx.print(" ")):(ctx.println(),ctx.incIndent(),this.visitAllStatements(stmt.trueCase,ctx),ctx.decIndent(),hasElseCase&&(ctx.println("} else {"),ctx.incIndent(),this.visitAllStatements(stmt.falseCase,ctx),ctx.decIndent())),ctx.println("}"),null},AbstractEmitterVisitor.prototype.visitThrowStmt=function(stmt,ctx){return ctx.print("throw "),stmt.error.visitExpression(this,ctx),ctx.println(";"),null},AbstractEmitterVisitor.prototype.visitCommentStmt=function(stmt,ctx){var lines=stmt.comment.split("\n");return lines.forEach(function(line){ctx.println("// "+line)}),null},AbstractEmitterVisitor.prototype.visitWriteVarExpr=function(expr,ctx){var lineWasEmpty=ctx.lineIsEmpty();return lineWasEmpty||ctx.print("("),ctx.print(expr.name+" = "),expr.value.visitExpression(this,ctx),lineWasEmpty||ctx.print(")"),null},AbstractEmitterVisitor.prototype.visitWriteKeyExpr=function(expr,ctx){var lineWasEmpty=ctx.lineIsEmpty();return lineWasEmpty||ctx.print("("),expr.receiver.visitExpression(this,ctx),ctx.print("["),expr.index.visitExpression(this,ctx),ctx.print("] = "),expr.value.visitExpression(this,ctx),lineWasEmpty||ctx.print(")"),null},AbstractEmitterVisitor.prototype.visitWritePropExpr=function(expr,ctx){var lineWasEmpty=ctx.lineIsEmpty();return lineWasEmpty||ctx.print("("),expr.receiver.visitExpression(this,ctx),ctx.print("."+expr.name+" = "),expr.value.visitExpression(this,ctx),lineWasEmpty||ctx.print(")"),null},AbstractEmitterVisitor.prototype.visitInvokeMethodExpr=function(expr,ctx){expr.receiver.visitExpression(this,ctx);var name=expr.name;return lang_1.isPresent(expr.builtin)&&(name=this.getBuiltinMethodName(expr.builtin),lang_1.isBlank(name))?null:(ctx.print("."+name+"("),this.visitAllExpressions(expr.args,ctx,","),ctx.print(")"),null)},AbstractEmitterVisitor.prototype.visitInvokeFunctionExpr=function(expr,ctx){return expr.fn.visitExpression(this,ctx),ctx.print("("),this.visitAllExpressions(expr.args,ctx,","),ctx.print(")"),null},AbstractEmitterVisitor.prototype.visitReadVarExpr=function(ast,ctx){var varName=ast.name;if(lang_1.isPresent(ast.builtin))switch(ast.builtin){case o.BuiltinVar.Super:varName="super";break;case o.BuiltinVar.This:varName="this";break;case o.BuiltinVar.CatchError:varName=exports.CATCH_ERROR_VAR.name;break;case o.BuiltinVar.CatchStack:varName=exports.CATCH_STACK_VAR.name;break;default:throw new exceptions_1.BaseException("Unknown builtin variable "+ast.builtin)}return ctx.print(varName),null},AbstractEmitterVisitor.prototype.visitInstantiateExpr=function(ast,ctx){return ctx.print("new "),ast.classExpr.visitExpression(this,ctx),ctx.print("("),this.visitAllExpressions(ast.args,ctx,","),ctx.print(")"),null},AbstractEmitterVisitor.prototype.visitLiteralExpr=function(ast,ctx){var value=ast.value;return lang_1.isString(value)?ctx.print(escapeSingleQuoteString(value,this._escapeDollarInStrings)):lang_1.isBlank(value)?ctx.print("null"):ctx.print(""+value),null},AbstractEmitterVisitor.prototype.visitConditionalExpr=function(ast,ctx){return ctx.print("("),ast.condition.visitExpression(this,ctx),ctx.print("? "),ast.trueCase.visitExpression(this,ctx),ctx.print(": "),ast.falseCase.visitExpression(this,ctx),ctx.print(")"),null},AbstractEmitterVisitor.prototype.visitNotExpr=function(ast,ctx){return ctx.print("!"),ast.condition.visitExpression(this,ctx),null},AbstractEmitterVisitor.prototype.visitBinaryOperatorExpr=function(ast,ctx){var opStr;switch(ast.operator){case o.BinaryOperator.Equals:opStr="==";break;case o.BinaryOperator.Identical:opStr="===";break;case o.BinaryOperator.NotEquals:opStr="!=";break;case o.BinaryOperator.NotIdentical:opStr="!==";break;case o.BinaryOperator.And:opStr="&&";break;case o.BinaryOperator.Or:opStr="||";break;case o.BinaryOperator.Plus:opStr="+";break;case o.BinaryOperator.Minus:opStr="-";break;case o.BinaryOperator.Divide:opStr="/";break;case o.BinaryOperator.Multiply:opStr="*";break;case o.BinaryOperator.Modulo:opStr="%";break;case o.BinaryOperator.Lower:opStr="<";break;case o.BinaryOperator.LowerEquals:opStr="<=";break;case o.BinaryOperator.Bigger:opStr=">";break;case o.BinaryOperator.BiggerEquals:opStr=">=";break;default:throw new exceptions_1.BaseException("Unknown operator "+ast.operator)}return ctx.print("("),ast.lhs.visitExpression(this,ctx),ctx.print(" "+opStr+" "),ast.rhs.visitExpression(this,ctx),ctx.print(")"),null},AbstractEmitterVisitor.prototype.visitReadPropExpr=function(ast,ctx){return ast.receiver.visitExpression(this,ctx),ctx.print("."),ctx.print(ast.name),null},AbstractEmitterVisitor.prototype.visitReadKeyExpr=function(ast,ctx){return ast.receiver.visitExpression(this,ctx),ctx.print("["),ast.index.visitExpression(this,ctx),ctx.print("]"),null},AbstractEmitterVisitor.prototype.visitLiteralArrayExpr=function(ast,ctx){var useNewLine=ast.entries.length>1;return ctx.print("[",useNewLine),ctx.incIndent(),this.visitAllExpressions(ast.entries,ctx,",",useNewLine),ctx.decIndent(),ctx.print("]",useNewLine),null},AbstractEmitterVisitor.prototype.visitLiteralMapExpr=function(ast,ctx){var _this=this,useNewLine=ast.entries.length>1;return ctx.print("{",useNewLine),ctx.incIndent(),this.visitAllObjects(function(entry){ctx.print(escapeSingleQuoteString(entry[0],_this._escapeDollarInStrings)+": "),entry[1].visitExpression(_this,ctx)},ast.entries,ctx,",",useNewLine),ctx.decIndent(),ctx.print("}",useNewLine),null},AbstractEmitterVisitor.prototype.visitAllExpressions=function(expressions,ctx,separator,newLine){var _this=this;void 0===newLine&&(newLine=!1),this.visitAllObjects(function(expr){return expr.visitExpression(_this,ctx)},expressions,ctx,separator,newLine)},AbstractEmitterVisitor.prototype.visitAllObjects=function(handler,expressions,ctx,separator,newLine){void 0===newLine&&(newLine=!1);for(var i=0;i<expressions.length;i++)i>0&&ctx.print(separator,newLine),handler(expressions[i]);newLine&&ctx.println()},AbstractEmitterVisitor.prototype.visitAllStatements=function(statements,ctx){var _this=this;statements.forEach(function(stmt){return stmt.visitStatement(_this,ctx)})},AbstractEmitterVisitor}();exports.AbstractEmitterVisitor=AbstractEmitterVisitor,exports.escapeSingleQuoteString=escapeSingleQuoteString},{"../facade/exceptions":84,"../facade/lang":85,"./output_ast":116}],115:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),abstract_emitter_1=require("./abstract_emitter"),o=require("./output_ast"),AbstractJsEmitterVisitor=function(_super){function AbstractJsEmitterVisitor(){_super.call(this,!1)}return __extends(AbstractJsEmitterVisitor,_super),AbstractJsEmitterVisitor.prototype.visitDeclareClassStmt=function(stmt,ctx){var _this=this;return ctx.pushClass(stmt),this._visitClassConstructor(stmt,ctx),lang_1.isPresent(stmt.parent)&&(ctx.print(stmt.name+".prototype = Object.create("),stmt.parent.visitExpression(this,ctx),ctx.println(".prototype);")),stmt.getters.forEach(function(getter){return _this._visitClassGetter(stmt,getter,ctx)}),stmt.methods.forEach(function(method){return _this._visitClassMethod(stmt,method,ctx)}),ctx.popClass(),null},AbstractJsEmitterVisitor.prototype._visitClassConstructor=function(stmt,ctx){ctx.print("function "+stmt.name+"("),lang_1.isPresent(stmt.constructorMethod)&&this._visitParams(stmt.constructorMethod.params,ctx),ctx.println(") {"),ctx.incIndent(),lang_1.isPresent(stmt.constructorMethod)&&stmt.constructorMethod.body.length>0&&(ctx.println("var self = this;"),this.visitAllStatements(stmt.constructorMethod.body,ctx)),ctx.decIndent(),ctx.println("}")},AbstractJsEmitterVisitor.prototype._visitClassGetter=function(stmt,getter,ctx){ctx.println("Object.defineProperty("+stmt.name+".prototype, '"+getter.name+"', { get: function() {"),ctx.incIndent(),getter.body.length>0&&(ctx.println("var self = this;"),this.visitAllStatements(getter.body,ctx)),ctx.decIndent(),ctx.println("}});")},AbstractJsEmitterVisitor.prototype._visitClassMethod=function(stmt,method,ctx){ctx.print(stmt.name+".prototype."+method.name+" = function("),this._visitParams(method.params,ctx),ctx.println(") {"),ctx.incIndent(),method.body.length>0&&(ctx.println("var self = this;"),this.visitAllStatements(method.body,ctx)),ctx.decIndent(),ctx.println("};")},AbstractJsEmitterVisitor.prototype.visitReadVarExpr=function(ast,ctx){if(ast.builtin===o.BuiltinVar.This)ctx.print("self");else{if(ast.builtin===o.BuiltinVar.Super)throw new exceptions_1.BaseException("'super' needs to be handled at a parent ast node, not at the variable level!");_super.prototype.visitReadVarExpr.call(this,ast,ctx)}return null},AbstractJsEmitterVisitor.prototype.visitDeclareVarStmt=function(stmt,ctx){return ctx.print("var "+stmt.name+" = "),stmt.value.visitExpression(this,ctx),ctx.println(";"),null},AbstractJsEmitterVisitor.prototype.visitCastExpr=function(ast,ctx){return ast.value.visitExpression(this,ctx),null},AbstractJsEmitterVisitor.prototype.visitInvokeFunctionExpr=function(expr,ctx){var fnExpr=expr.fn;return fnExpr instanceof o.ReadVarExpr&&fnExpr.builtin===o.BuiltinVar.Super?(ctx.currentClass.parent.visitExpression(this,ctx),ctx.print(".call(this"),expr.args.length>0&&(ctx.print(", "),this.visitAllExpressions(expr.args,ctx,",")),ctx.print(")")):_super.prototype.visitInvokeFunctionExpr.call(this,expr,ctx),null},AbstractJsEmitterVisitor.prototype.visitFunctionExpr=function(ast,ctx){return ctx.print("function("),this._visitParams(ast.params,ctx),ctx.println(") {"),ctx.incIndent(),this.visitAllStatements(ast.statements,ctx),ctx.decIndent(),ctx.print("}"),null},AbstractJsEmitterVisitor.prototype.visitDeclareFunctionStmt=function(stmt,ctx){return ctx.print("function "+stmt.name+"("),this._visitParams(stmt.params,ctx),ctx.println(") {"),ctx.incIndent(),this.visitAllStatements(stmt.statements,ctx),ctx.decIndent(),ctx.println("}"),null},AbstractJsEmitterVisitor.prototype.visitTryCatchStmt=function(stmt,ctx){ctx.println("try {"),ctx.incIndent(),this.visitAllStatements(stmt.bodyStmts,ctx),ctx.decIndent(),ctx.println("} catch ("+abstract_emitter_1.CATCH_ERROR_VAR.name+") {"),ctx.incIndent();var catchStmts=[abstract_emitter_1.CATCH_STACK_VAR.set(abstract_emitter_1.CATCH_ERROR_VAR.prop("stack")).toDeclStmt(null,[o.StmtModifier.Final])].concat(stmt.catchStmts);return this.visitAllStatements(catchStmts,ctx),ctx.decIndent(),ctx.println("}"),null},AbstractJsEmitterVisitor.prototype._visitParams=function(params,ctx){this.visitAllObjects(function(param){return ctx.print(param.name)},params,ctx,",")},AbstractJsEmitterVisitor.prototype.getBuiltinMethodName=function(method){var name;switch(method){case o.BuiltinMethod.ConcatArray:name="concat";break;case o.BuiltinMethod.SubscribeObservable:name="subscribe";break;case o.BuiltinMethod.bind:name="bind";break;default:throw new exceptions_1.BaseException("Unknown builtin method: "+method)}return name},AbstractJsEmitterVisitor}(abstract_emitter_1.AbstractEmitterVisitor);exports.AbstractJsEmitterVisitor=AbstractJsEmitterVisitor},{"../facade/exceptions":84,"../facade/lang":85,"./abstract_emitter":114,"./output_ast":116}],116:[function(require,module,exports){"use strict";function replaceVarInExpression(varName,newValue,expression){var transformer=new _ReplaceVariableTransformer(varName,newValue);return expression.visitExpression(transformer,null)}function findReadVarNames(stmts){var finder=new _VariableFinder;return finder.visitAllStatements(stmts,null),finder.varNames}function variable(name,type){return void 0===type&&(type=null),new ReadVarExpr(name,type)}function importExpr(id,typeParams){return void 0===typeParams&&(typeParams=null),new ExternalExpr(id,null,typeParams)}function importType(id,typeParams,typeModifiers){return void 0===typeParams&&(typeParams=null),void 0===typeModifiers&&(typeModifiers=null),lang_1.isPresent(id)?new ExternalType(id,typeParams,typeModifiers):null}function literalArr(values,type){return void 0===type&&(type=null),new LiteralArrayExpr(values,type)}function literalMap(values,type){return void 0===type&&(type=null),new LiteralMapExpr(values,type)}function not(expr){return new NotExpr(expr)}function fn(params,body,type){return void 0===type&&(type=null),new FunctionExpr(params,body,type)}function literal(value,type){return void 0===type&&(type=null),new LiteralExpr(value,type)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},lang_1=require("../facade/lang");!function(TypeModifier){TypeModifier[TypeModifier.Const=0]="Const"}(exports.TypeModifier||(exports.TypeModifier={}));var Type=(exports.TypeModifier,function(){function Type(modifiers){void 0===modifiers&&(modifiers=null),this.modifiers=modifiers,lang_1.isBlank(modifiers)&&(this.modifiers=[])}return Type.prototype.hasModifier=function(modifier){return this.modifiers.indexOf(modifier)!==-1},Type}());exports.Type=Type,function(BuiltinTypeName){BuiltinTypeName[BuiltinTypeName.Dynamic=0]="Dynamic",BuiltinTypeName[BuiltinTypeName.Bool=1]="Bool",BuiltinTypeName[BuiltinTypeName.String=2]="String",BuiltinTypeName[BuiltinTypeName.Int=3]="Int",BuiltinTypeName[BuiltinTypeName.Number=4]="Number",BuiltinTypeName[BuiltinTypeName.Function=5]="Function"}(exports.BuiltinTypeName||(exports.BuiltinTypeName={}));var BuiltinTypeName=exports.BuiltinTypeName,BuiltinType=function(_super){function BuiltinType(name,modifiers){void 0===modifiers&&(modifiers=null),_super.call(this,modifiers),this.name=name}return __extends(BuiltinType,_super),BuiltinType.prototype.visitType=function(visitor,context){return visitor.visitBuiltintType(this,context)},BuiltinType}(Type);exports.BuiltinType=BuiltinType;var ExternalType=function(_super){function ExternalType(value,typeParams,modifiers){void 0===typeParams&&(typeParams=null),void 0===modifiers&&(modifiers=null),_super.call(this,modifiers),this.value=value,this.typeParams=typeParams}return __extends(ExternalType,_super),ExternalType.prototype.visitType=function(visitor,context){return visitor.visitExternalType(this,context)},ExternalType}(Type);exports.ExternalType=ExternalType;var ArrayType=function(_super){function ArrayType(of,modifiers){void 0===modifiers&&(modifiers=null),_super.call(this,modifiers),this.of=of}return __extends(ArrayType,_super),ArrayType.prototype.visitType=function(visitor,context){return visitor.visitArrayType(this,context)},ArrayType}(Type);exports.ArrayType=ArrayType;var MapType=function(_super){function MapType(valueType,modifiers){void 0===modifiers&&(modifiers=null),_super.call(this,modifiers),this.valueType=valueType}return __extends(MapType,_super),MapType.prototype.visitType=function(visitor,context){return visitor.visitMapType(this,context)},MapType}(Type);exports.MapType=MapType,exports.DYNAMIC_TYPE=new BuiltinType(BuiltinTypeName.Dynamic),exports.BOOL_TYPE=new BuiltinType(BuiltinTypeName.Bool),exports.INT_TYPE=new BuiltinType(BuiltinTypeName.Int),exports.NUMBER_TYPE=new BuiltinType(BuiltinTypeName.Number),exports.STRING_TYPE=new BuiltinType(BuiltinTypeName.String),exports.FUNCTION_TYPE=new BuiltinType(BuiltinTypeName.Function),function(BinaryOperator){BinaryOperator[BinaryOperator.Equals=0]="Equals",BinaryOperator[BinaryOperator.NotEquals=1]="NotEquals",BinaryOperator[BinaryOperator.Identical=2]="Identical",BinaryOperator[BinaryOperator.NotIdentical=3]="NotIdentical",BinaryOperator[BinaryOperator.Minus=4]="Minus",BinaryOperator[BinaryOperator.Plus=5]="Plus",BinaryOperator[BinaryOperator.Divide=6]="Divide",BinaryOperator[BinaryOperator.Multiply=7]="Multiply",BinaryOperator[BinaryOperator.Modulo=8]="Modulo",
BinaryOperator[BinaryOperator.And=9]="And",BinaryOperator[BinaryOperator.Or=10]="Or",BinaryOperator[BinaryOperator.Lower=11]="Lower",BinaryOperator[BinaryOperator.LowerEquals=12]="LowerEquals",BinaryOperator[BinaryOperator.Bigger=13]="Bigger",BinaryOperator[BinaryOperator.BiggerEquals=14]="BiggerEquals"}(exports.BinaryOperator||(exports.BinaryOperator={}));var BinaryOperator=exports.BinaryOperator,Expression=function(){function Expression(type){this.type=type}return Expression.prototype.prop=function(name){return new ReadPropExpr(this,name)},Expression.prototype.key=function(index,type){return void 0===type&&(type=null),new ReadKeyExpr(this,index,type)},Expression.prototype.callMethod=function(name,params){return new InvokeMethodExpr(this,name,params)},Expression.prototype.callFn=function(params){return new InvokeFunctionExpr(this,params)},Expression.prototype.instantiate=function(params,type){return void 0===type&&(type=null),new InstantiateExpr(this,params,type)},Expression.prototype.conditional=function(trueCase,falseCase){return void 0===falseCase&&(falseCase=null),new ConditionalExpr(this,trueCase,falseCase)},Expression.prototype.equals=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Equals,this,rhs)},Expression.prototype.notEquals=function(rhs){return new BinaryOperatorExpr(BinaryOperator.NotEquals,this,rhs)},Expression.prototype.identical=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Identical,this,rhs)},Expression.prototype.notIdentical=function(rhs){return new BinaryOperatorExpr(BinaryOperator.NotIdentical,this,rhs)},Expression.prototype.minus=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Minus,this,rhs)},Expression.prototype.plus=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Plus,this,rhs)},Expression.prototype.divide=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Divide,this,rhs)},Expression.prototype.multiply=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Multiply,this,rhs)},Expression.prototype.modulo=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Modulo,this,rhs)},Expression.prototype.and=function(rhs){return new BinaryOperatorExpr(BinaryOperator.And,this,rhs)},Expression.prototype.or=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Or,this,rhs)},Expression.prototype.lower=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Lower,this,rhs)},Expression.prototype.lowerEquals=function(rhs){return new BinaryOperatorExpr(BinaryOperator.LowerEquals,this,rhs)},Expression.prototype.bigger=function(rhs){return new BinaryOperatorExpr(BinaryOperator.Bigger,this,rhs)},Expression.prototype.biggerEquals=function(rhs){return new BinaryOperatorExpr(BinaryOperator.BiggerEquals,this,rhs)},Expression.prototype.isBlank=function(){return this.equals(exports.NULL_EXPR)},Expression.prototype.cast=function(type){return new CastExpr(this,type)},Expression.prototype.toStmt=function(){return new ExpressionStatement(this)},Expression}();exports.Expression=Expression,function(BuiltinVar){BuiltinVar[BuiltinVar.This=0]="This",BuiltinVar[BuiltinVar.Super=1]="Super",BuiltinVar[BuiltinVar.CatchError=2]="CatchError",BuiltinVar[BuiltinVar.CatchStack=3]="CatchStack"}(exports.BuiltinVar||(exports.BuiltinVar={}));var BuiltinVar=exports.BuiltinVar,ReadVarExpr=function(_super){function ReadVarExpr(name,type){void 0===type&&(type=null),_super.call(this,type),lang_1.isString(name)?(this.name=name,this.builtin=null):(this.name=null,this.builtin=name)}return __extends(ReadVarExpr,_super),ReadVarExpr.prototype.visitExpression=function(visitor,context){return visitor.visitReadVarExpr(this,context)},ReadVarExpr.prototype.set=function(value){return new WriteVarExpr(this.name,value)},ReadVarExpr}(Expression);exports.ReadVarExpr=ReadVarExpr;var WriteVarExpr=function(_super){function WriteVarExpr(name,value,type){void 0===type&&(type=null),_super.call(this,lang_1.isPresent(type)?type:value.type),this.name=name,this.value=value}return __extends(WriteVarExpr,_super),WriteVarExpr.prototype.visitExpression=function(visitor,context){return visitor.visitWriteVarExpr(this,context)},WriteVarExpr.prototype.toDeclStmt=function(type,modifiers){return void 0===type&&(type=null),void 0===modifiers&&(modifiers=null),new DeclareVarStmt(this.name,this.value,type,modifiers)},WriteVarExpr}(Expression);exports.WriteVarExpr=WriteVarExpr;var WriteKeyExpr=function(_super){function WriteKeyExpr(receiver,index,value,type){void 0===type&&(type=null),_super.call(this,lang_1.isPresent(type)?type:value.type),this.receiver=receiver,this.index=index,this.value=value}return __extends(WriteKeyExpr,_super),WriteKeyExpr.prototype.visitExpression=function(visitor,context){return visitor.visitWriteKeyExpr(this,context)},WriteKeyExpr}(Expression);exports.WriteKeyExpr=WriteKeyExpr;var WritePropExpr=function(_super){function WritePropExpr(receiver,name,value,type){void 0===type&&(type=null),_super.call(this,lang_1.isPresent(type)?type:value.type),this.receiver=receiver,this.name=name,this.value=value}return __extends(WritePropExpr,_super),WritePropExpr.prototype.visitExpression=function(visitor,context){return visitor.visitWritePropExpr(this,context)},WritePropExpr}(Expression);exports.WritePropExpr=WritePropExpr,function(BuiltinMethod){BuiltinMethod[BuiltinMethod.ConcatArray=0]="ConcatArray",BuiltinMethod[BuiltinMethod.SubscribeObservable=1]="SubscribeObservable",BuiltinMethod[BuiltinMethod.bind=2]="bind"}(exports.BuiltinMethod||(exports.BuiltinMethod={}));var InvokeMethodExpr=(exports.BuiltinMethod,function(_super){function InvokeMethodExpr(receiver,method,args,type){void 0===type&&(type=null),_super.call(this,type),this.receiver=receiver,this.args=args,lang_1.isString(method)?(this.name=method,this.builtin=null):(this.name=null,this.builtin=method)}return __extends(InvokeMethodExpr,_super),InvokeMethodExpr.prototype.visitExpression=function(visitor,context){return visitor.visitInvokeMethodExpr(this,context)},InvokeMethodExpr}(Expression));exports.InvokeMethodExpr=InvokeMethodExpr;var InvokeFunctionExpr=function(_super){function InvokeFunctionExpr(fn,args,type){void 0===type&&(type=null),_super.call(this,type),this.fn=fn,this.args=args}return __extends(InvokeFunctionExpr,_super),InvokeFunctionExpr.prototype.visitExpression=function(visitor,context){return visitor.visitInvokeFunctionExpr(this,context)},InvokeFunctionExpr}(Expression);exports.InvokeFunctionExpr=InvokeFunctionExpr;var InstantiateExpr=function(_super){function InstantiateExpr(classExpr,args,type){_super.call(this,type),this.classExpr=classExpr,this.args=args}return __extends(InstantiateExpr,_super),InstantiateExpr.prototype.visitExpression=function(visitor,context){return visitor.visitInstantiateExpr(this,context)},InstantiateExpr}(Expression);exports.InstantiateExpr=InstantiateExpr;var LiteralExpr=function(_super){function LiteralExpr(value,type){void 0===type&&(type=null),_super.call(this,type),this.value=value}return __extends(LiteralExpr,_super),LiteralExpr.prototype.visitExpression=function(visitor,context){return visitor.visitLiteralExpr(this,context)},LiteralExpr}(Expression);exports.LiteralExpr=LiteralExpr;var ExternalExpr=function(_super){function ExternalExpr(value,type,typeParams){void 0===type&&(type=null),void 0===typeParams&&(typeParams=null),_super.call(this,type),this.value=value,this.typeParams=typeParams}return __extends(ExternalExpr,_super),ExternalExpr.prototype.visitExpression=function(visitor,context){return visitor.visitExternalExpr(this,context)},ExternalExpr}(Expression);exports.ExternalExpr=ExternalExpr;var ConditionalExpr=function(_super){function ConditionalExpr(condition,trueCase,falseCase,type){void 0===falseCase&&(falseCase=null),void 0===type&&(type=null),_super.call(this,lang_1.isPresent(type)?type:trueCase.type),this.condition=condition,this.falseCase=falseCase,this.trueCase=trueCase}return __extends(ConditionalExpr,_super),ConditionalExpr.prototype.visitExpression=function(visitor,context){return visitor.visitConditionalExpr(this,context)},ConditionalExpr}(Expression);exports.ConditionalExpr=ConditionalExpr;var NotExpr=function(_super){function NotExpr(condition){_super.call(this,exports.BOOL_TYPE),this.condition=condition}return __extends(NotExpr,_super),NotExpr.prototype.visitExpression=function(visitor,context){return visitor.visitNotExpr(this,context)},NotExpr}(Expression);exports.NotExpr=NotExpr;var CastExpr=function(_super){function CastExpr(value,type){_super.call(this,type),this.value=value}return __extends(CastExpr,_super),CastExpr.prototype.visitExpression=function(visitor,context){return visitor.visitCastExpr(this,context)},CastExpr}(Expression);exports.CastExpr=CastExpr;var FnParam=function(){function FnParam(name,type){void 0===type&&(type=null),this.name=name,this.type=type}return FnParam}();exports.FnParam=FnParam;var FunctionExpr=function(_super){function FunctionExpr(params,statements,type){void 0===type&&(type=null),_super.call(this,type),this.params=params,this.statements=statements}return __extends(FunctionExpr,_super),FunctionExpr.prototype.visitExpression=function(visitor,context){return visitor.visitFunctionExpr(this,context)},FunctionExpr.prototype.toDeclStmt=function(name,modifiers){return void 0===modifiers&&(modifiers=null),new DeclareFunctionStmt(name,this.params,this.statements,this.type,modifiers)},FunctionExpr}(Expression);exports.FunctionExpr=FunctionExpr;var BinaryOperatorExpr=function(_super){function BinaryOperatorExpr(operator,lhs,rhs,type){void 0===type&&(type=null),_super.call(this,lang_1.isPresent(type)?type:lhs.type),this.operator=operator,this.rhs=rhs,this.lhs=lhs}return __extends(BinaryOperatorExpr,_super),BinaryOperatorExpr.prototype.visitExpression=function(visitor,context){return visitor.visitBinaryOperatorExpr(this,context)},BinaryOperatorExpr}(Expression);exports.BinaryOperatorExpr=BinaryOperatorExpr;var ReadPropExpr=function(_super){function ReadPropExpr(receiver,name,type){void 0===type&&(type=null),_super.call(this,type),this.receiver=receiver,this.name=name}return __extends(ReadPropExpr,_super),ReadPropExpr.prototype.visitExpression=function(visitor,context){return visitor.visitReadPropExpr(this,context)},ReadPropExpr.prototype.set=function(value){return new WritePropExpr(this.receiver,this.name,value)},ReadPropExpr}(Expression);exports.ReadPropExpr=ReadPropExpr;var ReadKeyExpr=function(_super){function ReadKeyExpr(receiver,index,type){void 0===type&&(type=null),_super.call(this,type),this.receiver=receiver,this.index=index}return __extends(ReadKeyExpr,_super),ReadKeyExpr.prototype.visitExpression=function(visitor,context){return visitor.visitReadKeyExpr(this,context)},ReadKeyExpr.prototype.set=function(value){return new WriteKeyExpr(this.receiver,this.index,value)},ReadKeyExpr}(Expression);exports.ReadKeyExpr=ReadKeyExpr;var LiteralArrayExpr=function(_super){function LiteralArrayExpr(entries,type){void 0===type&&(type=null),_super.call(this,type),this.entries=entries}return __extends(LiteralArrayExpr,_super),LiteralArrayExpr.prototype.visitExpression=function(visitor,context){return visitor.visitLiteralArrayExpr(this,context)},LiteralArrayExpr}(Expression);exports.LiteralArrayExpr=LiteralArrayExpr;var LiteralMapExpr=function(_super){function LiteralMapExpr(entries,type){void 0===type&&(type=null),_super.call(this,type),this.entries=entries,this.valueType=null,lang_1.isPresent(type)&&(this.valueType=type.valueType)}return __extends(LiteralMapExpr,_super),LiteralMapExpr.prototype.visitExpression=function(visitor,context){return visitor.visitLiteralMapExpr(this,context)},LiteralMapExpr}(Expression);exports.LiteralMapExpr=LiteralMapExpr,exports.THIS_EXPR=new ReadVarExpr(BuiltinVar.This),exports.SUPER_EXPR=new ReadVarExpr(BuiltinVar.Super),exports.CATCH_ERROR_VAR=new ReadVarExpr(BuiltinVar.CatchError),exports.CATCH_STACK_VAR=new ReadVarExpr(BuiltinVar.CatchStack),exports.NULL_EXPR=new LiteralExpr(null,null),function(StmtModifier){StmtModifier[StmtModifier.Final=0]="Final",StmtModifier[StmtModifier.Private=1]="Private"}(exports.StmtModifier||(exports.StmtModifier={}));var Statement=(exports.StmtModifier,function(){function Statement(modifiers){void 0===modifiers&&(modifiers=null),this.modifiers=modifiers,lang_1.isBlank(modifiers)&&(this.modifiers=[])}return Statement.prototype.hasModifier=function(modifier){return this.modifiers.indexOf(modifier)!==-1},Statement}());exports.Statement=Statement;var DeclareVarStmt=function(_super){function DeclareVarStmt(name,value,type,modifiers){void 0===type&&(type=null),void 0===modifiers&&(modifiers=null),_super.call(this,modifiers),this.name=name,this.value=value,this.type=lang_1.isPresent(type)?type:value.type}return __extends(DeclareVarStmt,_super),DeclareVarStmt.prototype.visitStatement=function(visitor,context){return visitor.visitDeclareVarStmt(this,context)},DeclareVarStmt}(Statement);exports.DeclareVarStmt=DeclareVarStmt;var DeclareFunctionStmt=function(_super){function DeclareFunctionStmt(name,params,statements,type,modifiers){void 0===type&&(type=null),void 0===modifiers&&(modifiers=null),_super.call(this,modifiers),this.name=name,this.params=params,this.statements=statements,this.type=type}return __extends(DeclareFunctionStmt,_super),DeclareFunctionStmt.prototype.visitStatement=function(visitor,context){return visitor.visitDeclareFunctionStmt(this,context)},DeclareFunctionStmt}(Statement);exports.DeclareFunctionStmt=DeclareFunctionStmt;var ExpressionStatement=function(_super){function ExpressionStatement(expr){_super.call(this),this.expr=expr}return __extends(ExpressionStatement,_super),ExpressionStatement.prototype.visitStatement=function(visitor,context){return visitor.visitExpressionStmt(this,context)},ExpressionStatement}(Statement);exports.ExpressionStatement=ExpressionStatement;var ReturnStatement=function(_super){function ReturnStatement(value){_super.call(this),this.value=value}return __extends(ReturnStatement,_super),ReturnStatement.prototype.visitStatement=function(visitor,context){return visitor.visitReturnStmt(this,context)},ReturnStatement}(Statement);exports.ReturnStatement=ReturnStatement;var AbstractClassPart=function(){function AbstractClassPart(type,modifiers){void 0===type&&(type=null),this.type=type,this.modifiers=modifiers,lang_1.isBlank(modifiers)&&(this.modifiers=[])}return AbstractClassPart.prototype.hasModifier=function(modifier){return this.modifiers.indexOf(modifier)!==-1},AbstractClassPart}();exports.AbstractClassPart=AbstractClassPart;var ClassField=function(_super){function ClassField(name,type,modifiers){void 0===type&&(type=null),void 0===modifiers&&(modifiers=null),_super.call(this,type,modifiers),this.name=name}return __extends(ClassField,_super),ClassField}(AbstractClassPart);exports.ClassField=ClassField;var ClassMethod=function(_super){function ClassMethod(name,params,body,type,modifiers){void 0===type&&(type=null),void 0===modifiers&&(modifiers=null),_super.call(this,type,modifiers),this.name=name,this.params=params,this.body=body}return __extends(ClassMethod,_super),ClassMethod}(AbstractClassPart);exports.ClassMethod=ClassMethod;var ClassGetter=function(_super){function ClassGetter(name,body,type,modifiers){void 0===type&&(type=null),void 0===modifiers&&(modifiers=null),_super.call(this,type,modifiers),this.name=name,this.body=body}return __extends(ClassGetter,_super),ClassGetter}(AbstractClassPart);exports.ClassGetter=ClassGetter;var ClassStmt=function(_super){function ClassStmt(name,parent,fields,getters,constructorMethod,methods,modifiers){void 0===modifiers&&(modifiers=null),_super.call(this,modifiers),this.name=name,this.parent=parent,this.fields=fields,this.getters=getters,this.constructorMethod=constructorMethod,this.methods=methods}return __extends(ClassStmt,_super),ClassStmt.prototype.visitStatement=function(visitor,context){return visitor.visitDeclareClassStmt(this,context)},ClassStmt}(Statement);exports.ClassStmt=ClassStmt;var IfStmt=function(_super){function IfStmt(condition,trueCase,falseCase){void 0===falseCase&&(falseCase=[]),_super.call(this),this.condition=condition,this.trueCase=trueCase,this.falseCase=falseCase}return __extends(IfStmt,_super),IfStmt.prototype.visitStatement=function(visitor,context){return visitor.visitIfStmt(this,context)},IfStmt}(Statement);exports.IfStmt=IfStmt;var CommentStmt=function(_super){function CommentStmt(comment){_super.call(this),this.comment=comment}return __extends(CommentStmt,_super),CommentStmt.prototype.visitStatement=function(visitor,context){return visitor.visitCommentStmt(this,context)},CommentStmt}(Statement);exports.CommentStmt=CommentStmt;var TryCatchStmt=function(_super){function TryCatchStmt(bodyStmts,catchStmts){_super.call(this),this.bodyStmts=bodyStmts,this.catchStmts=catchStmts}return __extends(TryCatchStmt,_super),TryCatchStmt.prototype.visitStatement=function(visitor,context){return visitor.visitTryCatchStmt(this,context)},TryCatchStmt}(Statement);exports.TryCatchStmt=TryCatchStmt;var ThrowStmt=function(_super){function ThrowStmt(error){_super.call(this),this.error=error}return __extends(ThrowStmt,_super),ThrowStmt.prototype.visitStatement=function(visitor,context){return visitor.visitThrowStmt(this,context)},ThrowStmt}(Statement);exports.ThrowStmt=ThrowStmt;var ExpressionTransformer=function(){function ExpressionTransformer(){}return ExpressionTransformer.prototype.visitReadVarExpr=function(ast,context){return ast},ExpressionTransformer.prototype.visitWriteVarExpr=function(expr,context){return new WriteVarExpr(expr.name,expr.value.visitExpression(this,context))},ExpressionTransformer.prototype.visitWriteKeyExpr=function(expr,context){return new WriteKeyExpr(expr.receiver.visitExpression(this,context),expr.index.visitExpression(this,context),expr.value.visitExpression(this,context))},ExpressionTransformer.prototype.visitWritePropExpr=function(expr,context){return new WritePropExpr(expr.receiver.visitExpression(this,context),expr.name,expr.value.visitExpression(this,context))},ExpressionTransformer.prototype.visitInvokeMethodExpr=function(ast,context){var method=lang_1.isPresent(ast.builtin)?ast.builtin:ast.name;return new InvokeMethodExpr(ast.receiver.visitExpression(this,context),method,this.visitAllExpressions(ast.args,context),ast.type)},ExpressionTransformer.prototype.visitInvokeFunctionExpr=function(ast,context){return new InvokeFunctionExpr(ast.fn.visitExpression(this,context),this.visitAllExpressions(ast.args,context),ast.type)},ExpressionTransformer.prototype.visitInstantiateExpr=function(ast,context){return new InstantiateExpr(ast.classExpr.visitExpression(this,context),this.visitAllExpressions(ast.args,context),ast.type)},ExpressionTransformer.prototype.visitLiteralExpr=function(ast,context){return ast},ExpressionTransformer.prototype.visitExternalExpr=function(ast,context){return ast},ExpressionTransformer.prototype.visitConditionalExpr=function(ast,context){return new ConditionalExpr(ast.condition.visitExpression(this,context),ast.trueCase.visitExpression(this,context),ast.falseCase.visitExpression(this,context))},ExpressionTransformer.prototype.visitNotExpr=function(ast,context){return new NotExpr(ast.condition.visitExpression(this,context))},ExpressionTransformer.prototype.visitCastExpr=function(ast,context){return new CastExpr(ast.value.visitExpression(this,context),context)},ExpressionTransformer.prototype.visitFunctionExpr=function(ast,context){return ast},ExpressionTransformer.prototype.visitBinaryOperatorExpr=function(ast,context){return new BinaryOperatorExpr(ast.operator,ast.lhs.visitExpression(this,context),ast.rhs.visitExpression(this,context),ast.type)},ExpressionTransformer.prototype.visitReadPropExpr=function(ast,context){return new ReadPropExpr(ast.receiver.visitExpression(this,context),ast.name,ast.type)},ExpressionTransformer.prototype.visitReadKeyExpr=function(ast,context){return new ReadKeyExpr(ast.receiver.visitExpression(this,context),ast.index.visitExpression(this,context),ast.type)},ExpressionTransformer.prototype.visitLiteralArrayExpr=function(ast,context){return new LiteralArrayExpr(this.visitAllExpressions(ast.entries,context))},ExpressionTransformer.prototype.visitLiteralMapExpr=function(ast,context){var _this=this;return new LiteralMapExpr(ast.entries.map(function(entry){return[entry[0],entry[1].visitExpression(_this,context)]}))},ExpressionTransformer.prototype.visitAllExpressions=function(exprs,context){var _this=this;return exprs.map(function(expr){return expr.visitExpression(_this,context)})},ExpressionTransformer.prototype.visitDeclareVarStmt=function(stmt,context){return new DeclareVarStmt(stmt.name,stmt.value.visitExpression(this,context),stmt.type,stmt.modifiers)},ExpressionTransformer.prototype.visitDeclareFunctionStmt=function(stmt,context){return stmt},ExpressionTransformer.prototype.visitExpressionStmt=function(stmt,context){return new ExpressionStatement(stmt.expr.visitExpression(this,context))},ExpressionTransformer.prototype.visitReturnStmt=function(stmt,context){return new ReturnStatement(stmt.value.visitExpression(this,context))},ExpressionTransformer.prototype.visitDeclareClassStmt=function(stmt,context){return stmt},ExpressionTransformer.prototype.visitIfStmt=function(stmt,context){return new IfStmt(stmt.condition.visitExpression(this,context),this.visitAllStatements(stmt.trueCase,context),this.visitAllStatements(stmt.falseCase,context))},ExpressionTransformer.prototype.visitTryCatchStmt=function(stmt,context){return new TryCatchStmt(this.visitAllStatements(stmt.bodyStmts,context),this.visitAllStatements(stmt.catchStmts,context))},ExpressionTransformer.prototype.visitThrowStmt=function(stmt,context){return new ThrowStmt(stmt.error.visitExpression(this,context))},ExpressionTransformer.prototype.visitCommentStmt=function(stmt,context){return stmt},ExpressionTransformer.prototype.visitAllStatements=function(stmts,context){var _this=this;return stmts.map(function(stmt){return stmt.visitStatement(_this,context)})},ExpressionTransformer}();exports.ExpressionTransformer=ExpressionTransformer;var RecursiveExpressionVisitor=function(){function RecursiveExpressionVisitor(){}return RecursiveExpressionVisitor.prototype.visitReadVarExpr=function(ast,context){return ast},RecursiveExpressionVisitor.prototype.visitWriteVarExpr=function(expr,context){return expr.value.visitExpression(this,context),expr},RecursiveExpressionVisitor.prototype.visitWriteKeyExpr=function(expr,context){return expr.receiver.visitExpression(this,context),expr.index.visitExpression(this,context),expr.value.visitExpression(this,context),expr},RecursiveExpressionVisitor.prototype.visitWritePropExpr=function(expr,context){return expr.receiver.visitExpression(this,context),expr.value.visitExpression(this,context),expr},RecursiveExpressionVisitor.prototype.visitInvokeMethodExpr=function(ast,context){return ast.receiver.visitExpression(this,context),this.visitAllExpressions(ast.args,context),ast},RecursiveExpressionVisitor.prototype.visitInvokeFunctionExpr=function(ast,context){return ast.fn.visitExpression(this,context),this.visitAllExpressions(ast.args,context),ast},RecursiveExpressionVisitor.prototype.visitInstantiateExpr=function(ast,context){return ast.classExpr.visitExpression(this,context),this.visitAllExpressions(ast.args,context),ast},RecursiveExpressionVisitor.prototype.visitLiteralExpr=function(ast,context){return ast},RecursiveExpressionVisitor.prototype.visitExternalExpr=function(ast,context){return ast},RecursiveExpressionVisitor.prototype.visitConditionalExpr=function(ast,context){return ast.condition.visitExpression(this,context),ast.trueCase.visitExpression(this,context),ast.falseCase.visitExpression(this,context),ast},RecursiveExpressionVisitor.prototype.visitNotExpr=function(ast,context){return ast.condition.visitExpression(this,context),ast},RecursiveExpressionVisitor.prototype.visitCastExpr=function(ast,context){return ast.value.visitExpression(this,context),ast},RecursiveExpressionVisitor.prototype.visitFunctionExpr=function(ast,context){return ast},RecursiveExpressionVisitor.prototype.visitBinaryOperatorExpr=function(ast,context){return ast.lhs.visitExpression(this,context),ast.rhs.visitExpression(this,context),ast},RecursiveExpressionVisitor.prototype.visitReadPropExpr=function(ast,context){return ast.receiver.visitExpression(this,context),ast},RecursiveExpressionVisitor.prototype.visitReadKeyExpr=function(ast,context){return ast.receiver.visitExpression(this,context),ast.index.visitExpression(this,context),ast},RecursiveExpressionVisitor.prototype.visitLiteralArrayExpr=function(ast,context){return this.visitAllExpressions(ast.entries,context),ast},RecursiveExpressionVisitor.prototype.visitLiteralMapExpr=function(ast,context){var _this=this;return ast.entries.forEach(function(entry){return entry[1].visitExpression(_this,context)}),ast},RecursiveExpressionVisitor.prototype.visitAllExpressions=function(exprs,context){var _this=this;exprs.forEach(function(expr){return expr.visitExpression(_this,context)})},RecursiveExpressionVisitor.prototype.visitDeclareVarStmt=function(stmt,context){return stmt.value.visitExpression(this,context),stmt},RecursiveExpressionVisitor.prototype.visitDeclareFunctionStmt=function(stmt,context){return stmt},RecursiveExpressionVisitor.prototype.visitExpressionStmt=function(stmt,context){return stmt.expr.visitExpression(this,context),stmt},RecursiveExpressionVisitor.prototype.visitReturnStmt=function(stmt,context){return stmt.value.visitExpression(this,context),stmt},RecursiveExpressionVisitor.prototype.visitDeclareClassStmt=function(stmt,context){return stmt},RecursiveExpressionVisitor.prototype.visitIfStmt=function(stmt,context){return stmt.condition.visitExpression(this,context),this.visitAllStatements(stmt.trueCase,context),this.visitAllStatements(stmt.falseCase,context),stmt},RecursiveExpressionVisitor.prototype.visitTryCatchStmt=function(stmt,context){return this.visitAllStatements(stmt.bodyStmts,context),this.visitAllStatements(stmt.catchStmts,context),stmt},RecursiveExpressionVisitor.prototype.visitThrowStmt=function(stmt,context){return stmt.error.visitExpression(this,context),stmt},RecursiveExpressionVisitor.prototype.visitCommentStmt=function(stmt,context){return stmt},RecursiveExpressionVisitor.prototype.visitAllStatements=function(stmts,context){var _this=this;stmts.forEach(function(stmt){return stmt.visitStatement(_this,context)})},RecursiveExpressionVisitor}();exports.RecursiveExpressionVisitor=RecursiveExpressionVisitor,exports.replaceVarInExpression=replaceVarInExpression;var _ReplaceVariableTransformer=function(_super){function _ReplaceVariableTransformer(_varName,_newValue){_super.call(this),this._varName=_varName,this._newValue=_newValue}return __extends(_ReplaceVariableTransformer,_super),_ReplaceVariableTransformer.prototype.visitReadVarExpr=function(ast,context){return ast.name==this._varName?this._newValue:ast},_ReplaceVariableTransformer}(ExpressionTransformer);exports.findReadVarNames=findReadVarNames;var _VariableFinder=function(_super){function _VariableFinder(){_super.apply(this,arguments),this.varNames=new Set}return __extends(_VariableFinder,_super),_VariableFinder.prototype.visitReadVarExpr=function(ast,context){return this.varNames.add(ast.name),null},_VariableFinder}(RecursiveExpressionVisitor);exports.variable=variable,exports.importExpr=importExpr,exports.importType=importType,exports.literalArr=literalArr,exports.literalMap=literalMap,exports.not=not,exports.fn=fn,exports.literal=literal},{"../facade/lang":85}],117:[function(require,module,exports){"use strict";function interpretStatements(statements,resultVar){var stmtsWithReturn=statements.concat([new o.ReturnStatement(o.variable(resultVar))]),ctx=new _ExecutionContext(null,null,null,new Map),visitor=new StatementInterpreter,result=visitor.visitAllStatements(stmtsWithReturn,ctx);return lang_1.isPresent(result)?result.value:null}function _executeFunctionStatements(varNames,varValues,statements,ctx,visitor){for(var childCtx=ctx.createChildWihtLocalVars(),i=0;i<varNames.length;i++)childCtx.vars.set(varNames[i],varValues[i]);var result=visitor.visitAllStatements(statements,childCtx);return lang_1.isPresent(result)?result.value:null}function createDynamicClass(_classStmt,_ctx,_visitor){var propertyDescriptors={};_classStmt.getters.forEach(function(getter){propertyDescriptors[getter.name]={configurable:!1,get:function(){var instanceCtx=new _ExecutionContext(_ctx,this,_classStmt.name,_ctx.vars);return _executeFunctionStatements([],[],getter.body,instanceCtx,_visitor)}}}),_classStmt.methods.forEach(function(method){var paramNames=method.params.map(function(param){return param.name});propertyDescriptors[method.name]={writable:!1,configurable:!1,value:function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var instanceCtx=new _ExecutionContext(_ctx,this,_classStmt.name,_ctx.vars);return _executeFunctionStatements(paramNames,args,method.body,instanceCtx,_visitor)}}});var ctorParamNames=_classStmt.constructorMethod.params.map(function(param){return param.name}),ctor=function(){for(var _this=this,args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var instanceCtx=new _ExecutionContext(_ctx,this,_classStmt.name,_ctx.vars);_classStmt.fields.forEach(function(field){_this[field.name]=void 0}),_executeFunctionStatements(ctorParamNames,args,_classStmt.constructorMethod.body,instanceCtx,_visitor)},superClass=_classStmt.parent.visitExpression(_visitor,_ctx);return ctor.prototype=Object.create(superClass.prototype,propertyDescriptors),ctor}function _declareFn(varNames,statements,ctx,visitor){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];return _executeFunctionStatements(varNames,args,statements,ctx,visitor)}}var collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),o=require("./output_ast"),ts_emitter_1=require("./ts_emitter");exports.interpretStatements=interpretStatements;var _ExecutionContext=function(){function _ExecutionContext(parent,instance,className,vars){this.parent=parent,this.instance=instance,this.className=className,this.vars=vars}return _ExecutionContext.prototype.createChildWihtLocalVars=function(){return new _ExecutionContext(this,this.instance,this.className,new Map)},_ExecutionContext}(),ReturnValue=function(){function ReturnValue(value){this.value=value}return ReturnValue}(),StatementInterpreter=function(){function StatementInterpreter(){}return StatementInterpreter.prototype.debugAst=function(ast){return ts_emitter_1.debugOutputAstAsTypeScript(ast)},StatementInterpreter.prototype.visitDeclareVarStmt=function(stmt,ctx){return ctx.vars.set(stmt.name,stmt.value.visitExpression(this,ctx)),null},StatementInterpreter.prototype.visitWriteVarExpr=function(expr,ctx){for(var value=expr.value.visitExpression(this,ctx),currCtx=ctx;null!=currCtx;){if(currCtx.vars.has(expr.name))return currCtx.vars.set(expr.name,value),value;currCtx=currCtx.parent}throw new exceptions_1.BaseException("Not declared variable "+expr.name)},StatementInterpreter.prototype.visitReadVarExpr=function(ast,ctx){var varName=ast.name;if(lang_1.isPresent(ast.builtin))switch(ast.builtin){case o.BuiltinVar.Super:return ctx.instance.__proto__;case o.BuiltinVar.This:return ctx.instance;case o.BuiltinVar.CatchError:varName=CATCH_ERROR_VAR;break;case o.BuiltinVar.CatchStack:varName=CATCH_STACK_VAR;break;default:throw new exceptions_1.BaseException("Unknown builtin variable "+ast.builtin)}for(var currCtx=ctx;null!=currCtx;){if(currCtx.vars.has(varName))return currCtx.vars.get(varName);currCtx=currCtx.parent}throw new exceptions_1.BaseException("Not declared variable "+varName)},StatementInterpreter.prototype.visitWriteKeyExpr=function(expr,ctx){var receiver=expr.receiver.visitExpression(this,ctx),index=expr.index.visitExpression(this,ctx),value=expr.value.visitExpression(this,ctx);return receiver[index]=value,value},StatementInterpreter.prototype.visitWritePropExpr=function(expr,ctx){var receiver=expr.receiver.visitExpression(this,ctx),value=expr.value.visitExpression(this,ctx);
return receiver[expr.name]=value,value},StatementInterpreter.prototype.visitInvokeMethodExpr=function(expr,ctx){var result,receiver=expr.receiver.visitExpression(this,ctx),args=this.visitAllExpressions(expr.args,ctx);if(lang_1.isPresent(expr.builtin))switch(expr.builtin){case o.BuiltinMethod.ConcatArray:result=collection_1.ListWrapper.concat(receiver,args[0]);break;case o.BuiltinMethod.SubscribeObservable:result=receiver.subscribe({next:args[0]});break;case o.BuiltinMethod.bind:result=receiver.bind(args[0]);break;default:throw new exceptions_1.BaseException("Unknown builtin method "+expr.builtin)}else result=receiver[expr.name].apply(receiver,args);return result},StatementInterpreter.prototype.visitInvokeFunctionExpr=function(stmt,ctx){var args=this.visitAllExpressions(stmt.args,ctx),fnExpr=stmt.fn;if(fnExpr instanceof o.ReadVarExpr&&fnExpr.builtin===o.BuiltinVar.Super)return ctx.instance.constructor.prototype.constructor.apply(ctx.instance,args),null;var fn=stmt.fn.visitExpression(this,ctx);return fn.apply(null,args)},StatementInterpreter.prototype.visitReturnStmt=function(stmt,ctx){return new ReturnValue(stmt.value.visitExpression(this,ctx))},StatementInterpreter.prototype.visitDeclareClassStmt=function(stmt,ctx){var clazz=createDynamicClass(stmt,ctx,this);return ctx.vars.set(stmt.name,clazz),null},StatementInterpreter.prototype.visitExpressionStmt=function(stmt,ctx){return stmt.expr.visitExpression(this,ctx)},StatementInterpreter.prototype.visitIfStmt=function(stmt,ctx){var condition=stmt.condition.visitExpression(this,ctx);return condition?this.visitAllStatements(stmt.trueCase,ctx):lang_1.isPresent(stmt.falseCase)?this.visitAllStatements(stmt.falseCase,ctx):null},StatementInterpreter.prototype.visitTryCatchStmt=function(stmt,ctx){try{return this.visitAllStatements(stmt.bodyStmts,ctx)}catch(e){var childCtx=ctx.createChildWihtLocalVars();return childCtx.vars.set(CATCH_ERROR_VAR,e),childCtx.vars.set(CATCH_STACK_VAR,e.stack),this.visitAllStatements(stmt.catchStmts,childCtx)}},StatementInterpreter.prototype.visitThrowStmt=function(stmt,ctx){throw stmt.error.visitExpression(this,ctx)},StatementInterpreter.prototype.visitCommentStmt=function(stmt,context){return null},StatementInterpreter.prototype.visitInstantiateExpr=function(ast,ctx){var args=this.visitAllExpressions(ast.args,ctx),clazz=ast.classExpr.visitExpression(this,ctx);return new(clazz.bind.apply(clazz,[void 0].concat(args)))},StatementInterpreter.prototype.visitLiteralExpr=function(ast,ctx){return ast.value},StatementInterpreter.prototype.visitExternalExpr=function(ast,ctx){return ast.value.runtime},StatementInterpreter.prototype.visitConditionalExpr=function(ast,ctx){return ast.condition.visitExpression(this,ctx)?ast.trueCase.visitExpression(this,ctx):lang_1.isPresent(ast.falseCase)?ast.falseCase.visitExpression(this,ctx):null},StatementInterpreter.prototype.visitNotExpr=function(ast,ctx){return!ast.condition.visitExpression(this,ctx)},StatementInterpreter.prototype.visitCastExpr=function(ast,ctx){return ast.value.visitExpression(this,ctx)},StatementInterpreter.prototype.visitFunctionExpr=function(ast,ctx){var paramNames=ast.params.map(function(param){return param.name});return _declareFn(paramNames,ast.statements,ctx,this)},StatementInterpreter.prototype.visitDeclareFunctionStmt=function(stmt,ctx){var paramNames=stmt.params.map(function(param){return param.name});return ctx.vars.set(stmt.name,_declareFn(paramNames,stmt.statements,ctx,this)),null},StatementInterpreter.prototype.visitBinaryOperatorExpr=function(ast,ctx){var _this=this,lhs=function(){return ast.lhs.visitExpression(_this,ctx)},rhs=function(){return ast.rhs.visitExpression(_this,ctx)};switch(ast.operator){case o.BinaryOperator.Equals:return lhs()==rhs();case o.BinaryOperator.Identical:return lhs()===rhs();case o.BinaryOperator.NotEquals:return lhs()!=rhs();case o.BinaryOperator.NotIdentical:return lhs()!==rhs();case o.BinaryOperator.And:return lhs()&&rhs();case o.BinaryOperator.Or:return lhs()||rhs();case o.BinaryOperator.Plus:return lhs()+rhs();case o.BinaryOperator.Minus:return lhs()-rhs();case o.BinaryOperator.Divide:return lhs()/rhs();case o.BinaryOperator.Multiply:return lhs()*rhs();case o.BinaryOperator.Modulo:return lhs()%rhs();case o.BinaryOperator.Lower:return lhs()<rhs();case o.BinaryOperator.LowerEquals:return lhs()<=rhs();case o.BinaryOperator.Bigger:return lhs()>rhs();case o.BinaryOperator.BiggerEquals:return lhs()>=rhs();default:throw new exceptions_1.BaseException("Unknown operator "+ast.operator)}},StatementInterpreter.prototype.visitReadPropExpr=function(ast,ctx){var result,receiver=ast.receiver.visitExpression(this,ctx);return result=receiver[ast.name]},StatementInterpreter.prototype.visitReadKeyExpr=function(ast,ctx){var receiver=ast.receiver.visitExpression(this,ctx),prop=ast.index.visitExpression(this,ctx);return receiver[prop]},StatementInterpreter.prototype.visitLiteralArrayExpr=function(ast,ctx){return this.visitAllExpressions(ast.entries,ctx)},StatementInterpreter.prototype.visitLiteralMapExpr=function(ast,ctx){var _this=this,result={};return ast.entries.forEach(function(entry){return result[entry[0]]=entry[1].visitExpression(_this,ctx)}),result},StatementInterpreter.prototype.visitAllExpressions=function(expressions,ctx){var _this=this;return expressions.map(function(expr){return expr.visitExpression(_this,ctx)})},StatementInterpreter.prototype.visitAllStatements=function(statements,ctx){for(var i=0;i<statements.length;i++){var stmt=statements[i],val=stmt.visitStatement(this,ctx);if(val instanceof ReturnValue)return val}return null},StatementInterpreter}(),CATCH_ERROR_VAR="error",CATCH_STACK_VAR="stack"},{"../facade/collection":82,"../facade/exceptions":84,"../facade/lang":85,"./output_ast":116,"./ts_emitter":120}],118:[function(require,module,exports){"use strict";function jitStatements(sourceUrl,statements,resultVar){var converter=new JitEmitterVisitor,ctx=abstract_emitter_1.EmitterVisitorContext.createRoot([resultVar]);return converter.visitAllStatements(statements,ctx),lang_1.evalExpression(sourceUrl,resultVar,ctx.toSource(),converter.getArgs())}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},lang_1=require("../facade/lang"),util_1=require("../util"),abstract_emitter_1=require("./abstract_emitter"),abstract_js_emitter_1=require("./abstract_js_emitter");exports.jitStatements=jitStatements;var JitEmitterVisitor=function(_super){function JitEmitterVisitor(){_super.apply(this,arguments),this._evalArgNames=[],this._evalArgValues=[]}return __extends(JitEmitterVisitor,_super),JitEmitterVisitor.prototype.getArgs=function(){for(var result={},i=0;i<this._evalArgNames.length;i++)result[this._evalArgNames[i]]=this._evalArgValues[i];return result},JitEmitterVisitor.prototype.visitExternalExpr=function(ast,ctx){var value=ast.value.runtime,id=this._evalArgValues.indexOf(value);if(id===-1){id=this._evalArgValues.length,this._evalArgValues.push(value);var name=lang_1.isPresent(ast.value.name)?util_1.sanitizeIdentifier(ast.value.name):"val";this._evalArgNames.push(util_1.sanitizeIdentifier("jit_"+name+id))}return ctx.print(this._evalArgNames[id]),null},JitEmitterVisitor}(abstract_js_emitter_1.AbstractJsEmitterVisitor)},{"../facade/lang":85,"../util":137,"./abstract_emitter":114,"./abstract_js_emitter":115}],119:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),_ASSET_URL_RE=/asset:([^\/]+)\/([^\/]+)\/(.+)/,ImportGenerator=function(){function ImportGenerator(){}return ImportGenerator.parseAssetUrl=function(url){return AssetUrl.parse(url)},ImportGenerator}();exports.ImportGenerator=ImportGenerator;var AssetUrl=function(){function AssetUrl(packageName,firstLevelDir,modulePath){this.packageName=packageName,this.firstLevelDir=firstLevelDir,this.modulePath=modulePath}return AssetUrl.parse=function(url,allowNonMatching){void 0===allowNonMatching&&(allowNonMatching=!0);var match=url.match(_ASSET_URL_RE);if(null!==match)return new AssetUrl(match[1],match[2],match[3]);if(allowNonMatching)return null;throw new exceptions_1.BaseException("Url "+url+" is not a valid asset: url")},AssetUrl}();exports.AssetUrl=AssetUrl},{"../facade/exceptions":84}],120:[function(require,module,exports){"use strict";function debugOutputAstAsTypeScript(ast){var asts,converter=new _TsEmitterVisitor(_debugModuleUrl),ctx=abstract_emitter_1.EmitterVisitorContext.createRoot([]);return asts=lang_1.isArray(ast)?ast:[ast],asts.forEach(function(ast){if(ast instanceof o.Statement)ast.visitStatement(converter,ctx);else if(ast instanceof o.Expression)ast.visitExpression(converter,ctx);else{if(!(ast instanceof o.Type))throw new exceptions_1.BaseException("Don't know how to print debug info for "+ast);ast.visitType(converter,ctx)}}),ctx.toSource()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),abstract_emitter_1=require("./abstract_emitter"),o=require("./output_ast"),_debugModuleUrl="asset://debug/lib";exports.debugOutputAstAsTypeScript=debugOutputAstAsTypeScript;var TypeScriptEmitter=function(){function TypeScriptEmitter(_importGenerator){this._importGenerator=_importGenerator}return TypeScriptEmitter.prototype.emitStatements=function(moduleUrl,stmts,exportedVars){var _this=this,converter=new _TsEmitterVisitor(moduleUrl),ctx=abstract_emitter_1.EmitterVisitorContext.createRoot(exportedVars);converter.visitAllStatements(stmts,ctx);var srcParts=[];return converter.importsWithPrefixes.forEach(function(prefix,importedModuleUrl){srcParts.push("imp"+("ort * as "+prefix+" from '"+_this._importGenerator.getImportPath(moduleUrl,importedModuleUrl)+"';"))}),srcParts.push(ctx.toSource()),srcParts.join("\n")},TypeScriptEmitter}();exports.TypeScriptEmitter=TypeScriptEmitter;var _TsEmitterVisitor=function(_super){function _TsEmitterVisitor(_moduleUrl){_super.call(this,!1),this._moduleUrl=_moduleUrl,this.importsWithPrefixes=new Map}return __extends(_TsEmitterVisitor,_super),_TsEmitterVisitor.prototype.visitType=function(t,ctx,defaultType){void 0===defaultType&&(defaultType="any"),lang_1.isPresent(t)?t.visitType(this,ctx):ctx.print(defaultType)},_TsEmitterVisitor.prototype.visitExternalExpr=function(ast,ctx){return this._visitIdentifier(ast.value,ast.typeParams,ctx),null},_TsEmitterVisitor.prototype.visitDeclareVarStmt=function(stmt,ctx){return ctx.isExportedVar(stmt.name)&&ctx.print("export "),stmt.hasModifier(o.StmtModifier.Final)?ctx.print("const"):ctx.print("var"),ctx.print(" "+stmt.name+":"),this.visitType(stmt.type,ctx),ctx.print(" = "),stmt.value.visitExpression(this,ctx),ctx.println(";"),null},_TsEmitterVisitor.prototype.visitCastExpr=function(ast,ctx){return ctx.print("(<"),ast.type.visitType(this,ctx),ctx.print(">"),ast.value.visitExpression(this,ctx),ctx.print(")"),null},_TsEmitterVisitor.prototype.visitDeclareClassStmt=function(stmt,ctx){var _this=this;return ctx.pushClass(stmt),ctx.isExportedVar(stmt.name)&&ctx.print("export "),ctx.print("class "+stmt.name),lang_1.isPresent(stmt.parent)&&(ctx.print(" extends "),stmt.parent.visitExpression(this,ctx)),ctx.println(" {"),ctx.incIndent(),stmt.fields.forEach(function(field){return _this._visitClassField(field,ctx)}),lang_1.isPresent(stmt.constructorMethod)&&this._visitClassConstructor(stmt,ctx),stmt.getters.forEach(function(getter){return _this._visitClassGetter(getter,ctx)}),stmt.methods.forEach(function(method){return _this._visitClassMethod(method,ctx)}),ctx.decIndent(),ctx.println("}"),ctx.popClass(),null},_TsEmitterVisitor.prototype._visitClassField=function(field,ctx){field.hasModifier(o.StmtModifier.Private)&&ctx.print("private "),ctx.print(field.name),ctx.print(":"),this.visitType(field.type,ctx),ctx.println(";")},_TsEmitterVisitor.prototype._visitClassGetter=function(getter,ctx){getter.hasModifier(o.StmtModifier.Private)&&ctx.print("private "),ctx.print("get "+getter.name+"()"),ctx.print(":"),this.visitType(getter.type,ctx),ctx.println(" {"),ctx.incIndent(),this.visitAllStatements(getter.body,ctx),ctx.decIndent(),ctx.println("}")},_TsEmitterVisitor.prototype._visitClassConstructor=function(stmt,ctx){ctx.print("constructor("),this._visitParams(stmt.constructorMethod.params,ctx),ctx.println(") {"),ctx.incIndent(),this.visitAllStatements(stmt.constructorMethod.body,ctx),ctx.decIndent(),ctx.println("}")},_TsEmitterVisitor.prototype._visitClassMethod=function(method,ctx){method.hasModifier(o.StmtModifier.Private)&&ctx.print("private "),ctx.print(method.name+"("),this._visitParams(method.params,ctx),ctx.print("):"),this.visitType(method.type,ctx,"void"),ctx.println(" {"),ctx.incIndent(),this.visitAllStatements(method.body,ctx),ctx.decIndent(),ctx.println("}")},_TsEmitterVisitor.prototype.visitFunctionExpr=function(ast,ctx){return ctx.print("("),this._visitParams(ast.params,ctx),ctx.print("):"),this.visitType(ast.type,ctx,"void"),ctx.println(" => {"),ctx.incIndent(),this.visitAllStatements(ast.statements,ctx),ctx.decIndent(),ctx.print("}"),null},_TsEmitterVisitor.prototype.visitDeclareFunctionStmt=function(stmt,ctx){return ctx.isExportedVar(stmt.name)&&ctx.print("export "),ctx.print("function "+stmt.name+"("),this._visitParams(stmt.params,ctx),ctx.print("):"),this.visitType(stmt.type,ctx,"void"),ctx.println(" {"),ctx.incIndent(),this.visitAllStatements(stmt.statements,ctx),ctx.decIndent(),ctx.println("}"),null},_TsEmitterVisitor.prototype.visitTryCatchStmt=function(stmt,ctx){ctx.println("try {"),ctx.incIndent(),this.visitAllStatements(stmt.bodyStmts,ctx),ctx.decIndent(),ctx.println("} catch ("+abstract_emitter_1.CATCH_ERROR_VAR.name+") {"),ctx.incIndent();var catchStmts=[abstract_emitter_1.CATCH_STACK_VAR.set(abstract_emitter_1.CATCH_ERROR_VAR.prop("stack")).toDeclStmt(null,[o.StmtModifier.Final])].concat(stmt.catchStmts);return this.visitAllStatements(catchStmts,ctx),ctx.decIndent(),ctx.println("}"),null},_TsEmitterVisitor.prototype.visitBuiltintType=function(type,ctx){var typeStr;switch(type.name){case o.BuiltinTypeName.Bool:typeStr="boolean";break;case o.BuiltinTypeName.Dynamic:typeStr="any";break;case o.BuiltinTypeName.Function:typeStr="Function";break;case o.BuiltinTypeName.Number:typeStr="number";break;case o.BuiltinTypeName.Int:typeStr="number";break;case o.BuiltinTypeName.String:typeStr="string";break;default:throw new exceptions_1.BaseException("Unsupported builtin type "+type.name)}return ctx.print(typeStr),null},_TsEmitterVisitor.prototype.visitExternalType=function(ast,ctx){return this._visitIdentifier(ast.value,ast.typeParams,ctx),null},_TsEmitterVisitor.prototype.visitArrayType=function(type,ctx){return this.visitType(type.of,ctx),ctx.print("[]"),null},_TsEmitterVisitor.prototype.visitMapType=function(type,ctx){return ctx.print("{[key: string]:"),this.visitType(type.valueType,ctx),ctx.print("}"),null},_TsEmitterVisitor.prototype.getBuiltinMethodName=function(method){var name;switch(method){case o.BuiltinMethod.ConcatArray:name="concat";break;case o.BuiltinMethod.SubscribeObservable:name="subscribe";break;case o.BuiltinMethod.bind:name="bind";break;default:throw new exceptions_1.BaseException("Unknown builtin method: "+method)}return name},_TsEmitterVisitor.prototype._visitParams=function(params,ctx){var _this=this;this.visitAllObjects(function(param){ctx.print(param.name),ctx.print(":"),_this.visitType(param.type,ctx)},params,ctx,",")},_TsEmitterVisitor.prototype._visitIdentifier=function(value,typeParams,ctx){var _this=this;if(lang_1.isBlank(value.name))throw new exceptions_1.BaseException("Internal error: unknown identifier "+value);if(lang_1.isPresent(value.moduleUrl)&&value.moduleUrl!=this._moduleUrl){var prefix=this.importsWithPrefixes.get(value.moduleUrl);lang_1.isBlank(prefix)&&(prefix="import"+this.importsWithPrefixes.size,this.importsWithPrefixes.set(value.moduleUrl,prefix)),ctx.print(prefix+".")}ctx.print(value.name),lang_1.isPresent(typeParams)&&typeParams.length>0&&(ctx.print("<"),this.visitAllObjects(function(type){return type.visitType(_this,ctx)},typeParams,ctx,","),ctx.print(">"))},_TsEmitterVisitor}(abstract_emitter_1.AbstractEmitterVisitor)},{"../facade/exceptions":84,"../facade/lang":85,"./abstract_emitter":114,"./output_ast":116}],121:[function(require,module,exports){"use strict";function convertValueToOutputAst(value,type){return void 0===type&&(type=null),util_1.visitValue(value,new _ValueOutputAstTransformer,type)}var compile_metadata_1=require("../compile_metadata"),collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),util_1=require("../util"),o=require("./output_ast");exports.convertValueToOutputAst=convertValueToOutputAst;var _ValueOutputAstTransformer=function(){function _ValueOutputAstTransformer(){}return _ValueOutputAstTransformer.prototype.visitArray=function(arr,type){var _this=this;return o.literalArr(arr.map(function(value){return util_1.visitValue(value,_this,null)}),type)},_ValueOutputAstTransformer.prototype.visitStringMap=function(map,type){var _this=this,entries=[];return collection_1.StringMapWrapper.forEach(map,function(value,key){entries.push([key,util_1.visitValue(value,_this,null)])}),o.literalMap(entries,type)},_ValueOutputAstTransformer.prototype.visitPrimitive=function(value,type){return o.literal(value,type)},_ValueOutputAstTransformer.prototype.visitOther=function(value,type){if(value instanceof compile_metadata_1.CompileIdentifierMetadata)return o.importExpr(value);if(value instanceof o.Expression)return value;throw new exceptions_1.BaseException("Illegal state: Don't now how to compile value "+value)},_ValueOutputAstTransformer}()},{"../compile_metadata":73,"../facade/collection":82,"../facade/exceptions":84,"../util":137,"./output_ast":116}],122:[function(require,module,exports){"use strict";var lang_1=require("./facade/lang"),ParseLocation=function(){function ParseLocation(file,offset,line,col){this.file=file,this.offset=offset,this.line=line,this.col=col}return ParseLocation.prototype.toString=function(){return lang_1.isPresent(this.offset)?this.file.url+"@"+this.line+":"+this.col:this.file.url},ParseLocation}();exports.ParseLocation=ParseLocation;var ParseSourceFile=function(){function ParseSourceFile(content,url){this.content=content,this.url=url}return ParseSourceFile}();exports.ParseSourceFile=ParseSourceFile;var ParseSourceSpan=function(){function ParseSourceSpan(start,end,details){void 0===details&&(details=null),this.start=start,this.end=end,this.details=details}return ParseSourceSpan.prototype.toString=function(){return this.start.file.content.substring(this.start.offset,this.end.offset)},ParseSourceSpan}();exports.ParseSourceSpan=ParseSourceSpan,function(ParseErrorLevel){ParseErrorLevel[ParseErrorLevel.WARNING=0]="WARNING",ParseErrorLevel[ParseErrorLevel.FATAL=1]="FATAL"}(exports.ParseErrorLevel||(exports.ParseErrorLevel={}));var ParseErrorLevel=exports.ParseErrorLevel,ParseError=function(){function ParseError(span,msg,level){void 0===level&&(level=ParseErrorLevel.FATAL),this.span=span,this.msg=msg,this.level=level}return ParseError.prototype.toString=function(){var source=this.span.start.file.content,ctxStart=this.span.start.offset,contextStr="",details="";if(lang_1.isPresent(ctxStart)){ctxStart>source.length-1&&(ctxStart=source.length-1);for(var ctxEnd=ctxStart,ctxLen=0,ctxLines=0;ctxLen<100&&ctxStart>0&&(ctxStart--,ctxLen++,"\n"!=source[ctxStart]||3!=++ctxLines););for(ctxLen=0,ctxLines=0;ctxLen<100&&ctxEnd<source.length-1&&(ctxEnd++,ctxLen++,"\n"!=source[ctxEnd]||3!=++ctxLines););var context=source.substring(ctxStart,this.span.start.offset)+"[ERROR ->]"+source.substring(this.span.start.offset,ctxEnd+1);contextStr=' ("'+context+'")'}return this.span.details&&(details=", "+this.span.details),""+this.msg+contextStr+": "+this.span.start+details},ParseError}();exports.ParseError=ParseError},{"./facade/lang":85}],123:[function(require,module,exports){"use strict";function _isPipeMetadata(type){return type instanceof core_1.PipeMetadata}var core_1=require("@angular/core"),core_private_1=require("../core_private"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),PipeResolver=function(){function PipeResolver(_reflector){void 0===_reflector&&(_reflector=core_private_1.reflector),this._reflector=_reflector}return PipeResolver.prototype.resolve=function(type,throwIfNotFound){void 0===throwIfNotFound&&(throwIfNotFound=!0);var metas=this._reflector.annotations(core_1.resolveForwardRef(type));if(lang_1.isPresent(metas)){var annotation=metas.find(_isPipeMetadata);if(lang_1.isPresent(annotation))return annotation}if(throwIfNotFound)throw new exceptions_1.BaseException("No Pipe decorator found on "+lang_1.stringify(type));return null},PipeResolver.decorators=[{type:core_1.Injectable}],PipeResolver.ctorParameters=[{type:core_private_1.ReflectorReader}],PipeResolver}();exports.PipeResolver=PipeResolver},{"../core_private":64,"./facade/exceptions":84,"./facade/lang":85,"@angular/core":154}],124:[function(require,module,exports){"use strict";function _transformProvider(provider,_a){var useExisting=_a.useExisting,useValue=_a.useValue,deps=_a.deps;return new compile_metadata_1.CompileProviderMetadata({token:provider.token,useClass:provider.useClass,useExisting:useExisting,useFactory:provider.useFactory,useValue:useValue,deps:deps,multi:provider.multi})}function _transformProviderAst(provider,_a){var eager=_a.eager,providers=_a.providers;return new template_ast_1.ProviderAst(provider.token,provider.multiProvider,provider.eager||eager,providers,provider.providerType,provider.lifecycleHooks,provider.sourceSpan)}function _normalizeProviders(providers,sourceSpan,targetErrors,targetProviders){return void 0===targetProviders&&(targetProviders=null),lang_1.isBlank(targetProviders)&&(targetProviders=[]),lang_1.isPresent(providers)&&providers.forEach(function(provider){if(lang_1.isArray(provider))_normalizeProviders(provider,sourceSpan,targetErrors,targetProviders);else{var normalizeProvider=void 0;provider instanceof compile_metadata_1.CompileProviderMetadata?normalizeProvider=provider:provider instanceof compile_metadata_1.CompileTypeMetadata?normalizeProvider=new compile_metadata_1.CompileProviderMetadata({token:new compile_metadata_1.CompileTokenMetadata({identifier:provider}),useClass:provider}):targetErrors.push(new ProviderError("Unknown provider type "+provider,sourceSpan)),lang_1.isPresent(normalizeProvider)&&targetProviders.push(normalizeProvider)}}),targetProviders}function _resolveProvidersFromDirectives(directives,sourceSpan,targetErrors){var providersByToken=new compile_metadata_1.CompileIdentifierMap;directives.forEach(function(directive){var dirProvider=new compile_metadata_1.CompileProviderMetadata({token:new compile_metadata_1.CompileTokenMetadata({identifier:directive.type}),useClass:directive.type});_resolveProviders([dirProvider],directive.isComponent?template_ast_1.ProviderAstType.Component:template_ast_1.ProviderAstType.Directive,!0,sourceSpan,targetErrors,providersByToken)});var directivesWithComponentFirst=directives.filter(function(dir){return dir.isComponent}).concat(directives.filter(function(dir){return!dir.isComponent}));return directivesWithComponentFirst.forEach(function(directive){_resolveProviders(_normalizeProviders(directive.providers,sourceSpan,targetErrors),template_ast_1.ProviderAstType.PublicService,!1,sourceSpan,targetErrors,providersByToken),_resolveProviders(_normalizeProviders(directive.viewProviders,sourceSpan,targetErrors),template_ast_1.ProviderAstType.PrivateService,!1,sourceSpan,targetErrors,providersByToken)}),providersByToken}function _resolveProviders(providers,providerType,eager,sourceSpan,targetErrors,targetProvidersByToken){providers.forEach(function(provider){var resolvedProvider=targetProvidersByToken.get(provider.token);if(lang_1.isPresent(resolvedProvider)&&resolvedProvider.multiProvider!==provider.multi&&targetErrors.push(new ProviderError("Mixing multi and non multi provider is not possible for token "+resolvedProvider.token.name,sourceSpan)),lang_1.isBlank(resolvedProvider)){var lifecycleHooks=provider.token.identifier&&provider.token.identifier instanceof compile_metadata_1.CompileTypeMetadata?provider.token.identifier.lifecycleHooks:[];resolvedProvider=new template_ast_1.ProviderAst(provider.token,provider.multi,eager||lifecycleHooks.length>0,[provider],providerType,lifecycleHooks,sourceSpan),targetProvidersByToken.add(provider.token,resolvedProvider)}else provider.multi||collection_1.ListWrapper.clear(resolvedProvider.providers),resolvedProvider.providers.push(provider)})}function _getViewQueries(component){var viewQueries=new compile_metadata_1.CompileIdentifierMap;return lang_1.isPresent(component.viewQueries)&&component.viewQueries.forEach(function(query){return _addQueryToTokenMap(viewQueries,query)}),component.type.diDeps.forEach(function(dep){lang_1.isPresent(dep.viewQuery)&&_addQueryToTokenMap(viewQueries,dep.viewQuery)}),viewQueries}function _getContentQueries(directives){var contentQueries=new compile_metadata_1.CompileIdentifierMap;return directives.forEach(function(directive){lang_1.isPresent(directive.queries)&&directive.queries.forEach(function(query){return _addQueryToTokenMap(contentQueries,query)}),directive.type.diDeps.forEach(function(dep){lang_1.isPresent(dep.query)&&_addQueryToTokenMap(contentQueries,dep.query)})}),contentQueries}function _addQueryToTokenMap(map,query){query.selectors.forEach(function(token){var entry=map.get(token);lang_1.isBlank(entry)&&(entry=[],map.add(token,entry)),entry.push(query)})}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},compile_metadata_1=require("./compile_metadata"),collection_1=require("./facade/collection"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),identifiers_1=require("./identifiers"),parse_util_1=require("./parse_util"),template_ast_1=require("./template_parser/template_ast"),ProviderError=function(_super){function ProviderError(message,span){_super.call(this,span,message)}return __extends(ProviderError,_super),ProviderError}(parse_util_1.ParseError);exports.ProviderError=ProviderError;var ProviderViewContext=function(){function ProviderViewContext(component,sourceSpan){var _this=this;this.component=component,this.sourceSpan=sourceSpan,this.errors=[],this.viewQueries=_getViewQueries(component),this.viewProviders=new compile_metadata_1.CompileIdentifierMap,_normalizeProviders(component.viewProviders,sourceSpan,this.errors).forEach(function(provider){lang_1.isBlank(_this.viewProviders.get(provider.token))&&_this.viewProviders.add(provider.token,!0)})}return ProviderViewContext}();exports.ProviderViewContext=ProviderViewContext;var ProviderElementContext=function(){function ProviderElementContext(_viewContext,_parent,_isViewRoot,_directiveAsts,attrs,refs,_sourceSpan){var _this=this;this._viewContext=_viewContext,this._parent=_parent,this._isViewRoot=_isViewRoot,this._directiveAsts=_directiveAsts,this._sourceSpan=_sourceSpan,this._transformedProviders=new compile_metadata_1.CompileIdentifierMap,this._seenProviders=new compile_metadata_1.CompileIdentifierMap,this._hasViewContainer=!1,this._attrs={},attrs.forEach(function(attrAst){return _this._attrs[attrAst.name]=attrAst.value});var directivesMeta=_directiveAsts.map(function(directiveAst){return directiveAst.directive});this._allProviders=_resolveProvidersFromDirectives(directivesMeta,_sourceSpan,_viewContext.errors),this._contentQueries=_getContentQueries(directivesMeta);var queriedTokens=new compile_metadata_1.CompileIdentifierMap;this._allProviders.values().forEach(function(provider){_this._addQueryReadsTo(provider.token,queriedTokens)}),refs.forEach(function(refAst){_this._addQueryReadsTo(new compile_metadata_1.CompileTokenMetadata({value:refAst.name}),queriedTokens)}),lang_1.isPresent(queriedTokens.get(identifiers_1.identifierToken(identifiers_1.Identifiers.ViewContainerRef)))&&(this._hasViewContainer=!0),this._allProviders.values().forEach(function(provider){var eager=provider.eager||lang_1.isPresent(queriedTokens.get(provider.token));eager&&_this._getOrCreateLocalProvider(provider.providerType,provider.token,!0)})}return ProviderElementContext.prototype.afterElement=function(){var _this=this;this._allProviders.values().forEach(function(provider){_this._getOrCreateLocalProvider(provider.providerType,provider.token,!1)})},Object.defineProperty(ProviderElementContext.prototype,"transformProviders",{get:function(){return this._transformedProviders.values()},enumerable:!0,configurable:!0}),Object.defineProperty(ProviderElementContext.prototype,"transformedDirectiveAsts",{get:function(){var sortedProviderTypes=this._transformedProviders.values().map(function(provider){return provider.token.identifier}),sortedDirectives=collection_1.ListWrapper.clone(this._directiveAsts);return collection_1.ListWrapper.sort(sortedDirectives,function(dir1,dir2){return sortedProviderTypes.indexOf(dir1.directive.type)-sortedProviderTypes.indexOf(dir2.directive.type)}),sortedDirectives},enumerable:!0,configurable:!0}),Object.defineProperty(ProviderElementContext.prototype,"transformedHasViewContainer",{get:function(){return this._hasViewContainer},enumerable:!0,configurable:!0}),ProviderElementContext.prototype._addQueryReadsTo=function(token,queryReadTokens){this._getQueriesFor(token).forEach(function(query){var queryReadToken=lang_1.isPresent(query.read)?query.read:token;lang_1.isBlank(queryReadTokens.get(queryReadToken))&&queryReadTokens.add(queryReadToken,!0)})},ProviderElementContext.prototype._getQueriesFor=function(token){for(var queries,result=[],currentEl=this,distance=0;null!==currentEl;)queries=currentEl._contentQueries.get(token),lang_1.isPresent(queries)&&collection_1.ListWrapper.addAll(result,queries.filter(function(query){return query.descendants||distance<=1})),currentEl._directiveAsts.length>0&&distance++,currentEl=currentEl._parent;return queries=this._viewContext.viewQueries.get(token),lang_1.isPresent(queries)&&collection_1.ListWrapper.addAll(result,queries),result},ProviderElementContext.prototype._getOrCreateLocalProvider=function(requestingProviderType,token,eager){var _this=this,resolvedProvider=this._allProviders.get(token);if(lang_1.isBlank(resolvedProvider)||(requestingProviderType===template_ast_1.ProviderAstType.Directive||requestingProviderType===template_ast_1.ProviderAstType.PublicService)&&resolvedProvider.providerType===template_ast_1.ProviderAstType.PrivateService||(requestingProviderType===template_ast_1.ProviderAstType.PrivateService||requestingProviderType===template_ast_1.ProviderAstType.PublicService)&&resolvedProvider.providerType===template_ast_1.ProviderAstType.Builtin)return null;var transformedProviderAst=this._transformedProviders.get(token);if(lang_1.isPresent(transformedProviderAst))return transformedProviderAst;if(lang_1.isPresent(this._seenProviders.get(token)))return this._viewContext.errors.push(new ProviderError("Cannot instantiate cyclic dependency! "+token.name,this._sourceSpan)),null;this._seenProviders.add(token,!0);var transformedProviders=resolvedProvider.providers.map(function(provider){var transformedDeps,transformedUseValue=provider.useValue,transformedUseExisting=provider.useExisting;if(lang_1.isPresent(provider.useExisting)){var existingDiDep=_this._getDependency(resolvedProvider.providerType,new compile_metadata_1.CompileDiDependencyMetadata({token:provider.useExisting}),eager);lang_1.isPresent(existingDiDep.token)?transformedUseExisting=existingDiDep.token:(transformedUseExisting=null,transformedUseValue=existingDiDep.value)}else if(lang_1.isPresent(provider.useFactory)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useFactory.diDeps;
transformedDeps=deps.map(function(dep){return _this._getDependency(resolvedProvider.providerType,dep,eager)})}else if(lang_1.isPresent(provider.useClass)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useClass.diDeps;transformedDeps=deps.map(function(dep){return _this._getDependency(resolvedProvider.providerType,dep,eager)})}return _transformProvider(provider,{useExisting:transformedUseExisting,useValue:transformedUseValue,deps:transformedDeps})});return transformedProviderAst=_transformProviderAst(resolvedProvider,{eager:eager,providers:transformedProviders}),this._transformedProviders.add(token,transformedProviderAst),transformedProviderAst},ProviderElementContext.prototype._getLocalDependency=function(requestingProviderType,dep,eager){if(void 0===eager&&(eager=null),dep.isAttribute){var attrValue=this._attrs[dep.token.value];return new compile_metadata_1.CompileDiDependencyMetadata({isValue:!0,value:lang_1.normalizeBlank(attrValue)})}if(lang_1.isPresent(dep.query)||lang_1.isPresent(dep.viewQuery))return dep;if(lang_1.isPresent(dep.token)){if(requestingProviderType===template_ast_1.ProviderAstType.Directive||requestingProviderType===template_ast_1.ProviderAstType.Component){if(dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.Renderer))||dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ElementRef))||dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ChangeDetectorRef))||dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.TemplateRef)))return dep;dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ViewContainerRef))&&(this._hasViewContainer=!0)}if(dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.Injector)))return dep;if(lang_1.isPresent(this._getOrCreateLocalProvider(requestingProviderType,dep.token,eager)))return dep}return null},ProviderElementContext.prototype._getDependency=function(requestingProviderType,dep,eager){void 0===eager&&(eager=null);var currElement=this,currEager=eager,result=null;if(dep.isSkipSelf||(result=this._getLocalDependency(requestingProviderType,dep,eager)),dep.isSelf)lang_1.isBlank(result)&&dep.isOptional&&(result=new compile_metadata_1.CompileDiDependencyMetadata({isValue:!0,value:null}));else{for(;lang_1.isBlank(result)&&lang_1.isPresent(currElement._parent);){var prevElement=currElement;currElement=currElement._parent,prevElement._isViewRoot&&(currEager=!1),result=currElement._getLocalDependency(template_ast_1.ProviderAstType.PublicService,dep,currEager)}lang_1.isBlank(result)&&(result=!dep.isHost||this._viewContext.component.type.isHost||identifiers_1.identifierToken(this._viewContext.component.type).equalsTo(dep.token)||lang_1.isPresent(this._viewContext.viewProviders.get(dep.token))?dep:dep.isOptional?result=new compile_metadata_1.CompileDiDependencyMetadata({isValue:!0,value:null}):null)}return lang_1.isBlank(result)&&this._viewContext.errors.push(new ProviderError("No provider for "+dep.token.name,this._sourceSpan)),result},ProviderElementContext}();exports.ProviderElementContext=ProviderElementContext;var NgModuleProviderAnalyzer=function(){function NgModuleProviderAnalyzer(ngModule,extraProviders,sourceSpan){var _this=this;this._transformedProviders=new compile_metadata_1.CompileIdentifierMap,this._seenProviders=new compile_metadata_1.CompileIdentifierMap,this._unparsedProviders=[],this._errors=[],this._allProviders=new compile_metadata_1.CompileIdentifierMap;var ngModuleTypes=ngModule.transitiveModule.modules.map(function(moduleMeta){return moduleMeta.type});ngModuleTypes.forEach(function(ngModuleType){var ngModuleProvider=new compile_metadata_1.CompileProviderMetadata({token:new compile_metadata_1.CompileTokenMetadata({identifier:ngModuleType}),useClass:ngModuleType});_resolveProviders([ngModuleProvider],template_ast_1.ProviderAstType.PublicService,!0,sourceSpan,_this._errors,_this._allProviders)}),_resolveProviders(_normalizeProviders(ngModule.transitiveModule.providers.concat(extraProviders),sourceSpan,this._errors),template_ast_1.ProviderAstType.PublicService,!1,sourceSpan,this._errors,this._allProviders)}return NgModuleProviderAnalyzer.prototype.parse=function(){var _this=this;if(this._allProviders.values().forEach(function(provider){_this._getOrCreateLocalProvider(provider.token,provider.eager)}),this._errors.length>0){var errorString=this._errors.join("\n");throw new exceptions_1.BaseException("Provider parse errors:\n"+errorString)}return this._transformedProviders.values()},NgModuleProviderAnalyzer.prototype._getOrCreateLocalProvider=function(token,eager){var _this=this,resolvedProvider=this._allProviders.get(token);if(lang_1.isBlank(resolvedProvider))return null;var transformedProviderAst=this._transformedProviders.get(token);if(lang_1.isPresent(transformedProviderAst))return transformedProviderAst;if(lang_1.isPresent(this._seenProviders.get(token)))return this._errors.push(new ProviderError("Cannot instantiate cyclic dependency! "+token.name,resolvedProvider.sourceSpan)),null;this._seenProviders.add(token,!0);var transformedProviders=resolvedProvider.providers.map(function(provider){var transformedDeps,transformedUseValue=provider.useValue,transformedUseExisting=provider.useExisting;if(lang_1.isPresent(provider.useExisting)){var existingDiDep=_this._getDependency(new compile_metadata_1.CompileDiDependencyMetadata({token:provider.useExisting}),eager,resolvedProvider.sourceSpan);lang_1.isPresent(existingDiDep.token)?transformedUseExisting=existingDiDep.token:(transformedUseExisting=null,transformedUseValue=existingDiDep.value)}else if(lang_1.isPresent(provider.useFactory)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useFactory.diDeps;transformedDeps=deps.map(function(dep){return _this._getDependency(dep,eager,resolvedProvider.sourceSpan)})}else if(lang_1.isPresent(provider.useClass)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useClass.diDeps;transformedDeps=deps.map(function(dep){return _this._getDependency(dep,eager,resolvedProvider.sourceSpan)})}return _transformProvider(provider,{useExisting:transformedUseExisting,useValue:transformedUseValue,deps:transformedDeps})});return transformedProviderAst=_transformProviderAst(resolvedProvider,{eager:eager,providers:transformedProviders}),this._transformedProviders.add(token,transformedProviderAst),transformedProviderAst},NgModuleProviderAnalyzer.prototype._getDependency=function(dep,eager,requestorSourceSpan){void 0===eager&&(eager=null);var foundLocal=!1;!dep.isSkipSelf&&lang_1.isPresent(dep.token)&&(dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.Injector))||dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ComponentFactoryResolver))?foundLocal=!0:lang_1.isPresent(this._getOrCreateLocalProvider(dep.token,eager))&&(foundLocal=!0));var result=dep;return dep.isSelf&&!foundLocal&&(dep.isOptional?result=new compile_metadata_1.CompileDiDependencyMetadata({isValue:!0,value:null}):this._errors.push(new ProviderError("No provider for "+dep.token.name,requestorSourceSpan))),result},NgModuleProviderAnalyzer}();exports.NgModuleProviderAnalyzer=NgModuleProviderAnalyzer},{"./compile_metadata":73,"./facade/collection":82,"./facade/exceptions":84,"./facade/lang":85,"./identifiers":98,"./parse_util":122,"./template_parser/template_ast":133}],125:[function(require,module,exports){"use strict";function assertComponent(meta){if(!meta.isComponent)throw new exceptions_1.BaseException("Could not compile '"+meta.type.name+"' because it is not a component.")}var core_1=require("@angular/core"),core_private_1=require("../core_private"),compile_metadata_1=require("./compile_metadata"),config_1=require("./config"),directive_normalizer_1=require("./directive_normalizer"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),metadata_resolver_1=require("./metadata_resolver"),ng_module_compiler_1=require("./ng_module_compiler"),ir=require("./output/output_ast"),output_interpreter_1=require("./output/output_interpreter"),output_jit_1=require("./output/output_jit"),style_compiler_1=require("./style_compiler"),template_parser_1=require("./template_parser/template_parser"),util_1=require("./util"),view_compiler_1=require("./view_compiler/view_compiler"),RuntimeCompiler=function(){function RuntimeCompiler(_injector,_metadataResolver,_templateNormalizer,_templateParser,_styleCompiler,_viewCompiler,_ngModuleCompiler,_compilerConfig,_console){this._injector=_injector,this._metadataResolver=_metadataResolver,this._templateNormalizer=_templateNormalizer,this._templateParser=_templateParser,this._styleCompiler=_styleCompiler,this._viewCompiler=_viewCompiler,this._ngModuleCompiler=_ngModuleCompiler,this._compilerConfig=_compilerConfig,this._console=_console,this._compiledTemplateCache=new Map,this._compiledHostTemplateCache=new Map,this._compiledNgModuleCache=new Map}return Object.defineProperty(RuntimeCompiler.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),RuntimeCompiler.prototype.compileModuleSync=function(moduleType){return this._compileModuleAndComponents(moduleType,!0).syncResult},RuntimeCompiler.prototype.compileModuleAsync=function(moduleType){return this._compileModuleAndComponents(moduleType,!1).asyncResult},RuntimeCompiler.prototype.compileModuleAndAllComponentsSync=function(moduleType){return this._compileModuleAndAllComponents(moduleType,!0).syncResult},RuntimeCompiler.prototype.compileModuleAndAllComponentsAsync=function(moduleType){return this._compileModuleAndAllComponents(moduleType,!1).asyncResult},RuntimeCompiler.prototype.compileComponentAsync=function(compType,ngModule){if(void 0===ngModule&&(ngModule=null),!ngModule)throw new exceptions_1.BaseException("Calling compileComponentAsync on the root compiler without a module is not allowed! (Compiling component "+lang_1.stringify(compType)+")");return this._compileComponentInModule(compType,!1,ngModule).asyncResult},RuntimeCompiler.prototype.compileComponentSync=function(compType,ngModule){if(void 0===ngModule&&(ngModule=null),!ngModule)throw new exceptions_1.BaseException("Calling compileComponentSync on the root compiler without a module is not allowed! (Compiling component "+lang_1.stringify(compType)+")");return this._compileComponentInModule(compType,!0,ngModule).syncResult},RuntimeCompiler.prototype._compileModuleAndComponents=function(moduleType,isSync){var componentPromise=this._compileComponents(moduleType,isSync),ngModuleFactory=this._compileModule(moduleType);return new util_1.SyncAsyncResult(ngModuleFactory,componentPromise.then(function(){return ngModuleFactory}))},RuntimeCompiler.prototype._compileModuleAndAllComponents=function(moduleType,isSync){var _this=this,componentPromise=this._compileComponents(moduleType,isSync),ngModuleFactory=this._compileModule(moduleType),moduleMeta=this._metadataResolver.getNgModuleMetadata(moduleType),componentFactories=[],templates=new Set;moduleMeta.transitiveModule.modules.forEach(function(moduleMeta){moduleMeta.declaredDirectives.forEach(function(dirMeta){if(dirMeta.isComponent){var template=_this._createCompiledHostTemplate(dirMeta.type.runtime);templates.add(template),componentFactories.push(template.proxyComponentFactory)}})});var syncResult=new core_1.ModuleWithComponentFactories(ngModuleFactory,componentFactories),compile=function(){return templates.forEach(function(template){_this._compileTemplate(template)}),syncResult},asyncResult=isSync?Promise.resolve(compile()):componentPromise.then(compile);return new util_1.SyncAsyncResult(syncResult,asyncResult)},RuntimeCompiler.prototype._compileModule=function(moduleType){var _this=this,ngModuleFactory=this._compiledNgModuleCache.get(moduleType);if(!ngModuleFactory){var moduleMeta_1=this._metadataResolver.getNgModuleMetadata(moduleType),boundCompilerFactory=(moduleMeta_1.transitiveModule,function(parentResolver){return new ModuleBoundCompiler(_this,moduleMeta_1.type.runtime,parentResolver,_this._console)}),extraProviders=[this._metadataResolver.getProviderMetadata(new core_1.Provider(core_1.Compiler,{useFactory:boundCompilerFactory,deps:[[new core_1.OptionalMetadata,new core_1.SkipSelfMetadata,core_1.ComponentResolver]]})),this._metadataResolver.getProviderMetadata(new core_1.Provider(core_1.ComponentResolver,{useExisting:core_1.Compiler}))],compileResult=this._ngModuleCompiler.compile(moduleMeta_1,extraProviders);compileResult.dependencies.forEach(function(dep){dep.placeholder.runtime=_this._assertComponentKnown(dep.comp.runtime,!0).proxyComponentFactory,dep.placeholder.name="compFactory_"+dep.comp.name}),ngModuleFactory=this._compilerConfig.useJit?output_jit_1.jitStatements(moduleMeta_1.type.name+".ngfactory.js",compileResult.statements,compileResult.ngModuleFactoryVar):output_interpreter_1.interpretStatements(compileResult.statements,compileResult.ngModuleFactoryVar),this._compiledNgModuleCache.set(moduleMeta_1.type.runtime,ngModuleFactory)}return ngModuleFactory},RuntimeCompiler.prototype._compileComponentInModule=function(compType,isSync,moduleType){this._metadataResolver.addComponentToModule(moduleType,compType);var componentPromise=this._compileComponents(moduleType,isSync),componentFactory=this._assertComponentKnown(compType,!0).proxyComponentFactory;return new util_1.SyncAsyncResult(componentFactory,componentPromise.then(function(){return componentFactory}))},RuntimeCompiler.prototype._compileComponents=function(mainModule,isSync){var _this=this,templates=new Set,loadingPromises=[],ngModule=this._metadataResolver.getNgModuleMetadata(mainModule);ngModule.transitiveModule.modules.forEach(function(localModuleMeta){localModuleMeta.declaredDirectives.forEach(function(dirMeta){dirMeta.isComponent&&(templates.add(_this._createCompiledTemplate(dirMeta,localModuleMeta)),dirMeta.entryComponents.forEach(function(entryComponentType){templates.add(_this._createCompiledHostTemplate(entryComponentType.runtime))}))}),localModuleMeta.entryComponents.forEach(function(entryComponentType){templates.add(_this._createCompiledHostTemplate(entryComponentType.runtime))})}),templates.forEach(function(template){if(template.loading){if(isSync)throw new core_1.ComponentStillLoadingError(template.compType.runtime);loadingPromises.push(template.loading)}});var compile=function(){templates.forEach(function(template){_this._compileTemplate(template)})};return isSync?(compile(),Promise.resolve(null)):Promise.all(loadingPromises).then(compile)},RuntimeCompiler.prototype.clearCacheFor=function(type){this._compiledNgModuleCache.delete(type),this._metadataResolver.clearCacheFor(type),this._compiledHostTemplateCache.delete(type);var compiledTemplate=this._compiledTemplateCache.get(type);compiledTemplate&&(this._templateNormalizer.clearCacheFor(compiledTemplate.normalizedCompMeta),this._compiledTemplateCache.delete(type))},RuntimeCompiler.prototype.clearCache=function(){this._metadataResolver.clearCache(),this._compiledTemplateCache.clear(),this._compiledHostTemplateCache.clear(),this._templateNormalizer.clearCache(),this._compiledNgModuleCache.clear()},RuntimeCompiler.prototype._createCompiledHostTemplate=function(compType){var compiledTemplate=this._compiledHostTemplateCache.get(compType);if(lang_1.isBlank(compiledTemplate)){var compMeta=this._metadataResolver.getDirectiveMetadata(compType);assertComponent(compMeta);var hostMeta=compile_metadata_1.createHostComponentMeta(compMeta);compiledTemplate=new CompiledTemplate((!0),compMeta.selector,compMeta.type,[compMeta],[],[],this._templateNormalizer.normalizeDirective(hostMeta)),this._compiledHostTemplateCache.set(compType,compiledTemplate)}return compiledTemplate},RuntimeCompiler.prototype._createCompiledTemplate=function(compMeta,ngModule){var compiledTemplate=this._compiledTemplateCache.get(compMeta.type.runtime);return lang_1.isBlank(compiledTemplate)&&(assertComponent(compMeta),compiledTemplate=new CompiledTemplate((!1),compMeta.selector,compMeta.type,ngModule.transitiveModule.directives,ngModule.transitiveModule.pipes,ngModule.schemas,this._templateNormalizer.normalizeDirective(compMeta)),this._compiledTemplateCache.set(compMeta.type.runtime,compiledTemplate)),compiledTemplate},RuntimeCompiler.prototype._assertComponentKnown=function(compType,isHost){var compiledTemplate=isHost?this._compiledHostTemplateCache.get(compType):this._compiledTemplateCache.get(compType);if(!compiledTemplate)throw new exceptions_1.BaseException("Illegal state: CompiledTemplate for "+lang_1.stringify(compType)+" (isHost: "+isHost+") does not exist!");return compiledTemplate},RuntimeCompiler.prototype._assertComponentLoaded=function(compType,isHost){var compiledTemplate=this._assertComponentKnown(compType,isHost);if(compiledTemplate.loading)throw new exceptions_1.BaseException("Illegal state: CompiledTemplate for "+lang_1.stringify(compType)+" (isHost: "+isHost+") is still loading!");return compiledTemplate},RuntimeCompiler.prototype._compileTemplate=function(template){var _this=this;if(!template.isCompiled){var compMeta=template.normalizedCompMeta,externalStylesheetsByModuleUrl=new Map,stylesCompileResult=this._styleCompiler.compileComponent(compMeta);stylesCompileResult.externalStylesheets.forEach(function(r){externalStylesheetsByModuleUrl.set(r.meta.moduleUrl,r)}),this._resolveStylesCompileResult(stylesCompileResult.componentStylesheet,externalStylesheetsByModuleUrl);var viewCompMetas=template.viewComponentTypes.map(function(compType){return _this._assertComponentLoaded(compType,!1).normalizedCompMeta}),parsedTemplate=this._templateParser.parse(compMeta,compMeta.template.template,template.viewDirectives.concat(viewCompMetas),template.viewPipes,template.schemas,compMeta.type.name),compileResult=this._viewCompiler.compileComponent(compMeta,parsedTemplate,ir.variable(stylesCompileResult.componentStylesheet.stylesVar),template.viewPipes);compileResult.dependencies.forEach(function(dep){var depTemplate;if(dep instanceof view_compiler_1.ViewFactoryDependency){var vfd=dep;depTemplate=_this._assertComponentLoaded(vfd.comp.runtime,!1),vfd.placeholder.runtime=depTemplate.proxyViewFactory,vfd.placeholder.name="viewFactory_"+vfd.comp.name}else if(dep instanceof view_compiler_1.ComponentFactoryDependency){var cfd=dep;depTemplate=_this._assertComponentLoaded(cfd.comp.runtime,!0),cfd.placeholder.runtime=depTemplate.proxyComponentFactory,cfd.placeholder.name="compFactory_"+cfd.comp.name}});var factory,statements=stylesCompileResult.componentStylesheet.statements.concat(compileResult.statements);factory=this._compilerConfig.useJit?output_jit_1.jitStatements(template.compType.name+".ngfactory.js",statements,compileResult.viewFactoryVar):output_interpreter_1.interpretStatements(statements,compileResult.viewFactoryVar),template.compiled(factory)}},RuntimeCompiler.prototype._resolveStylesCompileResult=function(result,externalStylesheetsByModuleUrl){var _this=this;result.dependencies.forEach(function(dep,i){var nestedCompileResult=externalStylesheetsByModuleUrl.get(dep.moduleUrl),nestedStylesArr=_this._resolveAndEvalStylesCompileResult(nestedCompileResult,externalStylesheetsByModuleUrl);dep.valuePlaceholder.runtime=nestedStylesArr,dep.valuePlaceholder.name="importedStyles"+i})},RuntimeCompiler.prototype._resolveAndEvalStylesCompileResult=function(result,externalStylesheetsByModuleUrl){return this._resolveStylesCompileResult(result,externalStylesheetsByModuleUrl),this._compilerConfig.useJit?output_jit_1.jitStatements(result.meta.moduleUrl+".css.js",result.statements,result.stylesVar):output_interpreter_1.interpretStatements(result.statements,result.stylesVar)},RuntimeCompiler.decorators=[{type:core_1.Injectable}],RuntimeCompiler.ctorParameters=[{type:core_1.Injector},{type:metadata_resolver_1.CompileMetadataResolver},{type:directive_normalizer_1.DirectiveNormalizer},{type:template_parser_1.TemplateParser},{type:style_compiler_1.StyleCompiler},{type:view_compiler_1.ViewCompiler},{type:ng_module_compiler_1.NgModuleCompiler},{type:config_1.CompilerConfig},{type:core_private_1.Console}],RuntimeCompiler}();exports.RuntimeCompiler=RuntimeCompiler;var CompiledTemplate=function(){function CompiledTemplate(isHost,selector,compType,viewDirectivesAndComponents,viewPipes,schemas,_normalizeResult){var _this=this;this.isHost=isHost,this.compType=compType,this.viewPipes=viewPipes,this.schemas=schemas,this._viewFactory=null,this.loading=null,this._normalizedCompMeta=null,this.isCompiled=!1,this.isCompiledWithDeps=!1,this.viewComponentTypes=[],this.viewDirectives=[],viewDirectivesAndComponents.forEach(function(dirMeta){dirMeta.isComponent?_this.viewComponentTypes.push(dirMeta.type.runtime):_this.viewDirectives.push(dirMeta)}),this.proxyViewFactory=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];if(!_this._viewFactory)throw new exceptions_1.BaseException("Illegal state: CompiledTemplate for "+lang_1.stringify(_this.compType)+" is not compiled yet!");return _this._viewFactory.apply(null,args)},this.proxyComponentFactory=isHost?new core_1.ComponentFactory(selector,this.proxyViewFactory,compType.runtime):null,_normalizeResult.syncResult?this._normalizedCompMeta=_normalizeResult.syncResult:this.loading=_normalizeResult.asyncResult.then(function(normalizedCompMeta){_this._normalizedCompMeta=normalizedCompMeta,_this.loading=null})}return Object.defineProperty(CompiledTemplate.prototype,"normalizedCompMeta",{get:function(){if(this.loading)throw new exceptions_1.BaseException("Template is still loading for "+this.compType.name+"!");return this._normalizedCompMeta},enumerable:!0,configurable:!0}),CompiledTemplate.prototype.compiled=function(viewFactory){this._viewFactory=viewFactory,this.isCompiled=!0},CompiledTemplate.prototype.depsCompiled=function(){this.isCompiledWithDeps=!0},CompiledTemplate}(),ModuleBoundCompiler=function(){function ModuleBoundCompiler(_delegate,_ngModule,_parentComponentResolver,_console){this._delegate=_delegate,this._ngModule=_ngModule,this._parentComponentResolver=_parentComponentResolver,this._console=_console,this._warnOnComponentResolver=!0}return Object.defineProperty(ModuleBoundCompiler.prototype,"_injector",{get:function(){return this._delegate.injector},enumerable:!0,configurable:!0}),ModuleBoundCompiler.prototype.resolveComponent=function(component){return lang_1.isString(component)?this._parentComponentResolver?this._parentComponentResolver.resolveComponent(component):Promise.reject(new exceptions_1.BaseException("Cannot resolve component using '"+component+"'.")):(this._warnOnComponentResolver&&(this._console.warn(core_1.ComponentResolver.DynamicCompilationDeprecationMsg),this._warnOnComponentResolver=!1),this.compileComponentAsync(component))},ModuleBoundCompiler.prototype.compileComponentAsync=function(compType,ngModule){return void 0===ngModule&&(ngModule=null),this._delegate.compileComponentAsync(compType,ngModule?ngModule:this._ngModule)},ModuleBoundCompiler.prototype.compileComponentSync=function(compType,ngModule){return void 0===ngModule&&(ngModule=null),this._delegate.compileComponentSync(compType,ngModule?ngModule:this._ngModule)},ModuleBoundCompiler.prototype.compileModuleSync=function(moduleType){return this._delegate.compileModuleSync(moduleType)},ModuleBoundCompiler.prototype.compileModuleAsync=function(moduleType){return this._delegate.compileModuleAsync(moduleType)},ModuleBoundCompiler.prototype.compileModuleAndAllComponentsSync=function(moduleType){return this._delegate.compileModuleAndAllComponentsSync(moduleType)},ModuleBoundCompiler.prototype.compileModuleAndAllComponentsAsync=function(moduleType){return this._delegate.compileModuleAndAllComponentsAsync(moduleType)},ModuleBoundCompiler.prototype.clearCache=function(){this._delegate.clearCache(),this._parentComponentResolver&&this._parentComponentResolver.clearCache()},ModuleBoundCompiler.prototype.clearCacheFor=function(type){this._delegate.clearCacheFor(type)},ModuleBoundCompiler}()},{"../core_private":64,"./compile_metadata":73,"./config":75,"./directive_normalizer":76,"./facade/exceptions":84,"./facade/lang":85,"./metadata_resolver":100,"./ng_module_compiler":111,"./output/output_ast":116,"./output/output_interpreter":117,"./output/output_jit":118,"./style_compiler":131,"./template_parser/template_parser":134,"./util":137,"./view_compiler/view_compiler":152,"@angular/core":154}],126:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),dom_security_schema_1=require("./dom_security_schema"),element_schema_registry_1=require("./element_schema_registry"),BOOLEAN="boolean",NUMBER="number",STRING="string",OBJECT="object",SCHEMA=["*|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop","^*|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*autocomplete,*autocompleteerror,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","media|!autoplay,!controls,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,#playbackRate,preload,src,#volume",":svg:^*|*abort,*autocomplete,*autocompleteerror,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerpolicy,rel,rev,search,shape,target,text,type,username","area|alt,coords,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerpolicy,search,shape,target,username","audio^media|","br|clear","base|href,target","body|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas|#height,#width","content|select","dl|!compact","datalist|","details|!open","dialog|!open,returnValue","dir|!compact","div|align","embed|align,height,name,src,type,width","fieldset|!disabled,name","font|color,face,size","form|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr|align,color,!noShade,size,width","head|","h1,h2,h3,h4,h5,h6|align","html|version","iframe|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerpolicy,%sandbox,scrolling,src,srcdoc,width","img|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerpolicy,sizes,src,srcset,useMap,#vspace,#width","input|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","keygen|!autofocus,challenge,!disabled,keytype,name","li|type,#value","label|htmlFor","legend|align","link|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,rel,%relList,rev,%sizes,target,type","map|name","marquee|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu|!compact","meta|content,httpEquiv,name,scheme","meter|#high,#low,#max,#min,#optimum,#value","ins,del|cite,dateTime","ol|!compact,!reversed,#start,type","object|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup|!disabled,label","option|!defaultSelected,!disabled,label,!selected,text,value","output|defaultValue,%htmlFor,name,value","p|align","param|name,type,value,valueType","picture|","pre|#width","progress|#max,#value","q,blockquote,cite|","script|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow|","source|media,sizes,src,srcset,type","span|","style|!disabled,media,type","caption|align","th,td|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup|align,ch,chOff,#span,vAlign,width","table|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody|align,ch,chOff,vAlign","template|","textarea|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title|text","track|!default,kind,label,src,srclang","ul|!compact,type","unknown|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:cursor^:svg:|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan"],attrToPropMap={
class:"className",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},DomElementSchemaRegistry=function(_super){function DomElementSchemaRegistry(){var _this=this;_super.call(this),this.schema={},SCHEMA.forEach(function(encodedType){var parts=encodedType.split("|"),properties=parts[1].split(","),typeParts=(parts[0]+"^").split("^"),typeName=typeParts[0],type={};typeName.split(",").forEach(function(tag){return _this.schema[tag]=type});var superType=_this.schema[typeParts[1]];lang_1.isPresent(superType)&&collection_1.StringMapWrapper.forEach(superType,function(v,k){return type[k]=v}),properties.forEach(function(property){""==property||property.startsWith("*")||(property.startsWith("!")?type[property.substring(1)]=BOOLEAN:property.startsWith("#")?type[property.substring(1)]=NUMBER:property.startsWith("%")?type[property.substring(1)]=OBJECT:type[property]=STRING)})})}return __extends(DomElementSchemaRegistry,_super),DomElementSchemaRegistry.prototype.hasProperty=function(tagName,propName,schemaMetas){if(tagName.indexOf("-")!==-1){if("ng-container"===tagName||"ng-content"===tagName)return!1;if(schemaMetas.some(function(schema){return schema.name===core_1.CUSTOM_ELEMENTS_SCHEMA.name}))return!0}var elementProperties=this.schema[tagName.toLowerCase()];return lang_1.isPresent(elementProperties)||(elementProperties=this.schema.unknown),lang_1.isPresent(elementProperties[propName])},DomElementSchemaRegistry.prototype.securityContext=function(tagName,propName){tagName=tagName.toLowerCase(),propName=propName.toLowerCase();var ctx=dom_security_schema_1.SECURITY_SCHEMA[tagName+"|"+propName];return void 0!==ctx?ctx:(ctx=dom_security_schema_1.SECURITY_SCHEMA["*|"+propName],void 0!==ctx?ctx:core_1.SecurityContext.NONE)},DomElementSchemaRegistry.prototype.getMappedPropName=function(propName){var mappedPropName=collection_1.StringMapWrapper.get(attrToPropMap,propName);return lang_1.isPresent(mappedPropName)?mappedPropName:propName},DomElementSchemaRegistry.prototype.getDefaultComponentElementName=function(){return"ng-component"},DomElementSchemaRegistry.decorators=[{type:core_1.Injectable}],DomElementSchemaRegistry.ctorParameters=[],DomElementSchemaRegistry}(element_schema_registry_1.ElementSchemaRegistry);exports.DomElementSchemaRegistry=DomElementSchemaRegistry},{"../facade/collection":82,"../facade/lang":85,"./dom_security_schema":127,"./element_schema_registry":128,"@angular/core":154}],127:[function(require,module,exports){"use strict";function registerContext(ctx,specs){for(var _i=0,specs_1=specs;_i<specs_1.length;_i++){var spec=specs_1[_i];exports.SECURITY_SCHEMA[spec.toLowerCase()]=ctx}}var core_1=require("@angular/core");exports.SECURITY_SCHEMA={},registerContext(core_1.SecurityContext.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),registerContext(core_1.SecurityContext.STYLE,["*|style"]),registerContext(core_1.SecurityContext.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),registerContext(core_1.SecurityContext.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])},{"@angular/core":154}],128:[function(require,module,exports){"use strict";var ElementSchemaRegistry=function(){function ElementSchemaRegistry(){}return ElementSchemaRegistry}();exports.ElementSchemaRegistry=ElementSchemaRegistry},{}],129:[function(require,module,exports){"use strict";var collection_1=require("./facade/collection"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang"),_EMPTY_ATTR_VALUE="",_SELECTOR_REGEXP=new RegExp("(\\:not\\()|([-\\w]+)|(?:\\.([-\\w]+))|(?:\\[([-\\w*]+)(?:=([^\\]]*))?\\])|(\\))|(\\s*,\\s*)","g"),CssSelector=function(){function CssSelector(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}return CssSelector.parse=function(selector){var match,results=[],_addResult=function(res,cssSel){cssSel.notSelectors.length>0&&lang_1.isBlank(cssSel.element)&&collection_1.ListWrapper.isEmpty(cssSel.classNames)&&collection_1.ListWrapper.isEmpty(cssSel.attrs)&&(cssSel.element="*"),res.push(cssSel)},cssSelector=new CssSelector,current=cssSelector,inNot=!1;for(_SELECTOR_REGEXP.lastIndex=0;lang_1.isPresent(match=_SELECTOR_REGEXP.exec(selector));){if(lang_1.isPresent(match[1])){if(inNot)throw new exceptions_1.BaseException("Nesting :not is not allowed in a selector");inNot=!0,current=new CssSelector,cssSelector.notSelectors.push(current)}if(lang_1.isPresent(match[2])&&current.setElement(match[2]),lang_1.isPresent(match[3])&&current.addClassName(match[3]),lang_1.isPresent(match[4])&&current.addAttribute(match[4],match[5]),lang_1.isPresent(match[6])&&(inNot=!1,current=cssSelector),lang_1.isPresent(match[7])){if(inNot)throw new exceptions_1.BaseException("Multiple selectors in :not are not supported");_addResult(results,cssSelector),cssSelector=current=new CssSelector}}return _addResult(results,cssSelector),results},CssSelector.prototype.isElementSelector=function(){return lang_1.isPresent(this.element)&&collection_1.ListWrapper.isEmpty(this.classNames)&&collection_1.ListWrapper.isEmpty(this.attrs)&&0===this.notSelectors.length},CssSelector.prototype.setElement=function(element){void 0===element&&(element=null),this.element=element},CssSelector.prototype.getMatchingElementTemplate=function(){for(var tagName=lang_1.isPresent(this.element)?this.element:"div",classAttr=this.classNames.length>0?' class="'+this.classNames.join(" ")+'"':"",attrs="",i=0;i<this.attrs.length;i+=2){var attrName=this.attrs[i],attrValue=""!==this.attrs[i+1]?'="'+this.attrs[i+1]+'"':"";attrs+=" "+attrName+attrValue}return"<"+tagName+classAttr+attrs+"></"+tagName+">"},CssSelector.prototype.addAttribute=function(name,value){void 0===value&&(value=_EMPTY_ATTR_VALUE),this.attrs.push(name),value=lang_1.isPresent(value)?value.toLowerCase():_EMPTY_ATTR_VALUE,this.attrs.push(value)},CssSelector.prototype.addClassName=function(name){this.classNames.push(name.toLowerCase())},CssSelector.prototype.toString=function(){var res="";if(lang_1.isPresent(this.element)&&(res+=this.element),lang_1.isPresent(this.classNames))for(var i=0;i<this.classNames.length;i++)res+="."+this.classNames[i];if(lang_1.isPresent(this.attrs))for(var i=0;i<this.attrs.length;){var attrName=this.attrs[i++],attrValue=this.attrs[i++];res+="["+attrName,attrValue.length>0&&(res+="="+attrValue),res+="]"}return this.notSelectors.forEach(function(notSelector){return res+=":not("+notSelector+")"}),res},CssSelector}();exports.CssSelector=CssSelector;var SelectorMatcher=function(){function SelectorMatcher(){this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}return SelectorMatcher.createNotMatcher=function(notSelectors){var notMatcher=new SelectorMatcher;return notMatcher.addSelectables(notSelectors,null),notMatcher},SelectorMatcher.prototype.addSelectables=function(cssSelectors,callbackCtxt){var listContext=null;cssSelectors.length>1&&(listContext=new SelectorListContext(cssSelectors),this._listContexts.push(listContext));for(var i=0;i<cssSelectors.length;i++)this._addSelectable(cssSelectors[i],callbackCtxt,listContext)},SelectorMatcher.prototype._addSelectable=function(cssSelector,callbackCtxt,listContext){var matcher=this,element=cssSelector.element,classNames=cssSelector.classNames,attrs=cssSelector.attrs,selectable=new SelectorContext(cssSelector,callbackCtxt,listContext);if(lang_1.isPresent(element)){var isTerminal=0===attrs.length&&0===classNames.length;isTerminal?this._addTerminal(matcher._elementMap,element,selectable):matcher=this._addPartial(matcher._elementPartialMap,element)}if(lang_1.isPresent(classNames))for(var index=0;index<classNames.length;index++){var isTerminal=0===attrs.length&&index===classNames.length-1,className=classNames[index];isTerminal?this._addTerminal(matcher._classMap,className,selectable):matcher=this._addPartial(matcher._classPartialMap,className)}if(lang_1.isPresent(attrs))for(var index=0;index<attrs.length;){var isTerminal=index===attrs.length-2,attrName=attrs[index++],attrValue=attrs[index++];if(isTerminal){var terminalMap=matcher._attrValueMap,terminalValuesMap=terminalMap.get(attrName);lang_1.isBlank(terminalValuesMap)&&(terminalValuesMap=new Map,terminalMap.set(attrName,terminalValuesMap)),this._addTerminal(terminalValuesMap,attrValue,selectable)}else{var parttialMap=matcher._attrValuePartialMap,partialValuesMap=parttialMap.get(attrName);lang_1.isBlank(partialValuesMap)&&(partialValuesMap=new Map,parttialMap.set(attrName,partialValuesMap)),matcher=this._addPartial(partialValuesMap,attrValue)}}},SelectorMatcher.prototype._addTerminal=function(map,name,selectable){var terminalList=map.get(name);lang_1.isBlank(terminalList)&&(terminalList=[],map.set(name,terminalList)),terminalList.push(selectable)},SelectorMatcher.prototype._addPartial=function(map,name){var matcher=map.get(name);return lang_1.isBlank(matcher)&&(matcher=new SelectorMatcher,map.set(name,matcher)),matcher},SelectorMatcher.prototype.match=function(cssSelector,matchedCallback){for(var result=!1,element=cssSelector.element,classNames=cssSelector.classNames,attrs=cssSelector.attrs,i=0;i<this._listContexts.length;i++)this._listContexts[i].alreadyMatched=!1;if(result=this._matchTerminal(this._elementMap,element,cssSelector,matchedCallback)||result,result=this._matchPartial(this._elementPartialMap,element,cssSelector,matchedCallback)||result,lang_1.isPresent(classNames))for(var index=0;index<classNames.length;index++){var className=classNames[index];result=this._matchTerminal(this._classMap,className,cssSelector,matchedCallback)||result,result=this._matchPartial(this._classPartialMap,className,cssSelector,matchedCallback)||result}if(lang_1.isPresent(attrs))for(var index=0;index<attrs.length;){var attrName=attrs[index++],attrValue=attrs[index++],terminalValuesMap=this._attrValueMap.get(attrName);lang_1.StringWrapper.equals(attrValue,_EMPTY_ATTR_VALUE)||(result=this._matchTerminal(terminalValuesMap,_EMPTY_ATTR_VALUE,cssSelector,matchedCallback)||result),result=this._matchTerminal(terminalValuesMap,attrValue,cssSelector,matchedCallback)||result;var partialValuesMap=this._attrValuePartialMap.get(attrName);lang_1.StringWrapper.equals(attrValue,_EMPTY_ATTR_VALUE)||(result=this._matchPartial(partialValuesMap,_EMPTY_ATTR_VALUE,cssSelector,matchedCallback)||result),result=this._matchPartial(partialValuesMap,attrValue,cssSelector,matchedCallback)||result}return result},SelectorMatcher.prototype._matchTerminal=function(map,name,cssSelector,matchedCallback){if(lang_1.isBlank(map)||lang_1.isBlank(name))return!1;var selectables=map.get(name),starSelectables=map.get("*");if(lang_1.isPresent(starSelectables)&&(selectables=selectables.concat(starSelectables)),lang_1.isBlank(selectables))return!1;for(var selectable,result=!1,index=0;index<selectables.length;index++)selectable=selectables[index],result=selectable.finalize(cssSelector,matchedCallback)||result;return result},SelectorMatcher.prototype._matchPartial=function(map,name,cssSelector,matchedCallback){if(lang_1.isBlank(map)||lang_1.isBlank(name))return!1;var nestedSelector=map.get(name);return!lang_1.isBlank(nestedSelector)&&nestedSelector.match(cssSelector,matchedCallback)},SelectorMatcher}();exports.SelectorMatcher=SelectorMatcher;var SelectorListContext=function(){function SelectorListContext(selectors){this.selectors=selectors,this.alreadyMatched=!1}return SelectorListContext}();exports.SelectorListContext=SelectorListContext;var SelectorContext=function(){function SelectorContext(selector,cbContext,listContext){this.selector=selector,this.cbContext=cbContext,this.listContext=listContext,this.notSelectors=selector.notSelectors}return SelectorContext.prototype.finalize=function(cssSelector,callback){var result=!0;if(this.notSelectors.length>0&&(lang_1.isBlank(this.listContext)||!this.listContext.alreadyMatched)){var notMatcher=SelectorMatcher.createNotMatcher(this.notSelectors);result=!notMatcher.match(cssSelector,null)}return result&&lang_1.isPresent(callback)&&(lang_1.isBlank(this.listContext)||!this.listContext.alreadyMatched)&&(lang_1.isPresent(this.listContext)&&(this.listContext.alreadyMatched=!0),callback(this.selector,this.cbContext)),result},SelectorContext}();exports.SelectorContext=SelectorContext},{"./facade/collection":82,"./facade/exceptions":84,"./facade/lang":85}],130:[function(require,module,exports){"use strict";function stripComments(input){return lang_1.StringWrapper.replaceAllMapped(input,_commentRe,function(_){return""})}function processRules(input,ruleCallback){var inputWithEscapedBlocks=escapeBlocks(input),nextBlockIndex=0;return lang_1.StringWrapper.replaceAllMapped(inputWithEscapedBlocks.escapedString,_ruleRe,function(m){var selector=m[2],content="",suffix=m[4],contentPrefix="";lang_1.isPresent(m[4])&&m[4].startsWith("{"+BLOCK_PLACEHOLDER)&&(content=inputWithEscapedBlocks.blocks[nextBlockIndex++],suffix=m[4].substring(BLOCK_PLACEHOLDER.length+1),contentPrefix="{");var rule=ruleCallback(new CssRule(selector,content));return""+m[1]+rule.selector+m[3]+contentPrefix+rule.content+suffix})}function escapeBlocks(input){for(var inputParts=lang_1.StringWrapper.split(input,_curlyRe),resultParts=[],escapedBlocks=[],bracketCount=0,currentBlockParts=[],partIndex=0;partIndex<inputParts.length;partIndex++){var part=inputParts[partIndex];part==CLOSE_CURLY&&bracketCount--,bracketCount>0?currentBlockParts.push(part):(currentBlockParts.length>0&&(escapedBlocks.push(currentBlockParts.join("")),resultParts.push(BLOCK_PLACEHOLDER),currentBlockParts=[]),resultParts.push(part)),part==OPEN_CURLY&&bracketCount++}return currentBlockParts.length>0&&(escapedBlocks.push(currentBlockParts.join("")),resultParts.push(BLOCK_PLACEHOLDER)),new StringWithEscapedBlocks(resultParts.join(""),escapedBlocks)}var collection_1=require("./facade/collection"),lang_1=require("./facade/lang"),ShadowCss=function(){function ShadowCss(){this.strictStyling=!0}return ShadowCss.prototype.shimCssText=function(cssText,selector,hostSelector){return void 0===hostSelector&&(hostSelector=""),cssText=stripComments(cssText),cssText=this._insertDirectives(cssText),this._scopeCssText(cssText,selector,hostSelector)},ShadowCss.prototype._insertDirectives=function(cssText){return cssText=this._insertPolyfillDirectivesInCssText(cssText),this._insertPolyfillRulesInCssText(cssText)},ShadowCss.prototype._insertPolyfillDirectivesInCssText=function(cssText){return lang_1.StringWrapper.replaceAllMapped(cssText,_cssContentNextSelectorRe,function(m){return m[1]+"{"})},ShadowCss.prototype._insertPolyfillRulesInCssText=function(cssText){return lang_1.StringWrapper.replaceAllMapped(cssText,_cssContentRuleRe,function(m){var rule=m[0];return rule=lang_1.StringWrapper.replace(rule,m[1],""),rule=lang_1.StringWrapper.replace(rule,m[2],""),m[3]+rule})},ShadowCss.prototype._scopeCssText=function(cssText,scopeSelector,hostSelector){var unscoped=this._extractUnscopedRulesFromCssText(cssText);return cssText=this._insertPolyfillHostInCssText(cssText),cssText=this._convertColonHost(cssText),cssText=this._convertColonHostContext(cssText),cssText=this._convertShadowDOMSelectors(cssText),lang_1.isPresent(scopeSelector)&&(cssText=this._scopeSelectors(cssText,scopeSelector,hostSelector)),cssText=cssText+"\n"+unscoped,cssText.trim()},ShadowCss.prototype._extractUnscopedRulesFromCssText=function(cssText){var m,r="";for(_cssContentUnscopedRuleRe.lastIndex=0;null!==(m=_cssContentUnscopedRuleRe.exec(cssText));){var rule=m[0];rule=lang_1.StringWrapper.replace(rule,m[2],""),rule=lang_1.StringWrapper.replace(rule,m[1],m[3]),r+=rule+"\n\n"}return r},ShadowCss.prototype._convertColonHost=function(cssText){return this._convertColonRule(cssText,_cssColonHostRe,this._colonHostPartReplacer)},ShadowCss.prototype._convertColonHostContext=function(cssText){return this._convertColonRule(cssText,_cssColonHostContextRe,this._colonHostContextPartReplacer)},ShadowCss.prototype._convertColonRule=function(cssText,regExp,partReplacer){return lang_1.StringWrapper.replaceAllMapped(cssText,regExp,function(m){if(lang_1.isPresent(m[2])){for(var parts=m[2].split(","),r=[],i=0;i<parts.length;i++){var p=parts[i];if(lang_1.isBlank(p))break;p=p.trim(),r.push(partReplacer(_polyfillHostNoCombinator,p,m[3]))}return r.join(",")}return _polyfillHostNoCombinator+m[3]})},ShadowCss.prototype._colonHostContextPartReplacer=function(host,part,suffix){return lang_1.StringWrapper.contains(part,_polyfillHost)?this._colonHostPartReplacer(host,part,suffix):host+part+suffix+", "+part+" "+host+suffix},ShadowCss.prototype._colonHostPartReplacer=function(host,part,suffix){return host+lang_1.StringWrapper.replace(part,_polyfillHost,"")+suffix},ShadowCss.prototype._convertShadowDOMSelectors=function(cssText){for(var i=0;i<_shadowDOMSelectorsRe.length;i++)cssText=lang_1.StringWrapper.replaceAll(cssText,_shadowDOMSelectorsRe[i]," ");return cssText},ShadowCss.prototype._scopeSelectors=function(cssText,scopeSelector,hostSelector){var _this=this;return processRules(cssText,function(rule){var selector=rule.selector,content=rule.content;return"@"!=rule.selector[0]||rule.selector.startsWith("@page")?selector=_this._scopeSelector(rule.selector,scopeSelector,hostSelector,_this.strictStyling):(rule.selector.startsWith("@media")||rule.selector.startsWith("@supports"))&&(content=_this._scopeSelectors(rule.content,scopeSelector,hostSelector)),new CssRule(selector,content)})},ShadowCss.prototype._scopeSelector=function(selector,scopeSelector,hostSelector,strict){for(var r=[],parts=selector.split(","),i=0;i<parts.length;i++){var p=parts[i].trim(),deepParts=lang_1.StringWrapper.split(p,_shadowDeepSelectors),shallowPart=deepParts[0];this._selectorNeedsScoping(shallowPart,scopeSelector)&&(deepParts[0]=strict&&!lang_1.StringWrapper.contains(shallowPart,_polyfillHostNoCombinator)?this._applyStrictSelectorScope(shallowPart,scopeSelector):this._applySelectorScope(shallowPart,scopeSelector,hostSelector)),r.push(deepParts.join(" "))}return r.join(", ")},ShadowCss.prototype._selectorNeedsScoping=function(selector,scopeSelector){var re=this._makeScopeMatcher(scopeSelector);return!re.test(selector)},ShadowCss.prototype._makeScopeMatcher=function(scopeSelector){var lre=/\[/g,rre=/\]/g;return scopeSelector=lang_1.StringWrapper.replaceAll(scopeSelector,lre,"\\["),scopeSelector=lang_1.StringWrapper.replaceAll(scopeSelector,rre,"\\]"),new RegExp("^("+scopeSelector+")"+_selectorReSuffix,"m")},ShadowCss.prototype._applySelectorScope=function(selector,scopeSelector,hostSelector){return this._applySimpleSelectorScope(selector,scopeSelector,hostSelector)},ShadowCss.prototype._applySimpleSelectorScope=function(selector,scopeSelector,hostSelector){if(_polyfillHostRe.test(selector)){var replaceBy=this.strictStyling?"["+hostSelector+"]":scopeSelector;return selector=lang_1.StringWrapper.replace(selector,_polyfillHostNoCombinator,replaceBy),lang_1.StringWrapper.replaceAll(selector,_polyfillHostRe,replaceBy+" ")}return scopeSelector+" "+selector},ShadowCss.prototype._applyStrictSelectorScope=function(selector,scopeSelector){var isRe=/\[is=([^\]]*)\]/g;scopeSelector=lang_1.StringWrapper.replaceAllMapped(scopeSelector,isRe,function(m){return m[1]});for(var splits=[" ",">","+","~"],scoped=selector,attrName="["+scopeSelector+"]",i=0;i<splits.length;i++){var sep=splits[i],parts=scoped.split(sep);scoped=parts.map(function(p){var t=lang_1.StringWrapper.replaceAll(p.trim(),_polyfillHostRe,"");if(t.length>0&&!collection_1.ListWrapper.contains(splits,t)&&!lang_1.StringWrapper.contains(t,attrName)){var m=t.match(/([^:]*)(:*)(.*)/);null!==m&&(p=m[1]+attrName+m[2]+m[3])}return p}).join(sep)}return scoped},ShadowCss.prototype._insertPolyfillHostInCssText=function(selector){return selector=lang_1.StringWrapper.replaceAll(selector,_colonHostContextRe,_polyfillHostContext),selector=lang_1.StringWrapper.replaceAll(selector,_colonHostRe,_polyfillHost)},ShadowCss}();exports.ShadowCss=ShadowCss;var _cssContentNextSelectorRe=/polyfill-next-selector[^}]*content:[\s]*?['"](.*?)['"][;\s]*}([^{]*?){/gim,_cssContentRuleRe=/(polyfill-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,_cssContentUnscopedRuleRe=/(polyfill-unscoped-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,_polyfillHost="-shadowcsshost",_polyfillHostContext="-shadowcsscontext",_parenSuffix=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",_cssColonHostRe=new RegExp("("+_polyfillHost+_parenSuffix,"gim"),_cssColonHostContextRe=new RegExp("("+_polyfillHostContext+_parenSuffix,"gim"),_polyfillHostNoCombinator=_polyfillHost+"-no-combinator",_shadowDOMSelectorsRe=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],_shadowDeepSelectors=/(?:>>>)|(?:\/deep\/)/g,_selectorReSuffix="([>\\s~+[.,{:][\\s\\S]*)?$",_polyfillHostRe=new RegExp(_polyfillHost,"im"),_colonHostRe=/:host/gim,_colonHostContextRe=/:host-context/gim,_commentRe=/\/\*[\s\S]*?\*\//g,_ruleRe=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,_curlyRe=/([{}])/g,OPEN_CURLY="{",CLOSE_CURLY="}",BLOCK_PLACEHOLDER="%BLOCK%",CssRule=function(){function CssRule(selector,content){this.selector=selector,this.content=content}return CssRule}();exports.CssRule=CssRule,exports.processRules=processRules;var StringWithEscapedBlocks=function(){function StringWithEscapedBlocks(escapedString,blocks){this.escapedString=escapedString,this.blocks=blocks}return StringWithEscapedBlocks}()},{"./facade/collection":82,"./facade/lang":85}],131:[function(require,module,exports){"use strict";function getStylesVarName(component){var result="styles";return component&&(result+="_"+component.type.name),result}var core_1=require("@angular/core"),compile_metadata_1=require("./compile_metadata"),o=require("./output/output_ast"),shadow_css_1=require("./shadow_css"),url_resolver_1=require("./url_resolver"),COMPONENT_VARIABLE="%COMP%",HOST_ATTR="_nghost-"+COMPONENT_VARIABLE,CONTENT_ATTR="_ngcontent-"+COMPONENT_VARIABLE,StylesCompileDependency=function(){function StylesCompileDependency(moduleUrl,isShimmed,valuePlaceholder){this.moduleUrl=moduleUrl,this.isShimmed=isShimmed,this.valuePlaceholder=valuePlaceholder}return StylesCompileDependency}();exports.StylesCompileDependency=StylesCompileDependency;var StylesCompileResult=function(){function StylesCompileResult(componentStylesheet,externalStylesheets){this.componentStylesheet=componentStylesheet,this.externalStylesheets=externalStylesheets}return StylesCompileResult}();exports.StylesCompileResult=StylesCompileResult;var CompiledStylesheet=function(){function CompiledStylesheet(statements,stylesVar,dependencies,isShimmed,meta){this.statements=statements,this.stylesVar=stylesVar,this.dependencies=dependencies,this.isShimmed=isShimmed,this.meta=meta}return CompiledStylesheet}();exports.CompiledStylesheet=CompiledStylesheet;var StyleCompiler=function(){function StyleCompiler(_urlResolver){this._urlResolver=_urlResolver,this._shadowCss=new shadow_css_1.ShadowCss}return StyleCompiler.prototype.compileComponent=function(comp){var _this=this,externalStylesheets=[],componentStylesheet=this._compileStyles(comp,new compile_metadata_1.CompileStylesheetMetadata({styles:comp.template.styles,styleUrls:comp.template.styleUrls,moduleUrl:comp.type.moduleUrl}),!0);return comp.template.externalStylesheets.forEach(function(stylesheetMeta){var compiledStylesheet=_this._compileStyles(comp,stylesheetMeta,!1);externalStylesheets.push(compiledStylesheet)}),new StylesCompileResult(componentStylesheet,externalStylesheets)},StyleCompiler.prototype._compileStyles=function(comp,stylesheet,isComponentStylesheet){for(var _this=this,shim=comp.template.encapsulation===core_1.ViewEncapsulation.Emulated,styleExpressions=stylesheet.styles.map(function(plainStyle){return o.literal(_this._shimIfNeeded(plainStyle,shim))}),dependencies=[],i=0;i<stylesheet.styleUrls.length;i++){var identifier=new compile_metadata_1.CompileIdentifierMetadata({name:getStylesVarName(null)});dependencies.push(new StylesCompileDependency(stylesheet.styleUrls[i],shim,identifier)),styleExpressions.push(new o.ExternalExpr(identifier))}var stylesVar=getStylesVarName(isComponentStylesheet?comp:null),stmt=o.variable(stylesVar).set(o.literalArr(styleExpressions,new o.ArrayType(o.DYNAMIC_TYPE,[o.TypeModifier.Const]))).toDeclStmt(null,[o.StmtModifier.Final]);return new CompiledStylesheet([stmt],stylesVar,dependencies,shim,stylesheet)},StyleCompiler.prototype._shimIfNeeded=function(style,shim){return shim?this._shadowCss.shimCssText(style,CONTENT_ATTR,HOST_ATTR):style},StyleCompiler.decorators=[{type:core_1.Injectable}],StyleCompiler.ctorParameters=[{type:url_resolver_1.UrlResolver}],StyleCompiler}();exports.StyleCompiler=StyleCompiler},{"./compile_metadata":73,"./output/output_ast":116,"./shadow_css":130,"./url_resolver":136,"@angular/core":154}],132:[function(require,module,exports){"use strict";function isStyleUrlResolvable(url){if(lang_1.isBlank(url)||0===url.length||"/"==url[0])return!1;var schemeMatch=url.match(_urlWithSchemaRe);return null===schemeMatch||"package"==schemeMatch[1]||"asset"==schemeMatch[1]}function extractStyleUrls(resolver,baseUrl,cssText){var foundUrls=[],modifiedCssText=lang_1.StringWrapper.replaceAllMapped(cssText,_cssImportRe,function(m){var url=lang_1.isPresent(m[1])?m[1]:m[2];return isStyleUrlResolvable(url)?(foundUrls.push(resolver.resolve(baseUrl,url)),""):m[0]});return new StyleWithImports(modifiedCssText,foundUrls)}var lang_1=require("./facade/lang"),StyleWithImports=function(){function StyleWithImports(style,styleUrls){this.style=style,this.styleUrls=styleUrls}return StyleWithImports}();exports.StyleWithImports=StyleWithImports,exports.isStyleUrlResolvable=isStyleUrlResolvable,exports.extractStyleUrls=extractStyleUrls;var _cssImportRe=/@import\s+(?:url\()?\s*(?:(?:['"]([^'"]*))|([^;\)\s]*))[^;]*;?/g,_urlWithSchemaRe=/^([^:\/?#]+):/},{"./facade/lang":85}],133:[function(require,module,exports){"use strict";function templateVisitAll(visitor,asts,context){void 0===context&&(context=null);var result=[];return asts.forEach(function(ast){var astResult=ast.visit(visitor,context);lang_1.isPresent(astResult)&&result.push(astResult)}),result}var lang_1=require("../facade/lang"),TextAst=function(){function TextAst(value,ngContentIndex,sourceSpan){this.value=value,this.ngContentIndex=ngContentIndex,this.sourceSpan=sourceSpan}return TextAst.prototype.visit=function(visitor,context){return visitor.visitText(this,context)},TextAst}();exports.TextAst=TextAst;var BoundTextAst=function(){function BoundTextAst(value,ngContentIndex,sourceSpan){this.value=value,this.ngContentIndex=ngContentIndex,this.sourceSpan=sourceSpan}return BoundTextAst.prototype.visit=function(visitor,context){return visitor.visitBoundText(this,context)},BoundTextAst}();exports.BoundTextAst=BoundTextAst;var AttrAst=function(){function AttrAst(name,value,sourceSpan){this.name=name,this.value=value,this.sourceSpan=sourceSpan}return AttrAst.prototype.visit=function(visitor,context){return visitor.visitAttr(this,context)},AttrAst}();exports.AttrAst=AttrAst;var BoundElementPropertyAst=function(){function BoundElementPropertyAst(name,type,securityContext,value,unit,sourceSpan){this.name=name,this.type=type,this.securityContext=securityContext,this.value=value,this.unit=unit,this.sourceSpan=sourceSpan}return BoundElementPropertyAst.prototype.visit=function(visitor,context){return visitor.visitElementProperty(this,context)},BoundElementPropertyAst}();exports.BoundElementPropertyAst=BoundElementPropertyAst;var BoundEventAst=function(){function BoundEventAst(name,target,handler,sourceSpan){this.name=name,this.target=target,this.handler=handler,this.sourceSpan=sourceSpan}return BoundEventAst.prototype.visit=function(visitor,context){return visitor.visitEvent(this,context)},Object.defineProperty(BoundEventAst.prototype,"fullName",{get:function(){return lang_1.isPresent(this.target)?this.target+":"+this.name:this.name},enumerable:!0,configurable:!0}),BoundEventAst}();exports.BoundEventAst=BoundEventAst;var ReferenceAst=function(){function ReferenceAst(name,value,sourceSpan){this.name=name,this.value=value,this.sourceSpan=sourceSpan}return ReferenceAst.prototype.visit=function(visitor,context){return visitor.visitReference(this,context)},ReferenceAst}();exports.ReferenceAst=ReferenceAst;var VariableAst=function(){function VariableAst(name,value,sourceSpan){this.name=name,this.value=value,this.sourceSpan=sourceSpan}return VariableAst.prototype.visit=function(visitor,context){return visitor.visitVariable(this,context)},VariableAst}();exports.VariableAst=VariableAst;var ElementAst=function(){function ElementAst(name,attrs,inputs,outputs,references,directives,providers,hasViewContainer,children,ngContentIndex,sourceSpan){this.name=name,this.attrs=attrs,this.inputs=inputs,this.outputs=outputs,this.references=references,this.directives=directives,this.providers=providers,this.hasViewContainer=hasViewContainer,this.children=children,this.ngContentIndex=ngContentIndex,this.sourceSpan=sourceSpan}return ElementAst.prototype.visit=function(visitor,context){return visitor.visitElement(this,context)},ElementAst}();exports.ElementAst=ElementAst;var EmbeddedTemplateAst=function(){function EmbeddedTemplateAst(attrs,outputs,references,variables,directives,providers,hasViewContainer,children,ngContentIndex,sourceSpan){this.attrs=attrs,this.outputs=outputs,this.references=references,this.variables=variables,this.directives=directives,this.providers=providers,this.hasViewContainer=hasViewContainer,this.children=children,this.ngContentIndex=ngContentIndex,this.sourceSpan=sourceSpan}return EmbeddedTemplateAst.prototype.visit=function(visitor,context){return visitor.visitEmbeddedTemplate(this,context)},EmbeddedTemplateAst}();exports.EmbeddedTemplateAst=EmbeddedTemplateAst;var BoundDirectivePropertyAst=function(){function BoundDirectivePropertyAst(directiveName,templateName,value,sourceSpan){this.directiveName=directiveName,this.templateName=templateName,this.value=value,this.sourceSpan=sourceSpan}return BoundDirectivePropertyAst.prototype.visit=function(visitor,context){return visitor.visitDirectiveProperty(this,context)},BoundDirectivePropertyAst}();exports.BoundDirectivePropertyAst=BoundDirectivePropertyAst;var DirectiveAst=function(){function DirectiveAst(directive,inputs,hostProperties,hostEvents,sourceSpan){this.directive=directive,this.inputs=inputs,this.hostProperties=hostProperties,this.hostEvents=hostEvents,this.sourceSpan=sourceSpan}return DirectiveAst.prototype.visit=function(visitor,context){return visitor.visitDirective(this,context)},DirectiveAst}();exports.DirectiveAst=DirectiveAst;var ProviderAst=function(){function ProviderAst(token,multiProvider,eager,providers,providerType,lifecycleHooks,sourceSpan){this.token=token,this.multiProvider=multiProvider,this.eager=eager,this.providers=providers,this.providerType=providerType,this.lifecycleHooks=lifecycleHooks,this.sourceSpan=sourceSpan}return ProviderAst.prototype.visit=function(visitor,context){return null},ProviderAst}();exports.ProviderAst=ProviderAst,function(ProviderAstType){ProviderAstType[ProviderAstType.PublicService=0]="PublicService",ProviderAstType[ProviderAstType.PrivateService=1]="PrivateService",ProviderAstType[ProviderAstType.Component=2]="Component",ProviderAstType[ProviderAstType.Directive=3]="Directive",ProviderAstType[ProviderAstType.Builtin=4]="Builtin"}(exports.ProviderAstType||(exports.ProviderAstType={}));var NgContentAst=(exports.ProviderAstType,function(){function NgContentAst(index,ngContentIndex,sourceSpan){this.index=index,this.ngContentIndex=ngContentIndex,this.sourceSpan=sourceSpan}return NgContentAst.prototype.visit=function(visitor,context){return visitor.visitNgContent(this,context);
},NgContentAst}());exports.NgContentAst=NgContentAst,function(PropertyBindingType){PropertyBindingType[PropertyBindingType.Property=0]="Property",PropertyBindingType[PropertyBindingType.Attribute=1]="Attribute",PropertyBindingType[PropertyBindingType.Class=2]="Class",PropertyBindingType[PropertyBindingType.Style=3]="Style",PropertyBindingType[PropertyBindingType.Animation=4]="Animation"}(exports.PropertyBindingType||(exports.PropertyBindingType={}));exports.PropertyBindingType;exports.templateVisitAll=templateVisitAll},{"../facade/lang":85}],134:[function(require,module,exports){"use strict";function splitClasses(classAttrValue){return classAttrValue.trim().split(/\s+/g)}function createElementCssSelector(elementName,matchableAttrs){var cssSelector=new selector_1.CssSelector,elNameNoNs=tags_1.splitNsName(elementName)[1];cssSelector.setElement(elNameNoNs);for(var i=0;i<matchableAttrs.length;i++){var attrName=matchableAttrs[i][0],attrNameNoNs=tags_1.splitNsName(attrName)[1],attrValue=matchableAttrs[i][1];if(cssSelector.addAttribute(attrNameNoNs,attrValue),attrName.toLowerCase()==CLASS_ATTR){var classes=splitClasses(attrValue);classes.forEach(function(className){return cssSelector.addClassName(className)})}}return cssSelector}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),core_private_1=require("../../core_private"),compile_metadata_1=require("../compile_metadata"),ast_1=require("../expression_parser/ast"),parser_1=require("../expression_parser/parser"),collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),html=require("../ml_parser/ast"),html_parser_1=require("../ml_parser/html_parser"),icu_ast_expander_1=require("../ml_parser/icu_ast_expander"),interpolation_config_1=require("../ml_parser/interpolation_config"),tags_1=require("../ml_parser/tags"),parse_util_1=require("../parse_util"),provider_analyzer_1=require("../provider_analyzer"),element_schema_registry_1=require("../schema/element_schema_registry"),selector_1=require("../selector"),style_url_resolver_1=require("../style_url_resolver"),util_1=require("../util"),template_ast_1=require("./template_ast"),template_preparser_1=require("./template_preparser"),BIND_NAME_REGEXP=/^(?:(?:(?:(bind-)|(var-)|(let-)|(ref-|#)|(on-)|(bindon-)|(animate-|@))(.+))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/,TEMPLATE_ELEMENT="template",TEMPLATE_ATTR="template",TEMPLATE_ATTR_PREFIX="*",CLASS_ATTR="class",PROPERTY_PARTS_SEPARATOR=".",ATTRIBUTE_PREFIX="attr",CLASS_PREFIX="class",STYLE_PREFIX="style",TEXT_CSS_SELECTOR=selector_1.CssSelector.parse("*")[0];exports.TEMPLATE_TRANSFORMS=new core_1.OpaqueToken("TemplateTransforms");var TemplateParseError=function(_super){function TemplateParseError(message,span,level){_super.call(this,span,message,level)}return __extends(TemplateParseError,_super),TemplateParseError}(parse_util_1.ParseError);exports.TemplateParseError=TemplateParseError;var TemplateParseResult=function(){function TemplateParseResult(templateAst,errors){this.templateAst=templateAst,this.errors=errors}return TemplateParseResult}();exports.TemplateParseResult=TemplateParseResult;var TemplateParser=function(){function TemplateParser(_exprParser,_schemaRegistry,_htmlParser,_console,transforms){this._exprParser=_exprParser,this._schemaRegistry=_schemaRegistry,this._htmlParser=_htmlParser,this._console=_console,this.transforms=transforms}return TemplateParser.prototype.parse=function(component,template,directives,pipes,schemas,templateUrl){var result=this.tryParse(component,template,directives,pipes,schemas,templateUrl),warnings=result.errors.filter(function(error){return error.level===parse_util_1.ParseErrorLevel.WARNING}),errors=result.errors.filter(function(error){return error.level===parse_util_1.ParseErrorLevel.FATAL});if(warnings.length>0&&this._console.warn("Template parse warnings:\n"+warnings.join("\n")),errors.length>0){var errorString=errors.join("\n");throw new exceptions_1.BaseException("Template parse errors:\n"+errorString)}return result.templateAst},TemplateParser.prototype.tryParse=function(component,template,directives,pipes,schemas,templateUrl){var interpolationConfig;component.template&&(interpolationConfig=interpolation_config_1.InterpolationConfig.fromArray(component.template.interpolation));var result,htmlAstWithErrors=this._htmlParser.parse(template,templateUrl,!0,interpolationConfig),errors=htmlAstWithErrors.errors;if(0==errors.length){var expandedHtmlAst=icu_ast_expander_1.expandNodes(htmlAstWithErrors.rootNodes);errors.push.apply(errors,expandedHtmlAst.errors),htmlAstWithErrors=new html_parser_1.ParseTreeResult(expandedHtmlAst.nodes,errors)}if(htmlAstWithErrors.rootNodes.length>0){var uniqDirectives=compile_metadata_1.removeIdentifierDuplicates(directives),uniqPipes=compile_metadata_1.removeIdentifierDuplicates(pipes),providerViewContext=new provider_analyzer_1.ProviderViewContext(component,htmlAstWithErrors.rootNodes[0].sourceSpan),parseVisitor=new TemplateParseVisitor(providerViewContext,uniqDirectives,uniqPipes,schemas,this._exprParser,this._schemaRegistry);result=html.visitAll(parseVisitor,htmlAstWithErrors.rootNodes,EMPTY_ELEMENT_CONTEXT),errors.push.apply(errors,parseVisitor.errors.concat(providerViewContext.errors))}else result=[];return this._assertNoReferenceDuplicationOnTemplate(result,errors),errors.length>0?new TemplateParseResult(result,errors):(lang_1.isPresent(this.transforms)&&this.transforms.forEach(function(transform){result=template_ast_1.templateVisitAll(transform,result)}),new TemplateParseResult(result,errors))},TemplateParser.prototype._assertNoReferenceDuplicationOnTemplate=function(result,errors){var existingReferences=[];result.filter(function(element){return!!element.references}).forEach(function(element){return element.references.forEach(function(reference){var name=reference.name;if(existingReferences.indexOf(name)<0)existingReferences.push(name);else{var error=new TemplateParseError('Reference "#'+name+'" is defined several times',reference.sourceSpan,parse_util_1.ParseErrorLevel.FATAL);errors.push(error)}})})},TemplateParser.decorators=[{type:core_1.Injectable}],TemplateParser.ctorParameters=[{type:parser_1.Parser},{type:element_schema_registry_1.ElementSchemaRegistry},{type:html_parser_1.HtmlParser},{type:core_private_1.Console},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Inject,args:[exports.TEMPLATE_TRANSFORMS]}]}],TemplateParser}();exports.TemplateParser=TemplateParser;var TemplateParseVisitor=function(){function TemplateParseVisitor(providerViewContext,directives,pipes,_schemas,_exprParser,_schemaRegistry){var _this=this;this.providerViewContext=providerViewContext,this._schemas=_schemas,this._exprParser=_exprParser,this._schemaRegistry=_schemaRegistry,this.errors=[],this.directivesIndex=new Map,this.ngContentCount=0,this.selectorMatcher=new selector_1.SelectorMatcher;var tempMeta=providerViewContext.component.template;lang_1.isPresent(tempMeta)&&lang_1.isPresent(tempMeta.interpolation)&&(this._interpolationConfig={start:tempMeta.interpolation[0],end:tempMeta.interpolation[1]}),collection_1.ListWrapper.forEachWithIndex(directives,function(directive,index){var selector=selector_1.CssSelector.parse(directive.selector);_this.selectorMatcher.addSelectables(selector,directive),_this.directivesIndex.set(directive,index)}),this.pipesByName=new Map,pipes.forEach(function(pipe){return _this.pipesByName.set(pipe.name,pipe)})}return TemplateParseVisitor.prototype._reportError=function(message,sourceSpan,level){void 0===level&&(level=parse_util_1.ParseErrorLevel.FATAL),this.errors.push(new TemplateParseError(message,sourceSpan,level))},TemplateParseVisitor.prototype._reportParserErors=function(errors,sourceSpan){for(var _i=0,errors_1=errors;_i<errors_1.length;_i++){var error=errors_1[_i];this._reportError(error.message,sourceSpan)}},TemplateParseVisitor.prototype._parseInterpolation=function(value,sourceSpan){var sourceInfo=sourceSpan.start.toString();try{var ast=this._exprParser.parseInterpolation(value,sourceInfo,this._interpolationConfig);if(ast&&this._reportParserErors(ast.errors,sourceSpan),this._checkPipes(ast,sourceSpan),lang_1.isPresent(ast)&&ast.ast.expressions.length>core_private_1.MAX_INTERPOLATION_VALUES)throw new exceptions_1.BaseException("Only support at most "+core_private_1.MAX_INTERPOLATION_VALUES+" interpolation values!");return ast}catch(e){return this._reportError(""+e,sourceSpan),this._exprParser.wrapLiteralPrimitive("ERROR",sourceInfo)}},TemplateParseVisitor.prototype._parseAction=function(value,sourceSpan){var sourceInfo=sourceSpan.start.toString();try{var ast=this._exprParser.parseAction(value,sourceInfo,this._interpolationConfig);return ast&&this._reportParserErors(ast.errors,sourceSpan),!ast||ast.ast instanceof ast_1.EmptyExpr?(this._reportError("Empty expressions are not allowed",sourceSpan),this._exprParser.wrapLiteralPrimitive("ERROR",sourceInfo)):(this._checkPipes(ast,sourceSpan),ast)}catch(e){return this._reportError(""+e,sourceSpan),this._exprParser.wrapLiteralPrimitive("ERROR",sourceInfo)}},TemplateParseVisitor.prototype._parseBinding=function(value,sourceSpan){var sourceInfo=sourceSpan.start.toString();try{var ast=this._exprParser.parseBinding(value,sourceInfo,this._interpolationConfig);return ast&&this._reportParserErors(ast.errors,sourceSpan),this._checkPipes(ast,sourceSpan),ast}catch(e){return this._reportError(""+e,sourceSpan),this._exprParser.wrapLiteralPrimitive("ERROR",sourceInfo)}},TemplateParseVisitor.prototype._parseTemplateBindings=function(value,sourceSpan){var _this=this,sourceInfo=sourceSpan.start.toString();try{var bindingsResult=this._exprParser.parseTemplateBindings(value,sourceInfo);return this._reportParserErors(bindingsResult.errors,sourceSpan),bindingsResult.templateBindings.forEach(function(binding){lang_1.isPresent(binding.expression)&&_this._checkPipes(binding.expression,sourceSpan)}),bindingsResult.warnings.forEach(function(warning){_this._reportError(warning,sourceSpan,parse_util_1.ParseErrorLevel.WARNING)}),bindingsResult.templateBindings}catch(e){return this._reportError(""+e,sourceSpan),[]}},TemplateParseVisitor.prototype._checkPipes=function(ast,sourceSpan){var _this=this;if(lang_1.isPresent(ast)){var collector=new PipeCollector;ast.visit(collector),collector.pipes.forEach(function(pipeName){_this.pipesByName.has(pipeName)||_this._reportError("The pipe '"+pipeName+"' could not be found",sourceSpan)})}},TemplateParseVisitor.prototype.visitExpansion=function(expansion,context){return null},TemplateParseVisitor.prototype.visitExpansionCase=function(expansionCase,context){return null},TemplateParseVisitor.prototype.visitText=function(text,parent){var ngContentIndex=parent.findNgContentIndex(TEXT_CSS_SELECTOR),expr=this._parseInterpolation(text.value,text.sourceSpan);return lang_1.isPresent(expr)?new template_ast_1.BoundTextAst(expr,ngContentIndex,text.sourceSpan):new template_ast_1.TextAst(text.value,ngContentIndex,text.sourceSpan)},TemplateParseVisitor.prototype.visitAttribute=function(attribute,contex){return new template_ast_1.AttrAst(attribute.name,attribute.value,attribute.sourceSpan)},TemplateParseVisitor.prototype.visitComment=function(comment,context){return null},TemplateParseVisitor.prototype.visitElement=function(element,parent){var _this=this,nodeName=element.name,preparsedElement=template_preparser_1.preparseElement(element);if(preparsedElement.type===template_preparser_1.PreparsedElementType.SCRIPT||preparsedElement.type===template_preparser_1.PreparsedElementType.STYLE)return null;if(preparsedElement.type===template_preparser_1.PreparsedElementType.STYLESHEET&&style_url_resolver_1.isStyleUrlResolvable(preparsedElement.hrefAttr))return null;var matchableAttrs=[],elementOrDirectiveProps=[],elementOrDirectiveRefs=[],elementVars=[],animationProps=[],events=[],templateElementOrDirectiveProps=[],templateMatchableAttrs=[],templateElementVars=[],hasInlineTemplates=!1,attrs=[],lcElName=tags_1.splitNsName(nodeName.toLowerCase())[1],isTemplateElement=lcElName==TEMPLATE_ELEMENT;element.attrs.forEach(function(attr){var hasBinding=_this._parseAttr(isTemplateElement,attr,matchableAttrs,elementOrDirectiveProps,animationProps,events,elementOrDirectiveRefs,elementVars),hasTemplateBinding=_this._parseInlineTemplateBinding(attr,templateMatchableAttrs,templateElementOrDirectiveProps,templateElementVars);hasTemplateBinding&&hasInlineTemplates&&_this._reportError("Can't have multiple template bindings on one element. Use only one attribute named 'template' or prefixed with *",attr.sourceSpan),hasBinding||hasTemplateBinding||(attrs.push(_this.visitAttribute(attr,null)),matchableAttrs.push([attr.name,attr.value])),hasTemplateBinding&&(hasInlineTemplates=!0)});var elementCssSelector=createElementCssSelector(nodeName,matchableAttrs),directiveMetas=this._parseDirectives(this.selectorMatcher,elementCssSelector),references=[],directiveAsts=this._createDirectiveAsts(isTemplateElement,element.name,directiveMetas,elementOrDirectiveProps,elementOrDirectiveRefs,element.sourceSpan,references),elementProps=this._createElementPropertyAsts(element.name,elementOrDirectiveProps,directiveAsts).concat(animationProps),isViewRoot=parent.isTemplateElement||hasInlineTemplates,providerContext=new provider_analyzer_1.ProviderElementContext(this.providerViewContext,parent.providerContext,isViewRoot,directiveAsts,attrs,references,element.sourceSpan),children=html.visitAll(preparsedElement.nonBindable?NON_BINDABLE_VISITOR:this,element.children,ElementContext.create(isTemplateElement,directiveAsts,isTemplateElement?parent.providerContext:providerContext));providerContext.afterElement();var parsedElement,projectionSelector=lang_1.isPresent(preparsedElement.projectAs)?selector_1.CssSelector.parse(preparsedElement.projectAs)[0]:elementCssSelector,ngContentIndex=parent.findNgContentIndex(projectionSelector);if(preparsedElement.type===template_preparser_1.PreparsedElementType.NG_CONTENT)lang_1.isPresent(element.children)&&element.children.length>0&&this._reportError("<ng-content> element cannot have content. <ng-content> must be immediately followed by </ng-content>",element.sourceSpan),parsedElement=new template_ast_1.NgContentAst((this.ngContentCount++),hasInlineTemplates?null:ngContentIndex,element.sourceSpan);else if(isTemplateElement)this._assertAllEventsPublishedByDirectives(directiveAsts,events),this._assertNoComponentsNorElementBindingsOnTemplate(directiveAsts,elementProps,element.sourceSpan),parsedElement=new template_ast_1.EmbeddedTemplateAst(attrs,events,references,elementVars,providerContext.transformedDirectiveAsts,providerContext.transformProviders,providerContext.transformedHasViewContainer,children,hasInlineTemplates?null:ngContentIndex,element.sourceSpan);else{this._assertOnlyOneComponent(directiveAsts,element.sourceSpan);var ngContentIndex_1=hasInlineTemplates?null:parent.findNgContentIndex(projectionSelector);parsedElement=new template_ast_1.ElementAst(nodeName,attrs,elementProps,events,references,providerContext.transformedDirectiveAsts,providerContext.transformProviders,providerContext.transformedHasViewContainer,children,hasInlineTemplates?null:ngContentIndex_1,element.sourceSpan)}if(hasInlineTemplates){var templateCssSelector=createElementCssSelector(TEMPLATE_ELEMENT,templateMatchableAttrs),templateDirectiveMetas=this._parseDirectives(this.selectorMatcher,templateCssSelector),templateDirectiveAsts=this._createDirectiveAsts(!0,element.name,templateDirectiveMetas,templateElementOrDirectiveProps,[],element.sourceSpan,[]),templateElementProps=this._createElementPropertyAsts(element.name,templateElementOrDirectiveProps,templateDirectiveAsts);this._assertNoComponentsNorElementBindingsOnTemplate(templateDirectiveAsts,templateElementProps,element.sourceSpan);var templateProviderContext=new provider_analyzer_1.ProviderElementContext(this.providerViewContext,parent.providerContext,parent.isTemplateElement,templateDirectiveAsts,[],[],element.sourceSpan);templateProviderContext.afterElement(),parsedElement=new template_ast_1.EmbeddedTemplateAst([],[],[],templateElementVars,templateProviderContext.transformedDirectiveAsts,templateProviderContext.transformProviders,templateProviderContext.transformedHasViewContainer,[parsedElement],ngContentIndex,element.sourceSpan)}return parsedElement},TemplateParseVisitor.prototype._parseInlineTemplateBinding=function(attr,targetMatchableAttrs,targetProps,targetVars){var templateBindingsSource=null;if(this._normalizeAttributeName(attr.name)==TEMPLATE_ATTR)templateBindingsSource=attr.value;else if(attr.name.startsWith(TEMPLATE_ATTR_PREFIX)){var key=attr.name.substring(TEMPLATE_ATTR_PREFIX.length);templateBindingsSource=0==attr.value.length?key:key+" "+attr.value}if(lang_1.isPresent(templateBindingsSource)){for(var bindings=this._parseTemplateBindings(templateBindingsSource,attr.sourceSpan),i=0;i<bindings.length;i++){var binding=bindings[i];binding.keyIsVar?targetVars.push(new template_ast_1.VariableAst(binding.key,binding.name,attr.sourceSpan)):lang_1.isPresent(binding.expression)?this._parsePropertyAst(binding.key,binding.expression,attr.sourceSpan,targetMatchableAttrs,targetProps):(targetMatchableAttrs.push([binding.key,""]),this._parseLiteralAttr(binding.key,null,attr.sourceSpan,targetProps))}return!0}return!1},TemplateParseVisitor.prototype._parseAttr=function(isTemplateElement,attr,targetMatchableAttrs,targetProps,targetAnimationProps,targetEvents,targetRefs,targetVars){var attrName=this._normalizeAttributeName(attr.name),attrValue=attr.value,bindParts=attrName.match(BIND_NAME_REGEXP),hasBinding=!1;if(null!==bindParts)if(hasBinding=!0,lang_1.isPresent(bindParts[1]))this._parsePropertyOrAnimation(bindParts[8],attrValue,attr.sourceSpan,targetMatchableAttrs,targetProps,targetAnimationProps);else if(lang_1.isPresent(bindParts[2])){var identifier=bindParts[8];isTemplateElement?(this._reportError('"var-" on <template> elements is deprecated. Use "let-" instead!',attr.sourceSpan,parse_util_1.ParseErrorLevel.WARNING),this._parseVariable(identifier,attrValue,attr.sourceSpan,targetVars)):(this._reportError('"var-" on non <template> elements is deprecated. Use "ref-" instead!',attr.sourceSpan,parse_util_1.ParseErrorLevel.WARNING),this._parseReference(identifier,attrValue,attr.sourceSpan,targetRefs))}else if(lang_1.isPresent(bindParts[3]))if(isTemplateElement){var identifier=bindParts[8];this._parseVariable(identifier,attrValue,attr.sourceSpan,targetVars)}else this._reportError('"let-" is only supported on template elements.',attr.sourceSpan);else if(lang_1.isPresent(bindParts[4])){var identifier=bindParts[8];this._parseReference(identifier,attrValue,attr.sourceSpan,targetRefs)}else lang_1.isPresent(bindParts[5])?this._parseEvent(bindParts[8],attrValue,attr.sourceSpan,targetMatchableAttrs,targetEvents):lang_1.isPresent(bindParts[6])?(this._parsePropertyOrAnimation(bindParts[8],attrValue,attr.sourceSpan,targetMatchableAttrs,targetProps,targetAnimationProps),this._parseAssignmentEvent(bindParts[8],attrValue,attr.sourceSpan,targetMatchableAttrs,targetEvents)):lang_1.isPresent(bindParts[7])?("@"==attrName[0]&&lang_1.isPresent(attrValue)&&attrValue.length>0&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is deprecated. Use property bindings (e.g. [@prop]="exp") instead!',attr.sourceSpan,parse_util_1.ParseErrorLevel.WARNING),this._parseAnimation(bindParts[8],attrValue,attr.sourceSpan,targetMatchableAttrs,targetAnimationProps)):lang_1.isPresent(bindParts[9])?(this._parsePropertyOrAnimation(bindParts[9],attrValue,attr.sourceSpan,targetMatchableAttrs,targetProps,targetAnimationProps),this._parseAssignmentEvent(bindParts[9],attrValue,attr.sourceSpan,targetMatchableAttrs,targetEvents)):lang_1.isPresent(bindParts[10])?this._parsePropertyOrAnimation(bindParts[10],attrValue,attr.sourceSpan,targetMatchableAttrs,targetProps,targetAnimationProps):lang_1.isPresent(bindParts[11])&&this._parseEvent(bindParts[11],attrValue,attr.sourceSpan,targetMatchableAttrs,targetEvents);else hasBinding=this._parsePropertyInterpolation(attrName,attrValue,attr.sourceSpan,targetMatchableAttrs,targetProps);return hasBinding||this._parseLiteralAttr(attrName,attrValue,attr.sourceSpan,targetProps),hasBinding},TemplateParseVisitor.prototype._normalizeAttributeName=function(attrName){return attrName.toLowerCase().startsWith("data-")?attrName.substring(5):attrName},TemplateParseVisitor.prototype._parseVariable=function(identifier,value,sourceSpan,targetVars){identifier.indexOf("-")>-1&&this._reportError('"-" is not allowed in variable names',sourceSpan),targetVars.push(new template_ast_1.VariableAst(identifier,value,sourceSpan))},TemplateParseVisitor.prototype._parseReference=function(identifier,value,sourceSpan,targetRefs){identifier.indexOf("-")>-1&&this._reportError('"-" is not allowed in reference names',sourceSpan),targetRefs.push(new ElementOrDirectiveRef(identifier,value,sourceSpan))},TemplateParseVisitor.prototype._parsePropertyOrAnimation=function(name,expression,sourceSpan,targetMatchableAttrs,targetProps,targetAnimationProps){"@"==name[0]?this._parseAnimation(name.substr(1),expression,sourceSpan,targetMatchableAttrs,targetAnimationProps):this._parsePropertyAst(name,this._parseBinding(expression,sourceSpan),sourceSpan,targetMatchableAttrs,targetProps)},TemplateParseVisitor.prototype._parseAnimation=function(name,expression,sourceSpan,targetMatchableAttrs,targetAnimationProps){lang_1.isPresent(expression)&&0!=expression.length||(expression="null");var ast=this._parseBinding(expression,sourceSpan);targetMatchableAttrs.push([name,ast.source]),targetAnimationProps.push(new template_ast_1.BoundElementPropertyAst(name,template_ast_1.PropertyBindingType.Animation,core_1.SecurityContext.NONE,ast,null,sourceSpan))},TemplateParseVisitor.prototype._parsePropertyInterpolation=function(name,value,sourceSpan,targetMatchableAttrs,targetProps){var expr=this._parseInterpolation(value,sourceSpan);return!!lang_1.isPresent(expr)&&(this._parsePropertyAst(name,expr,sourceSpan,targetMatchableAttrs,targetProps),!0)},TemplateParseVisitor.prototype._parsePropertyAst=function(name,ast,sourceSpan,targetMatchableAttrs,targetProps){targetMatchableAttrs.push([name,ast.source]),targetProps.push(new BoundElementOrDirectiveProperty(name,ast,(!1),sourceSpan))},TemplateParseVisitor.prototype._parseAssignmentEvent=function(name,expression,sourceSpan,targetMatchableAttrs,targetEvents){this._parseEvent(name+"Change",expression+"=$event",sourceSpan,targetMatchableAttrs,targetEvents)},TemplateParseVisitor.prototype._parseEvent=function(name,expression,sourceSpan,targetMatchableAttrs,targetEvents){var parts=util_1.splitAtColon(name,[null,name]),target=parts[0],eventName=parts[1],ast=this._parseAction(expression,sourceSpan);targetMatchableAttrs.push([name,ast.source]),targetEvents.push(new template_ast_1.BoundEventAst(eventName,target,ast,sourceSpan))},TemplateParseVisitor.prototype._parseLiteralAttr=function(name,value,sourceSpan,targetProps){targetProps.push(new BoundElementOrDirectiveProperty(name,this._exprParser.wrapLiteralPrimitive(value,""),(!0),sourceSpan))},TemplateParseVisitor.prototype._parseDirectives=function(selectorMatcher,elementCssSelector){var _this=this,directives=collection_1.ListWrapper.createFixedSize(this.directivesIndex.size);return selectorMatcher.match(elementCssSelector,function(selector,directive){directives[_this.directivesIndex.get(directive)]=directive}),directives.filter(function(dir){return lang_1.isPresent(dir)})},TemplateParseVisitor.prototype._createDirectiveAsts=function(isTemplateElement,elementName,directives,props,elementOrDirectiveRefs,elementSourceSpan,targetReferences){var _this=this,matchedReferences=new Set,component=null,directiveAsts=directives.map(function(directive){var sourceSpan=new parse_util_1.ParseSourceSpan(elementSourceSpan.start,elementSourceSpan.end,"Directive "+directive.type.name);directive.isComponent&&(component=directive);var hostProperties=[],hostEvents=[],directiveProperties=[];return _this._createDirectiveHostPropertyAsts(elementName,directive.hostProperties,sourceSpan,hostProperties),_this._createDirectiveHostEventAsts(directive.hostListeners,sourceSpan,hostEvents),_this._createDirectivePropertyAsts(directive.inputs,props,directiveProperties),elementOrDirectiveRefs.forEach(function(elOrDirRef){(0===elOrDirRef.value.length&&directive.isComponent||directive.exportAs==elOrDirRef.value)&&(targetReferences.push(new template_ast_1.ReferenceAst(elOrDirRef.name,identifiers_1.identifierToken(directive.type),elOrDirRef.sourceSpan)),matchedReferences.add(elOrDirRef.name))}),new template_ast_1.DirectiveAst(directive,directiveProperties,hostProperties,hostEvents,sourceSpan)});return elementOrDirectiveRefs.forEach(function(elOrDirRef){if(elOrDirRef.value.length>0)collection_1.SetWrapper.has(matchedReferences,elOrDirRef.name)||_this._reportError('There is no directive with "exportAs" set to "'+elOrDirRef.value+'"',elOrDirRef.sourceSpan);else if(lang_1.isBlank(component)){var refToken=null;isTemplateElement&&(refToken=identifiers_1.identifierToken(identifiers_1.Identifiers.TemplateRef)),targetReferences.push(new template_ast_1.ReferenceAst(elOrDirRef.name,refToken,elOrDirRef.sourceSpan))}}),directiveAsts},TemplateParseVisitor.prototype._createDirectiveHostPropertyAsts=function(elementName,hostProps,sourceSpan,targetPropertyAsts){var _this=this;lang_1.isPresent(hostProps)&&collection_1.StringMapWrapper.forEach(hostProps,function(expression,propName){var exprAst=_this._parseBinding(expression,sourceSpan);targetPropertyAsts.push(_this._createElementPropertyAst(elementName,propName,exprAst,sourceSpan))})},TemplateParseVisitor.prototype._createDirectiveHostEventAsts=function(hostListeners,sourceSpan,targetEventAsts){var _this=this;lang_1.isPresent(hostListeners)&&collection_1.StringMapWrapper.forEach(hostListeners,function(expression,propName){_this._parseEvent(propName,expression,sourceSpan,[],targetEventAsts)})},TemplateParseVisitor.prototype._createDirectivePropertyAsts=function(directiveProperties,boundProps,targetBoundDirectiveProps){if(lang_1.isPresent(directiveProperties)){var boundPropsByName_1=new Map;boundProps.forEach(function(boundProp){var prevValue=boundPropsByName_1.get(boundProp.name);(lang_1.isBlank(prevValue)||prevValue.isLiteral)&&boundPropsByName_1.set(boundProp.name,boundProp)}),collection_1.StringMapWrapper.forEach(directiveProperties,function(elProp,dirProp){var boundProp=boundPropsByName_1.get(elProp);lang_1.isPresent(boundProp)&&targetBoundDirectiveProps.push(new template_ast_1.BoundDirectivePropertyAst(dirProp,boundProp.name,boundProp.expression,boundProp.sourceSpan))})}},TemplateParseVisitor.prototype._createElementPropertyAsts=function(elementName,props,directives){var _this=this,boundElementProps=[],boundDirectivePropsIndex=new Map;return directives.forEach(function(directive){directive.inputs.forEach(function(prop){boundDirectivePropsIndex.set(prop.templateName,prop)})}),props.forEach(function(prop){!prop.isLiteral&&lang_1.isBlank(boundDirectivePropsIndex.get(prop.name))&&boundElementProps.push(_this._createElementPropertyAst(elementName,prop.name,prop.expression,prop.sourceSpan))}),boundElementProps},TemplateParseVisitor.prototype._createElementPropertyAst=function(elementName,name,ast,sourceSpan){var bindingType,boundPropertyName,securityContext,unit=null,parts=name.split(PROPERTY_PARTS_SEPARATOR);if(1===parts.length){var partValue=parts[0];if("@"==partValue[0])boundPropertyName=partValue.substr(1),bindingType=template_ast_1.PropertyBindingType.Animation,securityContext=core_1.SecurityContext.NONE,"@"==boundPropertyName[0]&&(this._reportError('Assigning animation triggers within host data as attributes such as "@prop": "exp" is deprecated. Use host bindings (e.g. "[@prop]": "exp") instead!',sourceSpan,parse_util_1.ParseErrorLevel.WARNING),boundPropertyName=boundPropertyName.substr(1));else if(boundPropertyName=this._schemaRegistry.getMappedPropName(partValue),securityContext=this._schemaRegistry.securityContext(elementName,boundPropertyName),bindingType=template_ast_1.PropertyBindingType.Property,!this._schemaRegistry.hasProperty(elementName,boundPropertyName,this._schemas)){var errorMsg="Can't bind to '"+boundPropertyName+"' since it isn't a known property of '"+elementName+"'.";elementName.indexOf("-")!==-1&&(errorMsg+="\n1. If '"+elementName+"' is an Angular component and it has '"+boundPropertyName+"' input, then verify that it is part of this module."+("\n2. If '"+elementName+"' is a Web Component then add \"CUSTOM_ELEMENTS_SCHEMA\" to the '@NgModule.schema' of this component to suppress this message.\n")),this._reportError(errorMsg,sourceSpan)}}else if(parts[0]==ATTRIBUTE_PREFIX){boundPropertyName=parts[1],boundPropertyName.toLowerCase().startsWith("on")&&this._reportError("Binding to event attribute '"+boundPropertyName+"' is disallowed "+("for security reasons, please use ("+boundPropertyName.slice(2)+")=..."),sourceSpan),securityContext=this._schemaRegistry.securityContext(elementName,this._schemaRegistry.getMappedPropName(boundPropertyName));var nsSeparatorIdx=boundPropertyName.indexOf(":");if(nsSeparatorIdx>-1){var ns=boundPropertyName.substring(0,nsSeparatorIdx),name_1=boundPropertyName.substring(nsSeparatorIdx+1);boundPropertyName=tags_1.mergeNsAndName(ns,name_1)}bindingType=template_ast_1.PropertyBindingType.Attribute}else parts[0]==CLASS_PREFIX?(boundPropertyName=parts[1],bindingType=template_ast_1.PropertyBindingType.Class,securityContext=core_1.SecurityContext.NONE):parts[0]==STYLE_PREFIX?(unit=parts.length>2?parts[2]:null,boundPropertyName=parts[1],bindingType=template_ast_1.PropertyBindingType.Style,securityContext=core_1.SecurityContext.STYLE):(this._reportError("Invalid property name '"+name+"'",sourceSpan),bindingType=null,securityContext=null);return new template_ast_1.BoundElementPropertyAst(boundPropertyName,bindingType,securityContext,ast,unit,sourceSpan)},TemplateParseVisitor.prototype._findComponentDirectiveNames=function(directives){var componentTypeNames=[];return directives.forEach(function(directive){var typeName=directive.directive.type.name;directive.directive.isComponent&&componentTypeNames.push(typeName)}),componentTypeNames},TemplateParseVisitor.prototype._assertOnlyOneComponent=function(directives,sourceSpan){var componentTypeNames=this._findComponentDirectiveNames(directives);componentTypeNames.length>1&&this._reportError("More than one component: "+componentTypeNames.join(","),sourceSpan)},TemplateParseVisitor.prototype._assertNoComponentsNorElementBindingsOnTemplate=function(directives,elementProps,sourceSpan){var _this=this,componentTypeNames=this._findComponentDirectiveNames(directives);componentTypeNames.length>0&&this._reportError("Components on an embedded template: "+componentTypeNames.join(","),sourceSpan),elementProps.forEach(function(prop){_this._reportError("Property binding "+prop.name+' not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the "directives" section.',sourceSpan)})},TemplateParseVisitor.prototype._assertAllEventsPublishedByDirectives=function(directives,events){var _this=this,allDirectiveEvents=new Set;directives.forEach(function(directive){collection_1.StringMapWrapper.forEach(directive.directive.outputs,function(eventName){allDirectiveEvents.add(eventName)})}),events.forEach(function(event){!lang_1.isPresent(event.target)&&collection_1.SetWrapper.has(allDirectiveEvents,event.name)||_this._reportError("Event binding "+event.fullName+' not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the "directives" section.',event.sourceSpan)})},TemplateParseVisitor;
}(),NonBindableVisitor=function(){function NonBindableVisitor(){}return NonBindableVisitor.prototype.visitElement=function(ast,parent){var preparsedElement=template_preparser_1.preparseElement(ast);if(preparsedElement.type===template_preparser_1.PreparsedElementType.SCRIPT||preparsedElement.type===template_preparser_1.PreparsedElementType.STYLE||preparsedElement.type===template_preparser_1.PreparsedElementType.STYLESHEET)return null;var attrNameAndValues=ast.attrs.map(function(attrAst){return[attrAst.name,attrAst.value]}),selector=createElementCssSelector(ast.name,attrNameAndValues),ngContentIndex=parent.findNgContentIndex(selector),children=html.visitAll(this,ast.children,EMPTY_ELEMENT_CONTEXT);return new template_ast_1.ElementAst(ast.name,html.visitAll(this,ast.attrs),[],[],[],[],[],(!1),children,ngContentIndex,ast.sourceSpan)},NonBindableVisitor.prototype.visitComment=function(comment,context){return null},NonBindableVisitor.prototype.visitAttribute=function(attribute,context){return new template_ast_1.AttrAst(attribute.name,attribute.value,attribute.sourceSpan)},NonBindableVisitor.prototype.visitText=function(text,parent){var ngContentIndex=parent.findNgContentIndex(TEXT_CSS_SELECTOR);return new template_ast_1.TextAst(text.value,ngContentIndex,text.sourceSpan)},NonBindableVisitor.prototype.visitExpansion=function(expansion,context){return expansion},NonBindableVisitor.prototype.visitExpansionCase=function(expansionCase,context){return expansionCase},NonBindableVisitor}(),BoundElementOrDirectiveProperty=function(){function BoundElementOrDirectiveProperty(name,expression,isLiteral,sourceSpan){this.name=name,this.expression=expression,this.isLiteral=isLiteral,this.sourceSpan=sourceSpan}return BoundElementOrDirectiveProperty}(),ElementOrDirectiveRef=function(){function ElementOrDirectiveRef(name,value,sourceSpan){this.name=name,this.value=value,this.sourceSpan=sourceSpan}return ElementOrDirectiveRef}();exports.splitClasses=splitClasses;var ElementContext=function(){function ElementContext(isTemplateElement,_ngContentIndexMatcher,_wildcardNgContentIndex,providerContext){this.isTemplateElement=isTemplateElement,this._ngContentIndexMatcher=_ngContentIndexMatcher,this._wildcardNgContentIndex=_wildcardNgContentIndex,this.providerContext=providerContext}return ElementContext.create=function(isTemplateElement,directives,providerContext){var matcher=new selector_1.SelectorMatcher,wildcardNgContentIndex=null,component=directives.find(function(directive){return directive.directive.isComponent});if(lang_1.isPresent(component))for(var ngContentSelectors=component.directive.template.ngContentSelectors,i=0;i<ngContentSelectors.length;i++){var selector=ngContentSelectors[i];"*"===selector?wildcardNgContentIndex=i:matcher.addSelectables(selector_1.CssSelector.parse(ngContentSelectors[i]),i)}return new ElementContext(isTemplateElement,matcher,wildcardNgContentIndex,providerContext)},ElementContext.prototype.findNgContentIndex=function(selector){var ngContentIndices=[];return this._ngContentIndexMatcher.match(selector,function(selector,ngContentIndex){ngContentIndices.push(ngContentIndex)}),collection_1.ListWrapper.sort(ngContentIndices),lang_1.isPresent(this._wildcardNgContentIndex)&&ngContentIndices.push(this._wildcardNgContentIndex),ngContentIndices.length>0?ngContentIndices[0]:null},ElementContext}(),EMPTY_ELEMENT_CONTEXT=new ElementContext((!0),new selector_1.SelectorMatcher,null,null),NON_BINDABLE_VISITOR=new NonBindableVisitor,PipeCollector=function(_super){function PipeCollector(){_super.apply(this,arguments),this.pipes=new Set}return __extends(PipeCollector,_super),PipeCollector.prototype.visitPipe=function(ast,context){return this.pipes.add(ast.name),ast.exp.visit(this),this.visitAll(ast.args,context),null},PipeCollector}(ast_1.RecursiveAstVisitor);exports.PipeCollector=PipeCollector},{"../../core_private":64,"../compile_metadata":73,"../expression_parser/ast":78,"../expression_parser/parser":80,"../facade/collection":82,"../facade/exceptions":84,"../facade/lang":85,"../identifiers":98,"../ml_parser/ast":101,"../ml_parser/html_parser":102,"../ml_parser/icu_ast_expander":104,"../ml_parser/interpolation_config":105,"../ml_parser/tags":108,"../parse_util":122,"../provider_analyzer":124,"../schema/element_schema_registry":128,"../selector":129,"../style_url_resolver":132,"../util":137,"./template_ast":133,"./template_preparser":135,"@angular/core":154}],135:[function(require,module,exports){"use strict";function preparseElement(ast){var selectAttr=null,hrefAttr=null,relAttr=null,nonBindable=!1,projectAs=null;ast.attrs.forEach(function(attr){var lcAttrName=attr.name.toLowerCase();lcAttrName==NG_CONTENT_SELECT_ATTR?selectAttr=attr.value:lcAttrName==LINK_STYLE_HREF_ATTR?hrefAttr=attr.value:lcAttrName==LINK_STYLE_REL_ATTR?relAttr=attr.value:attr.name==NG_NON_BINDABLE_ATTR?nonBindable=!0:attr.name==NG_PROJECT_AS&&attr.value.length>0&&(projectAs=attr.value)}),selectAttr=normalizeNgContentSelect(selectAttr);var nodeName=ast.name.toLowerCase(),type=PreparsedElementType.OTHER;return tags_1.splitNsName(nodeName)[1]==NG_CONTENT_ELEMENT?type=PreparsedElementType.NG_CONTENT:nodeName==STYLE_ELEMENT?type=PreparsedElementType.STYLE:nodeName==SCRIPT_ELEMENT?type=PreparsedElementType.SCRIPT:nodeName==LINK_ELEMENT&&relAttr==LINK_STYLE_REL_VALUE&&(type=PreparsedElementType.STYLESHEET),new PreparsedElement(type,selectAttr,hrefAttr,nonBindable,projectAs)}function normalizeNgContentSelect(selectAttr){return null===selectAttr||0===selectAttr.length?"*":selectAttr}var tags_1=require("../ml_parser/tags"),NG_CONTENT_SELECT_ATTR="select",NG_CONTENT_ELEMENT="ng-content",LINK_ELEMENT="link",LINK_STYLE_REL_ATTR="rel",LINK_STYLE_HREF_ATTR="href",LINK_STYLE_REL_VALUE="stylesheet",STYLE_ELEMENT="style",SCRIPT_ELEMENT="script",NG_NON_BINDABLE_ATTR="ngNonBindable",NG_PROJECT_AS="ngProjectAs";exports.preparseElement=preparseElement,function(PreparsedElementType){PreparsedElementType[PreparsedElementType.NG_CONTENT=0]="NG_CONTENT",PreparsedElementType[PreparsedElementType.STYLE=1]="STYLE",PreparsedElementType[PreparsedElementType.STYLESHEET=2]="STYLESHEET",PreparsedElementType[PreparsedElementType.SCRIPT=3]="SCRIPT",PreparsedElementType[PreparsedElementType.OTHER=4]="OTHER"}(exports.PreparsedElementType||(exports.PreparsedElementType={}));var PreparsedElementType=exports.PreparsedElementType,PreparsedElement=function(){function PreparsedElement(type,selectAttr,hrefAttr,nonBindable,projectAs){this.type=type,this.selectAttr=selectAttr,this.hrefAttr=hrefAttr,this.nonBindable=nonBindable,this.projectAs=projectAs}return PreparsedElement}();exports.PreparsedElement=PreparsedElement},{"../ml_parser/tags":108}],136:[function(require,module,exports){"use strict";function createUrlResolverWithoutPackagePrefix(){return new UrlResolver}function createOfflineCompileUrlResolver(){return new UrlResolver(_ASSET_SCHEME)}function getUrlScheme(url){var match=_split(url);return match&&match[_ComponentIndex.Scheme]||""}function _buildFromEncodedParts(opt_scheme,opt_userInfo,opt_domain,opt_port,opt_path,opt_queryData,opt_fragment){var out=[];return lang_1.isPresent(opt_scheme)&&out.push(opt_scheme+":"),lang_1.isPresent(opt_domain)&&(out.push("//"),lang_1.isPresent(opt_userInfo)&&out.push(opt_userInfo+"@"),out.push(opt_domain),lang_1.isPresent(opt_port)&&out.push(":"+opt_port)),lang_1.isPresent(opt_path)&&out.push(opt_path),lang_1.isPresent(opt_queryData)&&out.push("?"+opt_queryData),lang_1.isPresent(opt_fragment)&&out.push("#"+opt_fragment),out.join("")}function _split(uri){return uri.match(_splitRe)}function _removeDotSegments(path){if("/"==path)return"/";for(var leadingSlash="/"==path[0]?"/":"",trailingSlash="/"===path[path.length-1]?"/":"",segments=path.split("/"),out=[],up=0,pos=0;pos<segments.length;pos++){var segment=segments[pos];switch(segment){case"":case".":break;case"..":out.length>0?out.pop():up++;break;default:out.push(segment)}}if(""==leadingSlash){for(;up-- >0;)out.unshift("..");0===out.length&&out.push(".")}return leadingSlash+out.join("/")+trailingSlash}function _joinAndCanonicalizePath(parts){var path=parts[_ComponentIndex.Path];return path=lang_1.isBlank(path)?"":_removeDotSegments(path),parts[_ComponentIndex.Path]=path,_buildFromEncodedParts(parts[_ComponentIndex.Scheme],parts[_ComponentIndex.UserInfo],parts[_ComponentIndex.Domain],parts[_ComponentIndex.Port],path,parts[_ComponentIndex.QueryData],parts[_ComponentIndex.Fragment])}function _resolveUrl(base,url){var parts=_split(encodeURI(url)),baseParts=_split(base);if(lang_1.isPresent(parts[_ComponentIndex.Scheme]))return _joinAndCanonicalizePath(parts);parts[_ComponentIndex.Scheme]=baseParts[_ComponentIndex.Scheme];for(var i=_ComponentIndex.Scheme;i<=_ComponentIndex.Port;i++)lang_1.isBlank(parts[i])&&(parts[i]=baseParts[i]);if("/"==parts[_ComponentIndex.Path][0])return _joinAndCanonicalizePath(parts);var path=baseParts[_ComponentIndex.Path];lang_1.isBlank(path)&&(path="/");var index=path.lastIndexOf("/");return path=path.substring(0,index+1)+parts[_ComponentIndex.Path],parts[_ComponentIndex.Path]=path,_joinAndCanonicalizePath(parts)}var core_1=require("@angular/core"),lang_1=require("./facade/lang"),_ASSET_SCHEME="asset:";exports.createUrlResolverWithoutPackagePrefix=createUrlResolverWithoutPackagePrefix,exports.createOfflineCompileUrlResolver=createOfflineCompileUrlResolver,exports.DEFAULT_PACKAGE_URL_PROVIDER={provide:core_1.PACKAGE_ROOT_URL,useValue:"/"};var UrlResolver=function(){function UrlResolver(_packagePrefix){void 0===_packagePrefix&&(_packagePrefix=null),this._packagePrefix=_packagePrefix}return UrlResolver.prototype.resolve=function(baseUrl,url){var resolvedUrl=url;lang_1.isPresent(baseUrl)&&baseUrl.length>0&&(resolvedUrl=_resolveUrl(baseUrl,resolvedUrl));var resolvedParts=_split(resolvedUrl),prefix=this._packagePrefix;if(lang_1.isPresent(prefix)&&lang_1.isPresent(resolvedParts)&&"package"==resolvedParts[_ComponentIndex.Scheme]){var path=resolvedParts[_ComponentIndex.Path];if(this._packagePrefix!==_ASSET_SCHEME)return prefix=lang_1.StringWrapper.stripRight(prefix,"/"),path=lang_1.StringWrapper.stripLeft(path,"/"),prefix+"/"+path;var pathSegements=path.split(/\//);resolvedUrl="asset:"+pathSegements[0]+"/lib/"+pathSegements.slice(1).join("/")}return resolvedUrl},UrlResolver.decorators=[{type:core_1.Injectable}],UrlResolver.ctorParameters=[{type:void 0,decorators:[{type:core_1.Inject,args:[core_1.PACKAGE_ROOT_URL]}]}],UrlResolver}();exports.UrlResolver=UrlResolver,exports.getUrlScheme=getUrlScheme;var _ComponentIndex,_splitRe=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");!function(_ComponentIndex){_ComponentIndex[_ComponentIndex.Scheme=1]="Scheme",_ComponentIndex[_ComponentIndex.UserInfo=2]="UserInfo",_ComponentIndex[_ComponentIndex.Domain=3]="Domain",_ComponentIndex[_ComponentIndex.Port=4]="Port",_ComponentIndex[_ComponentIndex.Path=5]="Path",_ComponentIndex[_ComponentIndex.QueryData=6]="QueryData",_ComponentIndex[_ComponentIndex.Fragment=7]="Fragment"}(_ComponentIndex||(_ComponentIndex={}))},{"./facade/lang":85,"@angular/core":154}],137:[function(require,module,exports){"use strict";function camelCaseToDashCase(input){return lang_1.StringWrapper.replaceAllMapped(input,CAMEL_CASE_REGEXP,function(m){return"-"+m[1].toLowerCase()})}function splitAtColon(input,defaultValues){var colonIndex=input.indexOf(":");return colonIndex==-1?defaultValues:[input.slice(0,colonIndex).trim(),input.slice(colonIndex+1).trim()]}function sanitizeIdentifier(name){return lang_1.StringWrapper.replaceAll(name,/\W/g,"_")}function visitValue(value,visitor,context){return lang_1.isArray(value)?visitor.visitArray(value,context):lang_1.isStrictStringMap(value)?visitor.visitStringMap(value,context):lang_1.isBlank(value)||lang_1.isPrimitive(value)?visitor.visitPrimitive(value,context):visitor.visitOther(value,context)}function assetUrl(pkg,path,type){return void 0===path&&(path=null),void 0===type&&(type="src"),null==path?"asset:@angular/lib/"+pkg+"/index":"asset:@angular/lib/"+pkg+"/src/"+path}function createDiTokenExpression(token){return lang_1.isPresent(token.value)?o.literal(token.value):token.identifierIsInstance?o.importExpr(token.identifier).instantiate([],o.importType(token.identifier,[],[o.TypeModifier.Const])):o.importExpr(token.identifier)}var collection_1=require("./facade/collection"),lang_1=require("./facade/lang"),o=require("./output/output_ast");exports.MODULE_SUFFIX="";var CAMEL_CASE_REGEXP=/([A-Z])/g;exports.camelCaseToDashCase=camelCaseToDashCase,exports.splitAtColon=splitAtColon,exports.sanitizeIdentifier=sanitizeIdentifier,exports.visitValue=visitValue;var ValueTransformer=function(){function ValueTransformer(){}return ValueTransformer.prototype.visitArray=function(arr,context){var _this=this;return arr.map(function(value){return visitValue(value,_this,context)})},ValueTransformer.prototype.visitStringMap=function(map,context){var _this=this,result={};return collection_1.StringMapWrapper.forEach(map,function(value,key){result[key]=visitValue(value,_this,context)}),result},ValueTransformer.prototype.visitPrimitive=function(value,context){return value},ValueTransformer.prototype.visitOther=function(value,context){return value},ValueTransformer}();exports.ValueTransformer=ValueTransformer,exports.assetUrl=assetUrl,exports.createDiTokenExpression=createDiTokenExpression;var SyncAsyncResult=function(){function SyncAsyncResult(syncResult,asyncResult){void 0===asyncResult&&(asyncResult=null),this.syncResult=syncResult,this.asyncResult=asyncResult,asyncResult||(this.asyncResult=Promise.resolve(syncResult))}return SyncAsyncResult}();exports.SyncAsyncResult=SyncAsyncResult},{"./facade/collection":82,"./facade/lang":85,"./output/output_ast":116}],138:[function(require,module,exports){"use strict";var CompileBinding=function(){function CompileBinding(node,sourceAst){this.node=node,this.sourceAst=sourceAst}return CompileBinding}();exports.CompileBinding=CompileBinding},{}],139:[function(require,module,exports){"use strict";function createInjectInternalCondition(nodeIndex,childNodeCount,provider,providerExpr){var indexCondition;return indexCondition=childNodeCount>0?o.literal(nodeIndex).lowerEquals(constants_1.InjectMethodVars.requestNodeIndex).and(constants_1.InjectMethodVars.requestNodeIndex.lowerEquals(o.literal(nodeIndex+childNodeCount))):o.literal(nodeIndex).identical(constants_1.InjectMethodVars.requestNodeIndex),new o.IfStmt(constants_1.InjectMethodVars.token.identical(util_1.createDiTokenExpression(provider.token)).and(indexCondition),[new o.ReturnStatement(providerExpr)])}function createProviderProperty(propName,provider,providerValueExpressions,isMulti,isEager,compileElement){var resolvedProviderValueExpr,type,view=compileElement.view;if(isMulti?(resolvedProviderValueExpr=o.literalArr(providerValueExpressions),type=new o.ArrayType(o.DYNAMIC_TYPE)):(resolvedProviderValueExpr=providerValueExpressions[0],type=providerValueExpressions[0].type),lang_1.isBlank(type)&&(type=o.DYNAMIC_TYPE),isEager)view.fields.push(new o.ClassField(propName,type)),view.createMethod.addStmt(o.THIS_EXPR.prop(propName).set(resolvedProviderValueExpr).toStmt());else{var internalField="_"+propName;view.fields.push(new o.ClassField(internalField,type));var getter=new compile_method_1.CompileMethod(view);getter.resetDebugInfo(compileElement.nodeIndex,compileElement.sourceAst),getter.addStmt(new o.IfStmt(o.THIS_EXPR.prop(internalField).isBlank(),[o.THIS_EXPR.prop(internalField).set(resolvedProviderValueExpr).toStmt()])),getter.addStmt(new o.ReturnStatement(o.THIS_EXPR.prop(internalField))),view.getters.push(new o.ClassGetter(propName,getter.finish(),type))}return o.THIS_EXPR.prop(propName)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},compile_metadata_1=require("../compile_metadata"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),value_util_1=require("../output/value_util"),template_ast_1=require("../template_parser/template_ast"),util_1=require("../util"),compile_method_1=require("./compile_method"),compile_query_1=require("./compile_query"),constants_1=require("./constants"),util_2=require("./util"),CompileNode=function(){function CompileNode(parent,view,nodeIndex,renderNode,sourceAst){this.parent=parent,this.view=view,this.nodeIndex=nodeIndex,this.renderNode=renderNode,this.sourceAst=sourceAst}return CompileNode.prototype.isNull=function(){return lang_1.isBlank(this.renderNode)},CompileNode.prototype.isRootElement=function(){return this.view!=this.parent.view},CompileNode}();exports.CompileNode=CompileNode;var CompileElement=function(_super){function CompileElement(parent,view,nodeIndex,renderNode,sourceAst,component,_directives,_resolvedProvidersArray,hasViewContainer,hasEmbeddedView,references){var _this=this;_super.call(this,parent,view,nodeIndex,renderNode,sourceAst),this.component=component,this._directives=_directives,this._resolvedProvidersArray=_resolvedProvidersArray,this.hasViewContainer=hasViewContainer,this.hasEmbeddedView=hasEmbeddedView,this._compViewExpr=null,this.instances=new compile_metadata_1.CompileIdentifierMap,this._queryCount=0,this._queries=new compile_metadata_1.CompileIdentifierMap,this._componentConstructorViewQueryLists=[],this.contentNodesByNgContentIndex=null,this.referenceTokens={},references.forEach(function(ref){return _this.referenceTokens[ref.name]=ref.value}),this.elementRef=o.importExpr(identifiers_1.Identifiers.ElementRef).instantiate([this.renderNode]),this.instances.add(identifiers_1.identifierToken(identifiers_1.Identifiers.ElementRef),this.elementRef),this.injector=o.THIS_EXPR.callMethod("injector",[o.literal(this.nodeIndex)]),this.instances.add(identifiers_1.identifierToken(identifiers_1.Identifiers.Injector),this.injector),this.instances.add(identifiers_1.identifierToken(identifiers_1.Identifiers.Renderer),o.THIS_EXPR.prop("renderer")),(this.hasViewContainer||this.hasEmbeddedView||lang_1.isPresent(this.component))&&this._createAppElement()}return __extends(CompileElement,_super),CompileElement.createNull=function(){return new CompileElement(null,null,null,null,null,null,[],[],(!1),(!1),[])},CompileElement.prototype._createAppElement=function(){var fieldName="_appEl_"+this.nodeIndex,parentNodeIndex=this.isRootElement()?null:this.parent.nodeIndex;this.view.fields.push(new o.ClassField(fieldName,o.importType(identifiers_1.Identifiers.AppElement),[o.StmtModifier.Private]));var statement=o.THIS_EXPR.prop(fieldName).set(o.importExpr(identifiers_1.Identifiers.AppElement).instantiate([o.literal(this.nodeIndex),o.literal(parentNodeIndex),o.THIS_EXPR,this.renderNode])).toStmt();this.view.createMethod.addStmt(statement),this.appElement=o.THIS_EXPR.prop(fieldName),this.instances.add(identifiers_1.identifierToken(identifiers_1.Identifiers.AppElement),this.appElement)},CompileElement.prototype.createComponentFactoryResolver=function(entryComponents){if(entryComponents&&0!==entryComponents.length){var createComponentFactoryResolverExpr=o.importExpr(identifiers_1.Identifiers.CodegenComponentFactoryResolver).instantiate([o.literalArr(entryComponents.map(function(entryComponent){return o.importExpr(entryComponent)})),util_2.injectFromViewParentInjector(identifiers_1.identifierToken(identifiers_1.Identifiers.ComponentFactoryResolver),!1)]),provider=new compile_metadata_1.CompileProviderMetadata({token:identifiers_1.identifierToken(identifiers_1.Identifiers.ComponentFactoryResolver),useValue:createComponentFactoryResolverExpr});this._resolvedProvidersArray.unshift(new template_ast_1.ProviderAst(provider.token,(!1),(!0),[provider],template_ast_1.ProviderAstType.PrivateService,[],this.sourceAst.sourceSpan))}},CompileElement.prototype.setComponentView=function(compViewExpr){this._compViewExpr=compViewExpr,this.contentNodesByNgContentIndex=collection_1.ListWrapper.createFixedSize(this.component.template.ngContentSelectors.length);for(var i=0;i<this.contentNodesByNgContentIndex.length;i++)this.contentNodesByNgContentIndex[i]=[]},CompileElement.prototype.setEmbeddedView=function(embeddedView){if(this.embeddedView=embeddedView,lang_1.isPresent(embeddedView)){var createTemplateRefExpr=o.importExpr(identifiers_1.Identifiers.TemplateRef_).instantiate([this.appElement,this.embeddedView.viewFactory]),provider=new compile_metadata_1.CompileProviderMetadata({token:identifiers_1.identifierToken(identifiers_1.Identifiers.TemplateRef),useValue:createTemplateRefExpr});this._resolvedProvidersArray.unshift(new template_ast_1.ProviderAst(provider.token,(!1),(!0),[provider],template_ast_1.ProviderAstType.Builtin,[],this.sourceAst.sourceSpan))}},CompileElement.prototype.beforeChildren=function(){var _this=this;this.hasViewContainer&&this.instances.add(identifiers_1.identifierToken(identifiers_1.Identifiers.ViewContainerRef),this.appElement.prop("vcRef")),this._resolvedProviders=new compile_metadata_1.CompileIdentifierMap,this._resolvedProvidersArray.forEach(function(provider){return _this._resolvedProviders.add(provider.token,provider)}),this._resolvedProviders.values().forEach(function(resolvedProvider){var providerValueExpressions=resolvedProvider.providers.map(function(provider){if(lang_1.isPresent(provider.useExisting))return _this._getDependency(resolvedProvider.providerType,new compile_metadata_1.CompileDiDependencyMetadata({token:provider.useExisting}));if(lang_1.isPresent(provider.useFactory)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useFactory.diDeps,depsExpr=deps.map(function(dep){return _this._getDependency(resolvedProvider.providerType,dep)});return o.importExpr(provider.useFactory).callFn(depsExpr)}if(lang_1.isPresent(provider.useClass)){var deps=lang_1.isPresent(provider.deps)?provider.deps:provider.useClass.diDeps,depsExpr=deps.map(function(dep){return _this._getDependency(resolvedProvider.providerType,dep)});return o.importExpr(provider.useClass).instantiate(depsExpr,o.importType(provider.useClass))}return value_util_1.convertValueToOutputAst(provider.useValue)}),propName="_"+resolvedProvider.token.name+"_"+_this.nodeIndex+"_"+_this.instances.size,instance=createProviderProperty(propName,resolvedProvider,providerValueExpressions,resolvedProvider.multiProvider,resolvedProvider.eager,_this);_this.instances.add(resolvedProvider.token,instance)});for(var i=0;i<this._directives.length;i++){var directive=this._directives[i],directiveInstance=this.instances.get(identifiers_1.identifierToken(directive.type));directive.queries.forEach(function(queryMeta){_this._addQuery(queryMeta,directiveInstance)})}var queriesWithReads=[];if(this._resolvedProviders.values().forEach(function(resolvedProvider){var queriesForProvider=_this._getQueriesFor(resolvedProvider.token);collection_1.ListWrapper.addAll(queriesWithReads,queriesForProvider.map(function(query){return new _QueryWithRead(query,resolvedProvider.token)}))}),collection_1.StringMapWrapper.forEach(this.referenceTokens,function(_,varName){var varValue,token=_this.referenceTokens[varName];varValue=lang_1.isPresent(token)?_this.instances.get(token):_this.renderNode,_this.view.locals.set(varName,varValue);var varToken=new compile_metadata_1.CompileTokenMetadata({value:varName});collection_1.ListWrapper.addAll(queriesWithReads,_this._getQueriesFor(varToken).map(function(query){return new _QueryWithRead(query,varToken)}))}),queriesWithReads.forEach(function(queryWithRead){var value;if(lang_1.isPresent(queryWithRead.read.identifier))value=_this.instances.get(queryWithRead.read);else{var token=_this.referenceTokens[queryWithRead.read.value];value=lang_1.isPresent(token)?_this.instances.get(token):_this.elementRef}lang_1.isPresent(value)&&queryWithRead.query.addValue(value,_this.view)}),lang_1.isPresent(this.component)){var componentConstructorViewQueryList=lang_1.isPresent(this.component)?o.literalArr(this._componentConstructorViewQueryLists):o.NULL_EXPR,compExpr=lang_1.isPresent(this.getComponent())?this.getComponent():o.NULL_EXPR;this.view.createMethod.addStmt(this.appElement.callMethod("initComponent",[compExpr,componentConstructorViewQueryList,this._compViewExpr]).toStmt())}},CompileElement.prototype.afterChildren=function(childNodeCount){var _this=this;this._resolvedProviders.values().forEach(function(resolvedProvider){var providerExpr=_this.instances.get(resolvedProvider.token),providerChildNodeCount=resolvedProvider.providerType===template_ast_1.ProviderAstType.PrivateService?0:childNodeCount;_this.view.injectorGetMethod.addStmt(createInjectInternalCondition(_this.nodeIndex,providerChildNodeCount,resolvedProvider,providerExpr))}),this._queries.values().forEach(function(queries){return queries.forEach(function(query){return query.afterChildren(_this.view.createMethod,_this.view.updateContentQueriesMethod)})})},CompileElement.prototype.addContentNode=function(ngContentIndex,nodeExpr){this.contentNodesByNgContentIndex[ngContentIndex].push(nodeExpr)},CompileElement.prototype.getComponent=function(){return lang_1.isPresent(this.component)?this.instances.get(identifiers_1.identifierToken(this.component.type)):null},CompileElement.prototype.getProviderTokens=function(){return this._resolvedProviders.values().map(function(resolvedProvider){return util_1.createDiTokenExpression(resolvedProvider.token)})},CompileElement.prototype._getQueriesFor=function(token){for(var queries,result=[],currentEl=this,distance=0;!currentEl.isNull();)queries=currentEl._queries.get(token),lang_1.isPresent(queries)&&collection_1.ListWrapper.addAll(result,queries.filter(function(query){return query.meta.descendants||distance<=1})),currentEl._directives.length>0&&distance++,currentEl=currentEl.parent;return queries=this.view.componentView.viewQueries.get(token),lang_1.isPresent(queries)&&collection_1.ListWrapper.addAll(result,queries),result},CompileElement.prototype._addQuery=function(queryMeta,directiveInstance){var propName="_query_"+queryMeta.selectors[0].name+"_"+this.nodeIndex+"_"+this._queryCount++,queryList=compile_query_1.createQueryList(queryMeta,directiveInstance,propName,this.view),query=new compile_query_1.CompileQuery(queryMeta,queryList,directiveInstance,this.view);return compile_query_1.addQueryToTokenMap(this._queries,query),query},CompileElement.prototype._getLocalDependency=function(requestingProviderType,dep){var result=null;if(lang_1.isBlank(result)&&lang_1.isPresent(dep.query)&&(result=this._addQuery(dep.query,null).queryList),lang_1.isBlank(result)&&lang_1.isPresent(dep.viewQuery)&&(result=compile_query_1.createQueryList(dep.viewQuery,null,"_viewQuery_"+dep.viewQuery.selectors[0].name+"_"+this.nodeIndex+"_"+this._componentConstructorViewQueryLists.length,this.view),this._componentConstructorViewQueryLists.push(result)),lang_1.isPresent(dep.token)){if(lang_1.isBlank(result)&&dep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ChangeDetectorRef)))return requestingProviderType===template_ast_1.ProviderAstType.Component?this._compViewExpr.prop("ref"):util_2.getPropertyInView(o.THIS_EXPR.prop("ref"),this.view,this.view.componentView);if(lang_1.isBlank(result)){var resolvedProvider=this._resolvedProviders.get(dep.token);if(resolvedProvider&&(requestingProviderType===template_ast_1.ProviderAstType.Directive||requestingProviderType===template_ast_1.ProviderAstType.PublicService)&&resolvedProvider.providerType===template_ast_1.ProviderAstType.PrivateService)return null;result=this.instances.get(dep.token)}}return result},CompileElement.prototype._getDependency=function(requestingProviderType,dep){var currElement=this,result=null;for(dep.isValue&&(result=o.literal(dep.value)),lang_1.isBlank(result)&&!dep.isSkipSelf&&(result=this._getLocalDependency(requestingProviderType,dep));lang_1.isBlank(result)&&!currElement.parent.isNull();)currElement=currElement.parent,result=currElement._getLocalDependency(template_ast_1.ProviderAstType.PublicService,new compile_metadata_1.CompileDiDependencyMetadata({token:dep.token}));return lang_1.isBlank(result)&&(result=util_2.injectFromViewParentInjector(dep.token,dep.isOptional)),lang_1.isBlank(result)&&(result=o.NULL_EXPR),util_2.getPropertyInView(result,this.view,currElement.view)},CompileElement}(CompileNode);exports.CompileElement=CompileElement;var _QueryWithRead=function(){function _QueryWithRead(query,match){this.query=query,this.read=lang_1.isPresent(query.meta.read)?query.meta.read:match}return _QueryWithRead}()},{"../compile_metadata":73,"../facade/collection":82,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"../output/value_util":121,"../template_parser/template_ast":133,"../util":137,"./compile_method":140,"./compile_query":142,"./constants":144,"./util":149}],140:[function(require,module,exports){"use strict";var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),o=require("../output/output_ast"),_DebugState=function(){function _DebugState(nodeIndex,sourceAst){this.nodeIndex=nodeIndex,this.sourceAst=sourceAst}return _DebugState}(),NULL_DEBUG_STATE=new _DebugState(null,null),CompileMethod=function(){function CompileMethod(_view){this._view=_view,this._newState=NULL_DEBUG_STATE,this._currState=NULL_DEBUG_STATE,this._bodyStatements=[],this._debugEnabled=this._view.genConfig.genDebugInfo}return CompileMethod.prototype._updateDebugContextIfNeeded=function(){if(this._newState.nodeIndex!==this._currState.nodeIndex||this._newState.sourceAst!==this._currState.sourceAst){var expr=this._updateDebugContext(this._newState);lang_1.isPresent(expr)&&this._bodyStatements.push(expr.toStmt())}},CompileMethod.prototype._updateDebugContext=function(newState){if(this._currState=this._newState=newState,this._debugEnabled){var sourceLocation=lang_1.isPresent(newState.sourceAst)?newState.sourceAst.sourceSpan.start:null;return o.THIS_EXPR.callMethod("debug",[o.literal(newState.nodeIndex),lang_1.isPresent(sourceLocation)?o.literal(sourceLocation.line):o.NULL_EXPR,lang_1.isPresent(sourceLocation)?o.literal(sourceLocation.col):o.NULL_EXPR])}return null},CompileMethod.prototype.resetDebugInfoExpr=function(nodeIndex,templateAst){var res=this._updateDebugContext(new _DebugState(nodeIndex,templateAst));return lang_1.isPresent(res)?res:o.NULL_EXPR},CompileMethod.prototype.resetDebugInfo=function(nodeIndex,templateAst){this._newState=new _DebugState(nodeIndex,templateAst)},CompileMethod.prototype.addStmt=function(stmt){this._updateDebugContextIfNeeded(),this._bodyStatements.push(stmt)},CompileMethod.prototype.addStmts=function(stmts){this._updateDebugContextIfNeeded(),collection_1.ListWrapper.addAll(this._bodyStatements,stmts)},CompileMethod.prototype.finish=function(){return this._bodyStatements},CompileMethod.prototype.isEmpty=function(){return 0===this._bodyStatements.length},CompileMethod}();exports.CompileMethod=CompileMethod},{"../facade/collection":82,"../facade/lang":85,"../output/output_ast":116}],141:[function(require,module,exports){"use strict";function _findPipeMeta(view,name){for(var pipeMeta=null,i=view.pipeMetas.length-1;i>=0;i--){var localPipeMeta=view.pipeMetas[i];if(localPipeMeta.name==name){pipeMeta=localPipeMeta;break}}if(lang_1.isBlank(pipeMeta))throw new exceptions_1.BaseException("Illegal state: Could not find pipe "+name+" although the parser should have detected this error!");return pipeMeta}var exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),util_1=require("./util"),CompilePipe=function(){function CompilePipe(view,meta){var _this=this;this.view=view,this.meta=meta,this._purePipeProxyCount=0,this.instance=o.THIS_EXPR.prop("_pipe_"+meta.name+"_"+view.pipeCount++);var deps=this.meta.type.diDeps.map(function(diDep){return diDep.token.equalsTo(identifiers_1.identifierToken(identifiers_1.Identifiers.ChangeDetectorRef))?util_1.getPropertyInView(o.THIS_EXPR.prop("ref"),_this.view,_this.view.componentView):util_1.injectFromViewParentInjector(diDep.token,!1);
});this.view.fields.push(new o.ClassField(this.instance.name,o.importType(this.meta.type))),this.view.createMethod.resetDebugInfo(null,null),this.view.createMethod.addStmt(o.THIS_EXPR.prop(this.instance.name).set(o.importExpr(this.meta.type).instantiate(deps)).toStmt())}return CompilePipe.call=function(view,name,args){var pipe,compView=view.componentView,meta=_findPipeMeta(compView,name);return meta.pure?(pipe=compView.purePipes.get(name),lang_1.isBlank(pipe)&&(pipe=new CompilePipe(compView,meta),compView.purePipes.set(name,pipe),compView.pipes.push(pipe))):(pipe=new CompilePipe(view,meta),view.pipes.push(pipe)),pipe._call(view,args)},Object.defineProperty(CompilePipe.prototype,"pure",{get:function(){return this.meta.pure},enumerable:!0,configurable:!0}),CompilePipe.prototype._call=function(callingView,args){if(this.meta.pure){var purePipeProxyInstance=o.THIS_EXPR.prop(this.instance.name+"_"+this._purePipeProxyCount++),pipeInstanceSeenFromPureProxy=util_1.getPropertyInView(this.instance,callingView,this.view);return util_1.createPureProxy(pipeInstanceSeenFromPureProxy.prop("transform").callMethod(o.BuiltinMethod.bind,[pipeInstanceSeenFromPureProxy]),args.length,purePipeProxyInstance,callingView),o.importExpr(identifiers_1.Identifiers.castByValue).callFn([purePipeProxyInstance,pipeInstanceSeenFromPureProxy.prop("transform")]).callFn(args)}return util_1.getPropertyInView(this.instance,callingView,this.view).callMethod("transform",args)},CompilePipe}();exports.CompilePipe=CompilePipe},{"../facade/exceptions":84,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"./util":149}],142:[function(require,module,exports){"use strict";function createQueryValues(viewValues){return collection_1.ListWrapper.flatten(viewValues.values.map(function(entry){return entry instanceof ViewQueryValues?mapNestedViews(entry.view.declarationElement.appElement,entry.view,createQueryValues(entry)):entry}))}function mapNestedViews(declarationAppElement,view,expressions){var adjustedExpressions=expressions.map(function(expr){return o.replaceVarInExpression(o.THIS_EXPR.name,o.variable("nestedView"),expr)});return declarationAppElement.callMethod("mapNestedViews",[o.variable(view.className),o.fn([new o.FnParam("nestedView",view.classType)],[new o.ReturnStatement(o.literalArr(adjustedExpressions))],o.DYNAMIC_TYPE)])}function createQueryList(query,directiveInstance,propertyName,compileView){compileView.fields.push(new o.ClassField(propertyName,o.importType(identifiers_1.Identifiers.QueryList,[o.DYNAMIC_TYPE])));var expr=o.THIS_EXPR.prop(propertyName);return compileView.createMethod.addStmt(o.THIS_EXPR.prop(propertyName).set(o.importExpr(identifiers_1.Identifiers.QueryList,[o.DYNAMIC_TYPE]).instantiate([])).toStmt()),expr}function addQueryToTokenMap(map,query){query.meta.selectors.forEach(function(selector){var entry=map.get(selector);lang_1.isBlank(entry)&&(entry=[],map.add(selector,entry)),entry.push(query)})}var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),util_1=require("./util"),ViewQueryValues=function(){function ViewQueryValues(view,values){this.view=view,this.values=values}return ViewQueryValues}(),CompileQuery=function(){function CompileQuery(meta,queryList,ownerDirectiveExpression,view){this.meta=meta,this.queryList=queryList,this.ownerDirectiveExpression=ownerDirectiveExpression,this.view=view,this._values=new ViewQueryValues(view,[])}return CompileQuery.prototype.addValue=function(value,view){for(var currentView=view,elPath=[];lang_1.isPresent(currentView)&&currentView!==this.view;){var parentEl=currentView.declarationElement;elPath.unshift(parentEl),currentView=parentEl.view}var queryListForDirtyExpr=util_1.getPropertyInView(this.queryList,view,this.view),viewValues=this._values;elPath.forEach(function(el){var last=viewValues.values.length>0?viewValues.values[viewValues.values.length-1]:null;if(last instanceof ViewQueryValues&&last.view===el.embeddedView)viewValues=last;else{var newViewValues=new ViewQueryValues(el.embeddedView,[]);viewValues.values.push(newViewValues),viewValues=newViewValues}}),viewValues.values.push(value),elPath.length>0&&view.dirtyParentQueriesMethod.addStmt(queryListForDirtyExpr.callMethod("setDirty",[]).toStmt())},CompileQuery.prototype._isStatic=function(){return!this._values.values.some(function(value){return value instanceof ViewQueryValues})},CompileQuery.prototype.afterChildren=function(targetStaticMethod,targetDynamicMethod){var values=createQueryValues(this._values),updateStmts=[this.queryList.callMethod("reset",[o.literalArr(values)]).toStmt()];if(lang_1.isPresent(this.ownerDirectiveExpression)){var valueExpr=this.meta.first?this.queryList.prop("first"):this.queryList;updateStmts.push(this.ownerDirectiveExpression.prop(this.meta.propertyName).set(valueExpr).toStmt())}this.meta.first||updateStmts.push(this.queryList.callMethod("notifyOnChanges",[]).toStmt()),this.meta.first&&this._isStatic()?targetStaticMethod.addStmts(updateStmts):targetDynamicMethod.addStmt(new o.IfStmt(this.queryList.prop("dirty"),updateStmts))},CompileQuery}();exports.CompileQuery=CompileQuery,exports.createQueryList=createQueryList,exports.addQueryToTokenMap=addQueryToTokenMap},{"../facade/collection":82,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"./util":149}],143:[function(require,module,exports){"use strict";function getViewType(component,embeddedTemplateIndex){return embeddedTemplateIndex>0?core_private_1.ViewType.EMBEDDED:component.type.isHost?core_private_1.ViewType.HOST:core_private_1.ViewType.COMPONENT}var core_private_1=require("../../core_private"),compile_metadata_1=require("../compile_metadata"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),compile_method_1=require("./compile_method"),compile_pipe_1=require("./compile_pipe"),compile_query_1=require("./compile_query"),constants_1=require("./constants"),util_1=require("./util"),CompileView=function(){function CompileView(component,genConfig,pipeMetas,styles,animations,viewIndex,declarationElement,templateVariableBindings){var _this=this;this.component=component,this.genConfig=genConfig,this.pipeMetas=pipeMetas,this.styles=styles,this.animations=animations,this.viewIndex=viewIndex,this.declarationElement=declarationElement,this.templateVariableBindings=templateVariableBindings,this.nodes=[],this.rootNodesOrAppElements=[],this.bindings=[],this.classStatements=[],this.eventHandlerMethods=[],this.fields=[],this.getters=[],this.disposables=[],this.subscriptions=[],this.purePipes=new Map,this.pipes=[],this.locals=new Map,this.literalArrayCount=0,this.literalMapCount=0,this.pipeCount=0,this.createMethod=new compile_method_1.CompileMethod(this),this.injectorGetMethod=new compile_method_1.CompileMethod(this),this.updateContentQueriesMethod=new compile_method_1.CompileMethod(this),this.dirtyParentQueriesMethod=new compile_method_1.CompileMethod(this),this.updateViewQueriesMethod=new compile_method_1.CompileMethod(this),this.detectChangesInInputsMethod=new compile_method_1.CompileMethod(this),this.detectChangesRenderPropertiesMethod=new compile_method_1.CompileMethod(this),this.afterContentLifecycleCallbacksMethod=new compile_method_1.CompileMethod(this),this.afterViewLifecycleCallbacksMethod=new compile_method_1.CompileMethod(this),this.destroyMethod=new compile_method_1.CompileMethod(this),this.detachMethod=new compile_method_1.CompileMethod(this),this.viewType=getViewType(component,viewIndex),this.className="_View_"+component.type.name+viewIndex,this.classType=o.importType(new compile_metadata_1.CompileIdentifierMetadata({name:this.className})),this.viewFactory=o.variable(util_1.getViewFactoryName(component,viewIndex)),this.viewType===core_private_1.ViewType.COMPONENT||this.viewType===core_private_1.ViewType.HOST?this.componentView=this:this.componentView=this.declarationElement.view.componentView,this.componentContext=util_1.getPropertyInView(o.THIS_EXPR.prop("context"),this,this.componentView);var viewQueries=new compile_metadata_1.CompileIdentifierMap;if(this.viewType===core_private_1.ViewType.COMPONENT){var directiveInstance=o.THIS_EXPR.prop("context");collection_1.ListWrapper.forEachWithIndex(this.component.viewQueries,function(queryMeta,queryIndex){var propName="_viewQuery_"+queryMeta.selectors[0].name+"_"+queryIndex,queryList=compile_query_1.createQueryList(queryMeta,directiveInstance,propName,_this),query=new compile_query_1.CompileQuery(queryMeta,queryList,directiveInstance,_this);compile_query_1.addQueryToTokenMap(viewQueries,query)});var constructorViewQueryCount=0;this.component.type.diDeps.forEach(function(dep){if(lang_1.isPresent(dep.viewQuery)){var queryList=o.THIS_EXPR.prop("declarationAppElement").prop("componentConstructorViewQueries").key(o.literal(constructorViewQueryCount++)),query=new compile_query_1.CompileQuery(dep.viewQuery,queryList,null,_this);compile_query_1.addQueryToTokenMap(viewQueries,query)}})}this.viewQueries=viewQueries,templateVariableBindings.forEach(function(entry){_this.locals.set(entry[1],o.THIS_EXPR.prop("context").prop(entry[0]))}),this.declarationElement.isNull()||this.declarationElement.setEmbeddedView(this)}return CompileView.prototype.callPipe=function(name,input,args){return compile_pipe_1.CompilePipe.call(this,name,[input].concat(args))},CompileView.prototype.getLocal=function(name){if(name==constants_1.EventHandlerVars.event.name)return constants_1.EventHandlerVars.event;for(var currView=this,result=currView.locals.get(name);lang_1.isBlank(result)&&lang_1.isPresent(currView.declarationElement.view);)currView=currView.declarationElement.view,result=currView.locals.get(name);return lang_1.isPresent(result)?util_1.getPropertyInView(result,this,currView):null},CompileView.prototype.createLiteralArray=function(values){if(0===values.length)return o.importExpr(identifiers_1.Identifiers.EMPTY_ARRAY);for(var proxyExpr=o.THIS_EXPR.prop("_arr_"+this.literalArrayCount++),proxyParams=[],proxyReturnEntries=[],i=0;i<values.length;i++){var paramName="p"+i;proxyParams.push(new o.FnParam(paramName)),proxyReturnEntries.push(o.variable(paramName))}return util_1.createPureProxy(o.fn(proxyParams,[new o.ReturnStatement(o.literalArr(proxyReturnEntries))],new o.ArrayType(o.DYNAMIC_TYPE)),values.length,proxyExpr,this),proxyExpr.callFn(values)},CompileView.prototype.createLiteralMap=function(entries){if(0===entries.length)return o.importExpr(identifiers_1.Identifiers.EMPTY_MAP);for(var proxyExpr=o.THIS_EXPR.prop("_map_"+this.literalMapCount++),proxyParams=[],proxyReturnEntries=[],values=[],i=0;i<entries.length;i++){var paramName="p"+i;proxyParams.push(new o.FnParam(paramName)),proxyReturnEntries.push([entries[i][0],o.variable(paramName)]),values.push(entries[i][1])}return util_1.createPureProxy(o.fn(proxyParams,[new o.ReturnStatement(o.literalMap(proxyReturnEntries))],new o.MapType(o.DYNAMIC_TYPE)),entries.length,proxyExpr,this),proxyExpr.callFn(values)},CompileView.prototype.afterNodes=function(){var _this=this;this.viewQueries.values().forEach(function(queries){return queries.forEach(function(query){return query.afterChildren(_this.createMethod,_this.updateViewQueriesMethod)})})},CompileView}();exports.CompileView=CompileView},{"../../core_private":64,"../compile_metadata":73,"../facade/collection":82,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"./compile_method":140,"./compile_pipe":141,"./compile_query":142,"./constants":144,"./util":149}],144:[function(require,module,exports){"use strict";function _enumExpression(classIdentifier,value){if(lang_1.isBlank(value))return o.NULL_EXPR;var name=lang_1.resolveEnumToken(classIdentifier.runtime,value);return o.importExpr(new compile_metadata_1.CompileIdentifierMetadata({name:classIdentifier.name+"."+name,moduleUrl:classIdentifier.moduleUrl,runtime:value}))}var core_1=require("@angular/core"),core_private_1=require("../../core_private"),compile_metadata_1=require("../compile_metadata"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),ViewTypeEnum=function(){function ViewTypeEnum(){}return ViewTypeEnum.fromValue=function(value){return _enumExpression(identifiers_1.Identifiers.ViewType,value)},ViewTypeEnum.HOST=ViewTypeEnum.fromValue(core_private_1.ViewType.HOST),ViewTypeEnum.COMPONENT=ViewTypeEnum.fromValue(core_private_1.ViewType.COMPONENT),ViewTypeEnum.EMBEDDED=ViewTypeEnum.fromValue(core_private_1.ViewType.EMBEDDED),ViewTypeEnum}();exports.ViewTypeEnum=ViewTypeEnum;var ViewEncapsulationEnum=function(){function ViewEncapsulationEnum(){}return ViewEncapsulationEnum.fromValue=function(value){return _enumExpression(identifiers_1.Identifiers.ViewEncapsulation,value)},ViewEncapsulationEnum.Emulated=ViewEncapsulationEnum.fromValue(core_1.ViewEncapsulation.Emulated),ViewEncapsulationEnum.Native=ViewEncapsulationEnum.fromValue(core_1.ViewEncapsulation.Native),ViewEncapsulationEnum.None=ViewEncapsulationEnum.fromValue(core_1.ViewEncapsulation.None),ViewEncapsulationEnum}();exports.ViewEncapsulationEnum=ViewEncapsulationEnum;var ChangeDetectionStrategyEnum=function(){function ChangeDetectionStrategyEnum(){}return ChangeDetectionStrategyEnum.fromValue=function(value){return _enumExpression(identifiers_1.Identifiers.ChangeDetectionStrategy,value)},ChangeDetectionStrategyEnum.OnPush=ChangeDetectionStrategyEnum.fromValue(core_1.ChangeDetectionStrategy.OnPush),ChangeDetectionStrategyEnum.Default=ChangeDetectionStrategyEnum.fromValue(core_1.ChangeDetectionStrategy.Default),ChangeDetectionStrategyEnum}();exports.ChangeDetectionStrategyEnum=ChangeDetectionStrategyEnum;var ChangeDetectorStatusEnum=function(){function ChangeDetectorStatusEnum(){}return ChangeDetectorStatusEnum.fromValue=function(value){return _enumExpression(identifiers_1.Identifiers.ChangeDetectorStatus,value)},ChangeDetectorStatusEnum.CheckOnce=ChangeDetectorStatusEnum.fromValue(core_private_1.ChangeDetectorStatus.CheckOnce),ChangeDetectorStatusEnum.Checked=ChangeDetectorStatusEnum.fromValue(core_private_1.ChangeDetectorStatus.Checked),ChangeDetectorStatusEnum.CheckAlways=ChangeDetectorStatusEnum.fromValue(core_private_1.ChangeDetectorStatus.CheckAlways),ChangeDetectorStatusEnum.Detached=ChangeDetectorStatusEnum.fromValue(core_private_1.ChangeDetectorStatus.Detached),ChangeDetectorStatusEnum.Errored=ChangeDetectorStatusEnum.fromValue(core_private_1.ChangeDetectorStatus.Errored),ChangeDetectorStatusEnum.Destroyed=ChangeDetectorStatusEnum.fromValue(core_private_1.ChangeDetectorStatus.Destroyed),ChangeDetectorStatusEnum}();exports.ChangeDetectorStatusEnum=ChangeDetectorStatusEnum;var ViewConstructorVars=function(){function ViewConstructorVars(){}return ViewConstructorVars.viewUtils=o.variable("viewUtils"),ViewConstructorVars.parentInjector=o.variable("parentInjector"),ViewConstructorVars.declarationEl=o.variable("declarationEl"),ViewConstructorVars}();exports.ViewConstructorVars=ViewConstructorVars;var ViewProperties=function(){function ViewProperties(){}return ViewProperties.renderer=o.THIS_EXPR.prop("renderer"),ViewProperties.projectableNodes=o.THIS_EXPR.prop("projectableNodes"),ViewProperties.viewUtils=o.THIS_EXPR.prop("viewUtils"),ViewProperties}();exports.ViewProperties=ViewProperties;var EventHandlerVars=function(){function EventHandlerVars(){}return EventHandlerVars.event=o.variable("$event"),EventHandlerVars}();exports.EventHandlerVars=EventHandlerVars;var InjectMethodVars=function(){function InjectMethodVars(){}return InjectMethodVars.token=o.variable("token"),InjectMethodVars.requestNodeIndex=o.variable("requestNodeIndex"),InjectMethodVars.notFoundResult=o.variable("notFoundResult"),InjectMethodVars}();exports.InjectMethodVars=InjectMethodVars;var DetectChangesVars=function(){function DetectChangesVars(){}return DetectChangesVars.throwOnChange=o.variable("throwOnChange"),DetectChangesVars.changes=o.variable("changes"),DetectChangesVars.changed=o.variable("changed"),DetectChangesVars.valUnwrapper=o.variable("valUnwrapper"),DetectChangesVars}();exports.DetectChangesVars=DetectChangesVars},{"../../core_private":64,"../compile_metadata":73,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"@angular/core":154}],145:[function(require,module,exports){"use strict";function collectEventListeners(hostEvents,dirs,compileElement){var eventListeners=[];return hostEvents.forEach(function(hostEvent){compileElement.view.bindings.push(new compile_binding_1.CompileBinding(compileElement,hostEvent));var listener=CompileEventListener.getOrCreate(compileElement,hostEvent.target,hostEvent.name,eventListeners);listener.addAction(hostEvent,null,null)}),dirs.forEach(function(directiveAst){var directiveInstance=compileElement.instances.get(identifiers_1.identifierToken(directiveAst.directive.type));directiveAst.hostEvents.forEach(function(hostEvent){compileElement.view.bindings.push(new compile_binding_1.CompileBinding(compileElement,hostEvent));var listener=CompileEventListener.getOrCreate(compileElement,hostEvent.target,hostEvent.name,eventListeners);listener.addAction(hostEvent,directiveAst.directive,directiveInstance)})}),eventListeners.forEach(function(listener){return listener.finishMethod()}),eventListeners}function bindDirectiveOutputs(directiveAst,directiveInstance,eventListeners){collection_1.StringMapWrapper.forEach(directiveAst.directive.outputs,function(eventName,observablePropName){eventListeners.filter(function(listener){return listener.eventName==eventName}).forEach(function(listener){listener.listenToDirective(directiveInstance,observablePropName)})})}function bindRenderOutputs(eventListeners){eventListeners.forEach(function(listener){return listener.listenToRenderer()})}function convertStmtIntoExpression(stmt){return stmt instanceof o.ExpressionStatement?stmt.expr:stmt instanceof o.ReturnStatement?stmt.value:null}function santitizeEventName(name){return lang_1.StringWrapper.replaceAll(name,/[^a-zA-Z_]/g,"_")}var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),compile_binding_1=require("./compile_binding"),compile_method_1=require("./compile_method"),constants_1=require("./constants"),expression_converter_1=require("./expression_converter"),CompileEventListener=function(){function CompileEventListener(compileElement,eventTarget,eventName,listenerIndex){this.compileElement=compileElement,this.eventTarget=eventTarget,this.eventName=eventName,this._hasComponentHostListener=!1,this._actionResultExprs=[],this._method=new compile_method_1.CompileMethod(compileElement.view),this._methodName="_handle_"+santitizeEventName(eventName)+"_"+compileElement.nodeIndex+"_"+listenerIndex,this._eventParam=new o.FnParam(constants_1.EventHandlerVars.event.name,o.importType(this.compileElement.view.genConfig.renderTypes.renderEvent))}return CompileEventListener.getOrCreate=function(compileElement,eventTarget,eventName,targetEventListeners){var listener=targetEventListeners.find(function(listener){return listener.eventTarget==eventTarget&&listener.eventName==eventName});return lang_1.isBlank(listener)&&(listener=new CompileEventListener(compileElement,eventTarget,eventName,targetEventListeners.length),targetEventListeners.push(listener)),listener},CompileEventListener.prototype.addAction=function(hostEvent,directive,directiveInstance){lang_1.isPresent(directive)&&directive.isComponent&&(this._hasComponentHostListener=!0),this._method.resetDebugInfo(this.compileElement.nodeIndex,hostEvent);var context=lang_1.isPresent(directiveInstance)?directiveInstance:this.compileElement.view.componentContext,actionStmts=expression_converter_1.convertCdStatementToIr(this.compileElement.view,context,hostEvent.handler),lastIndex=actionStmts.length-1;if(lastIndex>=0){var lastStatement=actionStmts[lastIndex],returnExpr=convertStmtIntoExpression(lastStatement),preventDefaultVar=o.variable("pd_"+this._actionResultExprs.length);this._actionResultExprs.push(preventDefaultVar),lang_1.isPresent(returnExpr)&&(actionStmts[lastIndex]=preventDefaultVar.set(returnExpr.cast(o.DYNAMIC_TYPE).notIdentical(o.literal(!1))).toDeclStmt(null,[o.StmtModifier.Final]))}this._method.addStmts(actionStmts)},CompileEventListener.prototype.finishMethod=function(){var markPathToRootStart=this._hasComponentHostListener?this.compileElement.appElement.prop("componentView"):o.THIS_EXPR,resultExpr=o.literal(!0);this._actionResultExprs.forEach(function(expr){resultExpr=resultExpr.and(expr)});var stmts=[markPathToRootStart.callMethod("markPathToRootAsCheckOnce",[]).toStmt()].concat(this._method.finish()).concat([new o.ReturnStatement(resultExpr)]);this.compileElement.view.eventHandlerMethods.push(new o.ClassMethod(this._methodName,[this._eventParam],stmts,o.BOOL_TYPE,[o.StmtModifier.Private]))},CompileEventListener.prototype.listenToRenderer=function(){var listenExpr,eventListener=o.THIS_EXPR.callMethod("eventHandler",[o.THIS_EXPR.prop(this._methodName).callMethod(o.BuiltinMethod.bind,[o.THIS_EXPR])]);listenExpr=lang_1.isPresent(this.eventTarget)?constants_1.ViewProperties.renderer.callMethod("listenGlobal",[o.literal(this.eventTarget),o.literal(this.eventName),eventListener]):constants_1.ViewProperties.renderer.callMethod("listen",[this.compileElement.renderNode,o.literal(this.eventName),eventListener]);var disposable=o.variable("disposable_"+this.compileElement.view.disposables.length);this.compileElement.view.disposables.push(disposable),this.compileElement.view.createMethod.addStmt(disposable.set(listenExpr).toDeclStmt(o.FUNCTION_TYPE,[o.StmtModifier.Private]))},CompileEventListener.prototype.listenToDirective=function(directiveInstance,observablePropName){var subscription=o.variable("subscription_"+this.compileElement.view.subscriptions.length);this.compileElement.view.subscriptions.push(subscription);var eventListener=o.THIS_EXPR.callMethod("eventHandler",[o.THIS_EXPR.prop(this._methodName).callMethod(o.BuiltinMethod.bind,[o.THIS_EXPR])]);this.compileElement.view.createMethod.addStmt(subscription.set(directiveInstance.prop(observablePropName).callMethod(o.BuiltinMethod.SubscribeObservable,[eventListener])).toDeclStmt(null,[o.StmtModifier.Final]))},CompileEventListener}();exports.CompileEventListener=CompileEventListener,exports.collectEventListeners=collectEventListeners,exports.bindDirectiveOutputs=bindDirectiveOutputs,exports.bindRenderOutputs=bindRenderOutputs},{"../facade/collection":82,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"./compile_binding":138,"./compile_method":140,"./constants":144,"./expression_converter":146}],146:[function(require,module,exports){"use strict";function convertCdExpressionToIr(nameResolver,implicitReceiver,expression,valueUnwrapper){var visitor=new _AstToIrVisitor(nameResolver,implicitReceiver,valueUnwrapper),irAst=expression.visit(visitor,_Mode.Expression);return new ExpressionWithWrappedValueInfo(irAst,visitor.needsValueUnwrapper)}function convertCdStatementToIr(nameResolver,implicitReceiver,stmt){var visitor=new _AstToIrVisitor(nameResolver,implicitReceiver,null),statements=[];return flattenStatements(stmt.visit(visitor,_Mode.Statement),statements),statements}function ensureStatementMode(mode,ast){if(mode!==_Mode.Statement)throw new exceptions_1.BaseException("Expected a statement, but saw "+ast)}function ensureExpressionMode(mode,ast){if(mode!==_Mode.Expression)throw new exceptions_1.BaseException("Expected an expression, but saw "+ast)}function convertToStatementIfNeeded(mode,expr){return mode===_Mode.Statement?expr.toStmt():expr}function flattenStatements(arg,output){lang_1.isArray(arg)?arg.forEach(function(entry){return flattenStatements(entry,output)}):output.push(arg)}var cdAst=require("../expression_parser/ast"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),ExpressionWithWrappedValueInfo=function(){function ExpressionWithWrappedValueInfo(expression,needsValueUnwrapper){this.expression=expression,this.needsValueUnwrapper=needsValueUnwrapper}return ExpressionWithWrappedValueInfo}();exports.ExpressionWithWrappedValueInfo=ExpressionWithWrappedValueInfo,exports.convertCdExpressionToIr=convertCdExpressionToIr,exports.convertCdStatementToIr=convertCdStatementToIr;var _Mode;!function(_Mode){_Mode[_Mode.Statement=0]="Statement",_Mode[_Mode.Expression=1]="Expression"}(_Mode||(_Mode={}));var _AstToIrVisitor=function(){function _AstToIrVisitor(_nameResolver,_implicitReceiver,_valueUnwrapper){this._nameResolver=_nameResolver,this._implicitReceiver=_implicitReceiver,this._valueUnwrapper=_valueUnwrapper,this._map=new Map,this.needsValueUnwrapper=!1}return _AstToIrVisitor.prototype.visitBinary=function(ast,mode){var op;switch(ast.operation){case"+":op=o.BinaryOperator.Plus;break;case"-":op=o.BinaryOperator.Minus;break;case"*":op=o.BinaryOperator.Multiply;break;case"/":op=o.BinaryOperator.Divide;break;case"%":op=o.BinaryOperator.Modulo;break;case"&&":op=o.BinaryOperator.And;break;case"||":op=o.BinaryOperator.Or;break;case"==":op=o.BinaryOperator.Equals;break;case"!=":op=o.BinaryOperator.NotEquals;break;case"===":op=o.BinaryOperator.Identical;break;case"!==":op=o.BinaryOperator.NotIdentical;break;case"<":op=o.BinaryOperator.Lower;break;case">":op=o.BinaryOperator.Bigger;break;case"<=":op=o.BinaryOperator.LowerEquals;break;case">=":op=o.BinaryOperator.BiggerEquals;break;default:throw new exceptions_1.BaseException("Unsupported operation "+ast.operation)}return convertToStatementIfNeeded(mode,new o.BinaryOperatorExpr(op,this.visit(ast.left,_Mode.Expression),this.visit(ast.right,_Mode.Expression)))},_AstToIrVisitor.prototype.visitChain=function(ast,mode){return ensureStatementMode(mode,ast),this.visitAll(ast.expressions,mode)},_AstToIrVisitor.prototype.visitConditional=function(ast,mode){var value=this.visit(ast.condition,_Mode.Expression);return convertToStatementIfNeeded(mode,value.conditional(this.visit(ast.trueExp,_Mode.Expression),this.visit(ast.falseExp,_Mode.Expression)))},_AstToIrVisitor.prototype.visitPipe=function(ast,mode){var input=this.visit(ast.exp,_Mode.Expression),args=this.visitAll(ast.args,_Mode.Expression),value=this._nameResolver.callPipe(ast.name,input,args);return this.needsValueUnwrapper=!0,convertToStatementIfNeeded(mode,this._valueUnwrapper.callMethod("unwrap",[value]))},_AstToIrVisitor.prototype.visitFunctionCall=function(ast,mode){return convertToStatementIfNeeded(mode,this.visit(ast.target,_Mode.Expression).callFn(this.visitAll(ast.args,_Mode.Expression)))},_AstToIrVisitor.prototype.visitImplicitReceiver=function(ast,mode){return ensureExpressionMode(mode,ast),this._implicitReceiver},_AstToIrVisitor.prototype.visitInterpolation=function(ast,mode){ensureExpressionMode(mode,ast);for(var args=[o.literal(ast.expressions.length)],i=0;i<ast.strings.length-1;i++)args.push(o.literal(ast.strings[i])),args.push(this.visit(ast.expressions[i],_Mode.Expression));return args.push(o.literal(ast.strings[ast.strings.length-1])),o.importExpr(identifiers_1.Identifiers.interpolate).callFn(args)},_AstToIrVisitor.prototype.visitKeyedRead=function(ast,mode){return convertToStatementIfNeeded(mode,this.visit(ast.obj,_Mode.Expression).key(this.visit(ast.key,_Mode.Expression)))},_AstToIrVisitor.prototype.visitKeyedWrite=function(ast,mode){var obj=this.visit(ast.obj,_Mode.Expression),key=this.visit(ast.key,_Mode.Expression),value=this.visit(ast.value,_Mode.Expression);return convertToStatementIfNeeded(mode,obj.key(key).set(value))},_AstToIrVisitor.prototype.visitLiteralArray=function(ast,mode){return convertToStatementIfNeeded(mode,this._nameResolver.createLiteralArray(this.visitAll(ast.expressions,mode)))},_AstToIrVisitor.prototype.visitLiteralMap=function(ast,mode){for(var parts=[],i=0;i<ast.keys.length;i++)parts.push([ast.keys[i],this.visit(ast.values[i],_Mode.Expression)]);return convertToStatementIfNeeded(mode,this._nameResolver.createLiteralMap(parts))},_AstToIrVisitor.prototype.visitLiteralPrimitive=function(ast,mode){return convertToStatementIfNeeded(mode,o.literal(ast.value))},_AstToIrVisitor.prototype.visitMethodCall=function(ast,mode){var leftMostSafe=this.leftMostSafeNode(ast);if(leftMostSafe)return this.convertSafeAccess(ast,leftMostSafe,mode);var args=this.visitAll(ast.args,_Mode.Expression),result=null,receiver=this.visit(ast.receiver,_Mode.Expression);if(receiver===this._implicitReceiver){var varExpr=this._nameResolver.getLocal(ast.name);lang_1.isPresent(varExpr)&&(result=varExpr.callFn(args))}return lang_1.isBlank(result)&&(result=receiver.callMethod(ast.name,args)),convertToStatementIfNeeded(mode,result)},_AstToIrVisitor.prototype.visitPrefixNot=function(ast,mode){return convertToStatementIfNeeded(mode,o.not(this.visit(ast.expression,_Mode.Expression)))},_AstToIrVisitor.prototype.visitPropertyRead=function(ast,mode){var leftMostSafe=this.leftMostSafeNode(ast);if(leftMostSafe)return this.convertSafeAccess(ast,leftMostSafe,mode);var result=null,receiver=this.visit(ast.receiver,_Mode.Expression);return receiver===this._implicitReceiver&&(result=this._nameResolver.getLocal(ast.name)),lang_1.isBlank(result)&&(result=receiver.prop(ast.name)),convertToStatementIfNeeded(mode,result)},_AstToIrVisitor.prototype.visitPropertyWrite=function(ast,mode){var receiver=this.visit(ast.receiver,_Mode.Expression);if(receiver===this._implicitReceiver){var varExpr=this._nameResolver.getLocal(ast.name);if(lang_1.isPresent(varExpr))throw new exceptions_1.BaseException("Cannot assign to a reference or variable!")}return convertToStatementIfNeeded(mode,receiver.prop(ast.name).set(this.visit(ast.value,_Mode.Expression)))},_AstToIrVisitor.prototype.visitSafePropertyRead=function(ast,mode){return this.convertSafeAccess(ast,this.leftMostSafeNode(ast),mode)},_AstToIrVisitor.prototype.visitSafeMethodCall=function(ast,mode){return this.convertSafeAccess(ast,this.leftMostSafeNode(ast),mode)},_AstToIrVisitor.prototype.visitAll=function(asts,mode){var _this=this;return asts.map(function(ast){return _this.visit(ast,mode)})},_AstToIrVisitor.prototype.visitQuote=function(ast,mode){throw new exceptions_1.BaseException("Quotes are not supported for evaluation!")},_AstToIrVisitor.prototype.visit=function(ast,mode){return(this._map.get(ast)||ast).visit(this,mode)},_AstToIrVisitor.prototype.convertSafeAccess=function(ast,leftMostSafe,mode){var condition=this.visit(leftMostSafe.receiver,mode).isBlank();leftMostSafe instanceof cdAst.SafeMethodCall?this._map.set(leftMostSafe,new cdAst.MethodCall(leftMostSafe.span,leftMostSafe.receiver,leftMostSafe.name,leftMostSafe.args)):this._map.set(leftMostSafe,new cdAst.PropertyRead(leftMostSafe.span,leftMostSafe.receiver,leftMostSafe.name));var access=this.visit(ast,mode);return this._map.delete(leftMostSafe),condition.conditional(o.literal(null),access)},_AstToIrVisitor.prototype.leftMostSafeNode=function(ast){var _this=this,visit=function(visitor,ast){return(_this._map.get(ast)||ast).visit(visitor)};return ast.visit({visitBinary:function(ast){return null},visitChain:function(ast){return null},visitConditional:function(ast){return null},visitFunctionCall:function(ast){return null},visitImplicitReceiver:function(ast){return null},visitInterpolation:function(ast){return null},visitKeyedRead:function(ast){return visit(this,ast.obj)},visitKeyedWrite:function(ast){return null},visitLiteralArray:function(ast){return null},visitLiteralMap:function(ast){return null},visitLiteralPrimitive:function(ast){return null},visitMethodCall:function(ast){return visit(this,ast.receiver)},visitPipe:function(ast){return null},visitPrefixNot:function(ast){return null},visitPropertyRead:function(ast){return visit(this,ast.receiver)},visitPropertyWrite:function(ast){return null},visitQuote:function(ast){return null},visitSafeMethodCall:function(ast){return visit(this,ast.receiver)||ast},visitSafePropertyRead:function(ast){return visit(this,ast.receiver)||ast;
}})},_AstToIrVisitor}()},{"../expression_parser/ast":78,"../facade/exceptions":84,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116}],147:[function(require,module,exports){"use strict";function bindDirectiveDetectChangesLifecycleCallbacks(directiveAst,directiveInstance,compileElement){var view=compileElement.view,detectChangesInInputsMethod=view.detectChangesInInputsMethod,lifecycleHooks=directiveAst.directive.type.lifecycleHooks;lifecycleHooks.indexOf(core_private_1.LifecycleHooks.OnChanges)!==-1&&directiveAst.inputs.length>0&&detectChangesInInputsMethod.addStmt(new o.IfStmt(constants_1.DetectChangesVars.changes.notIdentical(o.NULL_EXPR),[directiveInstance.callMethod("ngOnChanges",[constants_1.DetectChangesVars.changes]).toStmt()])),lifecycleHooks.indexOf(core_private_1.LifecycleHooks.OnInit)!==-1&&detectChangesInInputsMethod.addStmt(new o.IfStmt(STATE_IS_NEVER_CHECKED.and(NOT_THROW_ON_CHANGES),[directiveInstance.callMethod("ngOnInit",[]).toStmt()])),lifecycleHooks.indexOf(core_private_1.LifecycleHooks.DoCheck)!==-1&&detectChangesInInputsMethod.addStmt(new o.IfStmt(NOT_THROW_ON_CHANGES,[directiveInstance.callMethod("ngDoCheck",[]).toStmt()]))}function bindDirectiveAfterContentLifecycleCallbacks(directiveMeta,directiveInstance,compileElement){var view=compileElement.view,lifecycleHooks=directiveMeta.type.lifecycleHooks,afterContentLifecycleCallbacksMethod=view.afterContentLifecycleCallbacksMethod;afterContentLifecycleCallbacksMethod.resetDebugInfo(compileElement.nodeIndex,compileElement.sourceAst),lifecycleHooks.indexOf(core_private_1.LifecycleHooks.AfterContentInit)!==-1&&afterContentLifecycleCallbacksMethod.addStmt(new o.IfStmt(STATE_IS_NEVER_CHECKED,[directiveInstance.callMethod("ngAfterContentInit",[]).toStmt()])),lifecycleHooks.indexOf(core_private_1.LifecycleHooks.AfterContentChecked)!==-1&&afterContentLifecycleCallbacksMethod.addStmt(directiveInstance.callMethod("ngAfterContentChecked",[]).toStmt())}function bindDirectiveAfterViewLifecycleCallbacks(directiveMeta,directiveInstance,compileElement){var view=compileElement.view,lifecycleHooks=directiveMeta.type.lifecycleHooks,afterViewLifecycleCallbacksMethod=view.afterViewLifecycleCallbacksMethod;afterViewLifecycleCallbacksMethod.resetDebugInfo(compileElement.nodeIndex,compileElement.sourceAst),lifecycleHooks.indexOf(core_private_1.LifecycleHooks.AfterViewInit)!==-1&&afterViewLifecycleCallbacksMethod.addStmt(new o.IfStmt(STATE_IS_NEVER_CHECKED,[directiveInstance.callMethod("ngAfterViewInit",[]).toStmt()])),lifecycleHooks.indexOf(core_private_1.LifecycleHooks.AfterViewChecked)!==-1&&afterViewLifecycleCallbacksMethod.addStmt(directiveInstance.callMethod("ngAfterViewChecked",[]).toStmt())}function bindInjectableDestroyLifecycleCallbacks(provider,providerInstance,compileElement){var onDestroyMethod=compileElement.view.destroyMethod;onDestroyMethod.resetDebugInfo(compileElement.nodeIndex,compileElement.sourceAst),provider.lifecycleHooks.indexOf(core_private_1.LifecycleHooks.OnDestroy)!==-1&&onDestroyMethod.addStmt(providerInstance.callMethod("ngOnDestroy",[]).toStmt())}function bindPipeDestroyLifecycleCallbacks(pipeMeta,pipeInstance,view){var onDestroyMethod=view.destroyMethod;pipeMeta.type.lifecycleHooks.indexOf(core_private_1.LifecycleHooks.OnDestroy)!==-1&&onDestroyMethod.addStmt(pipeInstance.callMethod("ngOnDestroy",[]).toStmt())}var core_private_1=require("../../core_private"),o=require("../output/output_ast"),constants_1=require("./constants"),STATE_IS_NEVER_CHECKED=o.THIS_EXPR.prop("numberOfChecks").identical(new o.LiteralExpr(0)),NOT_THROW_ON_CHANGES=o.not(constants_1.DetectChangesVars.throwOnChange);exports.bindDirectiveDetectChangesLifecycleCallbacks=bindDirectiveDetectChangesLifecycleCallbacks,exports.bindDirectiveAfterContentLifecycleCallbacks=bindDirectiveAfterContentLifecycleCallbacks,exports.bindDirectiveAfterViewLifecycleCallbacks=bindDirectiveAfterViewLifecycleCallbacks,exports.bindInjectableDestroyLifecycleCallbacks=bindInjectableDestroyLifecycleCallbacks,exports.bindPipeDestroyLifecycleCallbacks=bindPipeDestroyLifecycleCallbacks},{"../../core_private":64,"../output/output_ast":116,"./constants":144}],148:[function(require,module,exports){"use strict";function createBindFieldExpr(exprIndex){return o.THIS_EXPR.prop("_expr_"+exprIndex)}function createCurrValueExpr(exprIndex){return o.variable("currVal_"+exprIndex)}function bind(view,currValExpr,fieldExpr,parsedExpression,context,actions,method){var checkExpression=expression_converter_1.convertCdExpressionToIr(view,context,parsedExpression,constants_1.DetectChangesVars.valUnwrapper);if(!lang_1.isBlank(checkExpression.expression)){if(view.fields.push(new o.ClassField(fieldExpr.name,null,[o.StmtModifier.Private])),view.createMethod.addStmt(o.THIS_EXPR.prop(fieldExpr.name).set(o.importExpr(identifiers_1.Identifiers.UNINITIALIZED)).toStmt()),checkExpression.needsValueUnwrapper){var initValueUnwrapperStmt=constants_1.DetectChangesVars.valUnwrapper.callMethod("reset",[]).toStmt();method.addStmt(initValueUnwrapperStmt)}method.addStmt(currValExpr.set(checkExpression.expression).toDeclStmt(null,[o.StmtModifier.Final]));var condition=o.importExpr(identifiers_1.Identifiers.checkBinding).callFn([constants_1.DetectChangesVars.throwOnChange,fieldExpr,currValExpr]);checkExpression.needsValueUnwrapper&&(condition=constants_1.DetectChangesVars.valUnwrapper.prop("hasWrappedValue").or(condition)),method.addStmt(new o.IfStmt(condition,actions.concat([o.THIS_EXPR.prop(fieldExpr.name).set(currValExpr).toStmt()])))}}function bindRenderText(boundText,compileNode,view){var bindingIndex=view.bindings.length;view.bindings.push(new compile_binding_1.CompileBinding(compileNode,boundText));var currValExpr=createCurrValueExpr(bindingIndex),valueField=createBindFieldExpr(bindingIndex);view.detectChangesRenderPropertiesMethod.resetDebugInfo(compileNode.nodeIndex,boundText),bind(view,currValExpr,valueField,boundText.value,view.componentContext,[o.THIS_EXPR.prop("renderer").callMethod("setText",[compileNode.renderNode,currValExpr]).toStmt()],view.detectChangesRenderPropertiesMethod)}function bindAndWriteToRenderer(boundProps,context,compileElement,isHostProp){var view=compileElement.view,renderNode=compileElement.renderNode;boundProps.forEach(function(boundProp){var bindingIndex=view.bindings.length;view.bindings.push(new compile_binding_1.CompileBinding(compileElement,boundProp)),view.detectChangesRenderPropertiesMethod.resetDebugInfo(compileElement.nodeIndex,boundProp);var fieldExpr=createBindFieldExpr(bindingIndex),currValExpr=createCurrValueExpr(bindingIndex),oldRenderValue=sanitizedValue(boundProp,fieldExpr),renderValue=sanitizedValue(boundProp,currValExpr),updateStmts=[];switch(boundProp.type){case template_ast_1.PropertyBindingType.Property:view.genConfig.logBindingUpdate&&updateStmts.push(logBindingUpdateStmt(renderNode,boundProp.name,renderValue)),updateStmts.push(o.THIS_EXPR.prop("renderer").callMethod("setElementProperty",[renderNode,o.literal(boundProp.name),renderValue]).toStmt());break;case template_ast_1.PropertyBindingType.Attribute:renderValue=renderValue.isBlank().conditional(o.NULL_EXPR,renderValue.callMethod("toString",[])),updateStmts.push(o.THIS_EXPR.prop("renderer").callMethod("setElementAttribute",[renderNode,o.literal(boundProp.name),renderValue]).toStmt());break;case template_ast_1.PropertyBindingType.Class:updateStmts.push(o.THIS_EXPR.prop("renderer").callMethod("setElementClass",[renderNode,o.literal(boundProp.name),renderValue]).toStmt());break;case template_ast_1.PropertyBindingType.Style:var strValue=renderValue.callMethod("toString",[]);lang_1.isPresent(boundProp.unit)&&(strValue=strValue.plus(o.literal(boundProp.unit))),renderValue=renderValue.isBlank().conditional(o.NULL_EXPR,strValue),updateStmts.push(o.THIS_EXPR.prop("renderer").callMethod("setElementStyle",[renderNode,o.literal(boundProp.name),renderValue]).toStmt());break;case template_ast_1.PropertyBindingType.Animation:var animationName=boundProp.name,targetViewExpr=o.THIS_EXPR;isHostProp&&(targetViewExpr=compileElement.appElement.prop("componentView"));var animationFnExpr=targetViewExpr.prop("componentType").prop("animations").key(o.literal(animationName)),emptyStateValue=o.literal(core_private_1.EMPTY_STATE),oldRenderVar=o.variable("oldRenderVar");updateStmts.push(oldRenderVar.set(oldRenderValue).toDeclStmt()),updateStmts.push(new o.IfStmt(oldRenderVar.equals(o.importExpr(identifiers_1.Identifiers.UNINITIALIZED)),[oldRenderVar.set(emptyStateValue).toStmt()]));var newRenderVar=o.variable("newRenderVar");if(updateStmts.push(newRenderVar.set(renderValue).toDeclStmt()),updateStmts.push(new o.IfStmt(newRenderVar.equals(o.importExpr(identifiers_1.Identifiers.UNINITIALIZED)),[newRenderVar.set(emptyStateValue).toStmt()])),updateStmts.push(animationFnExpr.callFn([o.THIS_EXPR,renderNode,oldRenderVar,newRenderVar]).toStmt()),view.detachMethod.addStmt(animationFnExpr.callFn([o.THIS_EXPR,renderNode,oldRenderValue,emptyStateValue]).toStmt()),!_animationViewCheckedFlagMap.get(view)){_animationViewCheckedFlagMap.set(view,!0);var triggerStmt=o.THIS_EXPR.callMethod("triggerQueuedAnimations",[]).toStmt();view.afterViewLifecycleCallbacksMethod.addStmt(triggerStmt),view.detachMethod.addStmt(triggerStmt)}}bind(view,currValExpr,fieldExpr,boundProp.value,context,updateStmts,view.detectChangesRenderPropertiesMethod)})}function sanitizedValue(boundProp,renderValue){var enumValue;switch(boundProp.securityContext){case core_1.SecurityContext.NONE:return renderValue;case core_1.SecurityContext.HTML:enumValue="HTML";break;case core_1.SecurityContext.STYLE:enumValue="STYLE";break;case core_1.SecurityContext.SCRIPT:enumValue="SCRIPT";break;case core_1.SecurityContext.URL:enumValue="URL";break;case core_1.SecurityContext.RESOURCE_URL:enumValue="RESOURCE_URL";break;default:throw new Error("internal error, unexpected SecurityContext "+boundProp.securityContext+".")}var ctx=constants_1.ViewProperties.viewUtils.prop("sanitizer"),args=[o.importExpr(identifiers_1.Identifiers.SecurityContext).prop(enumValue),renderValue];return ctx.callMethod("sanitize",args)}function bindRenderInputs(boundProps,compileElement){bindAndWriteToRenderer(boundProps,compileElement.view.componentContext,compileElement,!1)}function bindDirectiveHostProps(directiveAst,directiveInstance,compileElement){bindAndWriteToRenderer(directiveAst.hostProperties,directiveInstance,compileElement,!0)}function bindDirectiveInputs(directiveAst,directiveInstance,compileElement){if(0!==directiveAst.inputs.length){var view=compileElement.view,detectChangesInInputsMethod=view.detectChangesInInputsMethod;detectChangesInInputsMethod.resetDebugInfo(compileElement.nodeIndex,compileElement.sourceAst);var lifecycleHooks=directiveAst.directive.type.lifecycleHooks,calcChangesMap=lifecycleHooks.indexOf(core_private_1.LifecycleHooks.OnChanges)!==-1,isOnPushComp=directiveAst.directive.isComponent&&!core_private_1.isDefaultChangeDetectionStrategy(directiveAst.directive.changeDetection);calcChangesMap&&detectChangesInInputsMethod.addStmt(constants_1.DetectChangesVars.changes.set(o.NULL_EXPR).toStmt()),isOnPushComp&&detectChangesInInputsMethod.addStmt(constants_1.DetectChangesVars.changed.set(o.literal(!1)).toStmt()),directiveAst.inputs.forEach(function(input){var bindingIndex=view.bindings.length;view.bindings.push(new compile_binding_1.CompileBinding(compileElement,input)),detectChangesInInputsMethod.resetDebugInfo(compileElement.nodeIndex,input);var fieldExpr=createBindFieldExpr(bindingIndex),currValExpr=createCurrValueExpr(bindingIndex),statements=[directiveInstance.prop(input.directiveName).set(currValExpr).toStmt()];calcChangesMap&&(statements.push(new o.IfStmt(constants_1.DetectChangesVars.changes.identical(o.NULL_EXPR),[constants_1.DetectChangesVars.changes.set(o.literalMap([],new o.MapType(o.importType(identifiers_1.Identifiers.SimpleChange)))).toStmt()])),statements.push(constants_1.DetectChangesVars.changes.key(o.literal(input.directiveName)).set(o.importExpr(identifiers_1.Identifiers.SimpleChange).instantiate([fieldExpr,currValExpr])).toStmt())),isOnPushComp&&statements.push(constants_1.DetectChangesVars.changed.set(o.literal(!0)).toStmt()),view.genConfig.logBindingUpdate&&statements.push(logBindingUpdateStmt(compileElement.renderNode,input.directiveName,currValExpr)),bind(view,currValExpr,fieldExpr,input.value,view.componentContext,statements,detectChangesInInputsMethod)}),isOnPushComp&&detectChangesInInputsMethod.addStmt(new o.IfStmt(constants_1.DetectChangesVars.changed,[compileElement.appElement.prop("componentView").callMethod("markAsCheckOnce",[]).toStmt()]))}}function logBindingUpdateStmt(renderNode,propName,value){var tryStmt=o.THIS_EXPR.prop("renderer").callMethod("setBindingDebugInfo",[renderNode,o.literal("ng-reflect-"+util_1.camelCaseToDashCase(propName)),value.isBlank().conditional(o.NULL_EXPR,value.callMethod("toString",[]))]).toStmt(),catchStmt=o.THIS_EXPR.prop("renderer").callMethod("setBindingDebugInfo",[renderNode,o.literal("ng-reflect-"+util_1.camelCaseToDashCase(propName)),o.literal("[ERROR] Exception while trying to serialize the value")]).toStmt();return new o.TryCatchStmt([tryStmt],[catchStmt])}var core_1=require("@angular/core"),core_private_1=require("../../core_private"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),template_ast_1=require("../template_parser/template_ast"),util_1=require("../util"),compile_binding_1=require("./compile_binding"),constants_1=require("./constants"),expression_converter_1=require("./expression_converter"),_animationViewCheckedFlagMap=new Map;exports.bindRenderText=bindRenderText,exports.bindRenderInputs=bindRenderInputs,exports.bindDirectiveHostProps=bindDirectiveHostProps,exports.bindDirectiveInputs=bindDirectiveInputs},{"../../core_private":64,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"../template_parser/template_ast":133,"../util":137,"./compile_binding":138,"./constants":144,"./expression_converter":146,"@angular/core":154}],149:[function(require,module,exports){"use strict";function getPropertyInView(property,callingView,definedView){if(callingView===definedView)return property;for(var viewProp=o.THIS_EXPR,currView=callingView;currView!==definedView&&lang_1.isPresent(currView.declarationElement.view);)currView=currView.declarationElement.view,viewProp=viewProp.prop("parent");if(currView!==definedView)throw new exceptions_1.BaseException("Internal error: Could not calculate a property in a parent view: "+property);if(property instanceof o.ReadPropExpr){var readPropExpr_1=property;(definedView.fields.some(function(field){return field.name==readPropExpr_1.name})||definedView.getters.some(function(field){return field.name==readPropExpr_1.name}))&&(viewProp=viewProp.cast(definedView.classType))}return o.replaceVarInExpression(o.THIS_EXPR.name,viewProp,property)}function injectFromViewParentInjector(token,optional){var args=[util_1.createDiTokenExpression(token)];return optional&&args.push(o.NULL_EXPR),o.THIS_EXPR.prop("parentInjector").callMethod("get",args)}function getViewFactoryName(component,embeddedTemplateIndex){return"viewFactory_"+component.type.name+embeddedTemplateIndex}function createFlatArray(expressions){for(var lastNonArrayExpressions=[],result=o.literalArr([]),i=0;i<expressions.length;i++){var expr=expressions[i];expr.type instanceof o.ArrayType?(lastNonArrayExpressions.length>0&&(result=result.callMethod(o.BuiltinMethod.ConcatArray,[o.literalArr(lastNonArrayExpressions)]),lastNonArrayExpressions=[]),result=result.callMethod(o.BuiltinMethod.ConcatArray,[expr])):lastNonArrayExpressions.push(expr)}return lastNonArrayExpressions.length>0&&(result=result.callMethod(o.BuiltinMethod.ConcatArray,[o.literalArr(lastNonArrayExpressions)])),result}function createPureProxy(fn,argCount,pureProxyProp,view){view.fields.push(new o.ClassField(pureProxyProp.name,null));var pureProxyId=argCount<identifiers_1.Identifiers.pureProxies.length?identifiers_1.Identifiers.pureProxies[argCount]:null;if(lang_1.isBlank(pureProxyId))throw new exceptions_1.BaseException("Unsupported number of argument for pure functions: "+argCount);view.createMethod.addStmt(o.THIS_EXPR.prop(pureProxyProp.name).set(o.importExpr(pureProxyId).callFn([fn])).toStmt())}var exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),util_1=require("../util");exports.getPropertyInView=getPropertyInView,exports.injectFromViewParentInjector=injectFromViewParentInjector,exports.getViewFactoryName=getViewFactoryName,exports.createFlatArray=createFlatArray,exports.createPureProxy=createPureProxy},{"../facade/exceptions":84,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"../util":137}],150:[function(require,module,exports){"use strict";function bindView(view,parsedTemplate){var visitor=new ViewBinderVisitor(view);template_ast_1.templateVisitAll(visitor,parsedTemplate),view.pipes.forEach(function(pipe){lifecycle_binder_1.bindPipeDestroyLifecycleCallbacks(pipe.meta,pipe.instance,pipe.view)})}var identifiers_1=require("../identifiers"),template_ast_1=require("../template_parser/template_ast"),event_binder_1=require("./event_binder"),lifecycle_binder_1=require("./lifecycle_binder"),property_binder_1=require("./property_binder");exports.bindView=bindView;var ViewBinderVisitor=function(){function ViewBinderVisitor(view){this.view=view,this._nodeIndex=0}return ViewBinderVisitor.prototype.visitBoundText=function(ast,parent){var node=this.view.nodes[this._nodeIndex++];return property_binder_1.bindRenderText(ast,node,this.view),null},ViewBinderVisitor.prototype.visitText=function(ast,parent){return this._nodeIndex++,null},ViewBinderVisitor.prototype.visitNgContent=function(ast,parent){return null},ViewBinderVisitor.prototype.visitElement=function(ast,parent){var compileElement=this.view.nodes[this._nodeIndex++],eventListeners=event_binder_1.collectEventListeners(ast.outputs,ast.directives,compileElement);return property_binder_1.bindRenderInputs(ast.inputs,compileElement),event_binder_1.bindRenderOutputs(eventListeners),ast.directives.forEach(function(directiveAst){var directiveInstance=compileElement.instances.get(identifiers_1.identifierToken(directiveAst.directive.type));property_binder_1.bindDirectiveInputs(directiveAst,directiveInstance,compileElement),lifecycle_binder_1.bindDirectiveDetectChangesLifecycleCallbacks(directiveAst,directiveInstance,compileElement),property_binder_1.bindDirectiveHostProps(directiveAst,directiveInstance,compileElement),event_binder_1.bindDirectiveOutputs(directiveAst,directiveInstance,eventListeners)}),template_ast_1.templateVisitAll(this,ast.children,compileElement),ast.directives.forEach(function(directiveAst){var directiveInstance=compileElement.instances.get(identifiers_1.identifierToken(directiveAst.directive.type));lifecycle_binder_1.bindDirectiveAfterContentLifecycleCallbacks(directiveAst.directive,directiveInstance,compileElement),lifecycle_binder_1.bindDirectiveAfterViewLifecycleCallbacks(directiveAst.directive,directiveInstance,compileElement)}),ast.providers.forEach(function(providerAst){var providerInstance=compileElement.instances.get(providerAst.token);lifecycle_binder_1.bindInjectableDestroyLifecycleCallbacks(providerAst,providerInstance,compileElement)}),null},ViewBinderVisitor.prototype.visitEmbeddedTemplate=function(ast,parent){var compileElement=this.view.nodes[this._nodeIndex++],eventListeners=event_binder_1.collectEventListeners(ast.outputs,ast.directives,compileElement);return ast.directives.forEach(function(directiveAst){var directiveInstance=compileElement.instances.get(identifiers_1.identifierToken(directiveAst.directive.type));property_binder_1.bindDirectiveInputs(directiveAst,directiveInstance,compileElement),lifecycle_binder_1.bindDirectiveDetectChangesLifecycleCallbacks(directiveAst,directiveInstance,compileElement),event_binder_1.bindDirectiveOutputs(directiveAst,directiveInstance,eventListeners),lifecycle_binder_1.bindDirectiveAfterContentLifecycleCallbacks(directiveAst.directive,directiveInstance,compileElement),lifecycle_binder_1.bindDirectiveAfterViewLifecycleCallbacks(directiveAst.directive,directiveInstance,compileElement)}),ast.providers.forEach(function(providerAst){var providerInstance=compileElement.instances.get(providerAst.token);lifecycle_binder_1.bindInjectableDestroyLifecycleCallbacks(providerAst,providerInstance,compileElement)}),bindView(compileElement.embeddedView,ast.children),null},ViewBinderVisitor.prototype.visitAttr=function(ast,ctx){return null},ViewBinderVisitor.prototype.visitDirective=function(ast,ctx){return null},ViewBinderVisitor.prototype.visitEvent=function(ast,eventTargetAndNames){return null},ViewBinderVisitor.prototype.visitReference=function(ast,ctx){return null},ViewBinderVisitor.prototype.visitVariable=function(ast,ctx){return null},ViewBinderVisitor.prototype.visitDirectiveProperty=function(ast,context){return null},ViewBinderVisitor.prototype.visitElementProperty=function(ast,context){return null},ViewBinderVisitor}()},{"../identifiers":98,"../template_parser/template_ast":133,"./event_binder":145,"./lifecycle_binder":147,"./property_binder":148}],151:[function(require,module,exports){"use strict";function buildView(view,template,targetDependencies){var builderVisitor=new ViewBuilderVisitor(view,targetDependencies);return template_ast_1.templateVisitAll(builderVisitor,template,view.declarationElement.isNull()?view.declarationElement:view.declarationElement.parent),builderVisitor.nestedViewCount}function finishView(view,targetStatements){view.afterNodes(),createViewTopLevelStmts(view,targetStatements),view.nodes.forEach(function(node){node instanceof compile_element_1.CompileElement&&node.hasEmbeddedView&&finishView(node.embeddedView,targetStatements)})}function _getOuterContainerOrSelf(node){for(var view=node.view;_isNgContainer(node.parent,view);)node=node.parent;return node}function _getOuterContainerParentOrSelf(el){for(var view=el.view;_isNgContainer(el,view);)el=el.parent;return el}function _isNgContainer(node,view){return!node.isNull()&&node.sourceAst.name===NG_CONTAINER_TAG&&node.view===view}function _mergeHtmlAndDirectiveAttrs(declaredHtmlAttrs,directives){var result={};return collection_1.StringMapWrapper.forEach(declaredHtmlAttrs,function(value,key){result[key]=value}),directives.forEach(function(directiveMeta){collection_1.StringMapWrapper.forEach(directiveMeta.hostAttributes,function(value,name){var prevValue=result[name];result[name]=lang_1.isPresent(prevValue)?mergeAttributeValue(name,prevValue,value):value})}),mapToKeyValueArray(result)}function _readHtmlAttrs(attrs){var htmlAttrs={};return attrs.forEach(function(ast){htmlAttrs[ast.name]=ast.value}),htmlAttrs}function mergeAttributeValue(attrName,attrValue1,attrValue2){return attrName==CLASS_ATTR||attrName==STYLE_ATTR?attrValue1+" "+attrValue2:attrValue2}function mapToKeyValueArray(data){var entryArray=[];return collection_1.StringMapWrapper.forEach(data,function(value,name){entryArray.push([name,value])}),collection_1.ListWrapper.sort(entryArray,function(entry1,entry2){return lang_1.StringWrapper.compare(entry1[0],entry2[0])}),entryArray}function createViewTopLevelStmts(view,targetStatements){var nodeDebugInfosVar=o.NULL_EXPR;view.genConfig.genDebugInfo&&(nodeDebugInfosVar=o.variable("nodeDebugInfos_"+view.component.type.name+view.viewIndex),targetStatements.push(nodeDebugInfosVar.set(o.literalArr(view.nodes.map(createStaticNodeDebugInfo),new o.ArrayType(new o.ExternalType(identifiers_1.Identifiers.StaticNodeDebugInfo),[o.TypeModifier.Const]))).toDeclStmt(null,[o.StmtModifier.Final])));var renderCompTypeVar=o.variable("renderType_"+view.component.type.name);0===view.viewIndex&&targetStatements.push(renderCompTypeVar.set(o.NULL_EXPR).toDeclStmt(o.importType(identifiers_1.Identifiers.RenderComponentType)));var viewClass=createViewClass(view,renderCompTypeVar,nodeDebugInfosVar);targetStatements.push(viewClass),targetStatements.push(createViewFactory(view,viewClass,renderCompTypeVar))}function createStaticNodeDebugInfo(node){var compileElement=node instanceof compile_element_1.CompileElement?node:null,providerTokens=[],componentToken=o.NULL_EXPR,varTokenEntries=[];return lang_1.isPresent(compileElement)&&(providerTokens=compileElement.getProviderTokens(),lang_1.isPresent(compileElement.component)&&(componentToken=util_1.createDiTokenExpression(identifiers_1.identifierToken(compileElement.component.type))),collection_1.StringMapWrapper.forEach(compileElement.referenceTokens,function(token,varName){varTokenEntries.push([varName,lang_1.isPresent(token)?util_1.createDiTokenExpression(token):o.NULL_EXPR])})),o.importExpr(identifiers_1.Identifiers.StaticNodeDebugInfo).instantiate([o.literalArr(providerTokens,new o.ArrayType(o.DYNAMIC_TYPE,[o.TypeModifier.Const])),componentToken,o.literalMap(varTokenEntries,new o.MapType(o.DYNAMIC_TYPE,[o.TypeModifier.Const]))],o.importType(identifiers_1.Identifiers.StaticNodeDebugInfo,null,[o.TypeModifier.Const]))}function createViewClass(view,renderCompTypeVar,nodeDebugInfosVar){var viewConstructorArgs=[new o.FnParam(constants_1.ViewConstructorVars.viewUtils.name,o.importType(identifiers_1.Identifiers.ViewUtils)),new o.FnParam(constants_1.ViewConstructorVars.parentInjector.name,o.importType(identifiers_1.Identifiers.Injector)),new o.FnParam(constants_1.ViewConstructorVars.declarationEl.name,o.importType(identifiers_1.Identifiers.AppElement))],superConstructorArgs=[o.variable(view.className),renderCompTypeVar,constants_1.ViewTypeEnum.fromValue(view.viewType),constants_1.ViewConstructorVars.viewUtils,constants_1.ViewConstructorVars.parentInjector,constants_1.ViewConstructorVars.declarationEl,constants_1.ChangeDetectorStatusEnum.fromValue(getChangeDetectionMode(view))];view.genConfig.genDebugInfo&&superConstructorArgs.push(nodeDebugInfosVar);var viewConstructor=new o.ClassMethod(null,viewConstructorArgs,[o.SUPER_EXPR.callFn(superConstructorArgs).toStmt()]),viewMethods=[new o.ClassMethod("createInternal",[new o.FnParam(rootSelectorVar.name,o.STRING_TYPE)],generateCreateMethod(view),o.importType(identifiers_1.Identifiers.AppElement)),new o.ClassMethod("injectorGetInternal",[new o.FnParam(constants_1.InjectMethodVars.token.name,o.DYNAMIC_TYPE),new o.FnParam(constants_1.InjectMethodVars.requestNodeIndex.name,o.NUMBER_TYPE),new o.FnParam(constants_1.InjectMethodVars.notFoundResult.name,o.DYNAMIC_TYPE)],addReturnValuefNotEmpty(view.injectorGetMethod.finish(),constants_1.InjectMethodVars.notFoundResult),o.DYNAMIC_TYPE),new o.ClassMethod("detectChangesInternal",[new o.FnParam(constants_1.DetectChangesVars.throwOnChange.name,o.BOOL_TYPE)],generateDetectChangesMethod(view)),new o.ClassMethod("dirtyParentQueriesInternal",[],view.dirtyParentQueriesMethod.finish()),new o.ClassMethod("destroyInternal",[],view.destroyMethod.finish()),new o.ClassMethod("detachInternal",[],view.detachMethod.finish())].concat(view.eventHandlerMethods),superClass=view.genConfig.genDebugInfo?identifiers_1.Identifiers.DebugAppView:identifiers_1.Identifiers.AppView,viewClass=new o.ClassStmt(view.className,o.importExpr(superClass,[getContextType(view)]),view.fields,view.getters,viewConstructor,viewMethods.filter(function(method){return method.body.length>0}));return viewClass}function createViewFactory(view,viewClass,renderCompTypeVar){var templateUrlInfo,viewFactoryArgs=[new o.FnParam(constants_1.ViewConstructorVars.viewUtils.name,o.importType(identifiers_1.Identifiers.ViewUtils)),new o.FnParam(constants_1.ViewConstructorVars.parentInjector.name,o.importType(identifiers_1.Identifiers.Injector)),new o.FnParam(constants_1.ViewConstructorVars.declarationEl.name,o.importType(identifiers_1.Identifiers.AppElement))],initRenderCompTypeStmts=[];if(templateUrlInfo=view.component.template.templateUrl==view.component.type.moduleUrl?view.component.type.moduleUrl+" class "+view.component.type.name+" - inline template":view.component.template.templateUrl,0===view.viewIndex){var animationsExpr=o.literalMap(view.animations.map(function(entry){return[entry.name,entry.fnVariable]}));initRenderCompTypeStmts=[new o.IfStmt(renderCompTypeVar.identical(o.NULL_EXPR),[renderCompTypeVar.set(constants_1.ViewConstructorVars.viewUtils.callMethod("createRenderComponentType",[o.literal(templateUrlInfo),o.literal(view.component.template.ngContentSelectors.length),constants_1.ViewEncapsulationEnum.fromValue(view.component.template.encapsulation),view.styles,animationsExpr])).toStmt()])]}return o.fn(viewFactoryArgs,initRenderCompTypeStmts.concat([new o.ReturnStatement(o.variable(viewClass.name).instantiate(viewClass.constructorMethod.params.map(function(param){return o.variable(param.name)})))]),o.importType(identifiers_1.Identifiers.AppView,[getContextType(view)])).toDeclStmt(view.viewFactory.name,[o.StmtModifier.Final])}function generateCreateMethod(view){var parentRenderNodeExpr=o.NULL_EXPR,parentRenderNodeStmts=[];view.viewType===core_private_1.ViewType.COMPONENT&&(parentRenderNodeExpr=constants_1.ViewProperties.renderer.callMethod("createViewRoot",[o.THIS_EXPR.prop("declarationAppElement").prop("nativeElement")]),parentRenderNodeStmts=[parentRenderNodeVar.set(parentRenderNodeExpr).toDeclStmt(o.importType(view.genConfig.renderTypes.renderNode),[o.StmtModifier.Final])]);var resultExpr;return resultExpr=view.viewType===core_private_1.ViewType.HOST?view.nodes[0].appElement:o.NULL_EXPR,parentRenderNodeStmts.concat(view.createMethod.finish(),[o.THIS_EXPR.callMethod("init",[util_2.createFlatArray(view.rootNodesOrAppElements),o.literalArr(view.nodes.map(function(node){return node.renderNode})),o.literalArr(view.disposables),o.literalArr(view.subscriptions)]).toStmt(),new o.ReturnStatement(resultExpr)])}function generateDetectChangesMethod(view){var stmts=[];if(view.detectChangesInInputsMethod.isEmpty()&&view.updateContentQueriesMethod.isEmpty()&&view.afterContentLifecycleCallbacksMethod.isEmpty()&&view.detectChangesRenderPropertiesMethod.isEmpty()&&view.updateViewQueriesMethod.isEmpty()&&view.afterViewLifecycleCallbacksMethod.isEmpty())return stmts;collection_1.ListWrapper.addAll(stmts,view.detectChangesInInputsMethod.finish()),stmts.push(o.THIS_EXPR.callMethod("detectContentChildrenChanges",[constants_1.DetectChangesVars.throwOnChange]).toStmt());var afterContentStmts=view.updateContentQueriesMethod.finish().concat(view.afterContentLifecycleCallbacksMethod.finish());afterContentStmts.length>0&&stmts.push(new o.IfStmt(o.not(constants_1.DetectChangesVars.throwOnChange),afterContentStmts)),collection_1.ListWrapper.addAll(stmts,view.detectChangesRenderPropertiesMethod.finish()),stmts.push(o.THIS_EXPR.callMethod("detectViewChildrenChanges",[constants_1.DetectChangesVars.throwOnChange]).toStmt());var afterViewStmts=view.updateViewQueriesMethod.finish().concat(view.afterViewLifecycleCallbacksMethod.finish());afterViewStmts.length>0&&stmts.push(new o.IfStmt(o.not(constants_1.DetectChangesVars.throwOnChange),afterViewStmts));var varStmts=[],readVars=o.findReadVarNames(stmts);return collection_1.SetWrapper.has(readVars,constants_1.DetectChangesVars.changed.name)&&varStmts.push(constants_1.DetectChangesVars.changed.set(o.literal(!0)).toDeclStmt(o.BOOL_TYPE)),collection_1.SetWrapper.has(readVars,constants_1.DetectChangesVars.changes.name)&&varStmts.push(constants_1.DetectChangesVars.changes.set(o.NULL_EXPR).toDeclStmt(new o.MapType(o.importType(identifiers_1.Identifiers.SimpleChange)))),collection_1.SetWrapper.has(readVars,constants_1.DetectChangesVars.valUnwrapper.name)&&varStmts.push(constants_1.DetectChangesVars.valUnwrapper.set(o.importExpr(identifiers_1.Identifiers.ValueUnwrapper).instantiate([])).toDeclStmt(null,[o.StmtModifier.Final])),varStmts.concat(stmts)}function addReturnValuefNotEmpty(statements,value){return statements.length>0?statements.concat([new o.ReturnStatement(value)]):statements}function getContextType(view){return view.viewType===core_private_1.ViewType.COMPONENT?o.importType(view.component.type):o.DYNAMIC_TYPE;
}function getChangeDetectionMode(view){var mode;return mode=view.viewType===core_private_1.ViewType.COMPONENT?core_private_1.isDefaultChangeDetectionStrategy(view.component.changeDetection)?core_private_1.ChangeDetectorStatus.CheckAlways:core_private_1.ChangeDetectorStatus.CheckOnce:core_private_1.ChangeDetectorStatus.CheckAlways}var core_1=require("@angular/core"),core_private_1=require("../../core_private"),animation_compiler_1=require("../animation/animation_compiler"),compile_metadata_1=require("../compile_metadata"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),identifiers_1=require("../identifiers"),o=require("../output/output_ast"),template_ast_1=require("../template_parser/template_ast"),util_1=require("../util"),compile_element_1=require("./compile_element"),compile_view_1=require("./compile_view"),constants_1=require("./constants"),util_2=require("./util"),IMPLICIT_TEMPLATE_VAR="$implicit",CLASS_ATTR="class",STYLE_ATTR="style",NG_CONTAINER_TAG="ng-container",parentRenderNodeVar=o.variable("parentRenderNode"),rootSelectorVar=o.variable("rootSelector"),ViewFactoryDependency=function(){function ViewFactoryDependency(comp,placeholder){this.comp=comp,this.placeholder=placeholder}return ViewFactoryDependency}();exports.ViewFactoryDependency=ViewFactoryDependency;var ComponentFactoryDependency=function(){function ComponentFactoryDependency(comp,placeholder){this.comp=comp,this.placeholder=placeholder}return ComponentFactoryDependency}();exports.ComponentFactoryDependency=ComponentFactoryDependency,exports.buildView=buildView,exports.finishView=finishView;var ViewBuilderVisitor=function(){function ViewBuilderVisitor(view,targetDependencies){this.view=view,this.targetDependencies=targetDependencies,this.nestedViewCount=0,this._animationCompiler=new animation_compiler_1.AnimationCompiler}return ViewBuilderVisitor.prototype._isRootNode=function(parent){return parent.view!==this.view},ViewBuilderVisitor.prototype._addRootNodeAndProject=function(node){var projectedNode=_getOuterContainerOrSelf(node),parent=projectedNode.parent,ngContentIndex=projectedNode.sourceAst.ngContentIndex,vcAppEl=node instanceof compile_element_1.CompileElement&&node.hasViewContainer?node.appElement:null;this._isRootNode(parent)?this.view.viewType!==core_private_1.ViewType.COMPONENT&&this.view.rootNodesOrAppElements.push(lang_1.isPresent(vcAppEl)?vcAppEl:node.renderNode):lang_1.isPresent(parent.component)&&lang_1.isPresent(ngContentIndex)&&parent.addContentNode(ngContentIndex,lang_1.isPresent(vcAppEl)?vcAppEl:node.renderNode)},ViewBuilderVisitor.prototype._getParentRenderNode=function(parent){return parent=_getOuterContainerParentOrSelf(parent),this._isRootNode(parent)?this.view.viewType===core_private_1.ViewType.COMPONENT?parentRenderNodeVar:o.NULL_EXPR:lang_1.isPresent(parent.component)&&parent.component.template.encapsulation!==core_1.ViewEncapsulation.Native?o.NULL_EXPR:parent.renderNode},ViewBuilderVisitor.prototype.visitBoundText=function(ast,parent){return this._visitText(ast,"",parent)},ViewBuilderVisitor.prototype.visitText=function(ast,parent){return this._visitText(ast,ast.value,parent)},ViewBuilderVisitor.prototype._visitText=function(ast,value,parent){var fieldName="_text_"+this.view.nodes.length;this.view.fields.push(new o.ClassField(fieldName,o.importType(this.view.genConfig.renderTypes.renderText)));var renderNode=o.THIS_EXPR.prop(fieldName),compileNode=new compile_element_1.CompileNode(parent,this.view,this.view.nodes.length,renderNode,ast),createRenderNode=o.THIS_EXPR.prop(fieldName).set(constants_1.ViewProperties.renderer.callMethod("createText",[this._getParentRenderNode(parent),o.literal(value),this.view.createMethod.resetDebugInfoExpr(this.view.nodes.length,ast)])).toStmt();return this.view.nodes.push(compileNode),this.view.createMethod.addStmt(createRenderNode),this._addRootNodeAndProject(compileNode),renderNode},ViewBuilderVisitor.prototype.visitNgContent=function(ast,parent){this.view.createMethod.resetDebugInfo(null,ast);var parentRenderNode=this._getParentRenderNode(parent),nodesExpression=constants_1.ViewProperties.projectableNodes.key(o.literal(ast.index),new o.ArrayType(o.importType(this.view.genConfig.renderTypes.renderNode)));return parentRenderNode!==o.NULL_EXPR?this.view.createMethod.addStmt(constants_1.ViewProperties.renderer.callMethod("projectNodes",[parentRenderNode,o.importExpr(identifiers_1.Identifiers.flattenNestedViewRenderNodes).callFn([nodesExpression])]).toStmt()):this._isRootNode(parent)?this.view.viewType!==core_private_1.ViewType.COMPONENT&&this.view.rootNodesOrAppElements.push(nodesExpression):lang_1.isPresent(parent.component)&&lang_1.isPresent(ast.ngContentIndex)&&parent.addContentNode(ast.ngContentIndex,nodesExpression),null},ViewBuilderVisitor.prototype.visitElement=function(ast,parent){var createRenderNodeExpr,_this=this,nodeIndex=this.view.nodes.length,debugContextExpr=this.view.createMethod.resetDebugInfoExpr(nodeIndex,ast);createRenderNodeExpr=0===nodeIndex&&this.view.viewType===core_private_1.ViewType.HOST?o.THIS_EXPR.callMethod("selectOrCreateHostElement",[o.literal(ast.name),rootSelectorVar,debugContextExpr]):ast.name===NG_CONTAINER_TAG?constants_1.ViewProperties.renderer.callMethod("createTemplateAnchor",[this._getParentRenderNode(parent),debugContextExpr]):constants_1.ViewProperties.renderer.callMethod("createElement",[this._getParentRenderNode(parent),o.literal(ast.name),debugContextExpr]);var fieldName="_el_"+nodeIndex;this.view.fields.push(new o.ClassField(fieldName,o.importType(this.view.genConfig.renderTypes.renderElement))),this.view.createMethod.addStmt(o.THIS_EXPR.prop(fieldName).set(createRenderNodeExpr).toStmt());for(var renderNode=o.THIS_EXPR.prop(fieldName),directives=ast.directives.map(function(directiveAst){return directiveAst.directive}),component=directives.find(function(directive){return directive.isComponent}),htmlAttrs=_readHtmlAttrs(ast.attrs),attrNameAndValues=_mergeHtmlAndDirectiveAttrs(htmlAttrs,directives),i=0;i<attrNameAndValues.length;i++){var attrName=attrNameAndValues[i][0],attrValue=attrNameAndValues[i][1];this.view.createMethod.addStmt(constants_1.ViewProperties.renderer.callMethod("setElementAttribute",[renderNode,o.literal(attrName),o.literal(attrValue)]).toStmt())}var compileElement=new compile_element_1.CompileElement(parent,this.view,nodeIndex,renderNode,ast,component,directives,ast.providers,ast.hasViewContainer,(!1),ast.references);this.view.nodes.push(compileElement);var compViewExpr=null;if(lang_1.isPresent(component)){var nestedComponentIdentifier=new compile_metadata_1.CompileIdentifierMetadata({name:util_2.getViewFactoryName(component,0)});this.targetDependencies.push(new ViewFactoryDependency(component.type,nestedComponentIdentifier));var entryComponentIdentifiers=component.entryComponents.map(function(entryComponent){var id=new compile_metadata_1.CompileIdentifierMetadata({name:entryComponent.name});return _this.targetDependencies.push(new ComponentFactoryDependency(entryComponent,id)),id});compileElement.createComponentFactoryResolver(entryComponentIdentifiers),compViewExpr=o.variable("compView_"+nodeIndex),compileElement.setComponentView(compViewExpr),this.view.createMethod.addStmt(compViewExpr.set(o.importExpr(nestedComponentIdentifier).callFn([constants_1.ViewProperties.viewUtils,compileElement.injector,compileElement.appElement])).toDeclStmt())}if(compileElement.beforeChildren(),this._addRootNodeAndProject(compileElement),template_ast_1.templateVisitAll(this,ast.children,compileElement),compileElement.afterChildren(this.view.nodes.length-nodeIndex-1),lang_1.isPresent(compViewExpr)){var codeGenContentNodes;codeGenContentNodes=this.view.component.type.isHost?constants_1.ViewProperties.projectableNodes:o.literalArr(compileElement.contentNodesByNgContentIndex.map(function(nodes){return util_2.createFlatArray(nodes)})),this.view.createMethod.addStmt(compViewExpr.callMethod("create",[compileElement.getComponent(),codeGenContentNodes,o.NULL_EXPR]).toStmt())}return null},ViewBuilderVisitor.prototype.visitEmbeddedTemplate=function(ast,parent){var nodeIndex=this.view.nodes.length,fieldName="_anchor_"+nodeIndex;this.view.fields.push(new o.ClassField(fieldName,o.importType(this.view.genConfig.renderTypes.renderComment))),this.view.createMethod.addStmt(o.THIS_EXPR.prop(fieldName).set(constants_1.ViewProperties.renderer.callMethod("createTemplateAnchor",[this._getParentRenderNode(parent),this.view.createMethod.resetDebugInfoExpr(nodeIndex,ast)])).toStmt());var renderNode=o.THIS_EXPR.prop(fieldName),templateVariableBindings=ast.variables.map(function(varAst){return[varAst.value.length>0?varAst.value:IMPLICIT_TEMPLATE_VAR,varAst.name]}),directives=ast.directives.map(function(directiveAst){return directiveAst.directive}),compileElement=new compile_element_1.CompileElement(parent,this.view,nodeIndex,renderNode,ast,null,directives,ast.providers,ast.hasViewContainer,(!0),ast.references);this.view.nodes.push(compileElement);var compiledAnimations=this._animationCompiler.compileComponent(this.view.component,[ast]);this.nestedViewCount++;var embeddedView=new compile_view_1.CompileView(this.view.component,this.view.genConfig,this.view.pipeMetas,o.NULL_EXPR,compiledAnimations,this.view.viewIndex+this.nestedViewCount,compileElement,templateVariableBindings);return this.nestedViewCount+=buildView(embeddedView,ast.children,this.targetDependencies),compileElement.beforeChildren(),this._addRootNodeAndProject(compileElement),compileElement.afterChildren(0),null},ViewBuilderVisitor.prototype.visitAttr=function(ast,ctx){return null},ViewBuilderVisitor.prototype.visitDirective=function(ast,ctx){return null},ViewBuilderVisitor.prototype.visitEvent=function(ast,eventTargetAndNames){return null},ViewBuilderVisitor.prototype.visitReference=function(ast,ctx){return null},ViewBuilderVisitor.prototype.visitVariable=function(ast,ctx){return null},ViewBuilderVisitor.prototype.visitDirectiveProperty=function(ast,context){return null},ViewBuilderVisitor.prototype.visitElementProperty=function(ast,context){return null},ViewBuilderVisitor}()},{"../../core_private":64,"../animation/animation_compiler":68,"../compile_metadata":73,"../facade/collection":82,"../facade/lang":85,"../identifiers":98,"../output/output_ast":116,"../template_parser/template_ast":133,"../util":137,"./compile_element":139,"./compile_view":143,"./constants":144,"./util":149,"@angular/core":154}],152:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),animation_compiler_1=require("../animation/animation_compiler"),config_1=require("../config"),compile_element_1=require("./compile_element"),compile_view_1=require("./compile_view"),view_binder_1=require("./view_binder"),view_builder_1=require("./view_builder"),view_builder_2=require("./view_builder");exports.ComponentFactoryDependency=view_builder_2.ComponentFactoryDependency,exports.ViewFactoryDependency=view_builder_2.ViewFactoryDependency;var ViewCompileResult=function(){function ViewCompileResult(statements,viewFactoryVar,dependencies){this.statements=statements,this.viewFactoryVar=viewFactoryVar,this.dependencies=dependencies}return ViewCompileResult}();exports.ViewCompileResult=ViewCompileResult;var ViewCompiler=function(){function ViewCompiler(_genConfig){this._genConfig=_genConfig,this._animationCompiler=new animation_compiler_1.AnimationCompiler}return ViewCompiler.prototype.compileComponent=function(component,template,styles,pipes){var dependencies=[],compiledAnimations=this._animationCompiler.compileComponent(component,template),statements=[];compiledAnimations.map(function(entry){statements.push(entry.statesMapStatement),statements.push(entry.fnStatement)});var view=new compile_view_1.CompileView(component,this._genConfig,pipes,styles,compiledAnimations,0,compile_element_1.CompileElement.createNull(),[]);return view_builder_1.buildView(view,template,dependencies),view_binder_1.bindView(view,template),view_builder_1.finishView(view,statements),new ViewCompileResult(statements,view.viewFactory.name,dependencies)},ViewCompiler.decorators=[{type:core_1.Injectable}],ViewCompiler.ctorParameters=[{type:config_1.CompilerConfig}],ViewCompiler}();exports.ViewCompiler=ViewCompiler},{"../animation/animation_compiler":68,"../config":75,"./compile_element":139,"./compile_view":143,"./view_binder":150,"./view_builder":151,"@angular/core":154}],153:[function(require,module,exports){"use strict";var XHR=function(){function XHR(){}return XHR.prototype.get=function(url){return null},XHR}();exports.XHR=XHR},{}],154:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(require("./src/metadata")),__export(require("./src/util")),__export(require("./src/di"));var application_ref_1=require("./src/application_ref");exports.createPlatform=application_ref_1.createPlatform,exports.assertPlatform=application_ref_1.assertPlatform,exports.disposePlatform=application_ref_1.disposePlatform,exports.getPlatform=application_ref_1.getPlatform,exports.coreBootstrap=application_ref_1.coreBootstrap,exports.coreLoadAndBootstrap=application_ref_1.coreLoadAndBootstrap,exports.PlatformRef=application_ref_1.PlatformRef,exports.ApplicationRef=application_ref_1.ApplicationRef,exports.enableProdMode=application_ref_1.enableProdMode,exports.lockRunMode=application_ref_1.lockRunMode,exports.isDevMode=application_ref_1.isDevMode,exports.createPlatformFactory=application_ref_1.createPlatformFactory;var application_tokens_1=require("./src/application_tokens");exports.APP_ID=application_tokens_1.APP_ID,exports.PACKAGE_ROOT_URL=application_tokens_1.PACKAGE_ROOT_URL,exports.PLATFORM_INITIALIZER=application_tokens_1.PLATFORM_INITIALIZER,exports.APP_BOOTSTRAP_LISTENER=application_tokens_1.APP_BOOTSTRAP_LISTENER;var application_init_1=require("./src/application_init");exports.APP_INITIALIZER=application_init_1.APP_INITIALIZER,exports.ApplicationInitStatus=application_init_1.ApplicationInitStatus,__export(require("./src/zone")),__export(require("./src/render")),__export(require("./src/linker"));var debug_node_1=require("./src/debug/debug_node");exports.DebugElement=debug_node_1.DebugElement,exports.DebugNode=debug_node_1.DebugNode,exports.asNativeElements=debug_node_1.asNativeElements,exports.getDebugNode=debug_node_1.getDebugNode,__export(require("./src/testability/testability")),__export(require("./src/change_detection")),__export(require("./src/platform_directives_and_pipes")),__export(require("./src/platform_core_providers"));var application_module_1=require("./src/application_module");exports.APPLICATION_COMMON_PROVIDERS=application_module_1.APPLICATION_COMMON_PROVIDERS,exports.ApplicationModule=application_module_1.ApplicationModule;var profile_1=require("./src/profile/profile");exports.wtfCreateScope=profile_1.wtfCreateScope,exports.wtfLeave=profile_1.wtfLeave,exports.wtfStartTimeRange=profile_1.wtfStartTimeRange,exports.wtfEndTimeRange=profile_1.wtfEndTimeRange;var lang_1=require("./src/facade/lang");exports.Type=lang_1.Type;var async_1=require("./src/facade/async");exports.EventEmitter=async_1.EventEmitter;var exceptions_1=require("./src/facade/exceptions");exports.ExceptionHandler=exceptions_1.ExceptionHandler,exports.WrappedException=exceptions_1.WrappedException,exports.BaseException=exceptions_1.BaseException,__export(require("./private_export")),__export(require("./src/animation/metadata"));var animation_player_1=require("./src/animation/animation_player");exports.AnimationPlayer=animation_player_1.AnimationPlayer;var security_1=require("./src/security");exports.SanitizationService=security_1.SanitizationService,exports.SecurityContext=security_1.SecurityContext},{"./private_export":155,"./src/animation/animation_player":159,"./src/animation/metadata":163,"./src/application_init":165,"./src/application_module":166,"./src/application_ref":167,"./src/application_tokens":168,"./src/change_detection":169,"./src/debug/debug_node":179,"./src/di":181,"./src/facade/async":193,"./src/facade/exceptions":197,"./src/facade/lang":198,"./src/linker":200,"./src/metadata":222,"./src/platform_core_providers":228,"./src/platform_directives_and_pipes":229,"./src/profile/profile":230,"./src/render":237,"./src/security":239,"./src/testability/testability":240,"./src/util":241,"./src/zone":243}],155:[function(require,module,exports){"use strict";var animation_constants_1=require("./src/animation/animation_constants"),animation_group_player_1=require("./src/animation/animation_group_player"),animation_keyframe_1=require("./src/animation/animation_keyframe"),animation_player_1=require("./src/animation/animation_player"),animation_sequence_player_1=require("./src/animation/animation_sequence_player"),animationUtils=require("./src/animation/animation_style_util"),animation_styles_1=require("./src/animation/animation_styles"),change_detection_util=require("./src/change_detection/change_detection_util"),constants=require("./src/change_detection/constants"),console=require("./src/console"),debug=require("./src/debug/debug_renderer"),provider_util=require("./src/di/provider_util"),reflective_provider=require("./src/di/reflective_provider"),component_factory_resolver=require("./src/linker/component_factory_resolver"),debug_context=require("./src/linker/debug_context"),element=require("./src/linker/element"),ng_module_factory=require("./src/linker/ng_module_factory"),template_ref=require("./src/linker/template_ref"),view=require("./src/linker/view"),view_type=require("./src/linker/view_type"),view_utils=require("./src/linker/view_utils"),lifecycle_hooks=require("./src/metadata/lifecycle_hooks"),metadata_view=require("./src/metadata/view"),wtf_init=require("./src/profile/wtf_init"),reflection=require("./src/reflection/reflection"),reflection_capabilities=require("./src/reflection/reflection_capabilities"),reflector_reader=require("./src/reflection/reflector_reader"),api=require("./src/render/api"),decorators=require("./src/util/decorators");exports.__core_private__={isDefaultChangeDetectionStrategy:constants.isDefaultChangeDetectionStrategy,ChangeDetectorStatus:constants.ChangeDetectorStatus,CHANGE_DETECTION_STRATEGY_VALUES:constants.CHANGE_DETECTION_STRATEGY_VALUES,constructDependencies:reflective_provider.constructDependencies,LifecycleHooks:lifecycle_hooks.LifecycleHooks,LIFECYCLE_HOOKS_VALUES:lifecycle_hooks.LIFECYCLE_HOOKS_VALUES,ReflectorReader:reflector_reader.ReflectorReader,CodegenComponentFactoryResolver:component_factory_resolver.CodegenComponentFactoryResolver,AppElement:element.AppElement,AppView:view.AppView,DebugAppView:view.DebugAppView,NgModuleInjector:ng_module_factory.NgModuleInjector,ViewType:view_type.ViewType,MAX_INTERPOLATION_VALUES:view_utils.MAX_INTERPOLATION_VALUES,checkBinding:view_utils.checkBinding,flattenNestedViewRenderNodes:view_utils.flattenNestedViewRenderNodes,interpolate:view_utils.interpolate,ViewUtils:view_utils.ViewUtils,VIEW_ENCAPSULATION_VALUES:metadata_view.VIEW_ENCAPSULATION_VALUES,DebugContext:debug_context.DebugContext,StaticNodeDebugInfo:debug_context.StaticNodeDebugInfo,devModeEqual:change_detection_util.devModeEqual,UNINITIALIZED:change_detection_util.UNINITIALIZED,ValueUnwrapper:change_detection_util.ValueUnwrapper,RenderDebugInfo:api.RenderDebugInfo,TemplateRef_:template_ref.TemplateRef_,wtfInit:wtf_init.wtfInit,ReflectionCapabilities:reflection_capabilities.ReflectionCapabilities,makeDecorator:decorators.makeDecorator,DebugDomRootRenderer:debug.DebugDomRootRenderer,createProvider:provider_util.createProvider,isProviderLiteral:provider_util.isProviderLiteral,EMPTY_ARRAY:view_utils.EMPTY_ARRAY,EMPTY_MAP:view_utils.EMPTY_MAP,pureProxy1:view_utils.pureProxy1,pureProxy2:view_utils.pureProxy2,pureProxy3:view_utils.pureProxy3,pureProxy4:view_utils.pureProxy4,pureProxy5:view_utils.pureProxy5,pureProxy6:view_utils.pureProxy6,pureProxy7:view_utils.pureProxy7,pureProxy8:view_utils.pureProxy8,pureProxy9:view_utils.pureProxy9,pureProxy10:view_utils.pureProxy10,castByValue:view_utils.castByValue,Console:console.Console,reflector:reflection.reflector,Reflector:reflection.Reflector,NoOpAnimationPlayer:animation_player_1.NoOpAnimationPlayer,AnimationPlayer:animation_player_1.AnimationPlayer,AnimationSequencePlayer:animation_sequence_player_1.AnimationSequencePlayer,AnimationGroupPlayer:animation_group_player_1.AnimationGroupPlayer,AnimationKeyframe:animation_keyframe_1.AnimationKeyframe,prepareFinalAnimationStyles:animationUtils.prepareFinalAnimationStyles,balanceAnimationKeyframes:animationUtils.balanceAnimationKeyframes,flattenStyles:animationUtils.flattenStyles,clearStyles:animationUtils.clearStyles,renderStyles:animationUtils.renderStyles,collectAndResolveStyles:animationUtils.collectAndResolveStyles,AnimationStyles:animation_styles_1.AnimationStyles,ANY_STATE:animation_constants_1.ANY_STATE,DEFAULT_STATE:animation_constants_1.DEFAULT_STATE,EMPTY_STATE:animation_constants_1.EMPTY_STATE,FILL_STYLE_FLAG:animation_constants_1.FILL_STYLE_FLAG}},{"./src/animation/animation_constants":156,"./src/animation/animation_group_player":157,"./src/animation/animation_keyframe":158,"./src/animation/animation_player":159,"./src/animation/animation_sequence_player":160,"./src/animation/animation_style_util":161,"./src/animation/animation_styles":162,"./src/change_detection/change_detection_util":171,"./src/change_detection/constants":173,"./src/console":178,"./src/debug/debug_renderer":180,"./src/di/provider_util":188,"./src/di/reflective_provider":192,"./src/linker/component_factory_resolver":203,"./src/linker/debug_context":205,"./src/linker/element":207,"./src/linker/ng_module_factory":211,"./src/linker/template_ref":216,"./src/linker/view":217,"./src/linker/view_type":220,"./src/linker/view_utils":221,"./src/metadata/lifecycle_hooks":225,"./src/metadata/view":227,"./src/profile/wtf_init":232,"./src/reflection/reflection":233,"./src/reflection/reflection_capabilities":234,"./src/reflection/reflector_reader":236,"./src/render/api":238,"./src/util/decorators":242}],156:[function(require,module,exports){"use strict";exports.FILL_STYLE_FLAG="true",exports.ANY_STATE="*",exports.DEFAULT_STATE="*",exports.EMPTY_STATE="void"},{}],157:[function(require,module,exports){"use strict";var lang_1=require("../facade/lang"),math_1=require("../facade/math"),AnimationGroupPlayer=function(){function AnimationGroupPlayer(_players){var _this=this;this._players=_players,this._subscriptions=[],this._finished=!1,this._started=!1,this.parentPlayer=null;var count=0,total=this._players.length;0==total?lang_1.scheduleMicroTask(function(){return _this._onFinish()}):this._players.forEach(function(player){player.parentPlayer=_this,player.onDone(function(){++count>=total&&_this._onFinish()})})}return AnimationGroupPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,lang_1.isPresent(this.parentPlayer)||this.destroy(),this._subscriptions.forEach(function(subscription){return subscription()}),this._subscriptions=[])},AnimationGroupPlayer.prototype.init=function(){this._players.forEach(function(player){return player.init()})},AnimationGroupPlayer.prototype.onDone=function(fn){this._subscriptions.push(fn)},AnimationGroupPlayer.prototype.hasStarted=function(){return this._started},AnimationGroupPlayer.prototype.play=function(){lang_1.isPresent(this.parentPlayer)||this.init(),this._started=!0,this._players.forEach(function(player){return player.play()})},AnimationGroupPlayer.prototype.pause=function(){this._players.forEach(function(player){return player.pause()})},AnimationGroupPlayer.prototype.restart=function(){this._players.forEach(function(player){return player.restart()})},AnimationGroupPlayer.prototype.finish=function(){this._onFinish(),this._players.forEach(function(player){return player.finish()})},AnimationGroupPlayer.prototype.destroy=function(){this._onFinish(),this._players.forEach(function(player){return player.destroy()})},AnimationGroupPlayer.prototype.reset=function(){this._players.forEach(function(player){return player.reset()})},AnimationGroupPlayer.prototype.setPosition=function(p){this._players.forEach(function(player){player.setPosition(p)})},AnimationGroupPlayer.prototype.getPosition=function(){var min=0;return this._players.forEach(function(player){var p=player.getPosition();min=math_1.Math.min(p,min)}),min},AnimationGroupPlayer}();exports.AnimationGroupPlayer=AnimationGroupPlayer},{"../facade/lang":198,"../facade/math":199}],158:[function(require,module,exports){"use strict";var AnimationKeyframe=function(){function AnimationKeyframe(offset,styles){this.offset=offset,this.styles=styles}return AnimationKeyframe}();exports.AnimationKeyframe=AnimationKeyframe},{}],159:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),AnimationPlayer=function(){function AnimationPlayer(){}return Object.defineProperty(AnimationPlayer.prototype,"parentPlayer",{get:function(){throw new exceptions_1.BaseException("NOT IMPLEMENTED: Base Class")},set:function(player){throw new exceptions_1.BaseException("NOT IMPLEMENTED: Base Class")},enumerable:!0,configurable:!0}),AnimationPlayer}();exports.AnimationPlayer=AnimationPlayer;var NoOpAnimationPlayer=function(){function NoOpAnimationPlayer(){var _this=this;this._subscriptions=[],this._started=!1,this.parentPlayer=null,lang_1.scheduleMicroTask(function(){return _this._onFinish()})}return NoOpAnimationPlayer.prototype._onFinish=function(){this._subscriptions.forEach(function(entry){entry()}),this._subscriptions=[]},NoOpAnimationPlayer.prototype.onDone=function(fn){this._subscriptions.push(fn)},NoOpAnimationPlayer.prototype.hasStarted=function(){return this._started},NoOpAnimationPlayer.prototype.init=function(){},NoOpAnimationPlayer.prototype.play=function(){this._started=!0},NoOpAnimationPlayer.prototype.pause=function(){},NoOpAnimationPlayer.prototype.restart=function(){},NoOpAnimationPlayer.prototype.finish=function(){this._onFinish()},NoOpAnimationPlayer.prototype.destroy=function(){},NoOpAnimationPlayer.prototype.reset=function(){},NoOpAnimationPlayer.prototype.setPosition=function(p){},NoOpAnimationPlayer.prototype.getPosition=function(){return 0},NoOpAnimationPlayer}();exports.NoOpAnimationPlayer=NoOpAnimationPlayer},{"../facade/exceptions":197,"../facade/lang":198}],160:[function(require,module,exports){"use strict";var lang_1=require("../facade/lang"),animation_player_1=require("./animation_player"),AnimationSequencePlayer=function(){function AnimationSequencePlayer(_players){var _this=this;this._players=_players,this._currentIndex=0,this._subscriptions=[],this._finished=!1,this._started=!1,this.parentPlayer=null,this._players.forEach(function(player){player.parentPlayer=_this}),this._onNext(!1)}return AnimationSequencePlayer.prototype._onNext=function(start){var _this=this;if(!this._finished)if(0==this._players.length)this._activePlayer=new animation_player_1.NoOpAnimationPlayer,lang_1.scheduleMicroTask(function(){return _this._onFinish()});else if(this._currentIndex>=this._players.length)this._activePlayer=new animation_player_1.NoOpAnimationPlayer,this._onFinish();else{var player=this._players[this._currentIndex++];player.onDone(function(){return _this._onNext(!0)}),this._activePlayer=player,start&&player.play()}},AnimationSequencePlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,lang_1.isPresent(this.parentPlayer)||this.destroy(),this._subscriptions.forEach(function(subscription){return subscription()}),this._subscriptions=[])},AnimationSequencePlayer.prototype.init=function(){this._players.forEach(function(player){return player.init()})},AnimationSequencePlayer.prototype.onDone=function(fn){this._subscriptions.push(fn)},AnimationSequencePlayer.prototype.hasStarted=function(){return this._started},AnimationSequencePlayer.prototype.play=function(){lang_1.isPresent(this.parentPlayer)||this.init(),this._started=!0,this._activePlayer.play()},AnimationSequencePlayer.prototype.pause=function(){this._activePlayer.pause()},AnimationSequencePlayer.prototype.restart=function(){this._players.length>0&&(this.reset(),this._players[0].restart())},AnimationSequencePlayer.prototype.reset=function(){this._players.forEach(function(player){return player.reset()})},AnimationSequencePlayer.prototype.finish=function(){this._onFinish(),this._players.forEach(function(player){return player.finish()})},AnimationSequencePlayer.prototype.destroy=function(){this._onFinish(),this._players.forEach(function(player){return player.destroy()})},AnimationSequencePlayer.prototype.setPosition=function(p){this._players[0].setPosition(p)},AnimationSequencePlayer.prototype.getPosition=function(){return this._players[0].getPosition()},AnimationSequencePlayer}();exports.AnimationSequencePlayer=AnimationSequencePlayer},{"../facade/lang":198,"./animation_player":159}],161:[function(require,module,exports){"use strict";function prepareFinalAnimationStyles(previousStyles,newStyles,nullValue){void 0===nullValue&&(nullValue=null);var finalStyles={};return collection_1.StringMapWrapper.forEach(newStyles,function(value,prop){finalStyles[prop]=value==metadata_1.AUTO_STYLE?nullValue:value.toString()}),collection_1.StringMapWrapper.forEach(previousStyles,function(value,prop){lang_1.isPresent(finalStyles[prop])||(finalStyles[prop]=nullValue)}),finalStyles}function balanceAnimationKeyframes(collectedStyles,finalStateStyles,keyframes){var limit=keyframes.length-1,firstKeyframe=keyframes[0],flatenedFirstKeyframeStyles=flattenStyles(firstKeyframe.styles.styles),extraFirstKeyframeStyles={},hasExtraFirstStyles=!1;collection_1.StringMapWrapper.forEach(collectedStyles,function(value,prop){flatenedFirstKeyframeStyles[prop]||(flatenedFirstKeyframeStyles[prop]=value,extraFirstKeyframeStyles[prop]=value,hasExtraFirstStyles=!0)});var keyframeCollectedStyles=collection_1.StringMapWrapper.merge({},flatenedFirstKeyframeStyles),finalKeyframe=keyframes[limit];collection_1.ListWrapper.insert(finalKeyframe.styles.styles,0,finalStateStyles);var flatenedFinalKeyframeStyles=flattenStyles(finalKeyframe.styles.styles),extraFinalKeyframeStyles={},hasExtraFinalStyles=!1;return collection_1.StringMapWrapper.forEach(keyframeCollectedStyles,function(value,prop){lang_1.isPresent(flatenedFinalKeyframeStyles[prop])||(extraFinalKeyframeStyles[prop]=metadata_1.AUTO_STYLE,hasExtraFinalStyles=!0)}),hasExtraFinalStyles&&finalKeyframe.styles.styles.push(extraFinalKeyframeStyles),collection_1.StringMapWrapper.forEach(flatenedFinalKeyframeStyles,function(value,prop){lang_1.isPresent(flatenedFirstKeyframeStyles[prop])||(extraFirstKeyframeStyles[prop]=metadata_1.AUTO_STYLE,hasExtraFirstStyles=!0)}),hasExtraFirstStyles&&firstKeyframe.styles.styles.push(extraFirstKeyframeStyles),keyframes}function clearStyles(styles){var finalStyles={};return collection_1.StringMapWrapper.keys(styles).forEach(function(key){finalStyles[key]=null}),finalStyles}function collectAndResolveStyles(collection,styles){return styles.map(function(entry){var stylesObj={};return collection_1.StringMapWrapper.forEach(entry,function(value,prop){value==animation_constants_1.FILL_STYLE_FLAG&&(value=collection[prop],lang_1.isPresent(value)||(value=metadata_1.AUTO_STYLE)),collection[prop]=value,stylesObj[prop]=value}),stylesObj})}function renderStyles(element,renderer,styles){collection_1.StringMapWrapper.forEach(styles,function(value,prop){renderer.setElementStyle(element,prop,value)})}function flattenStyles(styles){var finalStyles={};return styles.forEach(function(entry){collection_1.StringMapWrapper.forEach(entry,function(value,prop){finalStyles[prop]=value})}),finalStyles}var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),animation_constants_1=require("./animation_constants"),metadata_1=require("./metadata");exports.prepareFinalAnimationStyles=prepareFinalAnimationStyles,exports.balanceAnimationKeyframes=balanceAnimationKeyframes,exports.clearStyles=clearStyles,exports.collectAndResolveStyles=collectAndResolveStyles,
exports.renderStyles=renderStyles,exports.flattenStyles=flattenStyles},{"../facade/collection":195,"../facade/lang":198,"./animation_constants":156,"./metadata":163}],162:[function(require,module,exports){"use strict";var AnimationStyles=function(){function AnimationStyles(styles){this.styles=styles}return AnimationStyles}();exports.AnimationStyles=AnimationStyles},{}],163:[function(require,module,exports){"use strict";function animate(timing,styles){void 0===styles&&(styles=null);var stylesEntry=styles;if(!lang_1.isPresent(stylesEntry)){var EMPTY_STYLE={};stylesEntry=new AnimationStyleMetadata([EMPTY_STYLE],1)}return new AnimationAnimateMetadata(timing,stylesEntry)}function group(steps){return new AnimationGroupMetadata(steps)}function sequence(steps){return new AnimationSequenceMetadata(steps)}function style(tokens){var input,offset=null;return lang_1.isString(tokens)?input=[tokens]:(input=lang_1.isArray(tokens)?tokens:[tokens],input.forEach(function(entry){var entryOffset=entry.offset;lang_1.isPresent(entryOffset)&&(offset=null==offset?lang_1.NumberWrapper.parseFloat(entryOffset):offset)})),new AnimationStyleMetadata(input,offset)}function state(stateNameExpr,styles){return new AnimationStateDeclarationMetadata(stateNameExpr,styles)}function keyframes(steps){return new AnimationKeyframesSequenceMetadata(steps)}function transition(stateChangeExpr,steps){var animationData=lang_1.isArray(steps)?new AnimationSequenceMetadata(steps):steps;return new AnimationStateTransitionMetadata(stateChangeExpr,animationData)}function trigger(name,animation){return new AnimationEntryMetadata(name,animation)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang");exports.AUTO_STYLE="*";var AnimationEntryMetadata=function(){function AnimationEntryMetadata(name,definitions){this.name=name,this.definitions=definitions}return AnimationEntryMetadata}();exports.AnimationEntryMetadata=AnimationEntryMetadata;var AnimationStateMetadata=function(){function AnimationStateMetadata(){}return AnimationStateMetadata}();exports.AnimationStateMetadata=AnimationStateMetadata;var AnimationStateDeclarationMetadata=function(_super){function AnimationStateDeclarationMetadata(stateNameExpr,styles){_super.call(this),this.stateNameExpr=stateNameExpr,this.styles=styles}return __extends(AnimationStateDeclarationMetadata,_super),AnimationStateDeclarationMetadata}(AnimationStateMetadata);exports.AnimationStateDeclarationMetadata=AnimationStateDeclarationMetadata;var AnimationStateTransitionMetadata=function(_super){function AnimationStateTransitionMetadata(stateChangeExpr,steps){_super.call(this),this.stateChangeExpr=stateChangeExpr,this.steps=steps}return __extends(AnimationStateTransitionMetadata,_super),AnimationStateTransitionMetadata}(AnimationStateMetadata);exports.AnimationStateTransitionMetadata=AnimationStateTransitionMetadata;var AnimationMetadata=function(){function AnimationMetadata(){}return AnimationMetadata}();exports.AnimationMetadata=AnimationMetadata;var AnimationKeyframesSequenceMetadata=function(_super){function AnimationKeyframesSequenceMetadata(steps){_super.call(this),this.steps=steps}return __extends(AnimationKeyframesSequenceMetadata,_super),AnimationKeyframesSequenceMetadata}(AnimationMetadata);exports.AnimationKeyframesSequenceMetadata=AnimationKeyframesSequenceMetadata;var AnimationStyleMetadata=function(_super){function AnimationStyleMetadata(styles,offset){void 0===offset&&(offset=null),_super.call(this),this.styles=styles,this.offset=offset}return __extends(AnimationStyleMetadata,_super),AnimationStyleMetadata}(AnimationMetadata);exports.AnimationStyleMetadata=AnimationStyleMetadata;var AnimationAnimateMetadata=function(_super){function AnimationAnimateMetadata(timings,styles){_super.call(this),this.timings=timings,this.styles=styles}return __extends(AnimationAnimateMetadata,_super),AnimationAnimateMetadata}(AnimationMetadata);exports.AnimationAnimateMetadata=AnimationAnimateMetadata;var AnimationWithStepsMetadata=function(_super){function AnimationWithStepsMetadata(){_super.call(this)}return __extends(AnimationWithStepsMetadata,_super),Object.defineProperty(AnimationWithStepsMetadata.prototype,"steps",{get:function(){throw new exceptions_1.BaseException("NOT IMPLEMENTED: Base Class")},enumerable:!0,configurable:!0}),AnimationWithStepsMetadata}(AnimationMetadata);exports.AnimationWithStepsMetadata=AnimationWithStepsMetadata;var AnimationSequenceMetadata=function(_super){function AnimationSequenceMetadata(_steps){_super.call(this),this._steps=_steps}return __extends(AnimationSequenceMetadata,_super),Object.defineProperty(AnimationSequenceMetadata.prototype,"steps",{get:function(){return this._steps},enumerable:!0,configurable:!0}),AnimationSequenceMetadata}(AnimationWithStepsMetadata);exports.AnimationSequenceMetadata=AnimationSequenceMetadata;var AnimationGroupMetadata=function(_super){function AnimationGroupMetadata(_steps){_super.call(this),this._steps=_steps}return __extends(AnimationGroupMetadata,_super),Object.defineProperty(AnimationGroupMetadata.prototype,"steps",{get:function(){return this._steps},enumerable:!0,configurable:!0}),AnimationGroupMetadata}(AnimationWithStepsMetadata);exports.AnimationGroupMetadata=AnimationGroupMetadata,exports.animate=animate,exports.group=group,exports.sequence=sequence,exports.style=style,exports.state=state,exports.keyframes=keyframes,exports.transition=transition,exports.trigger=trigger},{"../facade/exceptions":197,"../facade/lang":198}],164:[function(require,module,exports){"use strict";var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),ViewAnimationMap=function(){function ViewAnimationMap(){this._map=new collection_1.Map,this._allPlayers=[]}return Object.defineProperty(ViewAnimationMap.prototype,"length",{get:function(){return this.getAllPlayers().length},enumerable:!0,configurable:!0}),ViewAnimationMap.prototype.find=function(element,animationName){var playersByAnimation=this._map.get(element);if(lang_1.isPresent(playersByAnimation))return playersByAnimation[animationName]},ViewAnimationMap.prototype.findAllPlayersByElement=function(element){var el=this._map.get(element);return el?collection_1.StringMapWrapper.values(el):[]},ViewAnimationMap.prototype.set=function(element,animationName,player){var playersByAnimation=this._map.get(element);lang_1.isPresent(playersByAnimation)||(playersByAnimation={});var existingEntry=playersByAnimation[animationName];lang_1.isPresent(existingEntry)&&this.remove(element,animationName),playersByAnimation[animationName]=player,this._allPlayers.push(player),this._map.set(element,playersByAnimation)},ViewAnimationMap.prototype.getAllPlayers=function(){return this._allPlayers},ViewAnimationMap.prototype.remove=function(element,animationName){var playersByAnimation=this._map.get(element);if(lang_1.isPresent(playersByAnimation)){var player=playersByAnimation[animationName];delete playersByAnimation[animationName];var index=this._allPlayers.indexOf(player);collection_1.ListWrapper.removeAt(this._allPlayers,index),collection_1.StringMapWrapper.isEmpty(playersByAnimation)&&this._map.delete(element)}},ViewAnimationMap}();exports.ViewAnimationMap=ViewAnimationMap},{"../facade/collection":195,"../facade/lang":198}],165:[function(require,module,exports){"use strict";var lang_1=require("../src/facade/lang"),di_1=require("./di");exports.APP_INITIALIZER=new di_1.OpaqueToken("Application Initializer");var ApplicationInitStatus=function(){function ApplicationInitStatus(appInits){var _this=this;this._done=!1;var asyncInitPromises=[];if(appInits)for(var i=0;i<appInits.length;i++){var initResult=appInits[i]();lang_1.isPromise(initResult)&&asyncInitPromises.push(initResult)}this._donePromise=Promise.all(asyncInitPromises).then(function(){_this._done=!0}),0===asyncInitPromises.length&&(this._done=!0)}return Object.defineProperty(ApplicationInitStatus.prototype,"done",{get:function(){return this._done},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationInitStatus.prototype,"donePromise",{get:function(){return this._donePromise},enumerable:!0,configurable:!0}),ApplicationInitStatus.decorators=[{type:di_1.Injectable}],ApplicationInitStatus.ctorParameters=[{type:Array,decorators:[{type:di_1.Inject,args:[exports.APP_INITIALIZER]},{type:di_1.Optional}]}],ApplicationInitStatus}();exports.ApplicationInitStatus=ApplicationInitStatus},{"../src/facade/lang":198,"./di":181}],166:[function(require,module,exports){"use strict";function _iterableDiffersFactory(){return change_detection_1.defaultIterableDiffers}function _keyValueDiffersFactory(){return change_detection_1.defaultKeyValueDiffers}var application_init_1=require("./application_init"),application_ref_1=require("./application_ref"),application_tokens_1=require("./application_tokens"),change_detection_1=require("./change_detection/change_detection"),compiler_1=require("./linker/compiler"),component_resolver_1=require("./linker/component_resolver"),dynamic_component_loader_1=require("./linker/dynamic_component_loader"),view_utils_1=require("./linker/view_utils"),metadata_1=require("./metadata");exports._iterableDiffersFactory=_iterableDiffersFactory,exports._keyValueDiffersFactory=_keyValueDiffersFactory,exports.APPLICATION_COMMON_PROVIDERS=[];var ApplicationModule=function(){function ApplicationModule(){}return ApplicationModule.decorators=[{type:metadata_1.NgModule,args:[{providers:[application_ref_1.ApplicationRef_,{provide:application_ref_1.ApplicationRef,useExisting:application_ref_1.ApplicationRef_},application_init_1.ApplicationInitStatus,compiler_1.Compiler,{provide:component_resolver_1.ComponentResolver,useExisting:compiler_1.Compiler},application_tokens_1.APP_ID_RANDOM_PROVIDER,view_utils_1.ViewUtils,{provide:change_detection_1.IterableDiffers,useFactory:_iterableDiffersFactory},{provide:change_detection_1.KeyValueDiffers,useFactory:_keyValueDiffersFactory},{provide:dynamic_component_loader_1.DynamicComponentLoader,useClass:dynamic_component_loader_1.DynamicComponentLoader_}]}]}],ApplicationModule}();exports.ApplicationModule=ApplicationModule},{"./application_init":165,"./application_ref":167,"./application_tokens":168,"./change_detection/change_detection":170,"./linker/compiler":201,"./linker/component_resolver":204,"./linker/dynamic_component_loader":206,"./linker/view_utils":221,"./metadata":222}],167:[function(require,module,exports){"use strict";function enableProdMode(){if(_runModeLocked)throw new exceptions_1.BaseException("Cannot enable prod mode after platform setup.");_devMode=!1}function lockRunMode(){console.warn("lockRunMode() is deprecated and not needed any more.")}function isDevMode(){return _runModeLocked=!0,_devMode}function createPlatform(injector){if(lang_1.isPresent(_platform)&&!_platform.disposed)throw new exceptions_1.BaseException("There can be only one platform. Destroy the previous one to create a new one.");_platform=injector.get(PlatformRef);var inits=injector.get(application_tokens_1.PLATFORM_INITIALIZER,null);return lang_1.isPresent(inits)&&inits.forEach(function(init){return init()}),_platform}function createPlatformFactory(parentPlaformFactory,name,providers){void 0===providers&&(providers=[]);var marker=new di_1.OpaqueToken("Platform: "+name);return function(extraProviders){return void 0===extraProviders&&(extraProviders=[]),getPlatform()||(parentPlaformFactory?parentPlaformFactory(providers.concat(extraProviders).concat({provide:marker,useValue:!0})):createPlatform(di_1.ReflectiveInjector.resolveAndCreate(providers.concat(extraProviders).concat({provide:marker,useValue:!0})))),assertPlatform(marker)}}function assertPlatform(requiredToken){var platform=getPlatform();if(lang_1.isBlank(platform))throw new exceptions_1.BaseException("No platform exists!");if(lang_1.isPresent(platform)&&lang_1.isBlank(platform.injector.get(requiredToken,null)))throw new exceptions_1.BaseException("A platform with a different configuration has been created. Please destroy it first.");return platform}function disposePlatform(){destroyPlatform()}function destroyPlatform(){lang_1.isPresent(_platform)&&!_platform.destroyed&&_platform.destroy()}function getPlatform(){return lang_1.isPresent(_platform)&&!_platform.disposed?_platform:null}function coreBootstrap(componentFactory,injector){throw new exceptions_1.BaseException("coreBootstrap is deprecated. Use bootstrapModuleFactory instead.")}function coreLoadAndBootstrap(componentType,injector){throw new exceptions_1.BaseException("coreLoadAndBootstrap is deprecated. Use bootstrapModule instead.")}function _callAndReportToExceptionHandler(exceptionHandler,callback){try{var result=callback();return lang_1.isPromise(result)?result.catch(function(e){throw exceptionHandler.call(e),e}):result}catch(e){throw exceptionHandler.call(e),e}}var _platform,__extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},collection_1=require("../src/facade/collection"),exceptions_1=require("../src/facade/exceptions"),lang_1=require("../src/facade/lang"),application_init_1=require("./application_init"),application_tokens_1=require("./application_tokens"),console_1=require("./console"),di_1=require("./di"),compiler_1=require("./linker/compiler"),component_factory_1=require("./linker/component_factory"),component_factory_resolver_1=require("./linker/component_factory_resolver"),profile_1=require("./profile/profile"),testability_1=require("./testability/testability"),ng_zone_1=require("./zone/ng_zone"),_devMode=!0,_runModeLocked=!1;exports.enableProdMode=enableProdMode,exports.lockRunMode=lockRunMode,exports.isDevMode=isDevMode,exports.createPlatform=createPlatform,exports.createPlatformFactory=createPlatformFactory,exports.assertPlatform=assertPlatform,exports.disposePlatform=disposePlatform,exports.destroyPlatform=destroyPlatform,exports.getPlatform=getPlatform,exports.coreBootstrap=coreBootstrap,exports.coreLoadAndBootstrap=coreLoadAndBootstrap;var PlatformRef=function(){function PlatformRef(){}return PlatformRef.prototype.bootstrapModuleFactory=function(moduleFactory){throw exceptions_1.unimplemented()},PlatformRef.prototype.bootstrapModule=function(moduleType,compilerOptions){throw void 0===compilerOptions&&(compilerOptions=[]),exceptions_1.unimplemented()},Object.defineProperty(PlatformRef.prototype,"injector",{get:function(){throw exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformRef.prototype,"disposed",{get:function(){throw exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformRef.prototype,"destroyed",{get:function(){throw exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),PlatformRef}();exports.PlatformRef=PlatformRef;var PlatformRef_=function(_super){function PlatformRef_(_injector){_super.call(this),this._injector=_injector,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return __extends(PlatformRef_,_super),PlatformRef_.prototype.registerDisposeListener=function(dispose){this.onDestroy(dispose)},PlatformRef_.prototype.onDestroy=function(callback){this._destroyListeners.push(callback)},Object.defineProperty(PlatformRef_.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformRef_.prototype,"disposed",{get:function(){return this.destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformRef_.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),PlatformRef_.prototype.destroy=function(){if(this._destroyed)throw new exceptions_1.BaseException("The platform has already been destroyed!");collection_1.ListWrapper.clone(this._modules).forEach(function(app){return app.destroy()}),this._destroyListeners.forEach(function(dispose){return dispose()}),this._destroyed=!0},PlatformRef_.prototype.dispose=function(){this.destroy()},PlatformRef_.prototype.bootstrapModuleFactory=function(moduleFactory){return this._bootstrapModuleFactoryWithZone(moduleFactory,null)},PlatformRef_.prototype._bootstrapModuleFactoryWithZone=function(moduleFactory,ngZone){var _this=this;return ngZone||(ngZone=new ng_zone_1.NgZone({enableLongStackTrace:isDevMode()})),ngZone.run(function(){var ngZoneInjector=di_1.ReflectiveInjector.resolveAndCreate([{provide:ng_zone_1.NgZone,useValue:ngZone}],_this.injector),moduleRef=moduleFactory.create(ngZoneInjector),exceptionHandler=moduleRef.injector.get(exceptions_1.ExceptionHandler,null);if(!exceptionHandler)throw new Error("No ExceptionHandler. Is platform module (BrowserModule) included?");return moduleRef.onDestroy(function(){return collection_1.ListWrapper.remove(_this._modules,moduleRef)}),ngZone.onError.subscribe({next:function(error){exceptionHandler.call(error.error,error.stackTrace)}}),_callAndReportToExceptionHandler(exceptionHandler,function(){var initStatus=moduleRef.injector.get(application_init_1.ApplicationInitStatus);return initStatus.donePromise.then(function(){return _this._moduleDoBootstrap(moduleRef),moduleRef})})})},PlatformRef_.prototype.bootstrapModule=function(moduleType,compilerOptions){return void 0===compilerOptions&&(compilerOptions=[]),this._bootstrapModuleWithZone(moduleType,compilerOptions,null)},PlatformRef_.prototype._bootstrapModuleWithZone=function(moduleType,compilerOptions,ngZone){var _this=this;void 0===compilerOptions&&(compilerOptions=[]);var compilerFactory=this.injector.get(compiler_1.CompilerFactory),compiler=compilerFactory.createCompiler(compilerOptions instanceof Array?compilerOptions:[compilerOptions]);return compiler.compileModuleAsync(moduleType).then(function(moduleFactory){return _this._bootstrapModuleFactoryWithZone(moduleFactory,ngZone)})},PlatformRef_.prototype._moduleDoBootstrap=function(moduleRef){var appRef=moduleRef.injector.get(ApplicationRef);if(moduleRef.bootstrapFactories.length>0)moduleRef.bootstrapFactories.forEach(function(compFactory){return appRef.bootstrap(compFactory)});else{if(!moduleRef.instance.ngDoBootstrap)throw new exceptions_1.BaseException("The module "+lang_1.stringify(moduleRef.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');moduleRef.instance.ngDoBootstrap(appRef)}},PlatformRef_.decorators=[{type:di_1.Injectable}],PlatformRef_.ctorParameters=[{type:di_1.Injector}],PlatformRef_}(PlatformRef);exports.PlatformRef_=PlatformRef_;var ApplicationRef=function(){function ApplicationRef(){}return Object.defineProperty(ApplicationRef.prototype,"injector",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationRef.prototype,"zone",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationRef.prototype,"componentTypes",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationRef.prototype,"components",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),ApplicationRef}();exports.ApplicationRef=ApplicationRef;var ApplicationRef_=function(_super){function ApplicationRef_(_zone,_console,_injector,_exceptionHandler,_componentFactoryResolver,_initStatus,_testabilityRegistry,_testability){var _this=this;_super.call(this),this._zone=_zone,this._console=_console,this._injector=_injector,this._exceptionHandler=_exceptionHandler,this._componentFactoryResolver=_componentFactoryResolver,this._initStatus=_initStatus,this._testabilityRegistry=_testabilityRegistry,this._testability=_testability,this._bootstrapListeners=[],this._disposeListeners=[],this._rootComponents=[],this._rootComponentTypes=[],this._changeDetectorRefs=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._enforceNoNewChanges=isDevMode(),this._zone.onMicrotaskEmpty.subscribe({next:function(){_this._zone.run(function(){_this.tick()})}})}return __extends(ApplicationRef_,_super),ApplicationRef_.prototype.registerBootstrapListener=function(listener){this._bootstrapListeners.push(listener)},ApplicationRef_.prototype.registerDisposeListener=function(dispose){this._disposeListeners.push(dispose)},ApplicationRef_.prototype.registerChangeDetector=function(changeDetector){this._changeDetectorRefs.push(changeDetector)},ApplicationRef_.prototype.unregisterChangeDetector=function(changeDetector){collection_1.ListWrapper.remove(this._changeDetectorRefs,changeDetector)},ApplicationRef_.prototype.waitForAsyncInitializers=function(){return this._initStatus.donePromise},ApplicationRef_.prototype.run=function(callback){var _this=this;return this._zone.run(function(){return _callAndReportToExceptionHandler(_this._exceptionHandler,callback)})},ApplicationRef_.prototype.bootstrap=function(componentOrFactory){var _this=this;if(!this._initStatus.done)throw new exceptions_1.BaseException("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");var componentFactory;componentFactory=componentOrFactory instanceof component_factory_1.ComponentFactory?componentOrFactory:this._componentFactoryResolver.resolveComponentFactory(componentOrFactory),this._rootComponentTypes.push(componentFactory.componentType);var compRef=componentFactory.create(this._injector,[],componentFactory.selector);compRef.onDestroy(function(){_this._unloadComponent(compRef)});var testability=compRef.injector.get(testability_1.Testability,null);return lang_1.isPresent(testability)&&compRef.injector.get(testability_1.TestabilityRegistry).registerApplication(compRef.location.nativeElement,testability),this._loadComponent(compRef),isDevMode()&&this._console.log("Angular 2 is running in the development mode. Call enableProdMode() to enable the production mode."),compRef},ApplicationRef_.prototype._loadComponent=function(componentRef){this._changeDetectorRefs.push(componentRef.changeDetectorRef),this.tick(),this._rootComponents.push(componentRef);var listeners=this._injector.get(application_tokens_1.APP_BOOTSTRAP_LISTENER,[]).concat(this._bootstrapListeners);listeners.forEach(function(listener){return listener(componentRef)})},ApplicationRef_.prototype._unloadComponent=function(componentRef){collection_1.ListWrapper.contains(this._rootComponents,componentRef)&&(this.unregisterChangeDetector(componentRef.changeDetectorRef),collection_1.ListWrapper.remove(this._rootComponents,componentRef))},Object.defineProperty(ApplicationRef_.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationRef_.prototype,"zone",{get:function(){return this._zone},enumerable:!0,configurable:!0}),ApplicationRef_.prototype.tick=function(){if(this._runningTick)throw new exceptions_1.BaseException("ApplicationRef.tick is called recursively");var s=ApplicationRef_._tickScope();try{this._runningTick=!0,this._changeDetectorRefs.forEach(function(detector){return detector.detectChanges()}),this._enforceNoNewChanges&&this._changeDetectorRefs.forEach(function(detector){return detector.checkNoChanges()})}finally{this._runningTick=!1,profile_1.wtfLeave(s)}},ApplicationRef_.prototype.ngOnDestroy=function(){collection_1.ListWrapper.clone(this._rootComponents).forEach(function(ref){return ref.destroy()}),this._disposeListeners.forEach(function(dispose){return dispose()})},ApplicationRef_.prototype.dispose=function(){this.ngOnDestroy()},Object.defineProperty(ApplicationRef_.prototype,"componentTypes",{get:function(){return this._rootComponentTypes},enumerable:!0,configurable:!0}),Object.defineProperty(ApplicationRef_.prototype,"components",{get:function(){return this._rootComponents},enumerable:!0,configurable:!0}),ApplicationRef_._tickScope=profile_1.wtfCreateScope("ApplicationRef#tick()"),ApplicationRef_.decorators=[{type:di_1.Injectable}],ApplicationRef_.ctorParameters=[{type:ng_zone_1.NgZone},{type:console_1.Console},{type:di_1.Injector},{type:exceptions_1.ExceptionHandler},{type:component_factory_resolver_1.ComponentFactoryResolver},{type:application_init_1.ApplicationInitStatus},{type:testability_1.TestabilityRegistry,decorators:[{type:di_1.Optional}]},{type:testability_1.Testability,decorators:[{type:di_1.Optional}]}],ApplicationRef_}(ApplicationRef);exports.ApplicationRef_=ApplicationRef_},{"../src/facade/collection":195,"../src/facade/exceptions":197,"../src/facade/lang":198,"./application_init":165,"./application_tokens":168,"./console":178,"./di":181,"./linker/compiler":201,"./linker/component_factory":202,"./linker/component_factory_resolver":203,"./profile/profile":230,"./testability/testability":240,"./zone/ng_zone":244}],168:[function(require,module,exports){"use strict";function _appIdRandomProviderFactory(){return""+_randomChar()+_randomChar()+_randomChar()}function _randomChar(){return lang_1.StringWrapper.fromCharCode(97+lang_1.Math.floor(25*lang_1.Math.random()))}var lang_1=require("../src/facade/lang"),di_1=require("./di");exports.APP_ID=new di_1.OpaqueToken("AppId"),exports._appIdRandomProviderFactory=_appIdRandomProviderFactory,exports.APP_ID_RANDOM_PROVIDER={provide:exports.APP_ID,useFactory:_appIdRandomProviderFactory,deps:[]},exports.PLATFORM_INITIALIZER=new di_1.OpaqueToken("Platform Initializer"),exports.APP_BOOTSTRAP_LISTENER=new di_1.OpaqueToken("appBootstrapListener"),exports.PACKAGE_ROOT_URL=new di_1.OpaqueToken("Application Packages Root URL")},{"../src/facade/lang":198,"./di":181}],169:[function(require,module,exports){"use strict";var change_detection_1=require("./change_detection/change_detection");exports.ChangeDetectionStrategy=change_detection_1.ChangeDetectionStrategy,exports.ChangeDetectorRef=change_detection_1.ChangeDetectorRef,exports.CollectionChangeRecord=change_detection_1.CollectionChangeRecord,exports.DefaultIterableDiffer=change_detection_1.DefaultIterableDiffer,exports.IterableDiffers=change_detection_1.IterableDiffers,exports.KeyValueChangeRecord=change_detection_1.KeyValueChangeRecord,exports.KeyValueDiffers=change_detection_1.KeyValueDiffers,exports.SimpleChange=change_detection_1.SimpleChange,exports.WrappedValue=change_detection_1.WrappedValue},{"./change_detection/change_detection":170}],170:[function(require,module,exports){"use strict";var default_iterable_differ_1=require("./differs/default_iterable_differ"),default_keyvalue_differ_1=require("./differs/default_keyvalue_differ"),iterable_differs_1=require("./differs/iterable_differs"),keyvalue_differs_1=require("./differs/keyvalue_differs"),change_detection_util_1=require("./change_detection_util");exports.SimpleChange=change_detection_util_1.SimpleChange,exports.UNINITIALIZED=change_detection_util_1.UNINITIALIZED,exports.ValueUnwrapper=change_detection_util_1.ValueUnwrapper,exports.WrappedValue=change_detection_util_1.WrappedValue,exports.devModeEqual=change_detection_util_1.devModeEqual,exports.looseIdentical=change_detection_util_1.looseIdentical;var change_detector_ref_1=require("./change_detector_ref");exports.ChangeDetectorRef=change_detector_ref_1.ChangeDetectorRef;var constants_1=require("./constants");exports.CHANGE_DETECTION_STRATEGY_VALUES=constants_1.CHANGE_DETECTION_STRATEGY_VALUES,exports.ChangeDetectionStrategy=constants_1.ChangeDetectionStrategy,exports.ChangeDetectorStatus=constants_1.ChangeDetectorStatus,exports.isDefaultChangeDetectionStrategy=constants_1.isDefaultChangeDetectionStrategy;var default_iterable_differ_2=require("./differs/default_iterable_differ");exports.CollectionChangeRecord=default_iterable_differ_2.CollectionChangeRecord,exports.DefaultIterableDifferFactory=default_iterable_differ_2.DefaultIterableDifferFactory;var default_iterable_differ_3=require("./differs/default_iterable_differ");exports.DefaultIterableDiffer=default_iterable_differ_3.DefaultIterableDiffer;var default_keyvalue_differ_2=require("./differs/default_keyvalue_differ");exports.DefaultKeyValueDifferFactory=default_keyvalue_differ_2.DefaultKeyValueDifferFactory,exports.KeyValueChangeRecord=default_keyvalue_differ_2.KeyValueChangeRecord;var iterable_differs_2=require("./differs/iterable_differs");exports.IterableDiffers=iterable_differs_2.IterableDiffers;var keyvalue_differs_2=require("./differs/keyvalue_differs");exports.KeyValueDiffers=keyvalue_differs_2.KeyValueDiffers,exports.keyValDiff=[new default_keyvalue_differ_1.DefaultKeyValueDifferFactory],exports.iterableDiff=[new default_iterable_differ_1.DefaultIterableDifferFactory],exports.defaultIterableDiffers=new iterable_differs_1.IterableDiffers(exports.iterableDiff),exports.defaultKeyValueDiffers=new keyvalue_differs_1.KeyValueDiffers(exports.keyValDiff)},{"./change_detection_util":171,"./change_detector_ref":172,"./constants":173,"./differs/default_iterable_differ":174,"./differs/default_keyvalue_differ":175,"./differs/iterable_differs":176,"./differs/keyvalue_differs":177}],171:[function(require,module,exports){"use strict";function devModeEqual(a,b){return collection_1.isListLikeIterable(a)&&collection_1.isListLikeIterable(b)?collection_1.areIterablesEqual(a,b,devModeEqual):!(collection_1.isListLikeIterable(a)||lang_1.isPrimitive(a)||collection_1.isListLikeIterable(b)||lang_1.isPrimitive(b))||lang_1.looseIdentical(a,b)}var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),lang_2=require("../facade/lang");exports.looseIdentical=lang_2.looseIdentical,exports.UNINITIALIZED={toString:function(){return"CD_INIT_VALUE"}},exports.devModeEqual=devModeEqual;var WrappedValue=function(){function WrappedValue(wrapped){this.wrapped=wrapped}return WrappedValue.wrap=function(value){return new WrappedValue(value)},WrappedValue}();exports.WrappedValue=WrappedValue;var ValueUnwrapper=function(){function ValueUnwrapper(){this.hasWrappedValue=!1}return ValueUnwrapper.prototype.unwrap=function(value){return value instanceof WrappedValue?(this.hasWrappedValue=!0,value.wrapped):value},ValueUnwrapper.prototype.reset=function(){this.hasWrappedValue=!1},ValueUnwrapper}();exports.ValueUnwrapper=ValueUnwrapper;var SimpleChange=function(){function SimpleChange(previousValue,currentValue){this.previousValue=previousValue,this.currentValue=currentValue}return SimpleChange.prototype.isFirstChange=function(){return this.previousValue===exports.UNINITIALIZED},SimpleChange}();exports.SimpleChange=SimpleChange},{"../facade/collection":195,"../facade/lang":198}],172:[function(require,module,exports){"use strict";var ChangeDetectorRef=function(){function ChangeDetectorRef(){}return ChangeDetectorRef}();exports.ChangeDetectorRef=ChangeDetectorRef},{}],173:[function(require,module,exports){"use strict";function isDefaultChangeDetectionStrategy(changeDetectionStrategy){return lang_1.isBlank(changeDetectionStrategy)||changeDetectionStrategy===ChangeDetectionStrategy.Default}var lang_1=require("../facade/lang");!function(ChangeDetectionStrategy){ChangeDetectionStrategy[ChangeDetectionStrategy.OnPush=0]="OnPush",ChangeDetectionStrategy[ChangeDetectionStrategy.Default=1]="Default"}(exports.ChangeDetectionStrategy||(exports.ChangeDetectionStrategy={}));var ChangeDetectionStrategy=exports.ChangeDetectionStrategy;!function(ChangeDetectorStatus){ChangeDetectorStatus[ChangeDetectorStatus.CheckOnce=0]="CheckOnce",ChangeDetectorStatus[ChangeDetectorStatus.Checked=1]="Checked",ChangeDetectorStatus[ChangeDetectorStatus.CheckAlways=2]="CheckAlways",ChangeDetectorStatus[ChangeDetectorStatus.Detached=3]="Detached",ChangeDetectorStatus[ChangeDetectorStatus.Errored=4]="Errored",ChangeDetectorStatus[ChangeDetectorStatus.Destroyed=5]="Destroyed"}(exports.ChangeDetectorStatus||(exports.ChangeDetectorStatus={}));var ChangeDetectorStatus=exports.ChangeDetectorStatus;exports.CHANGE_DETECTION_STRATEGY_VALUES=[ChangeDetectionStrategy.OnPush,ChangeDetectionStrategy.Default],
exports.CHANGE_DETECTOR_STATUS_VALUES=[ChangeDetectorStatus.CheckOnce,ChangeDetectorStatus.Checked,ChangeDetectorStatus.CheckAlways,ChangeDetectorStatus.Detached,ChangeDetectorStatus.Errored,ChangeDetectorStatus.Destroyed],exports.isDefaultChangeDetectionStrategy=isDefaultChangeDetectionStrategy},{"../facade/lang":198}],174:[function(require,module,exports){"use strict";function getPreviousIndex(item,addRemoveOffset,moveOffsets){var previousIndex=item.previousIndex;if(null===previousIndex)return previousIndex;var moveOffset=0;return moveOffsets&&previousIndex<moveOffsets.length&&(moveOffset=moveOffsets[previousIndex]),previousIndex+addRemoveOffset+moveOffset}var collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),DefaultIterableDifferFactory=function(){function DefaultIterableDifferFactory(){}return DefaultIterableDifferFactory.prototype.supports=function(obj){return collection_1.isListLikeIterable(obj)},DefaultIterableDifferFactory.prototype.create=function(cdRef,trackByFn){return new DefaultIterableDiffer(trackByFn)},DefaultIterableDifferFactory}();exports.DefaultIterableDifferFactory=DefaultIterableDifferFactory;var trackByIdentity=function(index,item){return item},DefaultIterableDiffer=function(){function DefaultIterableDiffer(_trackByFn){this._trackByFn=_trackByFn,this._length=null,this._collection=null,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=lang_1.isPresent(this._trackByFn)?this._trackByFn:trackByIdentity}return Object.defineProperty(DefaultIterableDiffer.prototype,"collection",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultIterableDiffer.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),DefaultIterableDiffer.prototype.forEachItem=function(fn){var record;for(record=this._itHead;null!==record;record=record._next)fn(record)},DefaultIterableDiffer.prototype.forEachOperation=function(fn){for(var nextIt=this._itHead,nextRemove=this._removalsHead,addRemoveOffset=0,moveOffsets=null;nextIt||nextRemove;){var record=!nextRemove||nextIt&&nextIt.currentIndex<getPreviousIndex(nextRemove,addRemoveOffset,moveOffsets)?nextIt:nextRemove,adjPreviousIndex=getPreviousIndex(record,addRemoveOffset,moveOffsets),currentIndex=record.currentIndex;if(record===nextRemove)addRemoveOffset--,nextRemove=nextRemove._nextRemoved;else if(nextIt=nextIt._next,null==record.previousIndex)addRemoveOffset++;else{moveOffsets||(moveOffsets=[]);var localMovePreviousIndex=adjPreviousIndex-addRemoveOffset,localCurrentIndex=currentIndex-addRemoveOffset;if(localMovePreviousIndex!=localCurrentIndex){for(var i=0;i<localMovePreviousIndex;i++){var offset=i<moveOffsets.length?moveOffsets[i]:moveOffsets[i]=0,index=offset+i;localCurrentIndex<=index&&index<localMovePreviousIndex&&(moveOffsets[i]=offset+1)}var previousIndex=record.previousIndex;moveOffsets[previousIndex]=localCurrentIndex-localMovePreviousIndex}}adjPreviousIndex!==currentIndex&&fn(record,adjPreviousIndex,currentIndex)}},DefaultIterableDiffer.prototype.forEachPreviousItem=function(fn){var record;for(record=this._previousItHead;null!==record;record=record._nextPrevious)fn(record)},DefaultIterableDiffer.prototype.forEachAddedItem=function(fn){var record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)},DefaultIterableDiffer.prototype.forEachMovedItem=function(fn){var record;for(record=this._movesHead;null!==record;record=record._nextMoved)fn(record)},DefaultIterableDiffer.prototype.forEachRemovedItem=function(fn){var record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)},DefaultIterableDiffer.prototype.forEachIdentityChange=function(fn){var record;for(record=this._identityChangesHead;null!==record;record=record._nextIdentityChange)fn(record)},DefaultIterableDiffer.prototype.diff=function(collection){if(lang_1.isBlank(collection)&&(collection=[]),!collection_1.isListLikeIterable(collection))throw new exceptions_1.BaseException("Error trying to diff '"+collection+"'");return this.check(collection)?this:null},DefaultIterableDiffer.prototype.onDestroy=function(){},DefaultIterableDiffer.prototype.check=function(collection){var _this=this;this._reset();var index,item,itemTrackBy,record=this._itHead,mayBeDirty=!1;if(lang_1.isArray(collection)){var list=collection;for(this._length=collection.length,index=0;index<this._length;index++)item=list[index],itemTrackBy=this._trackByFn(index,item),null!==record&&lang_1.looseIdentical(record.trackById,itemTrackBy)?(mayBeDirty&&(record=this._verifyReinsertion(record,item,itemTrackBy,index)),lang_1.looseIdentical(record.item,item)||this._addIdentityChange(record,item)):(record=this._mismatch(record,item,itemTrackBy,index),mayBeDirty=!0),record=record._next}else index=0,collection_1.iterateListLike(collection,function(item){itemTrackBy=_this._trackByFn(index,item),null!==record&&lang_1.looseIdentical(record.trackById,itemTrackBy)?(mayBeDirty&&(record=_this._verifyReinsertion(record,item,itemTrackBy,index)),lang_1.looseIdentical(record.item,item)||_this._addIdentityChange(record,item)):(record=_this._mismatch(record,item,itemTrackBy,index),mayBeDirty=!0),record=record._next,index++}),this._length=index;return this._truncate(record),this._collection=collection,this.isDirty},Object.defineProperty(DefaultIterableDiffer.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),DefaultIterableDiffer.prototype._reset=function(){if(this.isDirty){var record,nextRecord;for(record=this._previousItHead=this._itHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._additionsHead;null!==record;record=record._nextAdded)record.previousIndex=record.currentIndex;for(this._additionsHead=this._additionsTail=null,record=this._movesHead;null!==record;record=nextRecord)record.previousIndex=record.currentIndex,nextRecord=record._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},DefaultIterableDiffer.prototype._mismatch=function(record,item,itemTrackBy,index){var previousRecord;return null===record?previousRecord=this._itTail:(previousRecord=record._prev,this._remove(record)),record=null===this._linkedRecords?null:this._linkedRecords.get(itemTrackBy,index),null!==record?(lang_1.looseIdentical(record.item,item)||this._addIdentityChange(record,item),this._moveAfter(record,previousRecord,index)):(record=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy),null!==record?(lang_1.looseIdentical(record.item,item)||this._addIdentityChange(record,item),this._reinsertAfter(record,previousRecord,index)):record=this._addAfter(new CollectionChangeRecord(item,itemTrackBy),previousRecord,index)),record},DefaultIterableDiffer.prototype._verifyReinsertion=function(record,item,itemTrackBy,index){var reinsertRecord=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy);return null!==reinsertRecord?record=this._reinsertAfter(reinsertRecord,record._prev,index):record.currentIndex!=index&&(record.currentIndex=index,this._addToMoves(record,index)),record},DefaultIterableDiffer.prototype._truncate=function(record){for(;null!==record;){var nextRecord=record._next;this._addToRemovals(this._unlink(record)),record=nextRecord}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},DefaultIterableDiffer.prototype._reinsertAfter=function(record,prevRecord,index){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(record);var prev=record._prevRemoved,next=record._nextRemoved;return null===prev?this._removalsHead=next:prev._nextRemoved=next,null===next?this._removalsTail=prev:next._prevRemoved=prev,this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record},DefaultIterableDiffer.prototype._moveAfter=function(record,prevRecord,index){return this._unlink(record),this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record},DefaultIterableDiffer.prototype._addAfter=function(record,prevRecord,index){return this._insertAfter(record,prevRecord,index),null===this._additionsTail?this._additionsTail=this._additionsHead=record:this._additionsTail=this._additionsTail._nextAdded=record,record},DefaultIterableDiffer.prototype._insertAfter=function(record,prevRecord,index){var next=null===prevRecord?this._itHead:prevRecord._next;return record._next=next,record._prev=prevRecord,null===next?this._itTail=record:next._prev=record,null===prevRecord?this._itHead=record:prevRecord._next=record,null===this._linkedRecords&&(this._linkedRecords=new _DuplicateMap),this._linkedRecords.put(record),record.currentIndex=index,record},DefaultIterableDiffer.prototype._remove=function(record){return this._addToRemovals(this._unlink(record))},DefaultIterableDiffer.prototype._unlink=function(record){null!==this._linkedRecords&&this._linkedRecords.remove(record);var prev=record._prev,next=record._next;return null===prev?this._itHead=next:prev._next=next,null===next?this._itTail=prev:next._prev=prev,record},DefaultIterableDiffer.prototype._addToMoves=function(record,toIndex){return record.previousIndex===toIndex?record:(null===this._movesTail?this._movesTail=this._movesHead=record:this._movesTail=this._movesTail._nextMoved=record,record)},DefaultIterableDiffer.prototype._addToRemovals=function(record){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _DuplicateMap),this._unlinkedRecords.put(record),record.currentIndex=null,record._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=record,record._prevRemoved=null):(record._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=record),record},DefaultIterableDiffer.prototype._addIdentityChange=function(record,item){return record.item=item,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=record:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=record,record},DefaultIterableDiffer.prototype.toString=function(){var list=[];this.forEachItem(function(record){return list.push(record)});var previous=[];this.forEachPreviousItem(function(record){return previous.push(record)});var additions=[];this.forEachAddedItem(function(record){return additions.push(record)});var moves=[];this.forEachMovedItem(function(record){return moves.push(record)});var removals=[];this.forEachRemovedItem(function(record){return removals.push(record)});var identityChanges=[];return this.forEachIdentityChange(function(record){return identityChanges.push(record)}),"collection: "+list.join(", ")+"\nprevious: "+previous.join(", ")+"\nadditions: "+additions.join(", ")+"\nmoves: "+moves.join(", ")+"\nremovals: "+removals.join(", ")+"\nidentityChanges: "+identityChanges.join(", ")+"\n"},DefaultIterableDiffer}();exports.DefaultIterableDiffer=DefaultIterableDiffer;var CollectionChangeRecord=function(){function CollectionChangeRecord(item,trackById){this.item=item,this.trackById=trackById,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}return CollectionChangeRecord.prototype.toString=function(){return this.previousIndex===this.currentIndex?lang_1.stringify(this.item):lang_1.stringify(this.item)+"["+lang_1.stringify(this.previousIndex)+"->"+lang_1.stringify(this.currentIndex)+"]"},CollectionChangeRecord}();exports.CollectionChangeRecord=CollectionChangeRecord;var _DuplicateItemRecordList=function(){function _DuplicateItemRecordList(){this._head=null,this._tail=null}return _DuplicateItemRecordList.prototype.add=function(record){null===this._head?(this._head=this._tail=record,record._nextDup=null,record._prevDup=null):(this._tail._nextDup=record,record._prevDup=this._tail,record._nextDup=null,this._tail=record)},_DuplicateItemRecordList.prototype.get=function(trackById,afterIndex){var record;for(record=this._head;null!==record;record=record._nextDup)if((null===afterIndex||afterIndex<record.currentIndex)&&lang_1.looseIdentical(record.trackById,trackById))return record;return null},_DuplicateItemRecordList.prototype.remove=function(record){var prev=record._prevDup,next=record._nextDup;return null===prev?this._head=next:prev._nextDup=next,null===next?this._tail=prev:next._prevDup=prev,null===this._head},_DuplicateItemRecordList}(),_DuplicateMap=function(){function _DuplicateMap(){this.map=new Map}return _DuplicateMap.prototype.put=function(record){var key=lang_1.getMapKey(record.trackById),duplicates=this.map.get(key);lang_1.isPresent(duplicates)||(duplicates=new _DuplicateItemRecordList,this.map.set(key,duplicates)),duplicates.add(record)},_DuplicateMap.prototype.get=function(trackById,afterIndex){void 0===afterIndex&&(afterIndex=null);var key=lang_1.getMapKey(trackById),recordList=this.map.get(key);return lang_1.isBlank(recordList)?null:recordList.get(trackById,afterIndex)},_DuplicateMap.prototype.remove=function(record){var key=lang_1.getMapKey(record.trackById),recordList=this.map.get(key);return recordList.remove(record)&&this.map.delete(key),record},Object.defineProperty(_DuplicateMap.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),_DuplicateMap.prototype.clear=function(){this.map.clear()},_DuplicateMap.prototype.toString=function(){return"_DuplicateMap("+lang_1.stringify(this.map)+")"},_DuplicateMap}()},{"../../facade/collection":195,"../../facade/exceptions":197,"../../facade/lang":198}],175:[function(require,module,exports){"use strict";var collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),DefaultKeyValueDifferFactory=function(){function DefaultKeyValueDifferFactory(){}return DefaultKeyValueDifferFactory.prototype.supports=function(obj){return obj instanceof Map||lang_1.isJsObject(obj)},DefaultKeyValueDifferFactory.prototype.create=function(cdRef){return new DefaultKeyValueDiffer},DefaultKeyValueDifferFactory}();exports.DefaultKeyValueDifferFactory=DefaultKeyValueDifferFactory;var DefaultKeyValueDiffer=function(){function DefaultKeyValueDiffer(){this._records=new Map,this._mapHead=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(DefaultKeyValueDiffer.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),DefaultKeyValueDiffer.prototype.forEachItem=function(fn){var record;for(record=this._mapHead;null!==record;record=record._next)fn(record)},DefaultKeyValueDiffer.prototype.forEachPreviousItem=function(fn){var record;for(record=this._previousMapHead;null!==record;record=record._nextPrevious)fn(record)},DefaultKeyValueDiffer.prototype.forEachChangedItem=function(fn){var record;for(record=this._changesHead;null!==record;record=record._nextChanged)fn(record)},DefaultKeyValueDiffer.prototype.forEachAddedItem=function(fn){var record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)},DefaultKeyValueDiffer.prototype.forEachRemovedItem=function(fn){var record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)},DefaultKeyValueDiffer.prototype.diff=function(map){if(map){if(!(map instanceof Map||lang_1.isJsObject(map)))throw new exceptions_1.BaseException("Error trying to diff '"+map+"'")}else map=new Map;return this.check(map)?this:null},DefaultKeyValueDiffer.prototype.onDestroy=function(){},DefaultKeyValueDiffer.prototype.check=function(map){var _this=this;this._reset();var records=this._records,oldSeqRecord=this._mapHead,lastOldSeqRecord=null,lastNewSeqRecord=null,seqChanged=!1;return this._forEach(map,function(value,key){var newSeqRecord;oldSeqRecord&&key===oldSeqRecord.key?(newSeqRecord=oldSeqRecord,_this._maybeAddToChanges(newSeqRecord,value)):(seqChanged=!0,null!==oldSeqRecord&&(_this._removeFromSeq(lastOldSeqRecord,oldSeqRecord),_this._addToRemovals(oldSeqRecord)),records.has(key)?(newSeqRecord=records.get(key),_this._maybeAddToChanges(newSeqRecord,value)):(newSeqRecord=new KeyValueChangeRecord(key),records.set(key,newSeqRecord),newSeqRecord.currentValue=value,_this._addToAdditions(newSeqRecord))),seqChanged&&(_this._isInRemovals(newSeqRecord)&&_this._removeFromRemovals(newSeqRecord),null==lastNewSeqRecord?_this._mapHead=newSeqRecord:lastNewSeqRecord._next=newSeqRecord),lastOldSeqRecord=oldSeqRecord,lastNewSeqRecord=newSeqRecord,oldSeqRecord=oldSeqRecord&&oldSeqRecord._next}),this._truncate(lastOldSeqRecord,oldSeqRecord),this.isDirty},DefaultKeyValueDiffer.prototype._reset=function(){if(this.isDirty){var record=void 0;for(record=this._previousMapHead=this._mapHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._changesHead;null!==record;record=record._nextChanged)record.previousValue=record.currentValue;for(record=this._additionsHead;null!=record;record=record._nextAdded)record.previousValue=record.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=this._removalsTail=null}},DefaultKeyValueDiffer.prototype._truncate=function(lastRecord,record){for(;null!==record;){null===lastRecord?this._mapHead=null:lastRecord._next=null;var nextRecord=record._next;this._addToRemovals(record),lastRecord=record,record=nextRecord}for(var rec=this._removalsHead;null!==rec;rec=rec._nextRemoved)rec.previousValue=rec.currentValue,rec.currentValue=null,this._records.delete(rec.key)},DefaultKeyValueDiffer.prototype._maybeAddToChanges=function(record,newValue){lang_1.looseIdentical(newValue,record.currentValue)||(record.previousValue=record.currentValue,record.currentValue=newValue,this._addToChanges(record))},DefaultKeyValueDiffer.prototype._isInRemovals=function(record){return record===this._removalsHead||null!==record._nextRemoved||null!==record._prevRemoved},DefaultKeyValueDiffer.prototype._addToRemovals=function(record){null===this._removalsHead?this._removalsHead=this._removalsTail=record:(this._removalsTail._nextRemoved=record,record._prevRemoved=this._removalsTail,this._removalsTail=record)},DefaultKeyValueDiffer.prototype._removeFromSeq=function(prev,record){var next=record._next;null===prev?this._mapHead=next:prev._next=next,record._next=null},DefaultKeyValueDiffer.prototype._removeFromRemovals=function(record){var prev=record._prevRemoved,next=record._nextRemoved;null===prev?this._removalsHead=next:prev._nextRemoved=next,null===next?this._removalsTail=prev:next._prevRemoved=prev,record._prevRemoved=record._nextRemoved=null},DefaultKeyValueDiffer.prototype._addToAdditions=function(record){null===this._additionsHead?this._additionsHead=this._additionsTail=record:(this._additionsTail._nextAdded=record,this._additionsTail=record)},DefaultKeyValueDiffer.prototype._addToChanges=function(record){null===this._changesHead?this._changesHead=this._changesTail=record:(this._changesTail._nextChanged=record,this._changesTail=record)},DefaultKeyValueDiffer.prototype.toString=function(){var record,items=[],previous=[],changes=[],additions=[],removals=[];for(record=this._mapHead;null!==record;record=record._next)items.push(lang_1.stringify(record));for(record=this._previousMapHead;null!==record;record=record._nextPrevious)previous.push(lang_1.stringify(record));for(record=this._changesHead;null!==record;record=record._nextChanged)changes.push(lang_1.stringify(record));for(record=this._additionsHead;null!==record;record=record._nextAdded)additions.push(lang_1.stringify(record));for(record=this._removalsHead;null!==record;record=record._nextRemoved)removals.push(lang_1.stringify(record));return"map: "+items.join(", ")+"\nprevious: "+previous.join(", ")+"\nadditions: "+additions.join(", ")+"\nchanges: "+changes.join(", ")+"\nremovals: "+removals.join(", ")+"\n"},DefaultKeyValueDiffer.prototype._forEach=function(obj,fn){obj instanceof Map?obj.forEach(fn):collection_1.StringMapWrapper.forEach(obj,fn)},DefaultKeyValueDiffer}();exports.DefaultKeyValueDiffer=DefaultKeyValueDiffer;var KeyValueChangeRecord=function(){function KeyValueChangeRecord(key){this.key=key,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._nextAdded=null,this._nextRemoved=null,this._prevRemoved=null,this._nextChanged=null}return KeyValueChangeRecord.prototype.toString=function(){return lang_1.looseIdentical(this.previousValue,this.currentValue)?lang_1.stringify(this.key):lang_1.stringify(this.key)+"["+lang_1.stringify(this.previousValue)+"->"+lang_1.stringify(this.currentValue)+"]"},KeyValueChangeRecord}();exports.KeyValueChangeRecord=KeyValueChangeRecord},{"../../facade/collection":195,"../../facade/exceptions":197,"../../facade/lang":198}],176:[function(require,module,exports){"use strict";var di_1=require("../../di"),collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),IterableDiffers=function(){function IterableDiffers(factories){this.factories=factories}return IterableDiffers.create=function(factories,parent){if(lang_1.isPresent(parent)){var copied=collection_1.ListWrapper.clone(parent.factories);return factories=factories.concat(copied),new IterableDiffers(factories)}return new IterableDiffers(factories)},IterableDiffers.extend=function(factories){return new di_1.Provider(IterableDiffers,{useFactory:function(parent){if(lang_1.isBlank(parent))throw new exceptions_1.BaseException("Cannot extend IterableDiffers without a parent injector");return IterableDiffers.create(factories,parent)},deps:[[IterableDiffers,new di_1.SkipSelfMetadata,new di_1.OptionalMetadata]]})},IterableDiffers.prototype.find=function(iterable){var factory=this.factories.find(function(f){return f.supports(iterable)});if(lang_1.isPresent(factory))return factory;throw new exceptions_1.BaseException("Cannot find a differ supporting object '"+iterable+"' of type '"+lang_1.getTypeNameForDebugging(iterable)+"'")},IterableDiffers}();exports.IterableDiffers=IterableDiffers},{"../../di":181,"../../facade/collection":195,"../../facade/exceptions":197,"../../facade/lang":198}],177:[function(require,module,exports){"use strict";var di_1=require("../../di"),collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),KeyValueDiffers=function(){function KeyValueDiffers(factories){this.factories=factories}return KeyValueDiffers.create=function(factories,parent){if(lang_1.isPresent(parent)){var copied=collection_1.ListWrapper.clone(parent.factories);return factories=factories.concat(copied),new KeyValueDiffers(factories)}return new KeyValueDiffers(factories)},KeyValueDiffers.extend=function(factories){return new di_1.Provider(KeyValueDiffers,{useFactory:function(parent){if(lang_1.isBlank(parent))throw new exceptions_1.BaseException("Cannot extend KeyValueDiffers without a parent injector");return KeyValueDiffers.create(factories,parent)},deps:[[KeyValueDiffers,new di_1.SkipSelfMetadata,new di_1.OptionalMetadata]]})},KeyValueDiffers.prototype.find=function(kv){var factory=this.factories.find(function(f){return f.supports(kv)});if(lang_1.isPresent(factory))return factory;throw new exceptions_1.BaseException("Cannot find a differ supporting object '"+kv+"'")},KeyValueDiffers}();exports.KeyValueDiffers=KeyValueDiffers},{"../../di":181,"../../facade/collection":195,"../../facade/exceptions":197,"../../facade/lang":198}],178:[function(require,module,exports){"use strict";var decorators_1=require("./di/decorators"),lang_1=require("./facade/lang"),Console=function(){function Console(){}return Console.prototype.log=function(message){lang_1.print(message)},Console.prototype.warn=function(message){lang_1.warn(message)},Console.decorators=[{type:decorators_1.Injectable}],Console}();exports.Console=Console},{"./di/decorators":182,"./facade/lang":198}],179:[function(require,module,exports){"use strict";function asNativeElements(debugEls){return debugEls.map(function(el){return el.nativeElement})}function _queryElementChildren(element,predicate,matches){element.childNodes.forEach(function(node){node instanceof DebugElement&&(predicate(node)&&matches.push(node),_queryElementChildren(node,predicate,matches))})}function _queryNodeChildren(parentNode,predicate,matches){parentNode instanceof DebugElement&&parentNode.childNodes.forEach(function(node){predicate(node)&&matches.push(node),node instanceof DebugElement&&_queryNodeChildren(node,predicate,matches)})}function getDebugNode(nativeNode){return _nativeNodeToDebugNode.get(nativeNode)}function getAllDebugNodes(){return collection_1.MapWrapper.values(_nativeNodeToDebugNode)}function indexDebugNode(node){_nativeNodeToDebugNode.set(node.nativeNode,node)}function removeDebugNodeFromIndex(node){_nativeNodeToDebugNode.delete(node.nativeNode)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),EventListener=function(){function EventListener(name,callback){this.name=name,this.callback=callback}return EventListener}();exports.EventListener=EventListener;var DebugNode=function(){function DebugNode(nativeNode,parent,_debugInfo){this._debugInfo=_debugInfo,this.nativeNode=nativeNode,lang_1.isPresent(parent)&&parent instanceof DebugElement?parent.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(DebugNode.prototype,"injector",{get:function(){return lang_1.isPresent(this._debugInfo)?this._debugInfo.injector:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"componentInstance",{get:function(){return lang_1.isPresent(this._debugInfo)?this._debugInfo.component:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"context",{get:function(){return lang_1.isPresent(this._debugInfo)?this._debugInfo.context:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"references",{get:function(){return lang_1.isPresent(this._debugInfo)?this._debugInfo.references:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"providerTokens",{get:function(){return lang_1.isPresent(this._debugInfo)?this._debugInfo.providerTokens:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugNode.prototype,"source",{get:function(){return lang_1.isPresent(this._debugInfo)?this._debugInfo.source:null},enumerable:!0,configurable:!0}),DebugNode.prototype.inject=function(token){return this.injector.get(token)},DebugNode}();exports.DebugNode=DebugNode;var DebugElement=function(_super){function DebugElement(nativeNode,parent,_debugInfo){_super.call(this,nativeNode,parent,_debugInfo),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=nativeNode}return __extends(DebugElement,_super),DebugElement.prototype.addChild=function(child){lang_1.isPresent(child)&&(this.childNodes.push(child),child.parent=this)},DebugElement.prototype.removeChild=function(child){var childIndex=this.childNodes.indexOf(child);childIndex!==-1&&(child.parent=null,this.childNodes.splice(childIndex,1))},DebugElement.prototype.insertChildrenAfter=function(child,newChildren){var siblingIndex=this.childNodes.indexOf(child);if(siblingIndex!==-1){var previousChildren=this.childNodes.slice(0,siblingIndex+1),nextChildren=this.childNodes.slice(siblingIndex+1);this.childNodes=collection_1.ListWrapper.concat(collection_1.ListWrapper.concat(previousChildren,newChildren),nextChildren);for(var i=0;i<newChildren.length;++i){var newChild=newChildren[i];lang_1.isPresent(newChild.parent)&&newChild.parent.removeChild(newChild),newChild.parent=this}}},DebugElement.prototype.query=function(predicate){var results=this.queryAll(predicate);return results.length>0?results[0]:null},DebugElement.prototype.queryAll=function(predicate){var matches=[];return _queryElementChildren(this,predicate,matches),matches},DebugElement.prototype.queryAllNodes=function(predicate){var matches=[];return _queryNodeChildren(this,predicate,matches),matches},Object.defineProperty(DebugElement.prototype,"children",{get:function(){var children=[];return this.childNodes.forEach(function(node){node instanceof DebugElement&&children.push(node)}),children},enumerable:!0,configurable:!0}),DebugElement.prototype.triggerEventHandler=function(eventName,eventObj){this.listeners.forEach(function(listener){listener.name==eventName&&listener.callback(eventObj)})},DebugElement}(DebugNode);exports.DebugElement=DebugElement,exports.asNativeElements=asNativeElements;var _nativeNodeToDebugNode=new Map;exports.getDebugNode=getDebugNode,exports.getAllDebugNodes=getAllDebugNodes,exports.indexDebugNode=indexDebugNode,exports.removeDebugNodeFromIndex=removeDebugNodeFromIndex},{"../facade/collection":195,"../facade/lang":198}],180:[function(require,module,exports){"use strict";var lang_1=require("../facade/lang"),debug_node_1=require("./debug_node"),DebugDomRootRenderer=function(){function DebugDomRootRenderer(_delegate){this._delegate=_delegate}return DebugDomRootRenderer.prototype.renderComponent=function(componentProto){return new DebugDomRenderer(this._delegate.renderComponent(componentProto))},DebugDomRootRenderer}();exports.DebugDomRootRenderer=DebugDomRootRenderer;var DebugDomRenderer=function(){function DebugDomRenderer(_delegate){this._delegate=_delegate}return DebugDomRenderer.prototype.selectRootElement=function(selectorOrNode,debugInfo){var nativeEl=this._delegate.selectRootElement(selectorOrNode,debugInfo),debugEl=new debug_node_1.DebugElement(nativeEl,null,debugInfo);return debug_node_1.indexDebugNode(debugEl),nativeEl},DebugDomRenderer.prototype.createElement=function(parentElement,name,debugInfo){var nativeEl=this._delegate.createElement(parentElement,name,debugInfo),debugEl=new debug_node_1.DebugElement(nativeEl,debug_node_1.getDebugNode(parentElement),debugInfo);return debugEl.name=name,debug_node_1.indexDebugNode(debugEl),nativeEl},DebugDomRenderer.prototype.createViewRoot=function(hostElement){return this._delegate.createViewRoot(hostElement)},DebugDomRenderer.prototype.createTemplateAnchor=function(parentElement,debugInfo){var comment=this._delegate.createTemplateAnchor(parentElement,debugInfo),debugEl=new debug_node_1.DebugNode(comment,debug_node_1.getDebugNode(parentElement),debugInfo);return debug_node_1.indexDebugNode(debugEl),comment},DebugDomRenderer.prototype.createText=function(parentElement,value,debugInfo){var text=this._delegate.createText(parentElement,value,debugInfo),debugEl=new debug_node_1.DebugNode(text,debug_node_1.getDebugNode(parentElement),debugInfo);return debug_node_1.indexDebugNode(debugEl),text},DebugDomRenderer.prototype.projectNodes=function(parentElement,nodes){var debugParent=debug_node_1.getDebugNode(parentElement);if(lang_1.isPresent(debugParent)&&debugParent instanceof debug_node_1.DebugElement){
var debugElement_1=debugParent;nodes.forEach(function(node){debugElement_1.addChild(debug_node_1.getDebugNode(node))})}this._delegate.projectNodes(parentElement,nodes)},DebugDomRenderer.prototype.attachViewAfter=function(node,viewRootNodes){var debugNode=debug_node_1.getDebugNode(node);if(lang_1.isPresent(debugNode)){var debugParent=debugNode.parent;if(viewRootNodes.length>0&&lang_1.isPresent(debugParent)){var debugViewRootNodes=[];viewRootNodes.forEach(function(rootNode){return debugViewRootNodes.push(debug_node_1.getDebugNode(rootNode))}),debugParent.insertChildrenAfter(debugNode,debugViewRootNodes)}}this._delegate.attachViewAfter(node,viewRootNodes)},DebugDomRenderer.prototype.detachView=function(viewRootNodes){viewRootNodes.forEach(function(node){var debugNode=debug_node_1.getDebugNode(node);lang_1.isPresent(debugNode)&&lang_1.isPresent(debugNode.parent)&&debugNode.parent.removeChild(debugNode)}),this._delegate.detachView(viewRootNodes)},DebugDomRenderer.prototype.destroyView=function(hostElement,viewAllNodes){viewAllNodes.forEach(function(node){debug_node_1.removeDebugNodeFromIndex(debug_node_1.getDebugNode(node))}),this._delegate.destroyView(hostElement,viewAllNodes)},DebugDomRenderer.prototype.listen=function(renderElement,name,callback){var debugEl=debug_node_1.getDebugNode(renderElement);return lang_1.isPresent(debugEl)&&debugEl.listeners.push(new debug_node_1.EventListener(name,callback)),this._delegate.listen(renderElement,name,callback)},DebugDomRenderer.prototype.listenGlobal=function(target,name,callback){return this._delegate.listenGlobal(target,name,callback)},DebugDomRenderer.prototype.setElementProperty=function(renderElement,propertyName,propertyValue){var debugEl=debug_node_1.getDebugNode(renderElement);lang_1.isPresent(debugEl)&&debugEl instanceof debug_node_1.DebugElement&&(debugEl.properties[propertyName]=propertyValue),this._delegate.setElementProperty(renderElement,propertyName,propertyValue)},DebugDomRenderer.prototype.setElementAttribute=function(renderElement,attributeName,attributeValue){var debugEl=debug_node_1.getDebugNode(renderElement);lang_1.isPresent(debugEl)&&debugEl instanceof debug_node_1.DebugElement&&(debugEl.attributes[attributeName]=attributeValue),this._delegate.setElementAttribute(renderElement,attributeName,attributeValue)},DebugDomRenderer.prototype.setBindingDebugInfo=function(renderElement,propertyName,propertyValue){this._delegate.setBindingDebugInfo(renderElement,propertyName,propertyValue)},DebugDomRenderer.prototype.setElementClass=function(renderElement,className,isAdd){var debugEl=debug_node_1.getDebugNode(renderElement);lang_1.isPresent(debugEl)&&debugEl instanceof debug_node_1.DebugElement&&(debugEl.classes[className]=isAdd),this._delegate.setElementClass(renderElement,className,isAdd)},DebugDomRenderer.prototype.setElementStyle=function(renderElement,styleName,styleValue){var debugEl=debug_node_1.getDebugNode(renderElement);lang_1.isPresent(debugEl)&&debugEl instanceof debug_node_1.DebugElement&&(debugEl.styles[styleName]=styleValue),this._delegate.setElementStyle(renderElement,styleName,styleValue)},DebugDomRenderer.prototype.invokeElementMethod=function(renderElement,methodName,args){this._delegate.invokeElementMethod(renderElement,methodName,args)},DebugDomRenderer.prototype.setText=function(renderNode,text){this._delegate.setText(renderNode,text)},DebugDomRenderer.prototype.animate=function(element,startingStyles,keyframes,duration,delay,easing){return this._delegate.animate(element,startingStyles,keyframes,duration,delay,easing)},DebugDomRenderer}();exports.DebugDomRenderer=DebugDomRenderer},{"../facade/lang":198,"./debug_node":179}],181:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var metadata_1=require("./di/metadata");exports.HostMetadata=metadata_1.HostMetadata,exports.InjectMetadata=metadata_1.InjectMetadata,exports.InjectableMetadata=metadata_1.InjectableMetadata,exports.OptionalMetadata=metadata_1.OptionalMetadata,exports.SelfMetadata=metadata_1.SelfMetadata,exports.SkipSelfMetadata=metadata_1.SkipSelfMetadata,__export(require("./di/decorators"));var forward_ref_1=require("./di/forward_ref");exports.forwardRef=forward_ref_1.forwardRef,exports.resolveForwardRef=forward_ref_1.resolveForwardRef;var injector_1=require("./di/injector");exports.Injector=injector_1.Injector;var reflective_injector_1=require("./di/reflective_injector");exports.ReflectiveInjector=reflective_injector_1.ReflectiveInjector;var provider_1=require("./di/provider");exports.Binding=provider_1.Binding,exports.ProviderBuilder=provider_1.ProviderBuilder,exports.bind=provider_1.bind,exports.Provider=provider_1.Provider,exports.provide=provider_1.provide;var reflective_provider_1=require("./di/reflective_provider");exports.ResolvedReflectiveFactory=reflective_provider_1.ResolvedReflectiveFactory;var reflective_key_1=require("./di/reflective_key");exports.ReflectiveKey=reflective_key_1.ReflectiveKey;var reflective_exceptions_1=require("./di/reflective_exceptions");exports.NoProviderError=reflective_exceptions_1.NoProviderError,exports.AbstractProviderError=reflective_exceptions_1.AbstractProviderError,exports.CyclicDependencyError=reflective_exceptions_1.CyclicDependencyError,exports.InstantiationError=reflective_exceptions_1.InstantiationError,exports.InvalidProviderError=reflective_exceptions_1.InvalidProviderError,exports.NoAnnotationError=reflective_exceptions_1.NoAnnotationError,exports.OutOfBoundsError=reflective_exceptions_1.OutOfBoundsError;var opaque_token_1=require("./di/opaque_token");exports.OpaqueToken=opaque_token_1.OpaqueToken},{"./di/decorators":182,"./di/forward_ref":183,"./di/injector":184,"./di/metadata":185,"./di/opaque_token":186,"./di/provider":187,"./di/reflective_exceptions":189,"./di/reflective_injector":190,"./di/reflective_key":191,"./di/reflective_provider":192}],182:[function(require,module,exports){"use strict";var decorators_1=require("../util/decorators"),metadata_1=require("./metadata");exports.Inject=decorators_1.makeParamDecorator(metadata_1.InjectMetadata),exports.Optional=decorators_1.makeParamDecorator(metadata_1.OptionalMetadata),exports.Injectable=decorators_1.makeDecorator(metadata_1.InjectableMetadata),exports.Self=decorators_1.makeParamDecorator(metadata_1.SelfMetadata),exports.Host=decorators_1.makeParamDecorator(metadata_1.HostMetadata),exports.SkipSelf=decorators_1.makeParamDecorator(metadata_1.SkipSelfMetadata)},{"../util/decorators":242,"./metadata":185}],183:[function(require,module,exports){"use strict";function forwardRef(forwardRefFn){return forwardRefFn.__forward_ref__=forwardRef,forwardRefFn.toString=function(){return lang_1.stringify(this())},forwardRefFn}function resolveForwardRef(type){return lang_1.isFunction(type)&&type.hasOwnProperty("__forward_ref__")&&type.__forward_ref__===forwardRef?type():type}var lang_1=require("../facade/lang");exports.forwardRef=forwardRef,exports.resolveForwardRef=resolveForwardRef},{"../facade/lang":198}],184:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),_THROW_IF_NOT_FOUND=new Object;exports.THROW_IF_NOT_FOUND=_THROW_IF_NOT_FOUND;var _NullInjector=function(){function _NullInjector(){}return _NullInjector.prototype.get=function(token,notFoundValue){if(void 0===notFoundValue&&(notFoundValue=_THROW_IF_NOT_FOUND),notFoundValue===_THROW_IF_NOT_FOUND)throw new exceptions_1.BaseException("No provider for "+lang_1.stringify(token)+"!");return notFoundValue},_NullInjector}(),Injector=function(){function Injector(){}return Injector.prototype.get=function(token,notFoundValue){return exceptions_1.unimplemented()},Injector.THROW_IF_NOT_FOUND=_THROW_IF_NOT_FOUND,Injector.NULL=new _NullInjector,Injector}();exports.Injector=Injector},{"../facade/exceptions":197,"../facade/lang":198}],185:[function(require,module,exports){"use strict";var lang_1=require("../facade/lang"),InjectMetadata=function(){function InjectMetadata(token){this.token=token}return InjectMetadata.prototype.toString=function(){return"@Inject("+lang_1.stringify(this.token)+")"},InjectMetadata}();exports.InjectMetadata=InjectMetadata;var OptionalMetadata=function(){function OptionalMetadata(){}return OptionalMetadata.prototype.toString=function(){return"@Optional()"},OptionalMetadata}();exports.OptionalMetadata=OptionalMetadata;var DependencyMetadata=function(){function DependencyMetadata(){}return Object.defineProperty(DependencyMetadata.prototype,"token",{get:function(){return null},enumerable:!0,configurable:!0}),DependencyMetadata}();exports.DependencyMetadata=DependencyMetadata;var InjectableMetadata=function(){function InjectableMetadata(){}return InjectableMetadata}();exports.InjectableMetadata=InjectableMetadata;var SelfMetadata=function(){function SelfMetadata(){}return SelfMetadata.prototype.toString=function(){return"@Self()"},SelfMetadata}();exports.SelfMetadata=SelfMetadata;var SkipSelfMetadata=function(){function SkipSelfMetadata(){}return SkipSelfMetadata.prototype.toString=function(){return"@SkipSelf()"},SkipSelfMetadata}();exports.SkipSelfMetadata=SkipSelfMetadata;var HostMetadata=function(){function HostMetadata(){}return HostMetadata.prototype.toString=function(){return"@Host()"},HostMetadata}();exports.HostMetadata=HostMetadata},{"../facade/lang":198}],186:[function(require,module,exports){"use strict";var decorators_1=require("./decorators"),OpaqueToken=function(){function OpaqueToken(_desc){this._desc=_desc}return OpaqueToken.prototype.toString=function(){return"Token "+this._desc},OpaqueToken.decorators=[{type:decorators_1.Injectable}],OpaqueToken.ctorParameters=[null],OpaqueToken}();exports.OpaqueToken=OpaqueToken},{"./decorators":182}],187:[function(require,module,exports){"use strict";function bind(token){return new ProviderBuilder(token)}function provide(token,_a){var useClass=_a.useClass,useValue=_a.useValue,useExisting=_a.useExisting,useFactory=_a.useFactory,deps=_a.deps,multi=_a.multi;return new Provider(token,{useClass:useClass,useValue:useValue,useExisting:useExisting,useFactory:useFactory,deps:deps,multi:multi})}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),Provider=function(){function Provider(token,_a){var useClass=_a.useClass,useValue=_a.useValue,useExisting=_a.useExisting,useFactory=_a.useFactory,deps=_a.deps,multi=_a.multi;this.token=token,this.useClass=useClass,this.useValue=useValue,this.useExisting=useExisting,this.useFactory=useFactory,this.dependencies=deps,this._multi=multi}return Object.defineProperty(Provider.prototype,"multi",{get:function(){return lang_1.normalizeBool(this._multi)},enumerable:!0,configurable:!0}),Provider}();exports.Provider=Provider;var Binding=function(_super){function Binding(token,_a){var toClass=_a.toClass,toValue=_a.toValue,toAlias=_a.toAlias,toFactory=_a.toFactory,deps=_a.deps,multi=_a.multi;_super.call(this,token,{useClass:toClass,useValue:toValue,useExisting:toAlias,useFactory:toFactory,deps:deps,multi:multi})}return __extends(Binding,_super),Object.defineProperty(Binding.prototype,"toClass",{get:function(){return this.useClass},enumerable:!0,configurable:!0}),Object.defineProperty(Binding.prototype,"toAlias",{get:function(){return this.useExisting},enumerable:!0,configurable:!0}),Object.defineProperty(Binding.prototype,"toFactory",{get:function(){return this.useFactory},enumerable:!0,configurable:!0}),Object.defineProperty(Binding.prototype,"toValue",{get:function(){return this.useValue},enumerable:!0,configurable:!0}),Binding}(Provider);exports.Binding=Binding,exports.bind=bind;var ProviderBuilder=function(){function ProviderBuilder(token){this.token=token}return ProviderBuilder.prototype.toClass=function(type){if(!lang_1.isType(type))throw new exceptions_1.BaseException('Trying to create a class provider but "'+lang_1.stringify(type)+'" is not a class!');return new Provider(this.token,{useClass:type})},ProviderBuilder.prototype.toValue=function(value){return new Provider(this.token,{useValue:value})},ProviderBuilder.prototype.toAlias=function(aliasToken){if(lang_1.isBlank(aliasToken))throw new exceptions_1.BaseException("Can not alias "+lang_1.stringify(this.token)+" to a blank value!");return new Provider(this.token,{useExisting:aliasToken})},ProviderBuilder.prototype.toFactory=function(factory,dependencies){if(!lang_1.isFunction(factory))throw new exceptions_1.BaseException('Trying to create a factory provider but "'+lang_1.stringify(factory)+'" is not a function!');return new Provider(this.token,{useFactory:factory,deps:dependencies})},ProviderBuilder}();exports.ProviderBuilder=ProviderBuilder,exports.provide=provide},{"../facade/exceptions":197,"../facade/lang":198}],188:[function(require,module,exports){"use strict";function isProviderLiteral(obj){return obj&&"object"==typeof obj&&obj.provide}function createProvider(obj){return new provider_1.Provider(obj.provide,obj)}var provider_1=require("./provider");exports.isProviderLiteral=isProviderLiteral,exports.createProvider=createProvider},{"./provider":187}],189:[function(require,module,exports){"use strict";function findFirstClosedCycle(keys){for(var res=[],i=0;i<keys.length;++i){if(collection_1.ListWrapper.contains(res,keys[i]))return res.push(keys[i]),res;res.push(keys[i])}return res}function constructResolvingPath(keys){if(keys.length>1){var reversed=findFirstClosedCycle(collection_1.ListWrapper.reversed(keys)),tokenStrs=reversed.map(function(k){return lang_1.stringify(k.token)});return" ("+tokenStrs.join(" -> ")+")"}return""}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),AbstractProviderError=function(_super){function AbstractProviderError(injector,key,constructResolvingMessage){_super.call(this,"DI Exception"),this.keys=[key],this.injectors=[injector],this.constructResolvingMessage=constructResolvingMessage,this.message=this.constructResolvingMessage(this.keys)}return __extends(AbstractProviderError,_super),AbstractProviderError.prototype.addKey=function(injector,key){this.injectors.push(injector),this.keys.push(key),this.message=this.constructResolvingMessage(this.keys)},Object.defineProperty(AbstractProviderError.prototype,"context",{get:function(){return this.injectors[this.injectors.length-1].debugContext()},enumerable:!0,configurable:!0}),AbstractProviderError}(exceptions_1.BaseException);exports.AbstractProviderError=AbstractProviderError;var NoProviderError=function(_super){function NoProviderError(injector,key){_super.call(this,injector,key,function(keys){var first=lang_1.stringify(collection_1.ListWrapper.first(keys).token);return"No provider for "+first+"!"+constructResolvingPath(keys)})}return __extends(NoProviderError,_super),NoProviderError}(AbstractProviderError);exports.NoProviderError=NoProviderError;var CyclicDependencyError=function(_super){function CyclicDependencyError(injector,key){_super.call(this,injector,key,function(keys){return"Cannot instantiate cyclic dependency!"+constructResolvingPath(keys)})}return __extends(CyclicDependencyError,_super),CyclicDependencyError}(AbstractProviderError);exports.CyclicDependencyError=CyclicDependencyError;var InstantiationError=function(_super){function InstantiationError(injector,originalException,originalStack,key){_super.call(this,"DI Exception",originalException,originalStack,null),this.keys=[key],this.injectors=[injector]}return __extends(InstantiationError,_super),InstantiationError.prototype.addKey=function(injector,key){this.injectors.push(injector),this.keys.push(key)},Object.defineProperty(InstantiationError.prototype,"wrapperMessage",{get:function(){var first=lang_1.stringify(collection_1.ListWrapper.first(this.keys).token);return"Error during instantiation of "+first+"!"+constructResolvingPath(this.keys)+"."},enumerable:!0,configurable:!0}),Object.defineProperty(InstantiationError.prototype,"causeKey",{get:function(){return this.keys[0]},enumerable:!0,configurable:!0}),Object.defineProperty(InstantiationError.prototype,"context",{get:function(){return this.injectors[this.injectors.length-1].debugContext()},enumerable:!0,configurable:!0}),InstantiationError}(exceptions_1.WrappedException);exports.InstantiationError=InstantiationError;var InvalidProviderError=function(_super){function InvalidProviderError(provider){_super.call(this,"Invalid provider - only instances of Provider and Type are allowed, got: "+provider)}return __extends(InvalidProviderError,_super),InvalidProviderError}(exceptions_1.BaseException);exports.InvalidProviderError=InvalidProviderError;var NoAnnotationError=function(_super){function NoAnnotationError(typeOrFunc,params){_super.call(this,NoAnnotationError._genMessage(typeOrFunc,params))}return __extends(NoAnnotationError,_super),NoAnnotationError._genMessage=function(typeOrFunc,params){for(var signature=[],i=0,ii=params.length;i<ii;i++){var parameter=params[i];lang_1.isBlank(parameter)||0==parameter.length?signature.push("?"):signature.push(parameter.map(lang_1.stringify).join(" "))}return"Cannot resolve all parameters for '"+lang_1.stringify(typeOrFunc)+"'("+signature.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+lang_1.stringify(typeOrFunc)+"' is decorated with Injectable."},NoAnnotationError}(exceptions_1.BaseException);exports.NoAnnotationError=NoAnnotationError;var OutOfBoundsError=function(_super){function OutOfBoundsError(index){_super.call(this,"Index "+index+" is out-of-bounds.")}return __extends(OutOfBoundsError,_super),OutOfBoundsError}(exceptions_1.BaseException);exports.OutOfBoundsError=OutOfBoundsError;var MixingMultiProvidersWithRegularProvidersError=function(_super){function MixingMultiProvidersWithRegularProvidersError(provider1,provider2){_super.call(this,"Cannot mix multi providers and regular providers, got: "+provider1.toString()+" "+provider2.toString())}return __extends(MixingMultiProvidersWithRegularProvidersError,_super),MixingMultiProvidersWithRegularProvidersError}(exceptions_1.BaseException);exports.MixingMultiProvidersWithRegularProvidersError=MixingMultiProvidersWithRegularProvidersError},{"../facade/collection":195,"../facade/exceptions":197,"../facade/lang":198}],190:[function(require,module,exports){"use strict";function _mapProviders(injector,fn){for(var res=new Array(injector._proto.numberOfProviders),i=0;i<injector._proto.numberOfProviders;++i)res[i]=fn(injector._proto.getProviderAtIndex(i));return res}var collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),injector_1=require("./injector"),metadata_1=require("./metadata"),reflective_exceptions_1=require("./reflective_exceptions"),reflective_key_1=require("./reflective_key"),reflective_provider_1=require("./reflective_provider"),_MAX_CONSTRUCTION_COUNTER=10,UNDEFINED=new Object,ReflectiveProtoInjectorInlineStrategy=function(){function ReflectiveProtoInjectorInlineStrategy(protoEI,providers){this.provider0=null,this.provider1=null,this.provider2=null,this.provider3=null,this.provider4=null,this.provider5=null,this.provider6=null,this.provider7=null,this.provider8=null,this.provider9=null,this.keyId0=null,this.keyId1=null,this.keyId2=null,this.keyId3=null,this.keyId4=null,this.keyId5=null,this.keyId6=null,this.keyId7=null,this.keyId8=null,this.keyId9=null;var length=providers.length;length>0&&(this.provider0=providers[0],this.keyId0=providers[0].key.id),length>1&&(this.provider1=providers[1],this.keyId1=providers[1].key.id),length>2&&(this.provider2=providers[2],this.keyId2=providers[2].key.id),length>3&&(this.provider3=providers[3],this.keyId3=providers[3].key.id),length>4&&(this.provider4=providers[4],this.keyId4=providers[4].key.id),length>5&&(this.provider5=providers[5],this.keyId5=providers[5].key.id),length>6&&(this.provider6=providers[6],this.keyId6=providers[6].key.id),length>7&&(this.provider7=providers[7],this.keyId7=providers[7].key.id),length>8&&(this.provider8=providers[8],this.keyId8=providers[8].key.id),length>9&&(this.provider9=providers[9],this.keyId9=providers[9].key.id)}return ReflectiveProtoInjectorInlineStrategy.prototype.getProviderAtIndex=function(index){if(0==index)return this.provider0;if(1==index)return this.provider1;if(2==index)return this.provider2;if(3==index)return this.provider3;if(4==index)return this.provider4;if(5==index)return this.provider5;if(6==index)return this.provider6;if(7==index)return this.provider7;if(8==index)return this.provider8;if(9==index)return this.provider9;throw new reflective_exceptions_1.OutOfBoundsError(index)},ReflectiveProtoInjectorInlineStrategy.prototype.createInjectorStrategy=function(injector){return new ReflectiveInjectorInlineStrategy(injector,this)},ReflectiveProtoInjectorInlineStrategy}();exports.ReflectiveProtoInjectorInlineStrategy=ReflectiveProtoInjectorInlineStrategy;var ReflectiveProtoInjectorDynamicStrategy=function(){function ReflectiveProtoInjectorDynamicStrategy(protoInj,providers){this.providers=providers;var len=providers.length;this.keyIds=collection_1.ListWrapper.createFixedSize(len);for(var i=0;i<len;i++)this.keyIds[i]=providers[i].key.id}return ReflectiveProtoInjectorDynamicStrategy.prototype.getProviderAtIndex=function(index){if(index<0||index>=this.providers.length)throw new reflective_exceptions_1.OutOfBoundsError(index);return this.providers[index]},ReflectiveProtoInjectorDynamicStrategy.prototype.createInjectorStrategy=function(ei){return new ReflectiveInjectorDynamicStrategy(this,ei)},ReflectiveProtoInjectorDynamicStrategy}();exports.ReflectiveProtoInjectorDynamicStrategy=ReflectiveProtoInjectorDynamicStrategy;var ReflectiveProtoInjector=function(){function ReflectiveProtoInjector(providers){this.numberOfProviders=providers.length,this._strategy=providers.length>_MAX_CONSTRUCTION_COUNTER?new ReflectiveProtoInjectorDynamicStrategy(this,providers):new ReflectiveProtoInjectorInlineStrategy(this,providers)}return ReflectiveProtoInjector.fromResolvedProviders=function(providers){return new ReflectiveProtoInjector(providers)},ReflectiveProtoInjector.prototype.getProviderAtIndex=function(index){return this._strategy.getProviderAtIndex(index)},ReflectiveProtoInjector}();exports.ReflectiveProtoInjector=ReflectiveProtoInjector;var ReflectiveInjectorInlineStrategy=function(){function ReflectiveInjectorInlineStrategy(injector,protoStrategy){this.injector=injector,this.protoStrategy=protoStrategy,this.obj0=UNDEFINED,this.obj1=UNDEFINED,this.obj2=UNDEFINED,this.obj3=UNDEFINED,this.obj4=UNDEFINED,this.obj5=UNDEFINED,this.obj6=UNDEFINED,this.obj7=UNDEFINED,this.obj8=UNDEFINED,this.obj9=UNDEFINED}return ReflectiveInjectorInlineStrategy.prototype.resetConstructionCounter=function(){this.injector._constructionCounter=0},ReflectiveInjectorInlineStrategy.prototype.instantiateProvider=function(provider){return this.injector._new(provider)},ReflectiveInjectorInlineStrategy.prototype.getObjByKeyId=function(keyId){var p=this.protoStrategy,inj=this.injector;return p.keyId0===keyId?(this.obj0===UNDEFINED&&(this.obj0=inj._new(p.provider0)),this.obj0):p.keyId1===keyId?(this.obj1===UNDEFINED&&(this.obj1=inj._new(p.provider1)),this.obj1):p.keyId2===keyId?(this.obj2===UNDEFINED&&(this.obj2=inj._new(p.provider2)),this.obj2):p.keyId3===keyId?(this.obj3===UNDEFINED&&(this.obj3=inj._new(p.provider3)),this.obj3):p.keyId4===keyId?(this.obj4===UNDEFINED&&(this.obj4=inj._new(p.provider4)),this.obj4):p.keyId5===keyId?(this.obj5===UNDEFINED&&(this.obj5=inj._new(p.provider5)),this.obj5):p.keyId6===keyId?(this.obj6===UNDEFINED&&(this.obj6=inj._new(p.provider6)),this.obj6):p.keyId7===keyId?(this.obj7===UNDEFINED&&(this.obj7=inj._new(p.provider7)),this.obj7):p.keyId8===keyId?(this.obj8===UNDEFINED&&(this.obj8=inj._new(p.provider8)),this.obj8):p.keyId9===keyId?(this.obj9===UNDEFINED&&(this.obj9=inj._new(p.provider9)),this.obj9):UNDEFINED},ReflectiveInjectorInlineStrategy.prototype.getObjAtIndex=function(index){if(0==index)return this.obj0;if(1==index)return this.obj1;if(2==index)return this.obj2;if(3==index)return this.obj3;if(4==index)return this.obj4;if(5==index)return this.obj5;if(6==index)return this.obj6;if(7==index)return this.obj7;if(8==index)return this.obj8;if(9==index)return this.obj9;throw new reflective_exceptions_1.OutOfBoundsError(index)},ReflectiveInjectorInlineStrategy.prototype.getMaxNumberOfObjects=function(){return _MAX_CONSTRUCTION_COUNTER},ReflectiveInjectorInlineStrategy}();exports.ReflectiveInjectorInlineStrategy=ReflectiveInjectorInlineStrategy;var ReflectiveInjectorDynamicStrategy=function(){function ReflectiveInjectorDynamicStrategy(protoStrategy,injector){this.protoStrategy=protoStrategy,this.injector=injector,this.objs=collection_1.ListWrapper.createFixedSize(protoStrategy.providers.length),collection_1.ListWrapper.fill(this.objs,UNDEFINED)}return ReflectiveInjectorDynamicStrategy.prototype.resetConstructionCounter=function(){this.injector._constructionCounter=0},ReflectiveInjectorDynamicStrategy.prototype.instantiateProvider=function(provider){return this.injector._new(provider)},ReflectiveInjectorDynamicStrategy.prototype.getObjByKeyId=function(keyId){for(var p=this.protoStrategy,i=0;i<p.keyIds.length;i++)if(p.keyIds[i]===keyId)return this.objs[i]===UNDEFINED&&(this.objs[i]=this.injector._new(p.providers[i])),this.objs[i];return UNDEFINED},ReflectiveInjectorDynamicStrategy.prototype.getObjAtIndex=function(index){if(index<0||index>=this.objs.length)throw new reflective_exceptions_1.OutOfBoundsError(index);return this.objs[index]},ReflectiveInjectorDynamicStrategy.prototype.getMaxNumberOfObjects=function(){return this.objs.length},ReflectiveInjectorDynamicStrategy}();exports.ReflectiveInjectorDynamicStrategy=ReflectiveInjectorDynamicStrategy;var ReflectiveInjector=function(){function ReflectiveInjector(){}return ReflectiveInjector.resolve=function(providers){return reflective_provider_1.resolveReflectiveProviders(providers)},ReflectiveInjector.resolveAndCreate=function(providers,parent){void 0===parent&&(parent=null);var ResolvedReflectiveProviders=ReflectiveInjector.resolve(providers);return ReflectiveInjector.fromResolvedProviders(ResolvedReflectiveProviders,parent)},ReflectiveInjector.fromResolvedProviders=function(providers,parent){return void 0===parent&&(parent=null),new ReflectiveInjector_(ReflectiveProtoInjector.fromResolvedProviders(providers),parent)},ReflectiveInjector.fromResolvedBindings=function(providers){return ReflectiveInjector.fromResolvedProviders(providers)},Object.defineProperty(ReflectiveInjector.prototype,"parent",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),ReflectiveInjector.prototype.debugContext=function(){return null},ReflectiveInjector.prototype.resolveAndCreateChild=function(providers){return exceptions_1.unimplemented()},ReflectiveInjector.prototype.createChildFromResolved=function(providers){return exceptions_1.unimplemented()},ReflectiveInjector.prototype.resolveAndInstantiate=function(provider){return exceptions_1.unimplemented()},ReflectiveInjector.prototype.instantiateResolved=function(provider){return exceptions_1.unimplemented()},ReflectiveInjector}();exports.ReflectiveInjector=ReflectiveInjector;var ReflectiveInjector_=function(){function ReflectiveInjector_(_proto,_parent,_debugContext){void 0===_parent&&(_parent=null),void 0===_debugContext&&(_debugContext=null),this._debugContext=_debugContext,this._constructionCounter=0,this._proto=_proto,this._parent=_parent,this._strategy=_proto._strategy.createInjectorStrategy(this)}return ReflectiveInjector_.prototype.debugContext=function(){return this._debugContext()},ReflectiveInjector_.prototype.get=function(token,notFoundValue){return void 0===notFoundValue&&(notFoundValue=injector_1.THROW_IF_NOT_FOUND),this._getByKey(reflective_key_1.ReflectiveKey.get(token),null,null,notFoundValue)},ReflectiveInjector_.prototype.getAt=function(index){return this._strategy.getObjAtIndex(index)},Object.defineProperty(ReflectiveInjector_.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(ReflectiveInjector_.prototype,"internalStrategy",{get:function(){return this._strategy},enumerable:!0,configurable:!0}),ReflectiveInjector_.prototype.resolveAndCreateChild=function(providers){var ResolvedReflectiveProviders=ReflectiveInjector.resolve(providers);return this.createChildFromResolved(ResolvedReflectiveProviders)},ReflectiveInjector_.prototype.createChildFromResolved=function(providers){var proto=new ReflectiveProtoInjector(providers),inj=new ReflectiveInjector_(proto);return inj._parent=this,inj},ReflectiveInjector_.prototype.resolveAndInstantiate=function(provider){return this.instantiateResolved(ReflectiveInjector.resolve([provider])[0])},ReflectiveInjector_.prototype.instantiateResolved=function(provider){return this._instantiateProvider(provider)},ReflectiveInjector_.prototype._new=function(provider){if(this._constructionCounter++>this._strategy.getMaxNumberOfObjects())throw new reflective_exceptions_1.CyclicDependencyError(this,provider.key);return this._instantiateProvider(provider)},ReflectiveInjector_.prototype._instantiateProvider=function(provider){if(provider.multiProvider){for(var res=collection_1.ListWrapper.createFixedSize(provider.resolvedFactories.length),i=0;i<provider.resolvedFactories.length;++i)res[i]=this._instantiate(provider,provider.resolvedFactories[i]);return res}return this._instantiate(provider,provider.resolvedFactories[0])},ReflectiveInjector_.prototype._instantiate=function(provider,ResolvedReflectiveFactory){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16,d17,d18,d19,factory=ResolvedReflectiveFactory.factory,deps=ResolvedReflectiveFactory.dependencies,length=deps.length;try{d0=length>0?this._getByReflectiveDependency(provider,deps[0]):null,d1=length>1?this._getByReflectiveDependency(provider,deps[1]):null,d2=length>2?this._getByReflectiveDependency(provider,deps[2]):null,d3=length>3?this._getByReflectiveDependency(provider,deps[3]):null,d4=length>4?this._getByReflectiveDependency(provider,deps[4]):null,d5=length>5?this._getByReflectiveDependency(provider,deps[5]):null,d6=length>6?this._getByReflectiveDependency(provider,deps[6]):null,d7=length>7?this._getByReflectiveDependency(provider,deps[7]):null,d8=length>8?this._getByReflectiveDependency(provider,deps[8]):null,d9=length>9?this._getByReflectiveDependency(provider,deps[9]):null,d10=length>10?this._getByReflectiveDependency(provider,deps[10]):null,d11=length>11?this._getByReflectiveDependency(provider,deps[11]):null,d12=length>12?this._getByReflectiveDependency(provider,deps[12]):null,d13=length>13?this._getByReflectiveDependency(provider,deps[13]):null,d14=length>14?this._getByReflectiveDependency(provider,deps[14]):null,d15=length>15?this._getByReflectiveDependency(provider,deps[15]):null,d16=length>16?this._getByReflectiveDependency(provider,deps[16]):null,d17=length>17?this._getByReflectiveDependency(provider,deps[17]):null,d18=length>18?this._getByReflectiveDependency(provider,deps[18]):null,d19=length>19?this._getByReflectiveDependency(provider,deps[19]):null}catch(e){throw(e instanceof reflective_exceptions_1.AbstractProviderError||e instanceof reflective_exceptions_1.InstantiationError)&&e.addKey(this,provider.key),e}var obj;try{switch(length){case 0:obj=factory();break;case 1:obj=factory(d0);break;case 2:obj=factory(d0,d1);break;case 3:obj=factory(d0,d1,d2);break;case 4:obj=factory(d0,d1,d2,d3);break;case 5:obj=factory(d0,d1,d2,d3,d4);break;case 6:obj=factory(d0,d1,d2,d3,d4,d5);break;case 7:obj=factory(d0,d1,d2,d3,d4,d5,d6);
break;case 8:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7);break;case 9:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8);break;case 10:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9);break;case 11:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10);break;case 12:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11);break;case 13:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12);break;case 14:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13);break;case 15:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14);break;case 16:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15);break;case 17:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16);break;case 18:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16,d17);break;case 19:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16,d17,d18);break;case 20:obj=factory(d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16,d17,d18,d19);break;default:throw new exceptions_1.BaseException("Cannot instantiate '"+provider.key.displayName+"' because it has more than 20 dependencies")}}catch(e){throw new reflective_exceptions_1.InstantiationError(this,e,e.stack,provider.key)}return obj},ReflectiveInjector_.prototype._getByReflectiveDependency=function(provider,dep){return this._getByKey(dep.key,dep.lowerBoundVisibility,dep.upperBoundVisibility,dep.optional?null:injector_1.THROW_IF_NOT_FOUND)},ReflectiveInjector_.prototype._getByKey=function(key,lowerBoundVisibility,upperBoundVisibility,notFoundValue){return key===INJECTOR_KEY?this:upperBoundVisibility instanceof metadata_1.SelfMetadata?this._getByKeySelf(key,notFoundValue):this._getByKeyDefault(key,notFoundValue,lowerBoundVisibility)},ReflectiveInjector_.prototype._throwOrNull=function(key,notFoundValue){if(notFoundValue!==injector_1.THROW_IF_NOT_FOUND)return notFoundValue;throw new reflective_exceptions_1.NoProviderError(this,key)},ReflectiveInjector_.prototype._getByKeySelf=function(key,notFoundValue){var obj=this._strategy.getObjByKeyId(key.id);return obj!==UNDEFINED?obj:this._throwOrNull(key,notFoundValue)},ReflectiveInjector_.prototype._getByKeyDefault=function(key,notFoundValue,lowerBoundVisibility){var inj;for(inj=lowerBoundVisibility instanceof metadata_1.SkipSelfMetadata?this._parent:this;inj instanceof ReflectiveInjector_;){var inj_=inj,obj=inj_._strategy.getObjByKeyId(key.id);if(obj!==UNDEFINED)return obj;inj=inj_._parent}return null!==inj?inj.get(key.token,notFoundValue):this._throwOrNull(key,notFoundValue)},Object.defineProperty(ReflectiveInjector_.prototype,"displayName",{get:function(){var providers=_mapProviders(this,function(b){return' "'+b.key.displayName+'" '}).join(", ");return"ReflectiveInjector(providers: ["+providers+"])"},enumerable:!0,configurable:!0}),ReflectiveInjector_.prototype.toString=function(){return this.displayName},ReflectiveInjector_}();exports.ReflectiveInjector_=ReflectiveInjector_;var INJECTOR_KEY=reflective_key_1.ReflectiveKey.get(injector_1.Injector)},{"../facade/collection":195,"../facade/exceptions":197,"./injector":184,"./metadata":185,"./reflective_exceptions":189,"./reflective_key":191,"./reflective_provider":192}],191:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),forward_ref_1=require("./forward_ref"),ReflectiveKey=function(){function ReflectiveKey(token,id){if(this.token=token,this.id=id,lang_1.isBlank(token))throw new exceptions_1.BaseException("Token must be defined!")}return Object.defineProperty(ReflectiveKey.prototype,"displayName",{get:function(){return lang_1.stringify(this.token)},enumerable:!0,configurable:!0}),ReflectiveKey.get=function(token){return _globalKeyRegistry.get(forward_ref_1.resolveForwardRef(token))},Object.defineProperty(ReflectiveKey,"numberOfKeys",{get:function(){return _globalKeyRegistry.numberOfKeys},enumerable:!0,configurable:!0}),ReflectiveKey}();exports.ReflectiveKey=ReflectiveKey;var KeyRegistry=function(){function KeyRegistry(){this._allKeys=new Map}return KeyRegistry.prototype.get=function(token){if(token instanceof ReflectiveKey)return token;if(this._allKeys.has(token))return this._allKeys.get(token);var newKey=new ReflectiveKey(token,ReflectiveKey.numberOfKeys);return this._allKeys.set(token,newKey),newKey},Object.defineProperty(KeyRegistry.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),KeyRegistry}();exports.KeyRegistry=KeyRegistry;var _globalKeyRegistry=new KeyRegistry},{"../facade/exceptions":197,"../facade/lang":198,"./forward_ref":183}],192:[function(require,module,exports){"use strict";function resolveReflectiveFactory(provider){var factoryFn,resolvedDeps;if(lang_1.isPresent(provider.useClass)){var useClass=forward_ref_1.resolveForwardRef(provider.useClass);factoryFn=reflection_1.reflector.factory(useClass),resolvedDeps=_dependenciesFor(useClass)}else lang_1.isPresent(provider.useExisting)?(factoryFn=function(aliasInstance){return aliasInstance},resolvedDeps=[ReflectiveDependency.fromKey(reflective_key_1.ReflectiveKey.get(provider.useExisting))]):lang_1.isPresent(provider.useFactory)?(factoryFn=provider.useFactory,resolvedDeps=constructDependencies(provider.useFactory,provider.dependencies)):(factoryFn=function(){return provider.useValue},resolvedDeps=_EMPTY_LIST);return new ResolvedReflectiveFactory(factoryFn,resolvedDeps)}function resolveReflectiveProvider(provider){return new ResolvedReflectiveProvider_(reflective_key_1.ReflectiveKey.get(provider.token),[resolveReflectiveFactory(provider)],provider.multi)}function resolveReflectiveProviders(providers){var normalized=_normalizeProviders(providers,[]),resolved=normalized.map(resolveReflectiveProvider);return collection_1.MapWrapper.values(mergeResolvedReflectiveProviders(resolved,new Map))}function mergeResolvedReflectiveProviders(providers,normalizedProvidersMap){for(var i=0;i<providers.length;i++){var provider=providers[i],existing=normalizedProvidersMap.get(provider.key.id);if(lang_1.isPresent(existing)){if(provider.multiProvider!==existing.multiProvider)throw new reflective_exceptions_1.MixingMultiProvidersWithRegularProvidersError(existing,provider);if(provider.multiProvider)for(var j=0;j<provider.resolvedFactories.length;j++)existing.resolvedFactories.push(provider.resolvedFactories[j]);else normalizedProvidersMap.set(provider.key.id,provider)}else{var resolvedProvider;resolvedProvider=provider.multiProvider?new ResolvedReflectiveProvider_(provider.key,collection_1.ListWrapper.clone(provider.resolvedFactories),provider.multiProvider):provider,normalizedProvidersMap.set(provider.key.id,resolvedProvider)}}return normalizedProvidersMap}function _normalizeProviders(providers,res){return providers.forEach(function(b){if(b instanceof lang_1.Type)res.push(provider_1.provide(b,{useClass:b}));else if(b instanceof provider_1.Provider)res.push(b);else if(provider_util_1.isProviderLiteral(b))res.push(provider_util_1.createProvider(b));else{if(!(b instanceof Array))throw b instanceof provider_1.ProviderBuilder?new reflective_exceptions_1.InvalidProviderError(b.token):new reflective_exceptions_1.InvalidProviderError(b);_normalizeProviders(b,res)}}),res}function constructDependencies(typeOrFunc,dependencies){if(lang_1.isBlank(dependencies))return _dependenciesFor(typeOrFunc);var params=dependencies.map(function(t){return[t]});return dependencies.map(function(t){return _extractToken(typeOrFunc,t,params)})}function _dependenciesFor(typeOrFunc){var params=reflection_1.reflector.parameters(typeOrFunc);if(lang_1.isBlank(params))return[];if(params.some(lang_1.isBlank))throw new reflective_exceptions_1.NoAnnotationError(typeOrFunc,params);return params.map(function(p){return _extractToken(typeOrFunc,p,params)})}function _extractToken(typeOrFunc,metadata,params){var depProps=[],token=null,optional=!1;if(!lang_1.isArray(metadata))return metadata instanceof metadata_1.InjectMetadata?_createDependency(metadata.token,optional,null,null,depProps):_createDependency(metadata,optional,null,null,depProps);for(var lowerBoundVisibility=null,upperBoundVisibility=null,i=0;i<metadata.length;++i){var paramMetadata=metadata[i];paramMetadata instanceof lang_1.Type?token=paramMetadata:paramMetadata instanceof metadata_1.InjectMetadata?token=paramMetadata.token:paramMetadata instanceof metadata_1.OptionalMetadata?optional=!0:paramMetadata instanceof metadata_1.SelfMetadata?upperBoundVisibility=paramMetadata:paramMetadata instanceof metadata_1.HostMetadata?upperBoundVisibility=paramMetadata:paramMetadata instanceof metadata_1.SkipSelfMetadata?lowerBoundVisibility=paramMetadata:paramMetadata instanceof metadata_1.DependencyMetadata&&(lang_1.isPresent(paramMetadata.token)&&(token=paramMetadata.token),depProps.push(paramMetadata))}if(token=forward_ref_1.resolveForwardRef(token),lang_1.isPresent(token))return _createDependency(token,optional,lowerBoundVisibility,upperBoundVisibility,depProps);throw new reflective_exceptions_1.NoAnnotationError(typeOrFunc,params)}function _createDependency(token,optional,lowerBoundVisibility,upperBoundVisibility,depProps){return new ReflectiveDependency(reflective_key_1.ReflectiveKey.get(token),optional,lowerBoundVisibility,upperBoundVisibility,depProps)}var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),reflection_1=require("../reflection/reflection"),forward_ref_1=require("./forward_ref"),metadata_1=require("./metadata"),provider_1=require("./provider"),provider_util_1=require("./provider_util"),reflective_exceptions_1=require("./reflective_exceptions"),reflective_key_1=require("./reflective_key"),ReflectiveDependency=function(){function ReflectiveDependency(key,optional,lowerBoundVisibility,upperBoundVisibility,properties){this.key=key,this.optional=optional,this.lowerBoundVisibility=lowerBoundVisibility,this.upperBoundVisibility=upperBoundVisibility,this.properties=properties}return ReflectiveDependency.fromKey=function(key){return new ReflectiveDependency(key,(!1),null,null,[])},ReflectiveDependency}();exports.ReflectiveDependency=ReflectiveDependency;var _EMPTY_LIST=[],ResolvedReflectiveProvider_=function(){function ResolvedReflectiveProvider_(key,resolvedFactories,multiProvider){this.key=key,this.resolvedFactories=resolvedFactories,this.multiProvider=multiProvider}return Object.defineProperty(ResolvedReflectiveProvider_.prototype,"resolvedFactory",{get:function(){return this.resolvedFactories[0]},enumerable:!0,configurable:!0}),ResolvedReflectiveProvider_}();exports.ResolvedReflectiveProvider_=ResolvedReflectiveProvider_;var ResolvedReflectiveFactory=function(){function ResolvedReflectiveFactory(factory,dependencies){this.factory=factory,this.dependencies=dependencies}return ResolvedReflectiveFactory}();exports.ResolvedReflectiveFactory=ResolvedReflectiveFactory,exports.resolveReflectiveFactory=resolveReflectiveFactory,exports.resolveReflectiveProvider=resolveReflectiveProvider,exports.resolveReflectiveProviders=resolveReflectiveProviders,exports.mergeResolvedReflectiveProviders=mergeResolvedReflectiveProviders,exports.constructDependencies=constructDependencies},{"../facade/collection":195,"../facade/lang":198,"../reflection/reflection":233,"./forward_ref":183,"./metadata":185,"./provider":187,"./provider_util":188,"./reflective_exceptions":189,"./reflective_key":191}],193:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{dup:12,"rxjs/Observable":401,"rxjs/Subject":407}],194:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],195:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{"./lang":198,dup:14}],196:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"./base_wrapped_exception":194,"./collection":195,"./lang":198,dup:15}],197:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./base_wrapped_exception":194,"./exception_handler":196,dup:16}],198:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],199:[function(require,module,exports){arguments[4][86][0].apply(exports,arguments)},{"./lang":198,dup:86}],200:[function(require,module,exports){"use strict";var compiler_1=require("./linker/compiler");exports.COMPILER_OPTIONS=compiler_1.COMPILER_OPTIONS,exports.Compiler=compiler_1.Compiler,exports.CompilerFactory=compiler_1.CompilerFactory,exports.ComponentStillLoadingError=compiler_1.ComponentStillLoadingError,exports.ModuleWithComponentFactories=compiler_1.ModuleWithComponentFactories;var component_factory_1=require("./linker/component_factory");exports.ComponentFactory=component_factory_1.ComponentFactory,exports.ComponentRef=component_factory_1.ComponentRef;var component_factory_resolver_1=require("./linker/component_factory_resolver");exports.ComponentFactoryResolver=component_factory_resolver_1.ComponentFactoryResolver,exports.NoComponentFactoryError=component_factory_resolver_1.NoComponentFactoryError;var component_resolver_1=require("./linker/component_resolver");exports.ComponentResolver=component_resolver_1.ComponentResolver;var dynamic_component_loader_1=require("./linker/dynamic_component_loader");exports.DynamicComponentLoader=dynamic_component_loader_1.DynamicComponentLoader;var element_ref_1=require("./linker/element_ref");exports.ElementRef=element_ref_1.ElementRef;var exceptions_1=require("./linker/exceptions");exports.ExpressionChangedAfterItHasBeenCheckedException=exceptions_1.ExpressionChangedAfterItHasBeenCheckedException;var ng_module_factory_1=require("./linker/ng_module_factory");exports.NgModuleFactory=ng_module_factory_1.NgModuleFactory,exports.NgModuleRef=ng_module_factory_1.NgModuleRef;var ng_module_factory_loader_1=require("./linker/ng_module_factory_loader");exports.NgModuleFactoryLoader=ng_module_factory_loader_1.NgModuleFactoryLoader;var query_list_1=require("./linker/query_list");exports.QueryList=query_list_1.QueryList;var system_js_ng_module_factory_loader_1=require("./linker/system_js_ng_module_factory_loader");exports.SystemJsNgModuleLoader=system_js_ng_module_factory_loader_1.SystemJsNgModuleLoader;var systemjs_component_resolver_1=require("./linker/systemjs_component_resolver");exports.SystemJsCmpFactoryResolver=systemjs_component_resolver_1.SystemJsCmpFactoryResolver,exports.SystemJsComponentResolver=systemjs_component_resolver_1.SystemJsComponentResolver;var template_ref_1=require("./linker/template_ref");exports.TemplateRef=template_ref_1.TemplateRef;var view_container_ref_1=require("./linker/view_container_ref");exports.ViewContainerRef=view_container_ref_1.ViewContainerRef;var view_ref_1=require("./linker/view_ref");exports.EmbeddedViewRef=view_ref_1.EmbeddedViewRef,exports.ViewRef=view_ref_1.ViewRef},{"./linker/compiler":201,"./linker/component_factory":202,"./linker/component_factory_resolver":203,"./linker/component_resolver":204,"./linker/dynamic_component_loader":206,"./linker/element_ref":209,"./linker/exceptions":210,"./linker/ng_module_factory":211,"./linker/ng_module_factory_loader":212,"./linker/query_list":213,"./linker/system_js_ng_module_factory_loader":214,"./linker/systemjs_component_resolver":215,"./linker/template_ref":216,"./linker/view_container_ref":218,"./linker/view_ref":219}],201:[function(require,module,exports){"use strict";function _throwError(){throw new exceptions_1.BaseException("Runtime compiler is not loaded")}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},di_1=require("../di"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),ComponentStillLoadingError=function(_super){function ComponentStillLoadingError(compType){_super.call(this,"Can't compile synchronously as "+lang_1.stringify(compType)+" is still being loaded!"),this.compType=compType}return __extends(ComponentStillLoadingError,_super),ComponentStillLoadingError}(exceptions_1.BaseException);exports.ComponentStillLoadingError=ComponentStillLoadingError;var ModuleWithComponentFactories=function(){function ModuleWithComponentFactories(ngModuleFactory,componentFactories){this.ngModuleFactory=ngModuleFactory,this.componentFactories=componentFactories}return ModuleWithComponentFactories}();exports.ModuleWithComponentFactories=ModuleWithComponentFactories;var Compiler=function(){function Compiler(){}return Compiler.prototype.compileComponentAsync=function(component,ngModule){throw void 0===ngModule&&(ngModule=null),_throwError()},Compiler.prototype.compileComponentSync=function(component,ngModule){throw void 0===ngModule&&(ngModule=null),_throwError()},Compiler.prototype.compileModuleSync=function(moduleType){throw _throwError()},Compiler.prototype.compileModuleAsync=function(moduleType){throw _throwError()},Compiler.prototype.compileModuleAndAllComponentsSync=function(moduleType){throw _throwError()},Compiler.prototype.compileModuleAndAllComponentsAsync=function(moduleType){throw _throwError()},Compiler.prototype.clearCache=function(){},Compiler.prototype.clearCacheFor=function(type){},Compiler}();exports.Compiler=Compiler,exports.COMPILER_OPTIONS=new di_1.OpaqueToken("compilerOptions");var CompilerFactory=function(){function CompilerFactory(){}return CompilerFactory}();exports.CompilerFactory=CompilerFactory},{"../di":181,"../facade/exceptions":197,"../facade/lang":198}],202:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),view_utils_1=require("./view_utils"),ComponentRef=function(){function ComponentRef(){}return Object.defineProperty(ComponentRef.prototype,"location",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"injector",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"instance",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"hostView",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"changeDetectorRef",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef.prototype,"componentType",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),ComponentRef}();exports.ComponentRef=ComponentRef;var ComponentRef_=function(_super){function ComponentRef_(_hostElement,_componentType){_super.call(this),this._hostElement=_hostElement,this._componentType=_componentType}return __extends(ComponentRef_,_super),Object.defineProperty(ComponentRef_.prototype,"location",{get:function(){return this._hostElement.elementRef},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"injector",{get:function(){return this._hostElement.injector},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"instance",{get:function(){return this._hostElement.component},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"hostView",{get:function(){return this._hostElement.parentView.ref},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"changeDetectorRef",{get:function(){return this._hostElement.parentView.ref},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"componentType",{get:function(){return this._componentType},enumerable:!0,configurable:!0}),ComponentRef_.prototype.destroy=function(){this._hostElement.parentView.destroy()},ComponentRef_.prototype.onDestroy=function(callback){this.hostView.onDestroy(callback)},ComponentRef_}(ComponentRef);exports.ComponentRef_=ComponentRef_;var EMPTY_CONTEXT=new Object,ComponentFactory=function(){function ComponentFactory(selector,_viewFactory,_componentType){this.selector=selector,this._viewFactory=_viewFactory,this._componentType=_componentType}return Object.defineProperty(ComponentFactory.prototype,"componentType",{get:function(){return this._componentType},enumerable:!0,configurable:!0}),ComponentFactory.prototype.create=function(injector,projectableNodes,rootSelectorOrNode){void 0===projectableNodes&&(projectableNodes=null),void 0===rootSelectorOrNode&&(rootSelectorOrNode=null);var vu=injector.get(view_utils_1.ViewUtils);lang_1.isBlank(projectableNodes)&&(projectableNodes=[]);var hostView=this._viewFactory(vu,injector,null),hostElement=hostView.create(EMPTY_CONTEXT,projectableNodes,rootSelectorOrNode);return new ComponentRef_(hostElement,this._componentType)},ComponentFactory}();exports.ComponentFactory=ComponentFactory},{"../facade/exceptions":197,"../facade/lang":198,"./view_utils":221}],203:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),NoComponentFactoryError=function(_super){function NoComponentFactoryError(component){_super.call(this,"No component factory found for "+lang_1.stringify(component)),this.component=component}return __extends(NoComponentFactoryError,_super),NoComponentFactoryError}(exceptions_1.BaseException);exports.NoComponentFactoryError=NoComponentFactoryError;var _NullComponentFactoryResolver=function(){function _NullComponentFactoryResolver(){}return _NullComponentFactoryResolver.prototype.resolveComponentFactory=function(component){throw new NoComponentFactoryError(component)},_NullComponentFactoryResolver}(),ComponentFactoryResolver=function(){function ComponentFactoryResolver(){}return ComponentFactoryResolver.NULL=new _NullComponentFactoryResolver,ComponentFactoryResolver}();exports.ComponentFactoryResolver=ComponentFactoryResolver;var CodegenComponentFactoryResolver=function(){function CodegenComponentFactoryResolver(factories,_parent){this._parent=_parent,this._factories=new Map;for(var i=0;i<factories.length;i++){var factory=factories[i];this._factories.set(factory.componentType,factory)}}return CodegenComponentFactoryResolver.prototype.resolveComponentFactory=function(component){var result=this._factories.get(component);return result||(result=this._parent.resolveComponentFactory(component)),result},CodegenComponentFactoryResolver}();exports.CodegenComponentFactoryResolver=CodegenComponentFactoryResolver},{"../facade/exceptions":197,"../facade/lang":198}],204:[function(require,module,exports){"use strict";var ComponentResolver=function(){function ComponentResolver(){}return ComponentResolver.DynamicCompilationDeprecationMsg="ComponentResolver is deprecated for dynamic compilation. Use ComponentFactoryResolver together with @NgModule/@Component.entryComponents or ANALYZE_FOR_ENTRY_COMPONENTS provider instead. For runtime compile only, you can also use Compiler.compileComponentSync/Async.",ComponentResolver.LazyLoadingDeprecationMsg="ComponentResolver is deprecated for lazy loading. Use NgModuleFactoryLoader instead.",ComponentResolver}();exports.ComponentResolver=ComponentResolver},{}],205:[function(require,module,exports){"use strict";var collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),view_type_1=require("./view_type"),StaticNodeDebugInfo=function(){function StaticNodeDebugInfo(providerTokens,componentToken,refTokens){this.providerTokens=providerTokens,this.componentToken=componentToken,this.refTokens=refTokens}return StaticNodeDebugInfo}();exports.StaticNodeDebugInfo=StaticNodeDebugInfo;var DebugContext=function(){function DebugContext(_view,_nodeIndex,_tplRow,_tplCol){this._view=_view,this._nodeIndex=_nodeIndex,this._tplRow=_tplRow,this._tplCol=_tplCol}return Object.defineProperty(DebugContext.prototype,"_staticNodeInfo",{get:function(){return lang_1.isPresent(this._nodeIndex)?this._view.staticNodeDebugInfos[this._nodeIndex]:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"component",{get:function(){var staticNodeInfo=this._staticNodeInfo;return lang_1.isPresent(staticNodeInfo)&&lang_1.isPresent(staticNodeInfo.componentToken)?this.injector.get(staticNodeInfo.componentToken):null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"componentRenderElement",{get:function(){for(var componentView=this._view;lang_1.isPresent(componentView.declarationAppElement)&&componentView.type!==view_type_1.ViewType.COMPONENT;)componentView=componentView.declarationAppElement.parentView;return lang_1.isPresent(componentView.declarationAppElement)?componentView.declarationAppElement.nativeElement:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"injector",{get:function(){return this._view.injector(this._nodeIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"renderNode",{get:function(){return lang_1.isPresent(this._nodeIndex)&&this._view.allNodes?this._view.allNodes[this._nodeIndex]:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"providerTokens",{get:function(){var staticNodeInfo=this._staticNodeInfo;return lang_1.isPresent(staticNodeInfo)?staticNodeInfo.providerTokens:null},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"source",{get:function(){return this._view.componentType.templateUrl+":"+this._tplRow+":"+this._tplCol},enumerable:!0,configurable:!0}),Object.defineProperty(DebugContext.prototype,"references",{get:function(){var _this=this,varValues={},staticNodeInfo=this._staticNodeInfo;if(lang_1.isPresent(staticNodeInfo)){var refs=staticNodeInfo.refTokens;collection_1.StringMapWrapper.forEach(refs,function(refToken,refName){var varValue;varValue=lang_1.isBlank(refToken)?_this._view.allNodes?_this._view.allNodes[_this._nodeIndex]:null:_this._view.injectorGet(refToken,_this._nodeIndex,null),varValues[refName]=varValue})}return varValues},enumerable:!0,configurable:!0}),DebugContext}();exports.DebugContext=DebugContext},{"../facade/collection":195,"../facade/lang":198,"./view_type":220}],206:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},di_1=require("../di"),lang_1=require("../facade/lang"),compiler_1=require("./compiler"),DynamicComponentLoader=function(){function DynamicComponentLoader(){}return DynamicComponentLoader}();exports.DynamicComponentLoader=DynamicComponentLoader;var DynamicComponentLoader_=function(_super){function DynamicComponentLoader_(_compiler){_super.call(this),this._compiler=_compiler}return __extends(DynamicComponentLoader_,_super),DynamicComponentLoader_.prototype.loadAsRoot=function(type,overrideSelectorOrNode,injector,onDispose,projectableNodes){return this._compiler.compileComponentAsync(type).then(function(componentFactory){var componentRef=componentFactory.create(injector,projectableNodes,lang_1.isPresent(overrideSelectorOrNode)?overrideSelectorOrNode:componentFactory.selector);return lang_1.isPresent(onDispose)&&componentRef.onDestroy(onDispose),componentRef})},DynamicComponentLoader_.prototype.loadNextToLocation=function(type,location,providers,projectableNodes){return void 0===providers&&(providers=null),void 0===projectableNodes&&(projectableNodes=null),this._compiler.compileComponentAsync(type).then(function(componentFactory){var contextInjector=location.parentInjector,childInjector=lang_1.isPresent(providers)&&providers.length>0?di_1.ReflectiveInjector.fromResolvedProviders(providers,contextInjector):contextInjector;return location.createComponent(componentFactory,location.length,childInjector,projectableNodes)})},DynamicComponentLoader_.decorators=[{type:di_1.Injectable}],DynamicComponentLoader_.ctorParameters=[{type:compiler_1.Compiler}],DynamicComponentLoader_}(DynamicComponentLoader);exports.DynamicComponentLoader_=DynamicComponentLoader_},{"../di":181,"../facade/lang":198,"./compiler":201}],207:[function(require,module,exports){"use strict";var collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),element_ref_1=require("./element_ref"),view_container_ref_1=require("./view_container_ref"),view_type_1=require("./view_type"),AppElement=function(){function AppElement(index,parentIndex,parentView,nativeElement){this.index=index,this.parentIndex=parentIndex,this.parentView=parentView,this.nativeElement=nativeElement,this.nestedViews=null,this.componentView=null}return Object.defineProperty(AppElement.prototype,"elementRef",{get:function(){return new element_ref_1.ElementRef(this.nativeElement)},enumerable:!0,configurable:!0}),Object.defineProperty(AppElement.prototype,"vcRef",{get:function(){return new view_container_ref_1.ViewContainerRef_(this)},enumerable:!0,configurable:!0}),AppElement.prototype.initComponent=function(component,componentConstructorViewQueries,view){this.component=component,this.componentConstructorViewQueries=componentConstructorViewQueries,this.componentView=view},Object.defineProperty(AppElement.prototype,"parentInjector",{get:function(){return this.parentView.injector(this.parentIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(AppElement.prototype,"injector",{get:function(){return this.parentView.injector(this.index)},enumerable:!0,configurable:!0}),AppElement.prototype.mapNestedViews=function(nestedViewClass,callback){var result=[];return lang_1.isPresent(this.nestedViews)&&this.nestedViews.forEach(function(nestedView){nestedView.clazz===nestedViewClass&&result.push(callback(nestedView))}),result},AppElement.prototype.moveView=function(view,currentIndex){var previousIndex=this.nestedViews.indexOf(view);if(view.type===view_type_1.ViewType.COMPONENT)throw new exceptions_1.BaseException("Component views can't be moved!");var nestedViews=this.nestedViews;null==nestedViews&&(nestedViews=[],this.nestedViews=nestedViews),collection_1.ListWrapper.removeAt(nestedViews,previousIndex),collection_1.ListWrapper.insert(nestedViews,currentIndex,view);var refRenderNode;if(currentIndex>0){var prevView=nestedViews[currentIndex-1];refRenderNode=prevView.lastRootNode}else refRenderNode=this.nativeElement;lang_1.isPresent(refRenderNode)&&view.renderer.attachViewAfter(refRenderNode,view.flatRootNodes),view.markContentChildAsMoved(this)},AppElement.prototype.attachView=function(view,viewIndex){if(view.type===view_type_1.ViewType.COMPONENT)throw new exceptions_1.BaseException("Component views can't be moved!");var nestedViews=this.nestedViews;null==nestedViews&&(nestedViews=[],this.nestedViews=nestedViews),collection_1.ListWrapper.insert(nestedViews,viewIndex,view);var refRenderNode;if(viewIndex>0){var prevView=nestedViews[viewIndex-1];refRenderNode=prevView.lastRootNode}else refRenderNode=this.nativeElement;lang_1.isPresent(refRenderNode)&&view.renderer.attachViewAfter(refRenderNode,view.flatRootNodes),view.addToContentChildren(this)},AppElement.prototype.detachView=function(viewIndex){var view=collection_1.ListWrapper.removeAt(this.nestedViews,viewIndex);if(view.type===view_type_1.ViewType.COMPONENT)throw new exceptions_1.BaseException("Component views can't be moved!");return view.detach(),view.removeFromContentChildren(this),view},AppElement}();exports.AppElement=AppElement},{"../facade/collection":195,"../facade/exceptions":197,"../facade/lang":198,"./element_ref":209,
"./view_container_ref":218,"./view_type":220}],208:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},injector_1=require("../di/injector"),_UNDEFINED=new Object,ElementInjector=function(_super){function ElementInjector(_view,_nodeIndex){_super.call(this),this._view=_view,this._nodeIndex=_nodeIndex}return __extends(ElementInjector,_super),ElementInjector.prototype.get=function(token,notFoundValue){void 0===notFoundValue&&(notFoundValue=injector_1.THROW_IF_NOT_FOUND);var result=_UNDEFINED;return result===_UNDEFINED&&(result=this._view.injectorGet(token,this._nodeIndex,_UNDEFINED)),result===_UNDEFINED&&(result=this._view.parentInjector.get(token,notFoundValue)),result},ElementInjector}(injector_1.Injector);exports.ElementInjector=ElementInjector},{"../di/injector":184}],209:[function(require,module,exports){"use strict";var ElementRef=function(){function ElementRef(nativeElement){this.nativeElement=nativeElement}return ElementRef}();exports.ElementRef=ElementRef},{}],210:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},change_detection_util_1=require("../change_detection/change_detection_util"),exceptions_1=require("../facade/exceptions"),ExpressionChangedAfterItHasBeenCheckedException=function(_super){function ExpressionChangedAfterItHasBeenCheckedException(oldValue,currValue,context){var msg="Expression has changed after it was checked. Previous value: '"+oldValue+"'. Current value: '"+currValue+"'.";oldValue===change_detection_util_1.UNINITIALIZED&&(msg+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),_super.call(this,msg)}return __extends(ExpressionChangedAfterItHasBeenCheckedException,_super),ExpressionChangedAfterItHasBeenCheckedException}(exceptions_1.BaseException);exports.ExpressionChangedAfterItHasBeenCheckedException=ExpressionChangedAfterItHasBeenCheckedException;var ViewWrappedException=function(_super){function ViewWrappedException(originalException,originalStack,context){_super.call(this,"Error in "+context.source,originalException,originalStack,context)}return __extends(ViewWrappedException,_super),ViewWrappedException}(exceptions_1.WrappedException);exports.ViewWrappedException=ViewWrappedException;var ViewDestroyedException=function(_super){function ViewDestroyedException(details){_super.call(this,"Attempt to use a destroyed view: "+details)}return __extends(ViewDestroyedException,_super),ViewDestroyedException}(exceptions_1.BaseException);exports.ViewDestroyedException=ViewDestroyedException},{"../change_detection/change_detection_util":171,"../facade/exceptions":197}],211:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},injector_1=require("../di/injector"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),component_factory_resolver_1=require("./component_factory_resolver"),NgModuleRef=function(){function NgModuleRef(){}return Object.defineProperty(NgModuleRef.prototype,"injector",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgModuleRef.prototype,"componentFactoryResolver",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgModuleRef.prototype,"instance",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),NgModuleRef}();exports.NgModuleRef=NgModuleRef;var NgModuleFactory=function(){function NgModuleFactory(_injectorClass,_moduleype){this._injectorClass=_injectorClass,this._moduleype=_moduleype}return Object.defineProperty(NgModuleFactory.prototype,"moduleType",{get:function(){return this._moduleype},enumerable:!0,configurable:!0}),NgModuleFactory.prototype.create=function(parentInjector){parentInjector||(parentInjector=injector_1.Injector.NULL);var instance=new this._injectorClass(parentInjector);return instance.create(),instance},NgModuleFactory}();exports.NgModuleFactory=NgModuleFactory;var _UNDEFINED=new Object,NgModuleInjector=function(_super){function NgModuleInjector(parent,factories,bootstrapFactories){_super.call(this,factories,parent.get(component_factory_resolver_1.ComponentFactoryResolver,component_factory_resolver_1.ComponentFactoryResolver.NULL)),this.parent=parent,this.bootstrapFactories=bootstrapFactories,this._destroyListeners=[],this._destroyed=!1}return __extends(NgModuleInjector,_super),NgModuleInjector.prototype.create=function(){this.instance=this.createInternal()},NgModuleInjector.prototype.get=function(token,notFoundValue){if(void 0===notFoundValue&&(notFoundValue=injector_1.THROW_IF_NOT_FOUND),token===injector_1.Injector||token===component_factory_resolver_1.ComponentFactoryResolver)return this;var result=this.getInternal(token,_UNDEFINED);return result===_UNDEFINED?this.parent.get(token,notFoundValue):result},Object.defineProperty(NgModuleInjector.prototype,"injector",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(NgModuleInjector.prototype,"componentFactoryResolver",{get:function(){return this},enumerable:!0,configurable:!0}),NgModuleInjector.prototype.destroy=function(){if(this._destroyed)throw new exceptions_1.BaseException("The ng module "+lang_1.stringify(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,this.destroyInternal(),this._destroyListeners.forEach(function(listener){return listener()})},NgModuleInjector.prototype.onDestroy=function(callback){this._destroyListeners.push(callback)},NgModuleInjector}(component_factory_resolver_1.CodegenComponentFactoryResolver);exports.NgModuleInjector=NgModuleInjector},{"../di/injector":184,"../facade/exceptions":197,"../facade/lang":198,"./component_factory_resolver":203}],212:[function(require,module,exports){"use strict";var NgModuleFactoryLoader=function(){function NgModuleFactoryLoader(){}return NgModuleFactoryLoader}();exports.NgModuleFactoryLoader=NgModuleFactoryLoader},{}],213:[function(require,module,exports){"use strict";var async_1=require("../facade/async"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),QueryList=function(){function QueryList(){this._dirty=!0,this._results=[],this._emitter=new async_1.EventEmitter}return Object.defineProperty(QueryList.prototype,"changes",{get:function(){return this._emitter},enumerable:!0,configurable:!0}),Object.defineProperty(QueryList.prototype,"length",{get:function(){return this._results.length},enumerable:!0,configurable:!0}),Object.defineProperty(QueryList.prototype,"first",{get:function(){return this._results[0]},enumerable:!0,configurable:!0}),Object.defineProperty(QueryList.prototype,"last",{get:function(){return this._results[this.length-1]},enumerable:!0,configurable:!0}),QueryList.prototype.map=function(fn){return this._results.map(fn)},QueryList.prototype.filter=function(fn){return this._results.filter(fn)},QueryList.prototype.reduce=function(fn,init){return this._results.reduce(fn,init)},QueryList.prototype.forEach=function(fn){this._results.forEach(fn)},QueryList.prototype.some=function(fn){return this._results.some(fn)},QueryList.prototype.toArray=function(){return this._results.slice()},QueryList.prototype[lang_1.getSymbolIterator()]=function(){return this._results[lang_1.getSymbolIterator()]()},QueryList.prototype.toString=function(){return this._results.toString()},QueryList.prototype.reset=function(res){this._results=collection_1.ListWrapper.flatten(res),this._dirty=!1},QueryList.prototype.notifyOnChanges=function(){this._emitter.emit(this)},QueryList.prototype.setDirty=function(){this._dirty=!0},Object.defineProperty(QueryList.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),QueryList}();exports.QueryList=QueryList},{"../facade/async":193,"../facade/collection":195,"../facade/lang":198}],214:[function(require,module,exports){"use strict";function checkNotEmpty(value,modulePath,exportName){if(!value)throw new Error("Cannot find '"+exportName+"' in '"+modulePath+"'");return value}var di_1=require("../di"),lang_1=require("../facade/lang"),compiler_1=require("./compiler"),_SEPARATOR="#",FACTORY_MODULE_SUFFIX=".ngfactory",FACTORY_CLASS_SUFFIX="NgFactory",SystemJsNgModuleLoader=function(){function SystemJsNgModuleLoader(_compiler){this._compiler=_compiler}return SystemJsNgModuleLoader.prototype.load=function(path){var offlineMode=this._compiler instanceof compiler_1.Compiler;return offlineMode?this.loadFactory(path):this.loadAndCompile(path)},SystemJsNgModuleLoader.prototype.loadAndCompile=function(path){var _this=this,_a=path.split(_SEPARATOR),module=_a[0],exportName=_a[1];return void 0===exportName&&(exportName="default"),lang_1.global.System.import(module).then(function(module){return module[exportName]}).then(function(type){return checkNotEmpty(type,module,exportName)}).then(function(type){return _this._compiler.compileModuleAsync(type)})},SystemJsNgModuleLoader.prototype.loadFactory=function(path){var _a=path.split(_SEPARATOR),module=_a[0],exportName=_a[1];return void 0===exportName&&(exportName="default"),lang_1.global.System.import(module+FACTORY_MODULE_SUFFIX).then(function(module){return module[exportName+FACTORY_CLASS_SUFFIX]}).then(function(factory){return checkNotEmpty(factory,module,exportName)})},SystemJsNgModuleLoader.decorators=[{type:di_1.Injectable}],SystemJsNgModuleLoader.ctorParameters=[{type:compiler_1.Compiler}],SystemJsNgModuleLoader}();exports.SystemJsNgModuleLoader=SystemJsNgModuleLoader},{"../di":181,"../facade/lang":198,"./compiler":201}],215:[function(require,module,exports){"use strict";var console_1=require("../console"),di_1=require("../di"),lang_1=require("../facade/lang"),component_resolver_1=require("./component_resolver"),_SEPARATOR="#",SystemJsComponentResolver=function(){function SystemJsComponentResolver(_resolver,_console){this._resolver=_resolver,this._console=_console}return SystemJsComponentResolver.prototype.resolveComponent=function(componentType){var _this=this;if(lang_1.isString(componentType)){this._console.warn(component_resolver_1.ComponentResolver.LazyLoadingDeprecationMsg);var _a=componentType.split(_SEPARATOR),module=_a[0],component_1=_a[1];return void 0===component_1&&(component_1="default"),lang_1.global.System.import(module).then(function(module){return _this._resolver.resolveComponent(module[component_1])})}return this._resolver.resolveComponent(componentType)},SystemJsComponentResolver.prototype.clearCache=function(){},SystemJsComponentResolver.decorators=[{type:di_1.Injectable}],SystemJsComponentResolver.ctorParameters=[{type:component_resolver_1.ComponentResolver},{type:console_1.Console}],SystemJsComponentResolver}();exports.SystemJsComponentResolver=SystemJsComponentResolver;var FACTORY_MODULE_SUFFIX=".ngfactory",FACTORY_CLASS_SUFFIX="NgFactory",SystemJsCmpFactoryResolver=function(){function SystemJsCmpFactoryResolver(_console){this._console=_console}return SystemJsCmpFactoryResolver.prototype.resolveComponent=function(componentType){if(lang_1.isString(componentType)){this._console.warn(component_resolver_1.ComponentResolver.LazyLoadingDeprecationMsg);var _a=componentType.split(_SEPARATOR),module=_a[0],factory_1=_a[1];return lang_1.global.System.import(module+FACTORY_MODULE_SUFFIX).then(function(module){return module[factory_1+FACTORY_CLASS_SUFFIX]})}return Promise.resolve(null)},SystemJsCmpFactoryResolver.prototype.clearCache=function(){},SystemJsCmpFactoryResolver.decorators=[{type:di_1.Injectable}],SystemJsCmpFactoryResolver.ctorParameters=[{type:console_1.Console}],SystemJsCmpFactoryResolver}();exports.SystemJsCmpFactoryResolver=SystemJsCmpFactoryResolver},{"../console":178,"../di":181,"../facade/lang":198,"./component_resolver":204}],216:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},TemplateRef=function(){function TemplateRef(){}return Object.defineProperty(TemplateRef.prototype,"elementRef",{get:function(){return null},enumerable:!0,configurable:!0}),TemplateRef}();exports.TemplateRef=TemplateRef;var TemplateRef_=function(_super){function TemplateRef_(_appElement,_viewFactory){_super.call(this),this._appElement=_appElement,this._viewFactory=_viewFactory}return __extends(TemplateRef_,_super),TemplateRef_.prototype.createEmbeddedView=function(context){var view=this._viewFactory(this._appElement.parentView.viewUtils,this._appElement.parentInjector,this._appElement);return view.create(context||{},null,null),view.ref},Object.defineProperty(TemplateRef_.prototype,"elementRef",{get:function(){return this._appElement.elementRef},enumerable:!0,configurable:!0}),TemplateRef_}(TemplateRef);exports.TemplateRef_=TemplateRef_},{}],217:[function(require,module,exports){"use strict";function _findLastRenderNode(node){var lastNode;if(node instanceof element_1.AppElement){var appEl=node;if(lastNode=appEl.nativeElement,lang_1.isPresent(appEl.nestedViews))for(var i=appEl.nestedViews.length-1;i>=0;i--){var nestedView=appEl.nestedViews[i];nestedView.rootNodesOrAppElements.length>0&&(lastNode=_findLastRenderNode(nestedView.rootNodesOrAppElements[nestedView.rootNodesOrAppElements.length-1]))}}else lastNode=node;return lastNode}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},animation_group_player_1=require("../animation/animation_group_player"),view_animation_map_1=require("../animation/view_animation_map"),change_detection_1=require("../change_detection/change_detection"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),profile_1=require("../profile/profile"),debug_context_1=require("./debug_context"),element_1=require("./element"),element_injector_1=require("./element_injector"),exceptions_1=require("./exceptions"),view_ref_1=require("./view_ref"),view_type_1=require("./view_type"),view_utils_1=require("./view_utils"),_scope_check=profile_1.wtfCreateScope("AppView#check(ascii id)"),AppView=function(){function AppView(clazz,componentType,type,viewUtils,parentInjector,declarationAppElement,cdMode){this.clazz=clazz,this.componentType=componentType,this.type=type,this.viewUtils=viewUtils,this.parentInjector=parentInjector,this.declarationAppElement=declarationAppElement,this.cdMode=cdMode,this.contentChildren=[],this.viewChildren=[],this.viewContainerElement=null,this.numberOfChecks=0,this.animationPlayers=new view_animation_map_1.ViewAnimationMap,this.ref=new view_ref_1.ViewRef_(this),type===view_type_1.ViewType.COMPONENT||type===view_type_1.ViewType.HOST?this.renderer=viewUtils.renderComponent(componentType):this.renderer=declarationAppElement.parentView.renderer}return Object.defineProperty(AppView.prototype,"destroyed",{get:function(){return this.cdMode===change_detection_1.ChangeDetectorStatus.Destroyed},enumerable:!0,configurable:!0}),AppView.prototype.cancelActiveAnimation=function(element,animationName,removeAllAnimations){if(void 0===removeAllAnimations&&(removeAllAnimations=!1),removeAllAnimations)this.animationPlayers.findAllPlayersByElement(element).forEach(function(player){return player.destroy()});else{var player=this.animationPlayers.find(element,animationName);lang_1.isPresent(player)&&player.destroy()}},AppView.prototype.queueAnimation=function(element,animationName,player){var _this=this;this.animationPlayers.set(element,animationName,player),player.onDone(function(){_this.animationPlayers.remove(element,animationName)})},AppView.prototype.triggerQueuedAnimations=function(){this.animationPlayers.getAllPlayers().forEach(function(player){player.hasStarted()||player.play()})},AppView.prototype.create=function(context,givenProjectableNodes,rootSelectorOrNode){this.context=context;var projectableNodes;switch(this.type){case view_type_1.ViewType.COMPONENT:projectableNodes=view_utils_1.ensureSlotCount(givenProjectableNodes,this.componentType.slotCount);break;case view_type_1.ViewType.EMBEDDED:projectableNodes=this.declarationAppElement.parentView.projectableNodes;break;case view_type_1.ViewType.HOST:projectableNodes=givenProjectableNodes}return this._hasExternalHostElement=lang_1.isPresent(rootSelectorOrNode),this.projectableNodes=projectableNodes,this.createInternal(rootSelectorOrNode)},AppView.prototype.createInternal=function(rootSelectorOrNode){return null},AppView.prototype.init=function(rootNodesOrAppElements,allNodes,disposables,subscriptions){this.rootNodesOrAppElements=rootNodesOrAppElements,this.allNodes=allNodes,this.disposables=disposables,this.subscriptions=subscriptions,this.type===view_type_1.ViewType.COMPONENT&&(this.declarationAppElement.parentView.viewChildren.push(this),this.dirtyParentQueriesInternal())},AppView.prototype.selectOrCreateHostElement=function(elementName,rootSelectorOrNode,debugInfo){var hostElement;return hostElement=lang_1.isPresent(rootSelectorOrNode)?this.renderer.selectRootElement(rootSelectorOrNode,debugInfo):this.renderer.createElement(null,elementName,debugInfo)},AppView.prototype.injectorGet=function(token,nodeIndex,notFoundResult){return this.injectorGetInternal(token,nodeIndex,notFoundResult)},AppView.prototype.injectorGetInternal=function(token,nodeIndex,notFoundResult){return notFoundResult},AppView.prototype.injector=function(nodeIndex){return lang_1.isPresent(nodeIndex)?new element_injector_1.ElementInjector(this,nodeIndex):this.parentInjector},AppView.prototype.destroy=function(){this._hasExternalHostElement?this.renderer.detachView(this.flatRootNodes):lang_1.isPresent(this.viewContainerElement)&&this.viewContainerElement.detachView(this.viewContainerElement.nestedViews.indexOf(this)),this._destroyRecurse()},AppView.prototype._destroyRecurse=function(){if(this.cdMode!==change_detection_1.ChangeDetectorStatus.Destroyed){for(var children=this.contentChildren,i=0;i<children.length;i++)children[i]._destroyRecurse();children=this.viewChildren;for(var i=0;i<children.length;i++)children[i]._destroyRecurse();this.destroyLocal(),this.cdMode=change_detection_1.ChangeDetectorStatus.Destroyed}},AppView.prototype.destroyLocal=function(){for(var _this=this,hostElement=this.type===view_type_1.ViewType.COMPONENT?this.declarationAppElement.nativeElement:null,i=0;i<this.disposables.length;i++)this.disposables[i]();for(var i=0;i<this.subscriptions.length;i++)this.subscriptions[i].unsubscribe();if(this.destroyInternal(),this.dirtyParentQueriesInternal(),0==this.animationPlayers.length)this.renderer.destroyView(hostElement,this.allNodes);else{var player=new animation_group_player_1.AnimationGroupPlayer(this.animationPlayers.getAllPlayers());player.onDone(function(){_this.renderer.destroyView(hostElement,_this.allNodes)})}},AppView.prototype.destroyInternal=function(){},AppView.prototype.detachInternal=function(){},AppView.prototype.detach=function(){var _this=this;if(this.detachInternal(),0==this.animationPlayers.length)this.renderer.detachView(this.flatRootNodes);else{var player=new animation_group_player_1.AnimationGroupPlayer(this.animationPlayers.getAllPlayers());player.onDone(function(){_this.renderer.detachView(_this.flatRootNodes)})}},Object.defineProperty(AppView.prototype,"changeDetectorRef",{get:function(){return this.ref},enumerable:!0,configurable:!0}),Object.defineProperty(AppView.prototype,"parent",{get:function(){return lang_1.isPresent(this.declarationAppElement)?this.declarationAppElement.parentView:null},enumerable:!0,configurable:!0}),Object.defineProperty(AppView.prototype,"flatRootNodes",{get:function(){return view_utils_1.flattenNestedViewRenderNodes(this.rootNodesOrAppElements)},enumerable:!0,configurable:!0}),Object.defineProperty(AppView.prototype,"lastRootNode",{get:function(){var lastNode=this.rootNodesOrAppElements.length>0?this.rootNodesOrAppElements[this.rootNodesOrAppElements.length-1]:null;return _findLastRenderNode(lastNode)},enumerable:!0,configurable:!0}),AppView.prototype.dirtyParentQueriesInternal=function(){},AppView.prototype.detectChanges=function(throwOnChange){var s=_scope_check(this.clazz);this.cdMode!==change_detection_1.ChangeDetectorStatus.Checked&&this.cdMode!==change_detection_1.ChangeDetectorStatus.Errored&&(this.cdMode===change_detection_1.ChangeDetectorStatus.Destroyed&&this.throwDestroyedError("detectChanges"),this.detectChangesInternal(throwOnChange),this.cdMode===change_detection_1.ChangeDetectorStatus.CheckOnce&&(this.cdMode=change_detection_1.ChangeDetectorStatus.Checked),this.numberOfChecks++,profile_1.wtfLeave(s))},AppView.prototype.detectChangesInternal=function(throwOnChange){this.detectContentChildrenChanges(throwOnChange),this.detectViewChildrenChanges(throwOnChange)},AppView.prototype.detectContentChildrenChanges=function(throwOnChange){for(var i=0;i<this.contentChildren.length;++i){var child=this.contentChildren[i];child.cdMode!==change_detection_1.ChangeDetectorStatus.Detached&&child.detectChanges(throwOnChange)}},AppView.prototype.detectViewChildrenChanges=function(throwOnChange){for(var i=0;i<this.viewChildren.length;++i){var child=this.viewChildren[i];child.cdMode!==change_detection_1.ChangeDetectorStatus.Detached&&child.detectChanges(throwOnChange)}},AppView.prototype.markContentChildAsMoved=function(renderAppElement){this.dirtyParentQueriesInternal()},AppView.prototype.addToContentChildren=function(renderAppElement){renderAppElement.parentView.contentChildren.push(this),this.viewContainerElement=renderAppElement,this.dirtyParentQueriesInternal()},AppView.prototype.removeFromContentChildren=function(renderAppElement){collection_1.ListWrapper.remove(renderAppElement.parentView.contentChildren,this),this.dirtyParentQueriesInternal(),this.viewContainerElement=null},AppView.prototype.markAsCheckOnce=function(){this.cdMode=change_detection_1.ChangeDetectorStatus.CheckOnce},AppView.prototype.markPathToRootAsCheckOnce=function(){for(var c=this;lang_1.isPresent(c)&&c.cdMode!==change_detection_1.ChangeDetectorStatus.Detached;){c.cdMode===change_detection_1.ChangeDetectorStatus.Checked&&(c.cdMode=change_detection_1.ChangeDetectorStatus.CheckOnce);var parentEl=c.type===view_type_1.ViewType.COMPONENT?c.declarationAppElement:c.viewContainerElement;c=lang_1.isPresent(parentEl)?parentEl.parentView:null}},AppView.prototype.eventHandler=function(cb){return cb},AppView.prototype.throwDestroyedError=function(details){throw new exceptions_1.ViewDestroyedException(details)},AppView}();exports.AppView=AppView;var DebugAppView=function(_super){function DebugAppView(clazz,componentType,type,viewUtils,parentInjector,declarationAppElement,cdMode,staticNodeDebugInfos){_super.call(this,clazz,componentType,type,viewUtils,parentInjector,declarationAppElement,cdMode),this.staticNodeDebugInfos=staticNodeDebugInfos,this._currentDebugContext=null}return __extends(DebugAppView,_super),DebugAppView.prototype.create=function(context,givenProjectableNodes,rootSelectorOrNode){this._resetDebug();try{return _super.prototype.create.call(this,context,givenProjectableNodes,rootSelectorOrNode)}catch(e){throw this._rethrowWithContext(e,e.stack),e}},DebugAppView.prototype.injectorGet=function(token,nodeIndex,notFoundResult){this._resetDebug();try{return _super.prototype.injectorGet.call(this,token,nodeIndex,notFoundResult)}catch(e){throw this._rethrowWithContext(e,e.stack),e}},DebugAppView.prototype.detach=function(){this._resetDebug();try{_super.prototype.detach.call(this)}catch(e){throw this._rethrowWithContext(e,e.stack),e}},DebugAppView.prototype.destroyLocal=function(){this._resetDebug();try{_super.prototype.destroyLocal.call(this)}catch(e){throw this._rethrowWithContext(e,e.stack),e}},DebugAppView.prototype.detectChanges=function(throwOnChange){this._resetDebug();try{_super.prototype.detectChanges.call(this,throwOnChange)}catch(e){throw this._rethrowWithContext(e,e.stack),e}},DebugAppView.prototype._resetDebug=function(){this._currentDebugContext=null},DebugAppView.prototype.debug=function(nodeIndex,rowNum,colNum){return this._currentDebugContext=new debug_context_1.DebugContext(this,nodeIndex,rowNum,colNum)},DebugAppView.prototype._rethrowWithContext=function(e,stack){if(!(e instanceof exceptions_1.ViewWrappedException)&&(e instanceof exceptions_1.ExpressionChangedAfterItHasBeenCheckedException||(this.cdMode=change_detection_1.ChangeDetectorStatus.Errored),lang_1.isPresent(this._currentDebugContext)))throw new exceptions_1.ViewWrappedException(e,stack,this._currentDebugContext)},DebugAppView.prototype.eventHandler=function(cb){var _this=this,superHandler=_super.prototype.eventHandler.call(this,cb);return function(event){_this._resetDebug();try{return superHandler(event)}catch(e){throw _this._rethrowWithContext(e,e.stack),e}}},DebugAppView}(AppView);exports.DebugAppView=DebugAppView},{"../animation/animation_group_player":157,"../animation/view_animation_map":164,"../change_detection/change_detection":170,"../facade/collection":195,"../facade/lang":198,"../profile/profile":230,"./debug_context":205,"./element":207,"./element_injector":208,"./exceptions":210,"./view_ref":219,"./view_type":220,"./view_utils":221}],218:[function(require,module,exports){"use strict";var collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),profile_1=require("../profile/profile"),ViewContainerRef=function(){function ViewContainerRef(){}return Object.defineProperty(ViewContainerRef.prototype,"element",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef.prototype,"injector",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef.prototype,"parentInjector",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef.prototype,"length",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),ViewContainerRef}();exports.ViewContainerRef=ViewContainerRef;var ViewContainerRef_=function(){function ViewContainerRef_(_element){this._element=_element,this._createComponentInContainerScope=profile_1.wtfCreateScope("ViewContainerRef#createComponent()"),this._insertScope=profile_1.wtfCreateScope("ViewContainerRef#insert()"),this._removeScope=profile_1.wtfCreateScope("ViewContainerRef#remove()"),this._detachScope=profile_1.wtfCreateScope("ViewContainerRef#detach()")}return ViewContainerRef_.prototype.get=function(index){return this._element.nestedViews[index].ref},Object.defineProperty(ViewContainerRef_.prototype,"length",{get:function(){var views=this._element.nestedViews;return lang_1.isPresent(views)?views.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"element",{get:function(){return this._element.elementRef},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"injector",{get:function(){return this._element.injector},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"parentInjector",{get:function(){return this._element.parentInjector},enumerable:!0,configurable:!0}),ViewContainerRef_.prototype.createEmbeddedView=function(templateRef,context,index){void 0===context&&(context=null),void 0===index&&(index=-1);var viewRef=templateRef.createEmbeddedView(context);return this.insert(viewRef,index),viewRef},ViewContainerRef_.prototype.createComponent=function(componentFactory,index,injector,projectableNodes){void 0===index&&(index=-1),void 0===injector&&(injector=null),void 0===projectableNodes&&(projectableNodes=null);var s=this._createComponentInContainerScope(),contextInjector=lang_1.isPresent(injector)?injector:this._element.parentInjector,componentRef=componentFactory.create(contextInjector,projectableNodes);return this.insert(componentRef.hostView,index),profile_1.wtfLeave(s,componentRef)},ViewContainerRef_.prototype.insert=function(viewRef,index){void 0===index&&(index=-1);var s=this._insertScope();index==-1&&(index=this.length);var viewRef_=viewRef;return this._element.attachView(viewRef_.internalView,index),profile_1.wtfLeave(s,viewRef_)},ViewContainerRef_.prototype.move=function(viewRef,currentIndex){var s=this._insertScope();if(currentIndex!=-1){var viewRef_=viewRef;return this._element.moveView(viewRef_.internalView,currentIndex),profile_1.wtfLeave(s,viewRef_)}},ViewContainerRef_.prototype.indexOf=function(viewRef){return collection_1.ListWrapper.indexOf(this._element.nestedViews,viewRef.internalView)},ViewContainerRef_.prototype.remove=function(index){void 0===index&&(index=-1);var s=this._removeScope();index==-1&&(index=this.length-1);var view=this._element.detachView(index);view.destroy(),profile_1.wtfLeave(s)},ViewContainerRef_.prototype.detach=function(index){void 0===index&&(index=-1);var s=this._detachScope();index==-1&&(index=this.length-1);var view=this._element.detachView(index);return profile_1.wtfLeave(s,view.ref)},ViewContainerRef_.prototype.clear=function(){for(var i=this.length-1;i>=0;i--)this.remove(i)},ViewContainerRef_}();exports.ViewContainerRef_=ViewContainerRef_},{"../facade/collection":195,"../facade/exceptions":197,"../facade/lang":198,"../profile/profile":230}],219:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},constants_1=require("../change_detection/constants"),exceptions_1=require("../facade/exceptions"),ViewRef=function(){function ViewRef(){}return Object.defineProperty(ViewRef.prototype,"destroyed",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),ViewRef}();exports.ViewRef=ViewRef;var EmbeddedViewRef=function(_super){function EmbeddedViewRef(){_super.apply(this,arguments)}return __extends(EmbeddedViewRef,_super),Object.defineProperty(EmbeddedViewRef.prototype,"context",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(EmbeddedViewRef.prototype,"rootNodes",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),EmbeddedViewRef}(ViewRef);exports.EmbeddedViewRef=EmbeddedViewRef;var ViewRef_=function(){function ViewRef_(_view){this._view=_view,this._view=_view,this._originalMode=this._view.cdMode}return Object.defineProperty(ViewRef_.prototype,"internalView",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(ViewRef_.prototype,"rootNodes",{get:function(){return this._view.flatRootNodes},enumerable:!0,configurable:!0}),Object.defineProperty(ViewRef_.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(ViewRef_.prototype,"destroyed",{get:function(){return this._view.destroyed},enumerable:!0,configurable:!0}),ViewRef_.prototype.markForCheck=function(){this._view.markPathToRootAsCheckOnce()},ViewRef_.prototype.detach=function(){this._view.cdMode=constants_1.ChangeDetectorStatus.Detached},ViewRef_.prototype.detectChanges=function(){this._view.detectChanges(!1)},ViewRef_.prototype.checkNoChanges=function(){this._view.detectChanges(!0)},ViewRef_.prototype.reattach=function(){this._view.cdMode=this._originalMode,this.markForCheck()},ViewRef_.prototype.onDestroy=function(callback){
this._view.disposables.push(callback)},ViewRef_.prototype.destroy=function(){this._view.destroy()},ViewRef_}();exports.ViewRef_=ViewRef_},{"../change_detection/constants":173,"../facade/exceptions":197}],220:[function(require,module,exports){"use strict";!function(ViewType){ViewType[ViewType.HOST=0]="HOST",ViewType[ViewType.COMPONENT=1]="COMPONENT",ViewType[ViewType.EMBEDDED=2]="EMBEDDED"}(exports.ViewType||(exports.ViewType={}));exports.ViewType},{}],221:[function(require,module,exports){"use strict";function flattenNestedViewRenderNodes(nodes){return _flattenNestedViewRenderNodes(nodes,[])}function _flattenNestedViewRenderNodes(nodes,renderNodes){for(var i=0;i<nodes.length;i++){var node=nodes[i];if(node instanceof element_1.AppElement){var appEl=node;if(renderNodes.push(appEl.nativeElement),lang_1.isPresent(appEl.nestedViews))for(var k=0;k<appEl.nestedViews.length;k++)_flattenNestedViewRenderNodes(appEl.nestedViews[k].rootNodesOrAppElements,renderNodes)}else renderNodes.push(node)}return renderNodes}function ensureSlotCount(projectableNodes,expectedSlotCount){var res;if(lang_1.isBlank(projectableNodes))res=EMPTY_ARR;else if(projectableNodes.length<expectedSlotCount){var givenSlotCount=projectableNodes.length;res=collection_1.ListWrapper.createFixedSize(expectedSlotCount);for(var i=0;i<expectedSlotCount;i++)res[i]=i<givenSlotCount?projectableNodes[i]:EMPTY_ARR}else res=projectableNodes;return res}function interpolate(valueCount,c0,a1,c1,a2,c2,a3,c3,a4,c4,a5,c5,a6,c6,a7,c7,a8,c8,a9,c9){switch(valueCount){case 1:return c0+_toStringWithNull(a1)+c1;case 2:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2;case 3:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3;case 4:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4;case 5:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5;case 6:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6;case 7:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6+_toStringWithNull(a7)+c7;case 8:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6+_toStringWithNull(a7)+c7+_toStringWithNull(a8)+c8;case 9:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6+_toStringWithNull(a7)+c7+_toStringWithNull(a8)+c8+_toStringWithNull(a9)+c9;default:throw new exceptions_1.BaseException("Does not support more than 9 expressions")}}function _toStringWithNull(v){return null!=v?v.toString():""}function checkBinding(throwOnChange,oldValue,newValue){if(throwOnChange){if(!change_detection_1.devModeEqual(oldValue,newValue))throw new exceptions_2.ExpressionChangedAfterItHasBeenCheckedException(oldValue,newValue,null);return!1}return!lang_1.looseIdentical(oldValue,newValue)}function castByValue(input,value){return input}function pureProxy1(fn){var result,v0=change_detection_util_1.UNINITIALIZED;return function(p0){return lang_1.looseIdentical(v0,p0)||(v0=p0,result=fn(p0)),result}}function pureProxy2(fn){var result,v0=change_detection_util_1.UNINITIALIZED,v1=change_detection_util_1.UNINITIALIZED;return function(p0,p1){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)||(v0=p0,v1=p1,result=fn(p0,p1)),result}}function pureProxy3(fn){var result,v0=change_detection_util_1.UNINITIALIZED,v1=change_detection_util_1.UNINITIALIZED,v2=change_detection_util_1.UNINITIALIZED;return function(p0,p1,p2){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)||(v0=p0,v1=p1,v2=p2,result=fn(p0,p1,p2)),result}}function pureProxy4(fn){var result,v0,v1,v2,v3;return v0=v1=v2=v3=change_detection_util_1.UNINITIALIZED,function(p0,p1,p2,p3){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)&&lang_1.looseIdentical(v3,p3)||(v0=p0,v1=p1,v2=p2,v3=p3,result=fn(p0,p1,p2,p3)),result}}function pureProxy5(fn){var result,v0,v1,v2,v3,v4;return v0=v1=v2=v3=v4=change_detection_util_1.UNINITIALIZED,function(p0,p1,p2,p3,p4){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)&&lang_1.looseIdentical(v3,p3)&&lang_1.looseIdentical(v4,p4)||(v0=p0,v1=p1,v2=p2,v3=p3,v4=p4,result=fn(p0,p1,p2,p3,p4)),result}}function pureProxy6(fn){var result,v0,v1,v2,v3,v4,v5;return v0=v1=v2=v3=v4=v5=change_detection_util_1.UNINITIALIZED,function(p0,p1,p2,p3,p4,p5){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)&&lang_1.looseIdentical(v3,p3)&&lang_1.looseIdentical(v4,p4)&&lang_1.looseIdentical(v5,p5)||(v0=p0,v1=p1,v2=p2,v3=p3,v4=p4,v5=p5,result=fn(p0,p1,p2,p3,p4,p5)),result}}function pureProxy7(fn){var result,v0,v1,v2,v3,v4,v5,v6;return v0=v1=v2=v3=v4=v5=v6=change_detection_util_1.UNINITIALIZED,function(p0,p1,p2,p3,p4,p5,p6){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)&&lang_1.looseIdentical(v3,p3)&&lang_1.looseIdentical(v4,p4)&&lang_1.looseIdentical(v5,p5)&&lang_1.looseIdentical(v6,p6)||(v0=p0,v1=p1,v2=p2,v3=p3,v4=p4,v5=p5,v6=p6,result=fn(p0,p1,p2,p3,p4,p5,p6)),result}}function pureProxy8(fn){var result,v0,v1,v2,v3,v4,v5,v6,v7;return v0=v1=v2=v3=v4=v5=v6=v7=change_detection_util_1.UNINITIALIZED,function(p0,p1,p2,p3,p4,p5,p6,p7){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)&&lang_1.looseIdentical(v3,p3)&&lang_1.looseIdentical(v4,p4)&&lang_1.looseIdentical(v5,p5)&&lang_1.looseIdentical(v6,p6)&&lang_1.looseIdentical(v7,p7)||(v0=p0,v1=p1,v2=p2,v3=p3,v4=p4,v5=p5,v6=p6,v7=p7,result=fn(p0,p1,p2,p3,p4,p5,p6,p7)),result}}function pureProxy9(fn){var result,v0,v1,v2,v3,v4,v5,v6,v7,v8;return v0=v1=v2=v3=v4=v5=v6=v7=v8=change_detection_util_1.UNINITIALIZED,function(p0,p1,p2,p3,p4,p5,p6,p7,p8){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)&&lang_1.looseIdentical(v3,p3)&&lang_1.looseIdentical(v4,p4)&&lang_1.looseIdentical(v5,p5)&&lang_1.looseIdentical(v6,p6)&&lang_1.looseIdentical(v7,p7)&&lang_1.looseIdentical(v8,p8)||(v0=p0,v1=p1,v2=p2,v3=p3,v4=p4,v5=p5,v6=p6,v7=p7,v8=p8,result=fn(p0,p1,p2,p3,p4,p5,p6,p7,p8)),result}}function pureProxy10(fn){var result,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9;return v0=v1=v2=v3=v4=v5=v6=v7=v8=v9=change_detection_util_1.UNINITIALIZED,function(p0,p1,p2,p3,p4,p5,p6,p7,p8,p9){return lang_1.looseIdentical(v0,p0)&&lang_1.looseIdentical(v1,p1)&&lang_1.looseIdentical(v2,p2)&&lang_1.looseIdentical(v3,p3)&&lang_1.looseIdentical(v4,p4)&&lang_1.looseIdentical(v5,p5)&&lang_1.looseIdentical(v6,p6)&&lang_1.looseIdentical(v7,p7)&&lang_1.looseIdentical(v8,p8)&&lang_1.looseIdentical(v9,p9)||(v0=p0,v1=p1,v2=p2,v3=p3,v4=p4,v5=p5,v6=p6,v7=p7,v8=p8,v9=p9,result=fn(p0,p1,p2,p3,p4,p5,p6,p7,p8,p9)),result}}var application_tokens_1=require("../application_tokens"),change_detection_1=require("../change_detection/change_detection"),change_detection_util_1=require("../change_detection/change_detection_util"),decorators_1=require("../di/decorators"),collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),api_1=require("../render/api"),security_1=require("../security"),element_1=require("./element"),exceptions_2=require("./exceptions"),ViewUtils=function(){function ViewUtils(_renderer,_appId,sanitizer){this._renderer=_renderer,this._appId=_appId,this._nextCompTypeId=0,this.sanitizer=sanitizer}return ViewUtils.prototype.createRenderComponentType=function(templateUrl,slotCount,encapsulation,styles,animations){return new api_1.RenderComponentType(this._appId+"-"+this._nextCompTypeId++,templateUrl,slotCount,encapsulation,styles,animations)},ViewUtils.prototype.renderComponent=function(renderComponentType){return this._renderer.renderComponent(renderComponentType)},ViewUtils.decorators=[{type:decorators_1.Injectable}],ViewUtils.ctorParameters=[{type:api_1.RootRenderer},{type:void 0,decorators:[{type:decorators_1.Inject,args:[application_tokens_1.APP_ID]}]},{type:security_1.SanitizationService}],ViewUtils}();exports.ViewUtils=ViewUtils,exports.flattenNestedViewRenderNodes=flattenNestedViewRenderNodes;var EMPTY_ARR=[];exports.ensureSlotCount=ensureSlotCount,exports.MAX_INTERPOLATION_VALUES=9,exports.interpolate=interpolate,exports.checkBinding=checkBinding,exports.castByValue=castByValue,exports.EMPTY_ARRAY=[],exports.EMPTY_MAP={},exports.pureProxy1=pureProxy1,exports.pureProxy2=pureProxy2,exports.pureProxy3=pureProxy3,exports.pureProxy4=pureProxy4,exports.pureProxy5=pureProxy5,exports.pureProxy6=pureProxy6,exports.pureProxy7=pureProxy7,exports.pureProxy8=pureProxy8,exports.pureProxy9=pureProxy9,exports.pureProxy10=pureProxy10},{"../application_tokens":168,"../change_detection/change_detection":170,"../change_detection/change_detection_util":171,"../di/decorators":182,"../facade/collection":195,"../facade/exceptions":197,"../facade/lang":198,"../render/api":238,"../security":239,"./element":207,"./exceptions":210}],222:[function(require,module,exports){"use strict";var di_1=require("./metadata/di"),directives_1=require("./metadata/directives"),ng_module_1=require("./metadata/ng_module"),decorators_1=require("./util/decorators"),di_2=require("./metadata/di");exports.ANALYZE_FOR_ENTRY_COMPONENTS=di_2.ANALYZE_FOR_ENTRY_COMPONENTS,exports.AttributeMetadata=di_2.AttributeMetadata,exports.ContentChildMetadata=di_2.ContentChildMetadata,exports.ContentChildrenMetadata=di_2.ContentChildrenMetadata,exports.QueryMetadata=di_2.QueryMetadata,exports.ViewChildMetadata=di_2.ViewChildMetadata,exports.ViewChildrenMetadata=di_2.ViewChildrenMetadata,exports.ViewQueryMetadata=di_2.ViewQueryMetadata;var directives_2=require("./metadata/directives");exports.ComponentMetadata=directives_2.ComponentMetadata,exports.DirectiveMetadata=directives_2.DirectiveMetadata,exports.HostBindingMetadata=directives_2.HostBindingMetadata,exports.HostListenerMetadata=directives_2.HostListenerMetadata,exports.InputMetadata=directives_2.InputMetadata,exports.OutputMetadata=directives_2.OutputMetadata,exports.PipeMetadata=directives_2.PipeMetadata;var lifecycle_hooks_1=require("./metadata/lifecycle_hooks");exports.AfterContentChecked=lifecycle_hooks_1.AfterContentChecked,exports.AfterContentInit=lifecycle_hooks_1.AfterContentInit,exports.AfterViewChecked=lifecycle_hooks_1.AfterViewChecked,exports.AfterViewInit=lifecycle_hooks_1.AfterViewInit,exports.DoCheck=lifecycle_hooks_1.DoCheck,exports.OnChanges=lifecycle_hooks_1.OnChanges,exports.OnDestroy=lifecycle_hooks_1.OnDestroy,exports.OnInit=lifecycle_hooks_1.OnInit;var ng_module_2=require("./metadata/ng_module");exports.CUSTOM_ELEMENTS_SCHEMA=ng_module_2.CUSTOM_ELEMENTS_SCHEMA,exports.NgModuleMetadata=ng_module_2.NgModuleMetadata;var view_1=require("./metadata/view");exports.ViewEncapsulation=view_1.ViewEncapsulation,exports.ViewMetadata=view_1.ViewMetadata,exports.Component=decorators_1.makeDecorator(directives_1.ComponentMetadata),exports.Directive=decorators_1.makeDecorator(directives_1.DirectiveMetadata),exports.Attribute=decorators_1.makeParamDecorator(di_1.AttributeMetadata),exports.Query=decorators_1.makeParamDecorator(di_1.QueryMetadata),exports.ContentChildren=decorators_1.makePropDecorator(di_1.ContentChildrenMetadata),exports.ContentChild=decorators_1.makePropDecorator(di_1.ContentChildMetadata),exports.ViewChildren=decorators_1.makePropDecorator(di_1.ViewChildrenMetadata),exports.ViewChild=decorators_1.makePropDecorator(di_1.ViewChildMetadata),exports.ViewQuery=decorators_1.makeParamDecorator(di_1.ViewQueryMetadata),exports.Pipe=decorators_1.makeDecorator(directives_1.PipeMetadata),exports.Input=decorators_1.makePropDecorator(directives_1.InputMetadata),exports.Output=decorators_1.makePropDecorator(directives_1.OutputMetadata),exports.HostBinding=decorators_1.makePropDecorator(directives_1.HostBindingMetadata),exports.HostListener=decorators_1.makePropDecorator(directives_1.HostListenerMetadata),exports.NgModule=decorators_1.makeDecorator(ng_module_1.NgModuleMetadata)},{"./metadata/di":223,"./metadata/directives":224,"./metadata/lifecycle_hooks":225,"./metadata/ng_module":226,"./metadata/view":227,"./util/decorators":242}],223:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},forward_ref_1=require("../di/forward_ref"),metadata_1=require("../di/metadata"),opaque_token_1=require("../di/opaque_token"),lang_1=require("../facade/lang");exports.ANALYZE_FOR_ENTRY_COMPONENTS=new opaque_token_1.OpaqueToken("AnalyzeForEntryComponents");var AttributeMetadata=function(_super){function AttributeMetadata(attributeName){_super.call(this),this.attributeName=attributeName}return __extends(AttributeMetadata,_super),Object.defineProperty(AttributeMetadata.prototype,"token",{get:function(){return this},enumerable:!0,configurable:!0}),AttributeMetadata.prototype.toString=function(){return"@Attribute("+lang_1.stringify(this.attributeName)+")"},AttributeMetadata}(metadata_1.DependencyMetadata);exports.AttributeMetadata=AttributeMetadata;var QueryMetadata=function(_super){function QueryMetadata(_selector,_a){var _b=void 0===_a?{}:_a,_c=_b.descendants,descendants=void 0!==_c&&_c,_d=_b.first,first=void 0!==_d&&_d,_e=_b.read,read=void 0===_e?null:_e;_super.call(this),this._selector=_selector,this.descendants=descendants,this.first=first,this.read=read}return __extends(QueryMetadata,_super),Object.defineProperty(QueryMetadata.prototype,"isViewQuery",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(QueryMetadata.prototype,"selector",{get:function(){return forward_ref_1.resolveForwardRef(this._selector)},enumerable:!0,configurable:!0}),Object.defineProperty(QueryMetadata.prototype,"isVarBindingQuery",{get:function(){return lang_1.isString(this.selector)},enumerable:!0,configurable:!0}),Object.defineProperty(QueryMetadata.prototype,"varBindings",{get:function(){return lang_1.StringWrapper.split(this.selector,/\s*,\s*/g)},enumerable:!0,configurable:!0}),QueryMetadata.prototype.toString=function(){return"@Query("+lang_1.stringify(this.selector)+")"},QueryMetadata}(metadata_1.DependencyMetadata);exports.QueryMetadata=QueryMetadata;var ContentChildrenMetadata=function(_super){function ContentChildrenMetadata(_selector,_a){var _b=void 0===_a?{}:_a,_c=_b.descendants,descendants=void 0!==_c&&_c,_d=_b.read,read=void 0===_d?null:_d;_super.call(this,_selector,{descendants:descendants,read:read})}return __extends(ContentChildrenMetadata,_super),ContentChildrenMetadata}(QueryMetadata);exports.ContentChildrenMetadata=ContentChildrenMetadata;var ContentChildMetadata=function(_super){function ContentChildMetadata(_selector,_a){var _b=(void 0===_a?{}:_a).read,read=void 0===_b?null:_b;_super.call(this,_selector,{descendants:!0,first:!0,read:read})}return __extends(ContentChildMetadata,_super),ContentChildMetadata}(QueryMetadata);exports.ContentChildMetadata=ContentChildMetadata;var ViewQueryMetadata=function(_super){function ViewQueryMetadata(_selector,_a){var _b=void 0===_a?{}:_a,_c=_b.descendants,descendants=void 0!==_c&&_c,_d=_b.first,first=void 0!==_d&&_d,_e=_b.read,read=void 0===_e?null:_e;_super.call(this,_selector,{descendants:descendants,first:first,read:read})}return __extends(ViewQueryMetadata,_super),Object.defineProperty(ViewQueryMetadata.prototype,"isViewQuery",{get:function(){return!0},enumerable:!0,configurable:!0}),ViewQueryMetadata.prototype.toString=function(){return"@ViewQuery("+lang_1.stringify(this.selector)+")"},ViewQueryMetadata}(QueryMetadata);exports.ViewQueryMetadata=ViewQueryMetadata;var ViewChildrenMetadata=function(_super){function ViewChildrenMetadata(_selector,_a){var _b=(void 0===_a?{}:_a).read,read=void 0===_b?null:_b;_super.call(this,_selector,{descendants:!0,read:read})}return __extends(ViewChildrenMetadata,_super),ViewChildrenMetadata}(ViewQueryMetadata);exports.ViewChildrenMetadata=ViewChildrenMetadata;var ViewChildMetadata=function(_super){function ViewChildMetadata(_selector,_a){var _b=(void 0===_a?{}:_a).read,read=void 0===_b?null:_b;_super.call(this,_selector,{descendants:!0,first:!0,read:read})}return __extends(ViewChildMetadata,_super),ViewChildMetadata}(ViewQueryMetadata);exports.ViewChildMetadata=ViewChildMetadata},{"../di/forward_ref":183,"../di/metadata":185,"../di/opaque_token":186,"../facade/lang":198}],224:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},constants_1=require("../change_detection/constants"),metadata_1=require("../di/metadata"),lang_1=require("../facade/lang"),DirectiveMetadata=function(_super){function DirectiveMetadata(_a){var _b=void 0===_a?{}:_a,selector=_b.selector,inputs=_b.inputs,outputs=_b.outputs,properties=_b.properties,events=_b.events,host=_b.host,providers=_b.providers,exportAs=_b.exportAs,queries=_b.queries;_super.call(this),this.selector=selector,this._inputs=inputs,this._properties=properties,this._outputs=outputs,this._events=events,this.host=host,this.exportAs=exportAs,this.queries=queries,this._providers=providers}return __extends(DirectiveMetadata,_super),Object.defineProperty(DirectiveMetadata.prototype,"inputs",{get:function(){return lang_1.isPresent(this._properties)&&this._properties.length>0?this._properties:this._inputs},enumerable:!0,configurable:!0}),Object.defineProperty(DirectiveMetadata.prototype,"properties",{get:function(){return this.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(DirectiveMetadata.prototype,"outputs",{get:function(){return lang_1.isPresent(this._events)&&this._events.length>0?this._events:this._outputs},enumerable:!0,configurable:!0}),Object.defineProperty(DirectiveMetadata.prototype,"events",{get:function(){return this.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(DirectiveMetadata.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),DirectiveMetadata}(metadata_1.InjectableMetadata);exports.DirectiveMetadata=DirectiveMetadata;var ComponentMetadata=function(_super){function ComponentMetadata(_a){var _b=void 0===_a?{}:_a,selector=_b.selector,inputs=_b.inputs,outputs=_b.outputs,properties=_b.properties,events=_b.events,host=_b.host,exportAs=_b.exportAs,moduleId=_b.moduleId,providers=_b.providers,viewProviders=_b.viewProviders,_c=_b.changeDetection,changeDetection=void 0===_c?constants_1.ChangeDetectionStrategy.Default:_c,queries=_b.queries,templateUrl=_b.templateUrl,template=_b.template,styleUrls=_b.styleUrls,styles=_b.styles,animations=_b.animations,directives=_b.directives,pipes=_b.pipes,encapsulation=_b.encapsulation,interpolation=_b.interpolation,entryComponents=_b.entryComponents;_super.call(this,{selector:selector,inputs:inputs,outputs:outputs,properties:properties,events:events,host:host,exportAs:exportAs,providers:providers,queries:queries}),this.changeDetection=changeDetection,this._viewProviders=viewProviders,this.templateUrl=templateUrl,this.template=template,this.styleUrls=styleUrls,this.styles=styles,this.directives=directives,this.pipes=pipes,this.encapsulation=encapsulation,this.moduleId=moduleId,this.animations=animations,this.interpolation=interpolation,this.entryComponents=entryComponents}return __extends(ComponentMetadata,_super),Object.defineProperty(ComponentMetadata.prototype,"viewProviders",{get:function(){return this._viewProviders},enumerable:!0,configurable:!0}),ComponentMetadata}(DirectiveMetadata);exports.ComponentMetadata=ComponentMetadata;var PipeMetadata=function(_super){function PipeMetadata(_a){var name=_a.name,pure=_a.pure;_super.call(this),this.name=name,this._pure=pure}return __extends(PipeMetadata,_super),Object.defineProperty(PipeMetadata.prototype,"pure",{get:function(){return!lang_1.isPresent(this._pure)||this._pure},enumerable:!0,configurable:!0}),PipeMetadata}(metadata_1.InjectableMetadata);exports.PipeMetadata=PipeMetadata;var InputMetadata=function(){function InputMetadata(bindingPropertyName){this.bindingPropertyName=bindingPropertyName}return InputMetadata}();exports.InputMetadata=InputMetadata;var OutputMetadata=function(){function OutputMetadata(bindingPropertyName){this.bindingPropertyName=bindingPropertyName}return OutputMetadata}();exports.OutputMetadata=OutputMetadata;var HostBindingMetadata=function(){function HostBindingMetadata(hostPropertyName){this.hostPropertyName=hostPropertyName}return HostBindingMetadata}();exports.HostBindingMetadata=HostBindingMetadata;var HostListenerMetadata=function(){function HostListenerMetadata(eventName,args){this.eventName=eventName,this.args=args}return HostListenerMetadata}();exports.HostListenerMetadata=HostListenerMetadata},{"../change_detection/constants":173,"../di/metadata":185,"../facade/lang":198}],225:[function(require,module,exports){"use strict";!function(LifecycleHooks){LifecycleHooks[LifecycleHooks.OnInit=0]="OnInit",LifecycleHooks[LifecycleHooks.OnDestroy=1]="OnDestroy",LifecycleHooks[LifecycleHooks.DoCheck=2]="DoCheck",LifecycleHooks[LifecycleHooks.OnChanges=3]="OnChanges",LifecycleHooks[LifecycleHooks.AfterContentInit=4]="AfterContentInit",LifecycleHooks[LifecycleHooks.AfterContentChecked=5]="AfterContentChecked",LifecycleHooks[LifecycleHooks.AfterViewInit=6]="AfterViewInit",LifecycleHooks[LifecycleHooks.AfterViewChecked=7]="AfterViewChecked"}(exports.LifecycleHooks||(exports.LifecycleHooks={}));var LifecycleHooks=exports.LifecycleHooks;exports.LIFECYCLE_HOOKS_VALUES=[LifecycleHooks.OnInit,LifecycleHooks.OnDestroy,LifecycleHooks.DoCheck,LifecycleHooks.OnChanges,LifecycleHooks.AfterContentInit,LifecycleHooks.AfterContentChecked,LifecycleHooks.AfterViewInit,LifecycleHooks.AfterViewChecked];var OnChanges=function(){function OnChanges(){}return OnChanges}();exports.OnChanges=OnChanges;var OnInit=function(){function OnInit(){}return OnInit}();exports.OnInit=OnInit;var DoCheck=function(){function DoCheck(){}return DoCheck}();exports.DoCheck=DoCheck;var OnDestroy=function(){function OnDestroy(){}return OnDestroy}();exports.OnDestroy=OnDestroy;var AfterContentInit=function(){function AfterContentInit(){}return AfterContentInit}();exports.AfterContentInit=AfterContentInit;var AfterContentChecked=function(){function AfterContentChecked(){}return AfterContentChecked}();exports.AfterContentChecked=AfterContentChecked;var AfterViewInit=function(){function AfterViewInit(){}return AfterViewInit}();exports.AfterViewInit=AfterViewInit;var AfterViewChecked=function(){function AfterViewChecked(){}return AfterViewChecked}();exports.AfterViewChecked=AfterViewChecked},{}],226:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},metadata_1=require("../di/metadata");exports.CUSTOM_ELEMENTS_SCHEMA={name:"custom-elements"};var NgModuleMetadata=function(_super){function NgModuleMetadata(options){void 0===options&&(options={}),_super.call(this),this._providers=options.providers,this.declarations=options.declarations,this.imports=options.imports,this.exports=options.exports,this.entryComponents=options.entryComponents,this.bootstrap=options.bootstrap,this.schemas=options.schemas}return __extends(NgModuleMetadata,_super),Object.defineProperty(NgModuleMetadata.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),NgModuleMetadata}(metadata_1.InjectableMetadata);exports.NgModuleMetadata=NgModuleMetadata},{"../di/metadata":185}],227:[function(require,module,exports){"use strict";!function(ViewEncapsulation){ViewEncapsulation[ViewEncapsulation.Emulated=0]="Emulated",ViewEncapsulation[ViewEncapsulation.Native=1]="Native",ViewEncapsulation[ViewEncapsulation.None=2]="None"}(exports.ViewEncapsulation||(exports.ViewEncapsulation={}));var ViewEncapsulation=exports.ViewEncapsulation;exports.VIEW_ENCAPSULATION_VALUES=[ViewEncapsulation.Emulated,ViewEncapsulation.Native,ViewEncapsulation.None];var ViewMetadata=function(){function ViewMetadata(_a){var _b=void 0===_a?{}:_a,templateUrl=_b.templateUrl,template=_b.template,directives=_b.directives,pipes=_b.pipes,encapsulation=_b.encapsulation,styles=_b.styles,styleUrls=_b.styleUrls,animations=_b.animations,interpolation=_b.interpolation;this.templateUrl=templateUrl,this.template=template,this.styleUrls=styleUrls,this.styles=styles,this.directives=directives,this.pipes=pipes,this.encapsulation=encapsulation,this.animations=animations,this.interpolation=interpolation}return ViewMetadata}();exports.ViewMetadata=ViewMetadata},{}],228:[function(require,module,exports){"use strict";function _reflector(){return reflection_1.reflector}var application_ref_1=require("./application_ref"),console_1=require("./console"),reflection_1=require("./reflection/reflection"),reflector_reader_1=require("./reflection/reflector_reader"),testability_1=require("./testability/testability"),_CORE_PLATFORM_PROVIDERS=[application_ref_1.PlatformRef_,{provide:application_ref_1.PlatformRef,useExisting:application_ref_1.PlatformRef_},{provide:reflection_1.Reflector,useFactory:_reflector,deps:[]},{provide:reflector_reader_1.ReflectorReader,useExisting:reflection_1.Reflector},testability_1.TestabilityRegistry,console_1.Console];exports.platformCore=application_ref_1.createPlatformFactory(null,"core",_CORE_PLATFORM_PROVIDERS),exports.PLATFORM_COMMON_PROVIDERS=_CORE_PLATFORM_PROVIDERS},{"./application_ref":167,"./console":178,"./reflection/reflection":233,"./reflection/reflector_reader":236,"./testability/testability":240}],229:[function(require,module,exports){"use strict";var di_1=require("./di");exports.PLATFORM_DIRECTIVES=new di_1.OpaqueToken("Platform Directives"),exports.PLATFORM_PIPES=new di_1.OpaqueToken("Platform Pipes")},{"./di":181}],230:[function(require,module,exports){"use strict";function noopScope(arg0,arg1){return null}var wtf_impl_1=require("./wtf_impl");exports.wtfEnabled=wtf_impl_1.detectWTF(),exports.wtfCreateScope=exports.wtfEnabled?wtf_impl_1.createScope:function(signature,flags){return noopScope},exports.wtfLeave=exports.wtfEnabled?wtf_impl_1.leave:function(s,r){return r},exports.wtfStartTimeRange=exports.wtfEnabled?wtf_impl_1.startTimeRange:function(rangeType,action){return null},exports.wtfEndTimeRange=exports.wtfEnabled?wtf_impl_1.endTimeRange:function(r){return null}},{"./wtf_impl":231}],231:[function(require,module,exports){"use strict";function detectWTF(){var wtf=lang_1.global.wtf;return!(!wtf||!(trace=wtf.trace))&&(events=trace.events,!0)}function createScope(signature,flags){return void 0===flags&&(flags=null),events.createScope(signature,flags)}function leave(scope,returnValue){return trace.leaveScope(scope,returnValue),returnValue}function startTimeRange(rangeType,action){return trace.beginTimeRange(rangeType,action)}function endTimeRange(range){trace.endTimeRange(range)}var trace,events,lang_1=require("../facade/lang");exports.detectWTF=detectWTF,exports.createScope=createScope,exports.leave=leave,exports.startTimeRange=startTimeRange,exports.endTimeRange=endTimeRange},{"../facade/lang":198}],232:[function(require,module,exports){"use strict";function wtfInit(){}exports.wtfInit=wtfInit},{}],233:[function(require,module,exports){"use strict";var reflection_capabilities_1=require("./reflection_capabilities"),reflector_1=require("./reflector"),reflector_2=require("./reflector");exports.ReflectionInfo=reflector_2.ReflectionInfo,exports.Reflector=reflector_2.Reflector,exports.reflector=new reflector_1.Reflector(new reflection_capabilities_1.ReflectionCapabilities)},{"./reflection_capabilities":234,"./reflector":235}],234:[function(require,module,exports){"use strict";function convertTsickleDecoratorIntoMetadata(decoratorInvocations){return decoratorInvocations?decoratorInvocations.map(function(decoratorInvocation){var decoratorType=decoratorInvocation.type,annotationCls=decoratorType.annotationCls,annotationArgs=decoratorInvocation.args?decoratorInvocation.args:[],annotation=Object.create(annotationCls.prototype);return annotationCls.apply(annotation,annotationArgs),annotation}):[]}var lang_1=require("../facade/lang"),ReflectionCapabilities=function(){function ReflectionCapabilities(reflect){this._reflect=lang_1.isPresent(reflect)?reflect:lang_1.global.Reflect}return ReflectionCapabilities.prototype.isReflectionEnabled=function(){return!0},ReflectionCapabilities.prototype.factory=function(t){switch(t.length){case 0:return function(){return new t};case 1:return function(a1){return new t(a1)};case 2:return function(a1,a2){return new t(a1,a2)};case 3:return function(a1,a2,a3){return new t(a1,a2,a3)};case 4:return function(a1,a2,a3,a4){return new t(a1,a2,a3,a4)};case 5:return function(a1,a2,a3,a4,a5){return new t(a1,a2,a3,a4,a5)};case 6:return function(a1,a2,a3,a4,a5,a6){return new t(a1,a2,a3,a4,a5,a6)};case 7:return function(a1,a2,a3,a4,a5,a6,a7){return new t(a1,a2,a3,a4,a5,a6,a7)};case 8:return function(a1,a2,a3,a4,a5,a6,a7,a8){return new t(a1,a2,a3,a4,a5,a6,a7,a8)};case 9:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9)};case 10:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10)};case 11:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11)};case 12:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12)};case 13:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13)};case 14:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14)};case 15:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15)};case 16:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16)};case 17:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17)};case 18:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17,a18){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17,a18)};case 19:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17,a18,a19){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17,a18,a19)};case 20:return function(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17,a18,a19,a20){return new t(a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17,a18,a19,a20)}}throw new Error("Cannot create a factory for '"+lang_1.stringify(t)+"' because its constructor has more than 20 arguments")},ReflectionCapabilities.prototype._zipTypesAndAnnotations=function(paramTypes,paramAnnotations){var result;result="undefined"==typeof paramTypes?new Array(paramAnnotations.length):new Array(paramTypes.length);for(var i=0;i<result.length;i++)"undefined"==typeof paramTypes?result[i]=[]:paramTypes[i]!=Object?result[i]=[paramTypes[i]]:result[i]=[],lang_1.isPresent(paramAnnotations)&&lang_1.isPresent(paramAnnotations[i])&&(result[i]=result[i].concat(paramAnnotations[i]));return result},ReflectionCapabilities.prototype.parameters=function(typeOrFunc){if(lang_1.isPresent(typeOrFunc.parameters))return typeOrFunc.parameters;
if(lang_1.isPresent(typeOrFunc.ctorParameters)){var ctorParameters=typeOrFunc.ctorParameters,paramTypes_1=ctorParameters.map(function(ctorParam){return ctorParam&&ctorParam.type}),paramAnnotations_1=ctorParameters.map(function(ctorParam){return ctorParam&&convertTsickleDecoratorIntoMetadata(ctorParam.decorators)});return this._zipTypesAndAnnotations(paramTypes_1,paramAnnotations_1)}if(lang_1.isPresent(this._reflect)&&lang_1.isPresent(this._reflect.getMetadata)){var paramAnnotations=this._reflect.getMetadata("parameters",typeOrFunc),paramTypes=this._reflect.getMetadata("design:paramtypes",typeOrFunc);if(lang_1.isPresent(paramTypes)||lang_1.isPresent(paramAnnotations))return this._zipTypesAndAnnotations(paramTypes,paramAnnotations)}var parameters=new Array(typeOrFunc.length);return parameters.fill(void 0),parameters},ReflectionCapabilities.prototype.annotations=function(typeOrFunc){if(lang_1.isPresent(typeOrFunc.annotations)){var annotations=typeOrFunc.annotations;return lang_1.isFunction(annotations)&&annotations.annotations&&(annotations=annotations.annotations),annotations}if(lang_1.isPresent(typeOrFunc.decorators))return convertTsickleDecoratorIntoMetadata(typeOrFunc.decorators);if(lang_1.isPresent(this._reflect)&&lang_1.isPresent(this._reflect.getMetadata)){var annotations=this._reflect.getMetadata("annotations",typeOrFunc);if(lang_1.isPresent(annotations))return annotations}return[]},ReflectionCapabilities.prototype.propMetadata=function(typeOrFunc){if(lang_1.isPresent(typeOrFunc.propMetadata)){var propMetadata=typeOrFunc.propMetadata;return lang_1.isFunction(propMetadata)&&propMetadata.propMetadata&&(propMetadata=propMetadata.propMetadata),propMetadata}if(lang_1.isPresent(typeOrFunc.propDecorators)){var propDecorators_1=typeOrFunc.propDecorators,propMetadata_1={};return Object.keys(propDecorators_1).forEach(function(prop){propMetadata_1[prop]=convertTsickleDecoratorIntoMetadata(propDecorators_1[prop])}),propMetadata_1}if(lang_1.isPresent(this._reflect)&&lang_1.isPresent(this._reflect.getMetadata)){var propMetadata=this._reflect.getMetadata("propMetadata",typeOrFunc);if(lang_1.isPresent(propMetadata))return propMetadata}return{}},ReflectionCapabilities.prototype.interfaces=function(type){return[]},ReflectionCapabilities.prototype.hasLifecycleHook=function(type,lcInterface,lcProperty){if(!(type instanceof lang_1.Type))return!1;var proto=type.prototype;return!!proto[lcProperty]},ReflectionCapabilities.prototype.getter=function(name){return new Function("o","return o."+name+";")},ReflectionCapabilities.prototype.setter=function(name){return new Function("o","v","return o."+name+" = v;")},ReflectionCapabilities.prototype.method=function(name){var functionBody="if (!o."+name+") throw new Error('\""+name+"\" is undefined');\n        return o."+name+".apply(o, args);";return new Function("o","args",functionBody)},ReflectionCapabilities.prototype.importUri=function(type){return"object"==typeof type&&type.filePath?type.filePath:"./"+lang_1.stringify(type)},ReflectionCapabilities}();exports.ReflectionCapabilities=ReflectionCapabilities},{"../facade/lang":198}],235:[function(require,module,exports){"use strict";function _mergeMaps(target,config){collection_1.StringMapWrapper.forEach(config,function(v,k){return target.set(k,v)})}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),reflector_reader_1=require("./reflector_reader"),ReflectionInfo=function(){function ReflectionInfo(annotations,parameters,factory,interfaces,propMetadata){this.annotations=annotations,this.parameters=parameters,this.factory=factory,this.interfaces=interfaces,this.propMetadata=propMetadata}return ReflectionInfo}();exports.ReflectionInfo=ReflectionInfo;var Reflector=function(_super){function Reflector(reflectionCapabilities){_super.call(this),this._injectableInfo=new collection_1.Map,this._getters=new collection_1.Map,this._setters=new collection_1.Map,this._methods=new collection_1.Map,this._usedKeys=null,this.reflectionCapabilities=reflectionCapabilities}return __extends(Reflector,_super),Reflector.prototype.updateCapabilities=function(caps){this.reflectionCapabilities=caps},Reflector.prototype.isReflectionEnabled=function(){return this.reflectionCapabilities.isReflectionEnabled()},Reflector.prototype.trackUsage=function(){this._usedKeys=new collection_1.Set},Reflector.prototype.listUnusedKeys=function(){var _this=this;if(null==this._usedKeys)throw new exceptions_1.BaseException("Usage tracking is disabled");var allTypes=collection_1.MapWrapper.keys(this._injectableInfo);return allTypes.filter(function(key){return!collection_1.SetWrapper.has(_this._usedKeys,key)})},Reflector.prototype.registerFunction=function(func,funcInfo){this._injectableInfo.set(func,funcInfo)},Reflector.prototype.registerType=function(type,typeInfo){this._injectableInfo.set(type,typeInfo)},Reflector.prototype.registerGetters=function(getters){_mergeMaps(this._getters,getters)},Reflector.prototype.registerSetters=function(setters){_mergeMaps(this._setters,setters)},Reflector.prototype.registerMethods=function(methods){_mergeMaps(this._methods,methods)},Reflector.prototype.factory=function(type){if(this._containsReflectionInfo(type)){var res=this._getReflectionInfo(type).factory;return lang_1.isPresent(res)?res:null}return this.reflectionCapabilities.factory(type)},Reflector.prototype.parameters=function(typeOrFunc){if(this._injectableInfo.has(typeOrFunc)){var res=this._getReflectionInfo(typeOrFunc).parameters;return lang_1.isPresent(res)?res:[]}return this.reflectionCapabilities.parameters(typeOrFunc)},Reflector.prototype.annotations=function(typeOrFunc){if(this._injectableInfo.has(typeOrFunc)){var res=this._getReflectionInfo(typeOrFunc).annotations;return lang_1.isPresent(res)?res:[]}return this.reflectionCapabilities.annotations(typeOrFunc)},Reflector.prototype.propMetadata=function(typeOrFunc){if(this._injectableInfo.has(typeOrFunc)){var res=this._getReflectionInfo(typeOrFunc).propMetadata;return lang_1.isPresent(res)?res:{}}return this.reflectionCapabilities.propMetadata(typeOrFunc)},Reflector.prototype.interfaces=function(type){if(this._injectableInfo.has(type)){var res=this._getReflectionInfo(type).interfaces;return lang_1.isPresent(res)?res:[]}return this.reflectionCapabilities.interfaces(type)},Reflector.prototype.hasLifecycleHook=function(type,lcInterface,lcProperty){var interfaces=this.interfaces(type);return interfaces.indexOf(lcInterface)!==-1||this.reflectionCapabilities.hasLifecycleHook(type,lcInterface,lcProperty)},Reflector.prototype.getter=function(name){return this._getters.has(name)?this._getters.get(name):this.reflectionCapabilities.getter(name)},Reflector.prototype.setter=function(name){return this._setters.has(name)?this._setters.get(name):this.reflectionCapabilities.setter(name)},Reflector.prototype.method=function(name){return this._methods.has(name)?this._methods.get(name):this.reflectionCapabilities.method(name)},Reflector.prototype._getReflectionInfo=function(typeOrFunc){return lang_1.isPresent(this._usedKeys)&&this._usedKeys.add(typeOrFunc),this._injectableInfo.get(typeOrFunc)},Reflector.prototype._containsReflectionInfo=function(typeOrFunc){return this._injectableInfo.has(typeOrFunc)},Reflector.prototype.importUri=function(type){return this.reflectionCapabilities.importUri(type)},Reflector}(reflector_reader_1.ReflectorReader);exports.Reflector=Reflector},{"../facade/collection":195,"../facade/exceptions":197,"../facade/lang":198,"./reflector_reader":236}],236:[function(require,module,exports){"use strict";var ReflectorReader=function(){function ReflectorReader(){}return ReflectorReader}();exports.ReflectorReader=ReflectorReader},{}],237:[function(require,module,exports){"use strict";var api_1=require("./render/api");exports.RenderComponentType=api_1.RenderComponentType,exports.Renderer=api_1.Renderer,exports.RootRenderer=api_1.RootRenderer},{"./render/api":238}],238:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),RenderComponentType=function(){function RenderComponentType(id,templateUrl,slotCount,encapsulation,styles,animations){this.id=id,this.templateUrl=templateUrl,this.slotCount=slotCount,this.encapsulation=encapsulation,this.styles=styles,this.animations=animations}return RenderComponentType}();exports.RenderComponentType=RenderComponentType;var RenderDebugInfo=function(){function RenderDebugInfo(){}return Object.defineProperty(RenderDebugInfo.prototype,"injector",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"component",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"providerTokens",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"references",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"context",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(RenderDebugInfo.prototype,"source",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),RenderDebugInfo}();exports.RenderDebugInfo=RenderDebugInfo;var Renderer=function(){function Renderer(){}return Renderer}();exports.Renderer=Renderer;var RootRenderer=function(){function RootRenderer(){}return RootRenderer}();exports.RootRenderer=RootRenderer},{"../facade/exceptions":197}],239:[function(require,module,exports){"use strict";!function(SecurityContext){SecurityContext[SecurityContext.NONE=0]="NONE",SecurityContext[SecurityContext.HTML=1]="HTML",SecurityContext[SecurityContext.STYLE=2]="STYLE",SecurityContext[SecurityContext.SCRIPT=3]="SCRIPT",SecurityContext[SecurityContext.URL=4]="URL",SecurityContext[SecurityContext.RESOURCE_URL=5]="RESOURCE_URL"}(exports.SecurityContext||(exports.SecurityContext={}));var SanitizationService=(exports.SecurityContext,function(){function SanitizationService(){}return SanitizationService}());exports.SanitizationService=SanitizationService},{}],240:[function(require,module,exports){"use strict";function setTestabilityGetter(getter){_testabilityGetter=getter}var decorators_1=require("../di/decorators"),collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),ng_zone_1=require("../zone/ng_zone"),Testability=function(){function Testability(_ngZone){this._ngZone=_ngZone,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return Testability.prototype._watchAngularEvents=function(){var _this=this;this._ngZone.onUnstable.subscribe({next:function(){_this._didWork=!0,_this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){_this._ngZone.onStable.subscribe({next:function(){ng_zone_1.NgZone.assertNotInAngularZone(),lang_1.scheduleMicroTask(function(){_this._isZoneStable=!0,_this._runCallbacksIfReady()})}})})},Testability.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},Testability.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new exceptions_1.BaseException("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},Testability.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},Testability.prototype._runCallbacksIfReady=function(){var _this=this;this.isStable()?lang_1.scheduleMicroTask(function(){for(;0!==_this._callbacks.length;)_this._callbacks.pop()(_this._didWork);_this._didWork=!1}):this._didWork=!0},Testability.prototype.whenStable=function(callback){this._callbacks.push(callback),this._runCallbacksIfReady()},Testability.prototype.getPendingRequestCount=function(){return this._pendingCount},Testability.prototype.findBindings=function(using,provider,exactMatch){return[]},Testability.prototype.findProviders=function(using,provider,exactMatch){return[]},Testability.decorators=[{type:decorators_1.Injectable}],Testability.ctorParameters=[{type:ng_zone_1.NgZone}],Testability}();exports.Testability=Testability;var TestabilityRegistry=function(){function TestabilityRegistry(){this._applications=new collection_1.Map,_testabilityGetter.addToWindow(this)}return TestabilityRegistry.prototype.registerApplication=function(token,testability){this._applications.set(token,testability)},TestabilityRegistry.prototype.getTestability=function(elem){return this._applications.get(elem)},TestabilityRegistry.prototype.getAllTestabilities=function(){return collection_1.MapWrapper.values(this._applications)},TestabilityRegistry.prototype.getAllRootElements=function(){return collection_1.MapWrapper.keys(this._applications)},TestabilityRegistry.prototype.findTestabilityInTree=function(elem,findInAncestors){return void 0===findInAncestors&&(findInAncestors=!0),_testabilityGetter.findTestabilityInTree(this,elem,findInAncestors)},TestabilityRegistry.decorators=[{type:decorators_1.Injectable}],TestabilityRegistry.ctorParameters=[],TestabilityRegistry}();exports.TestabilityRegistry=TestabilityRegistry;var _NoopGetTestability=function(){function _NoopGetTestability(){}return _NoopGetTestability.prototype.addToWindow=function(registry){},_NoopGetTestability.prototype.findTestabilityInTree=function(registry,elem,findInAncestors){return null},_NoopGetTestability}();exports.setTestabilityGetter=setTestabilityGetter;var _testabilityGetter=new _NoopGetTestability},{"../di/decorators":182,"../facade/collection":195,"../facade/exceptions":197,"../facade/lang":198,"../zone/ng_zone":244}],241:[function(require,module,exports){"use strict";var decorators_1=require("./util/decorators");exports.Class=decorators_1.Class},{"./util/decorators":242}],242:[function(require,module,exports){"use strict";function extractAnnotation(annotation){return lang_1.isFunction(annotation)&&annotation.hasOwnProperty("annotation")&&(annotation=annotation.annotation),annotation}function applyParams(fnOrArray,key){if(fnOrArray===Object||fnOrArray===String||fnOrArray===Function||fnOrArray===Number||fnOrArray===Array)throw new Error("Can not use native "+lang_1.stringify(fnOrArray)+" as constructor");if(lang_1.isFunction(fnOrArray))return fnOrArray;if(fnOrArray instanceof Array){var annotations=fnOrArray,annoLength=annotations.length-1,fn=fnOrArray[annoLength];if(!lang_1.isFunction(fn))throw new Error("Last position of Class method array must be Function in key "+key+" was '"+lang_1.stringify(fn)+"'");if(annoLength!=fn.length)throw new Error("Number of annotations ("+annoLength+") does not match number of arguments ("+fn.length+") in the function: "+lang_1.stringify(fn));for(var paramsAnnotations=[],i=0,ii=annotations.length-1;i<ii;i++){var paramAnnotations=[];paramsAnnotations.push(paramAnnotations);var annotation=annotations[i];if(annotation instanceof Array)for(var j=0;j<annotation.length;j++)paramAnnotations.push(extractAnnotation(annotation[j]));else lang_1.isFunction(annotation)?paramAnnotations.push(extractAnnotation(annotation)):paramAnnotations.push(annotation)}return Reflect.defineMetadata("parameters",paramsAnnotations,fn),fn}throw new Error("Only Function or Array is supported in Class definition for key '"+key+"' is '"+lang_1.stringify(fnOrArray)+"'")}function Class(clsDef){var constructor=applyParams(clsDef.hasOwnProperty("constructor")?clsDef.constructor:void 0,"constructor"),proto=constructor.prototype;if(clsDef.hasOwnProperty("extends")){if(!lang_1.isFunction(clsDef.extends))throw new Error("Class definition 'extends' property must be a constructor function was: "+lang_1.stringify(clsDef.extends));constructor.prototype=proto=Object.create(clsDef.extends.prototype)}for(var key in clsDef)"extends"!=key&&"prototype"!=key&&clsDef.hasOwnProperty(key)&&(proto[key]=applyParams(clsDef[key],key));return this&&this.annotations instanceof Array&&Reflect.defineMetadata("annotations",this.annotations,constructor),constructor.name||(constructor.overriddenName="class"+_nextClassId++),constructor}function makeDecorator(annotationCls,chainFn){function DecoratorFactory(objOrType){var annotationInstance=new annotationCls(objOrType);if(this instanceof annotationCls)return annotationInstance;var chainAnnotation=lang_1.isFunction(this)&&this.annotations instanceof Array?this.annotations:[];chainAnnotation.push(annotationInstance);var TypeDecorator=function(cls){var annotations=Reflect.getOwnMetadata("annotations",cls)||[];return annotations.push(annotationInstance),Reflect.defineMetadata("annotations",annotations,cls),cls};return TypeDecorator.annotations=chainAnnotation,TypeDecorator.Class=Class,chainFn&&chainFn(TypeDecorator),TypeDecorator}return void 0===chainFn&&(chainFn=null),DecoratorFactory.prototype=Object.create(annotationCls.prototype),DecoratorFactory.annotationCls=annotationCls,DecoratorFactory}function makeParamDecorator(annotationCls){function ParamDecoratorFactory(){function ParamDecorator(cls,unusedKey,index){for(var parameters=Reflect.getMetadata("parameters",cls)||[];parameters.length<=index;)parameters.push(null);parameters[index]=parameters[index]||[];var annotationsForParam=parameters[index];return annotationsForParam.push(annotationInstance),Reflect.defineMetadata("parameters",parameters,cls),cls}for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var annotationInstance=Object.create(annotationCls.prototype);return annotationCls.apply(annotationInstance,args),this instanceof annotationCls?annotationInstance:(ParamDecorator.annotation=annotationInstance,ParamDecorator)}return ParamDecoratorFactory.prototype=Object.create(annotationCls.prototype),ParamDecoratorFactory.annotationCls=annotationCls,ParamDecoratorFactory}function makePropDecorator(annotationCls){function PropDecoratorFactory(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var decoratorInstance=Object.create(annotationCls.prototype);return annotationCls.apply(decoratorInstance,args),this instanceof annotationCls?decoratorInstance:function(target,name){var meta=Reflect.getOwnMetadata("propMetadata",target.constructor)||{};meta[name]=meta[name]||[],meta[name].unshift(decoratorInstance),Reflect.defineMetadata("propMetadata",meta,target.constructor)}}return PropDecoratorFactory.prototype=Object.create(annotationCls.prototype),PropDecoratorFactory.annotationCls=annotationCls,PropDecoratorFactory}var lang_1=require("../facade/lang"),_nextClassId=0;exports.Class=Class;var Reflect=lang_1.global.Reflect;!function(){if(!Reflect||!Reflect.getMetadata)throw"reflect-metadata shim is required when using class decorators"}(),exports.makeDecorator=makeDecorator,exports.makeParamDecorator=makeParamDecorator,exports.makePropDecorator=makePropDecorator},{"../facade/lang":198}],243:[function(require,module,exports){"use strict";var ng_zone_1=require("./zone/ng_zone");exports.NgZone=ng_zone_1.NgZone,exports.NgZoneError=ng_zone_1.NgZoneError},{"./zone/ng_zone":244}],244:[function(require,module,exports){"use strict";var async_1=require("../facade/async"),exceptions_1=require("../facade/exceptions"),ng_zone_impl_1=require("./ng_zone_impl"),ng_zone_impl_2=require("./ng_zone_impl");exports.NgZoneError=ng_zone_impl_2.NgZoneError;var NgZone=function(){function NgZone(_a){var _this=this,_b=_a.enableLongStackTrace,enableLongStackTrace=void 0!==_b&&_b;this._hasPendingMicrotasks=!1,this._hasPendingMacrotasks=!1,this._isStable=!0,this._nesting=0,this._onUnstable=new async_1.EventEmitter((!1)),this._onMicrotaskEmpty=new async_1.EventEmitter((!1)),this._onStable=new async_1.EventEmitter((!1)),this._onErrorEvents=new async_1.EventEmitter((!1)),this._zoneImpl=new ng_zone_impl_1.NgZoneImpl({trace:enableLongStackTrace,onEnter:function(){_this._nesting++,_this._isStable&&(_this._isStable=!1,_this._onUnstable.emit(null))},onLeave:function(){_this._nesting--,_this._checkStable()},setMicrotask:function(hasMicrotasks){_this._hasPendingMicrotasks=hasMicrotasks,_this._checkStable()},setMacrotask:function(hasMacrotasks){_this._hasPendingMacrotasks=hasMacrotasks},onError:function(error){return _this._onErrorEvents.emit(error)}})}return NgZone.isInAngularZone=function(){return ng_zone_impl_1.NgZoneImpl.isInAngularZone()},NgZone.assertInAngularZone=function(){if(!ng_zone_impl_1.NgZoneImpl.isInAngularZone())throw new exceptions_1.BaseException("Expected to be in Angular Zone, but it is not!")},NgZone.assertNotInAngularZone=function(){if(ng_zone_impl_1.NgZoneImpl.isInAngularZone())throw new exceptions_1.BaseException("Expected to not be in Angular Zone, but it is!")},NgZone.prototype._checkStable=function(){var _this=this;if(0==this._nesting&&!this._hasPendingMicrotasks&&!this._isStable)try{this._nesting++,this._onMicrotaskEmpty.emit(null)}finally{if(this._nesting--,!this._hasPendingMicrotasks)try{this.runOutsideAngular(function(){return _this._onStable.emit(null)})}finally{this._isStable=!0}}},Object.defineProperty(NgZone.prototype,"onUnstable",{get:function(){return this._onUnstable},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"onMicrotaskEmpty",{get:function(){return this._onMicrotaskEmpty},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"onStable",{get:function(){return this._onStable},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"onError",{get:function(){return this._onErrorEvents},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"isStable",{get:function(){return this._isStable},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"hasPendingMicrotasks",{get:function(){return this._hasPendingMicrotasks},enumerable:!0,configurable:!0}),Object.defineProperty(NgZone.prototype,"hasPendingMacrotasks",{get:function(){return this._hasPendingMacrotasks},enumerable:!0,configurable:!0}),NgZone.prototype.run=function(fn){return this._zoneImpl.runInner(fn)},NgZone.prototype.runGuarded=function(fn){return this._zoneImpl.runInnerGuarded(fn)},NgZone.prototype.runOutsideAngular=function(fn){return this._zoneImpl.runOuter(fn)},NgZone}();exports.NgZone=NgZone},{"../facade/async":193,"../facade/exceptions":197,"./ng_zone_impl":245}],245:[function(require,module,exports){"use strict";var NgZoneError=function(){function NgZoneError(error,stackTrace){this.error=error,this.stackTrace=stackTrace}return NgZoneError}();exports.NgZoneError=NgZoneError;var NgZoneImpl=function(){function NgZoneImpl(_a){var _this=this,trace=_a.trace,onEnter=_a.onEnter,onLeave=_a.onLeave,setMicrotask=_a.setMicrotask,setMacrotask=_a.setMacrotask,onError=_a.onError;if(this.onEnter=onEnter,this.onLeave=onLeave,this.setMicrotask=setMicrotask,this.setMacrotask=setMacrotask,this.onError=onError,!Zone)throw new Error("Angular requires Zone.js polyfill.");this.outer=this.inner=Zone.current,Zone.wtfZoneSpec&&(this.inner=this.inner.fork(Zone.wtfZoneSpec)),trace&&Zone.longStackTraceZoneSpec&&(this.inner=this.inner.fork(Zone.longStackTraceZoneSpec)),this.inner=this.inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(delegate,current,target,task,applyThis,applyArgs){try{return _this.onEnter(),delegate.invokeTask(target,task,applyThis,applyArgs)}finally{_this.onLeave()}},onInvoke:function(delegate,current,target,callback,applyThis,applyArgs,source){try{return _this.onEnter(),delegate.invoke(target,callback,applyThis,applyArgs,source)}finally{_this.onLeave()}},onHasTask:function(delegate,current,target,hasTaskState){delegate.hasTask(target,hasTaskState),current==target&&("microTask"==hasTaskState.change?_this.setMicrotask(hasTaskState.microTask):"macroTask"==hasTaskState.change&&_this.setMacrotask(hasTaskState.macroTask))},onHandleError:function(delegate,current,target,error){return delegate.handleError(target,error),_this.onError(new NgZoneError(error,error.stack)),!1}})}return NgZoneImpl.isInAngularZone=function(){return Zone.current.get("isAngularZone")===!0},NgZoneImpl.prototype.runInner=function(fn){return this.inner.run(fn)},NgZoneImpl.prototype.runInnerGuarded=function(fn){return this.inner.runGuarded(fn)},NgZoneImpl.prototype.runOuter=function(fn){return this.outer.run(fn)},NgZoneImpl}();exports.NgZoneImpl=NgZoneImpl},{}],246:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(require("./src/forms"))},{"./src/forms":281}],247:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),checkbox_value_accessor_1=require("./directives/checkbox_value_accessor"),default_value_accessor_1=require("./directives/default_value_accessor"),ng_control_status_1=require("./directives/ng_control_status"),ng_form_1=require("./directives/ng_form"),ng_model_1=require("./directives/ng_model"),ng_model_group_1=require("./directives/ng_model_group"),number_value_accessor_1=require("./directives/number_value_accessor"),radio_control_value_accessor_1=require("./directives/radio_control_value_accessor"),form_control_directive_1=require("./directives/reactive_directives/form_control_directive"),form_control_name_1=require("./directives/reactive_directives/form_control_name"),form_group_directive_1=require("./directives/reactive_directives/form_group_directive"),form_group_name_1=require("./directives/reactive_directives/form_group_name"),select_control_value_accessor_1=require("./directives/select_control_value_accessor"),select_multiple_control_value_accessor_1=require("./directives/select_multiple_control_value_accessor"),validators_1=require("./directives/validators"),checkbox_value_accessor_2=require("./directives/checkbox_value_accessor");exports.CheckboxControlValueAccessor=checkbox_value_accessor_2.CheckboxControlValueAccessor;var default_value_accessor_2=require("./directives/default_value_accessor");exports.DefaultValueAccessor=default_value_accessor_2.DefaultValueAccessor;var ng_control_1=require("./directives/ng_control");exports.NgControl=ng_control_1.NgControl;var ng_control_status_2=require("./directives/ng_control_status");exports.NgControlStatus=ng_control_status_2.NgControlStatus;var ng_form_2=require("./directives/ng_form");exports.NgForm=ng_form_2.NgForm;var ng_model_2=require("./directives/ng_model");exports.NgModel=ng_model_2.NgModel;var ng_model_group_2=require("./directives/ng_model_group");exports.NgModelGroup=ng_model_group_2.NgModelGroup;var number_value_accessor_2=require("./directives/number_value_accessor");exports.NumberValueAccessor=number_value_accessor_2.NumberValueAccessor;var radio_control_value_accessor_2=require("./directives/radio_control_value_accessor");exports.RadioControlValueAccessor=radio_control_value_accessor_2.RadioControlValueAccessor;var form_control_directive_2=require("./directives/reactive_directives/form_control_directive");exports.FormControlDirective=form_control_directive_2.FormControlDirective;var form_control_name_2=require("./directives/reactive_directives/form_control_name");exports.FormControlName=form_control_name_2.FormControlName;var form_group_directive_2=require("./directives/reactive_directives/form_group_directive");exports.FormGroupDirective=form_group_directive_2.FormGroupDirective;var form_group_name_2=require("./directives/reactive_directives/form_group_name");exports.FormArrayName=form_group_name_2.FormArrayName,exports.FormGroupName=form_group_name_2.FormGroupName;var select_control_value_accessor_2=require("./directives/select_control_value_accessor");exports.NgSelectOption=select_control_value_accessor_2.NgSelectOption,exports.SelectControlValueAccessor=select_control_value_accessor_2.SelectControlValueAccessor;var select_multiple_control_value_accessor_2=require("./directives/select_multiple_control_value_accessor");exports.NgSelectMultipleOption=select_multiple_control_value_accessor_2.NgSelectMultipleOption,exports.SelectMultipleControlValueAccessor=select_multiple_control_value_accessor_2.SelectMultipleControlValueAccessor;var validators_2=require("./directives/validators");exports.MaxLengthValidator=validators_2.MaxLengthValidator,exports.MinLengthValidator=validators_2.MinLengthValidator,exports.PatternValidator=validators_2.PatternValidator,exports.RequiredValidator=validators_2.RequiredValidator,exports.SHARED_FORM_DIRECTIVES=[select_control_value_accessor_1.NgSelectOption,select_multiple_control_value_accessor_1.NgSelectMultipleOption,default_value_accessor_1.DefaultValueAccessor,number_value_accessor_1.NumberValueAccessor,checkbox_value_accessor_1.CheckboxControlValueAccessor,select_control_value_accessor_1.SelectControlValueAccessor,select_multiple_control_value_accessor_1.SelectMultipleControlValueAccessor,radio_control_value_accessor_1.RadioControlValueAccessor,ng_control_status_1.NgControlStatus,validators_1.RequiredValidator,validators_1.MinLengthValidator,validators_1.MaxLengthValidator,validators_1.PatternValidator],exports.TEMPLATE_DRIVEN_DIRECTIVES=[ng_model_1.NgModel,ng_model_group_1.NgModelGroup,ng_form_1.NgForm],exports.REACTIVE_DRIVEN_DIRECTIVES=[form_control_directive_1.FormControlDirective,form_group_directive_1.FormGroupDirective,form_control_name_1.FormControlName,form_group_name_1.FormGroupName,form_group_name_1.FormArrayName],exports.FORM_DIRECTIVES=[exports.TEMPLATE_DRIVEN_DIRECTIVES,exports.SHARED_FORM_DIRECTIVES],exports.REACTIVE_FORM_DIRECTIVES=[exports.REACTIVE_DRIVEN_DIRECTIVES,exports.SHARED_FORM_DIRECTIVES];var InternalFormsSharedModule=function(){function InternalFormsSharedModule(){}return InternalFormsSharedModule.decorators=[{type:core_1.NgModule,args:[{declarations:exports.SHARED_FORM_DIRECTIVES,exports:exports.SHARED_FORM_DIRECTIVES}]}],InternalFormsSharedModule}();exports.InternalFormsSharedModule=InternalFormsSharedModule},{"./directives/checkbox_value_accessor":250,"./directives/default_value_accessor":253,"./directives/ng_control":255,"./directives/ng_control_status":256,"./directives/ng_form":257,"./directives/ng_model":258,"./directives/ng_model_group":259,"./directives/number_value_accessor":261,"./directives/radio_control_value_accessor":262,"./directives/reactive_directives/form_control_directive":263,"./directives/reactive_directives/form_control_name":264,"./directives/reactive_directives/form_group_directive":265,"./directives/reactive_directives/form_group_name":266,"./directives/select_control_value_accessor":268,"./directives/select_multiple_control_value_accessor":269,"./directives/validators":272,"@angular/core":154}],248:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),AbstractControlDirective=function(){function AbstractControlDirective(){}return Object.defineProperty(AbstractControlDirective.prototype,"control",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"value",{get:function(){return lang_1.isPresent(this.control)?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"valid",{get:function(){return lang_1.isPresent(this.control)?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"invalid",{get:function(){return lang_1.isPresent(this.control)?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"pending",{get:function(){return lang_1.isPresent(this.control)?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"errors",{get:function(){
return lang_1.isPresent(this.control)?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"pristine",{get:function(){return lang_1.isPresent(this.control)?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"dirty",{get:function(){return lang_1.isPresent(this.control)?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"touched",{get:function(){return lang_1.isPresent(this.control)?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"untouched",{get:function(){return lang_1.isPresent(this.control)?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"statusChanges",{get:function(){return lang_1.isPresent(this.control)?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"valueChanges",{get:function(){return lang_1.isPresent(this.control)?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),AbstractControlDirective.prototype.reset=function(value){void 0===value&&(value=void 0),lang_1.isPresent(this.control)&&this.control.reset(value)},AbstractControlDirective}();exports.AbstractControlDirective=AbstractControlDirective},{"../facade/exceptions":277,"../facade/lang":278}],249:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},control_container_1=require("./control_container"),shared_1=require("./shared"),AbstractFormGroupDirective=function(_super){function AbstractFormGroupDirective(){_super.apply(this,arguments)}return __extends(AbstractFormGroupDirective,_super),AbstractFormGroupDirective.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},AbstractFormGroupDirective.prototype.ngOnDestroy=function(){this.formDirective.removeFormGroup(this)},Object.defineProperty(AbstractFormGroupDirective.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"path",{get:function(){return shared_1.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),AbstractFormGroupDirective.prototype._checkParentType=function(){},AbstractFormGroupDirective}(control_container_1.ControlContainer);exports.AbstractFormGroupDirective=AbstractFormGroupDirective},{"./control_container":251,"./shared":270}],250:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),control_value_accessor_1=require("./control_value_accessor");exports.CHECKBOX_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return CheckboxControlValueAccessor}),multi:!0};var CheckboxControlValueAccessor=function(){function CheckboxControlValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=function(_){},this.onTouched=function(){}}return CheckboxControlValueAccessor.prototype.writeValue=function(value){this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",value)},CheckboxControlValueAccessor.prototype.registerOnChange=function(fn){this.onChange=fn},CheckboxControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},CheckboxControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[exports.CHECKBOX_VALUE_ACCESSOR]}]}],CheckboxControlValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],CheckboxControlValueAccessor}();exports.CheckboxControlValueAccessor=CheckboxControlValueAccessor},{"./control_value_accessor":252,"@angular/core":154}],251:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{"./abstract_control_directive":248,dup:23}],252:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"@angular/core":154,dup:24}],253:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.DEFAULT_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return DefaultValueAccessor}),multi:!0};var DefaultValueAccessor=function(){function DefaultValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=function(_){},this.onTouched=function(){}}return DefaultValueAccessor.prototype.writeValue=function(value){var normalizedValue=lang_1.isBlank(value)?"":value;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",normalizedValue)},DefaultValueAccessor.prototype.registerOnChange=function(fn){this.onChange=fn},DefaultValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},DefaultValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[exports.DEFAULT_VALUE_ACCESSOR]}]}],DefaultValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],DefaultValueAccessor}();exports.DefaultValueAccessor=DefaultValueAccessor},{"../facade/lang":278,"./control_value_accessor":252,"@angular/core":154}],254:[function(require,module,exports){"use strict";exports.FormErrorExamples={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; let i=index">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '}},{}],255:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},exceptions_1=require("../facade/exceptions"),abstract_control_directive_1=require("./abstract_control_directive"),NgControl=function(_super){function NgControl(){_super.apply(this,arguments),this.name=null,this.valueAccessor=null}return __extends(NgControl,_super),Object.defineProperty(NgControl.prototype,"validator",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgControl.prototype,"asyncValidator",{get:function(){return exceptions_1.unimplemented()},enumerable:!0,configurable:!0}),NgControl}(abstract_control_directive_1.AbstractControlDirective);exports.NgControl=NgControl},{"../facade/exceptions":277,"./abstract_control_directive":248}],256:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),ng_control_1=require("./ng_control"),NgControlStatus=function(){function NgControlStatus(cd){this._cd=cd}return Object.defineProperty(NgControlStatus.prototype,"ngClassUntouched",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassTouched",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassPristine",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassDirty",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassValid",{get:function(){return!!lang_1.isPresent(this._cd.control)&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassInvalid",{get:function(){return!!lang_1.isPresent(this._cd.control)&&!this._cd.control.valid},enumerable:!0,configurable:!0}),NgControlStatus.decorators=[{type:core_1.Directive,args:[{selector:"[formControlName],[ngModel],[formControl]",host:{"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid"}}]}],NgControlStatus.ctorParameters=[{type:ng_control_1.NgControl,decorators:[{type:core_1.Self}]}],NgControlStatus}();exports.NgControlStatus=NgControlStatus},{"../facade/lang":278,"./ng_control":255,"@angular/core":154}],257:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../facade/async"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),model_1=require("../model"),validators_1=require("../validators"),control_container_1=require("./control_container"),shared_1=require("./shared");exports.formDirectiveProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return NgForm})};var resolvedPromise=Promise.resolve(null),NgForm=function(_super){function NgForm(validators,asyncValidators){_super.call(this),this._submitted=!1,this.ngSubmit=new async_1.EventEmitter,this.form=new model_1.FormGroup({},null,shared_1.composeValidators(validators),shared_1.composeAsyncValidators(asyncValidators))}return __extends(NgForm,_super),Object.defineProperty(NgForm.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),NgForm.prototype.addControl=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path);dir._control=container.registerControl(dir.name,dir.control),shared_1.setUpControl(dir.control,dir),dir.control.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.getControl=function(dir){return this.form.get(dir.path)},NgForm.prototype.removeControl=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path);lang_1.isPresent(container)&&container.removeControl(dir.name)})},NgForm.prototype.addFormGroup=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path),group=new model_1.FormGroup({});shared_1.setUpFormContainer(group,dir),container.registerControl(dir.name,group),group.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.removeFormGroup=function(dir){var _this=this;resolvedPromise.then(function(){var container=_this._findContainer(dir.path);lang_1.isPresent(container)&&container.removeControl(dir.name)})},NgForm.prototype.getFormGroup=function(dir){return this.form.get(dir.path)},NgForm.prototype.updateModel=function(dir,value){var _this=this;resolvedPromise.then(function(){var ctrl=_this.form.get(dir.path);ctrl.setValue(value)})},NgForm.prototype.setValue=function(value){this.control.setValue(value)},NgForm.prototype.onSubmit=function(){return this._submitted=!0,this.ngSubmit.emit(null),!1},NgForm.prototype.onReset=function(){this.form.reset()},NgForm.prototype._findContainer=function(path){return path.pop(),collection_1.ListWrapper.isEmpty(path)?this.form:this.form.get(path)},NgForm.decorators=[{type:core_1.Directive,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[exports.formDirectiveProvider],host:{"(submit)":"onSubmit()","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],NgForm.ctorParameters=[{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],NgForm}(control_container_1.ControlContainer);exports.NgForm=NgForm},{"../facade/async":273,"../facade/collection":275,"../facade/lang":278,"../model":282,"../validators":283,"./control_container":251,"./shared":270,"@angular/core":154}],258:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../facade/async"),model_1=require("../model"),validators_1=require("../validators"),abstract_form_group_directive_1=require("./abstract_form_group_directive"),control_container_1=require("./control_container"),control_value_accessor_1=require("./control_value_accessor"),ng_control_1=require("./ng_control"),ng_form_1=require("./ng_form"),ng_model_group_1=require("./ng_model_group"),shared_1=require("./shared"),template_driven_errors_1=require("./template_driven_errors");exports.formControlBinding={provide:ng_control_1.NgControl,useExisting:core_1.forwardRef(function(){return NgModel})};var resolvedPromise=Promise.resolve(null),NgModel=function(_super){function NgModel(_parent,_validators,_asyncValidators,valueAccessors){_super.call(this),this._parent=_parent,this._validators=_validators,this._asyncValidators=_asyncValidators,this._control=new model_1.FormControl,this._registered=!1,this.update=new async_1.EventEmitter,this.valueAccessor=shared_1.selectValueAccessor(this,valueAccessors)}return __extends(NgModel,_super),NgModel.prototype.ngOnChanges=function(changes){this._checkForErrors(),this._registered||this._setUpControl(),shared_1.isPropertyUpdated(changes,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},NgModel.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(NgModel.prototype,"control",{get:function(){return this._control},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"path",{get:function(){return this._parent?shared_1.controlPath(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),NgModel.prototype.viewToModelUpdate=function(newValue){this.viewModel=newValue,this.update.emit(newValue)},NgModel.prototype._setUpControl=function(){this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},NgModel.prototype._isStandalone=function(){return!this._parent||this.options&&this.options.standalone},NgModel.prototype._setUpStandalone=function(){shared_1.setUpControl(this._control,this),this._control.updateValueAndValidity({emitEvent:!1})},NgModel.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},NgModel.prototype._checkParentType=function(){!(this._parent instanceof ng_model_group_1.NgModelGroup)&&this._parent instanceof abstract_form_group_directive_1.AbstractFormGroupDirective?template_driven_errors_1.TemplateDrivenErrors.formGroupNameException():this._parent instanceof ng_model_group_1.NgModelGroup||this._parent instanceof ng_form_1.NgForm||template_driven_errors_1.TemplateDrivenErrors.modelParentException()},NgModel.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||template_driven_errors_1.TemplateDrivenErrors.missingNameException()},NgModel.prototype._updateValue=function(value){var _this=this;resolvedPromise.then(function(){_this.control.setValue(value,{emitViewToModelChange:!1})})},NgModel.decorators=[{type:core_1.Directive,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[exports.formControlBinding],exportAs:"ngModel"}]}],NgModel.ctorParameters=[{type:control_container_1.ControlContainer,decorators:[{type:core_1.Optional},{type:core_1.Host}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[control_value_accessor_1.NG_VALUE_ACCESSOR]}]}],NgModel.propDecorators={model:[{type:core_1.Input,args:["ngModel"]}],name:[{type:core_1.Input}],options:[{type:core_1.Input,args:["ngModelOptions"]}],update:[{type:core_1.Output,args:["ngModelChange"]}]},NgModel}(ng_control_1.NgControl);exports.NgModel=NgModel},{"../facade/async":273,"../model":282,"../validators":283,"./abstract_form_group_directive":249,"./control_container":251,"./control_value_accessor":252,"./ng_control":255,"./ng_form":257,"./ng_model_group":259,"./shared":270,"./template_driven_errors":271,"@angular/core":154}],259:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),validators_1=require("../validators"),abstract_form_group_directive_1=require("./abstract_form_group_directive"),control_container_1=require("./control_container"),ng_form_1=require("./ng_form"),template_driven_errors_1=require("./template_driven_errors");exports.modelGroupProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return NgModelGroup})};var NgModelGroup=function(_super){function NgModelGroup(parent,validators,asyncValidators){_super.call(this),this._parent=parent,this._validators=validators,this._asyncValidators=asyncValidators}return __extends(NgModelGroup,_super),NgModelGroup.prototype._checkParentType=function(){this._parent instanceof NgModelGroup||this._parent instanceof ng_form_1.NgForm||template_driven_errors_1.TemplateDrivenErrors.modelGroupParentException()},NgModelGroup.decorators=[{type:core_1.Directive,args:[{selector:"[ngModelGroup]",providers:[exports.modelGroupProvider],exportAs:"ngModelGroup"}]}],NgModelGroup.ctorParameters=[{type:control_container_1.ControlContainer,decorators:[{type:core_1.Host},{type:core_1.SkipSelf}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],NgModelGroup.propDecorators={name:[{type:core_1.Input,args:["ngModelGroup"]}]},NgModelGroup}(abstract_form_group_directive_1.AbstractFormGroupDirective);exports.NgModelGroup=NgModelGroup},{"../validators":283,"./abstract_form_group_directive":249,"./control_container":251,"./ng_form":257,"./template_driven_errors":271,"@angular/core":154}],260:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],261:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.NUMBER_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return NumberValueAccessor}),multi:!0};var NumberValueAccessor=function(){function NumberValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=function(_){},this.onTouched=function(){}}return NumberValueAccessor.prototype.writeValue=function(value){var normalizedValue=lang_1.isBlank(value)?"":value;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",normalizedValue)},NumberValueAccessor.prototype.registerOnChange=function(fn){this.onChange=function(value){fn(""==value?null:lang_1.NumberWrapper.parseFloat(value))}},NumberValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},NumberValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[exports.NUMBER_VALUE_ACCESSOR]}]}],NumberValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],NumberValueAccessor}();exports.NumberValueAccessor=NumberValueAccessor},{"../facade/lang":278,"./control_value_accessor":252,"@angular/core":154}],262:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),control_value_accessor_1=require("./control_value_accessor"),ng_control_1=require("./ng_control");exports.RADIO_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return RadioControlValueAccessor}),multi:!0};var RadioControlRegistry=function(){function RadioControlRegistry(){this._accessors=[]}return RadioControlRegistry.prototype.add=function(control,accessor){this._accessors.push([control,accessor])},RadioControlRegistry.prototype.remove=function(accessor){for(var indexToRemove=-1,i=0;i<this._accessors.length;++i)this._accessors[i][1]===accessor&&(indexToRemove=i);collection_1.ListWrapper.removeAt(this._accessors,indexToRemove)},RadioControlRegistry.prototype.select=function(accessor){var _this=this;this._accessors.forEach(function(c){_this._isSameGroup(c,accessor)&&c[1]!==accessor&&c[1].fireUncheck(accessor.value)})},RadioControlRegistry.prototype._isSameGroup=function(controlPair,accessor){return!!controlPair[0].control&&(controlPair[0].control.root===accessor._control.control.root&&controlPair[1].name===accessor.name)},RadioControlRegistry.decorators=[{type:core_1.Injectable}],RadioControlRegistry}();exports.RadioControlRegistry=RadioControlRegistry;var RadioControlValueAccessor=function(){function RadioControlValueAccessor(_renderer,_elementRef,_registry,_injector){this._renderer=_renderer,this._elementRef=_elementRef,this._registry=_registry,this._injector=_injector,this.onChange=function(){},this.onTouched=function(){}}return RadioControlValueAccessor.prototype.ngOnInit=function(){this._control=this._injector.get(ng_control_1.NgControl),this._checkName(),this._registry.add(this._control,this)},RadioControlValueAccessor.prototype.ngOnDestroy=function(){this._registry.remove(this)},RadioControlValueAccessor.prototype.writeValue=function(value){this._state=value===this.value,lang_1.isPresent(value)&&this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",this._state)},RadioControlValueAccessor.prototype.registerOnChange=function(fn){var _this=this;this._fn=fn,this.onChange=function(){fn(_this.value),_this._registry.select(_this)}},RadioControlValueAccessor.prototype.fireUncheck=function(value){this.writeValue(value)},RadioControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},RadioControlValueAccessor.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},RadioControlValueAccessor.prototype._throwNameError=function(){throw new exceptions_1.BaseException('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},RadioControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[exports.RADIO_VALUE_ACCESSOR]}]}],RadioControlValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef},{type:RadioControlRegistry},{type:core_1.Injector}],RadioControlValueAccessor.propDecorators={name:[{type:core_1.Input}],formControlName:[{type:core_1.Input}],value:[{type:core_1.Input}]},RadioControlValueAccessor}();exports.RadioControlValueAccessor=RadioControlValueAccessor},{"../facade/collection":275,"../facade/exceptions":277,"../facade/lang":278,"./control_value_accessor":252,"./ng_control":255,"@angular/core":154}],263:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),collection_1=require("../../facade/collection"),validators_1=require("../../validators"),control_value_accessor_1=require("../control_value_accessor"),ng_control_1=require("../ng_control"),shared_1=require("../shared");exports.formControlBinding={provide:ng_control_1.NgControl,useExisting:core_1.forwardRef(function(){return FormControlDirective})};var FormControlDirective=function(_super){function FormControlDirective(_validators,_asyncValidators,valueAccessors){_super.call(this),this._validators=_validators,this._asyncValidators=_asyncValidators,this.update=new async_1.EventEmitter,this.valueAccessor=shared_1.selectValueAccessor(this,valueAccessors)}return __extends(FormControlDirective,_super),FormControlDirective.prototype.ngOnChanges=function(changes){this._isControlChanged(changes)&&(shared_1.setUpControl(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})),shared_1.isPropertyUpdated(changes,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(FormControlDirective.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),FormControlDirective.prototype.viewToModelUpdate=function(newValue){this.viewModel=newValue,this.update.emit(newValue)},FormControlDirective.prototype._isControlChanged=function(changes){return collection_1.StringMapWrapper.contains(changes,"form")},FormControlDirective.decorators=[{type:core_1.Directive,args:[{selector:"[formControl]",providers:[exports.formControlBinding],exportAs:"ngForm"}]}],FormControlDirective.ctorParameters=[{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[control_value_accessor_1.NG_VALUE_ACCESSOR]}]}],FormControlDirective.propDecorators={form:[{type:core_1.Input,args:["formControl"]}],model:[{type:core_1.Input,args:["ngModel"]}],update:[{type:core_1.Output,args:["ngModelChange"]}]},FormControlDirective}(ng_control_1.NgControl);exports.FormControlDirective=FormControlDirective},{"../../facade/async":273,"../../facade/collection":275,"../../validators":283,"../control_value_accessor":252,"../ng_control":255,"../shared":270,"@angular/core":154}],264:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),validators_1=require("../../validators"),abstract_form_group_directive_1=require("../abstract_form_group_directive"),control_container_1=require("../control_container"),control_value_accessor_1=require("../control_value_accessor"),ng_control_1=require("../ng_control"),reactive_errors_1=require("../reactive_errors"),shared_1=require("../shared"),form_group_directive_1=require("./form_group_directive"),form_group_name_1=require("./form_group_name");exports.controlNameBinding={provide:ng_control_1.NgControl,useExisting:core_1.forwardRef(function(){return FormControlName})};var FormControlName=function(_super){function FormControlName(_parent,_validators,_asyncValidators,valueAccessors){_super.call(this),this._parent=_parent,this._validators=_validators,this._asyncValidators=_asyncValidators,this._added=!1,this.update=new async_1.EventEmitter,this.valueAccessor=shared_1.selectValueAccessor(this,valueAccessors)}return __extends(FormControlName,_super),FormControlName.prototype.ngOnChanges=function(changes){this._added||(this._checkParentType(),this.formDirective.addControl(this),this._added=!0),shared_1.isPropertyUpdated(changes,this.viewModel)&&(this.viewModel=this.model,
this.formDirective.updateModel(this,this.model))},FormControlName.prototype.ngOnDestroy=function(){this.formDirective.removeControl(this)},FormControlName.prototype.viewToModelUpdate=function(newValue){this.viewModel=newValue,this.update.emit(newValue)},Object.defineProperty(FormControlName.prototype,"path",{get:function(){return shared_1.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"control",{get:function(){return this.formDirective.getControl(this)},enumerable:!0,configurable:!0}),FormControlName.prototype._checkParentType=function(){!(this._parent instanceof form_group_name_1.FormGroupName)&&this._parent instanceof abstract_form_group_directive_1.AbstractFormGroupDirective?reactive_errors_1.ReactiveErrors.ngModelGroupException():this._parent instanceof form_group_name_1.FormGroupName||this._parent instanceof form_group_directive_1.FormGroupDirective||this._parent instanceof form_group_name_1.FormArrayName||reactive_errors_1.ReactiveErrors.controlParentException()},FormControlName.decorators=[{type:core_1.Directive,args:[{selector:"[formControlName]",providers:[exports.controlNameBinding]}]}],FormControlName.ctorParameters=[{type:control_container_1.ControlContainer,decorators:[{type:core_1.Optional},{type:core_1.Host},{type:core_1.SkipSelf}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[control_value_accessor_1.NG_VALUE_ACCESSOR]}]}],FormControlName.propDecorators={name:[{type:core_1.Input,args:["formControlName"]}],model:[{type:core_1.Input,args:["ngModel"]}],update:[{type:core_1.Output,args:["ngModelChange"]}]},FormControlName}(ng_control_1.NgControl);exports.FormControlName=FormControlName},{"../../facade/async":273,"../../validators":283,"../abstract_form_group_directive":249,"../control_container":251,"../control_value_accessor":252,"../ng_control":255,"../reactive_errors":267,"../shared":270,"./form_group_directive":265,"./form_group_name":266,"@angular/core":154}],265:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),async_1=require("../../facade/async"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),validators_1=require("../../validators"),control_container_1=require("../control_container"),reactive_errors_1=require("../reactive_errors"),shared_1=require("../shared");exports.formDirectiveProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return FormGroupDirective})};var FormGroupDirective=function(_super){function FormGroupDirective(_validators,_asyncValidators){_super.call(this),this._validators=_validators,this._asyncValidators=_asyncValidators,this._submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new async_1.EventEmitter}return __extends(FormGroupDirective,_super),FormGroupDirective.prototype.ngOnChanges=function(changes){if(this._checkFormPresent(),collection_1.StringMapWrapper.contains(changes,"form")){var sync=shared_1.composeValidators(this._validators);this.form.validator=validators_1.Validators.compose([this.form.validator,sync]);var async=shared_1.composeAsyncValidators(this._asyncValidators);this.form.asyncValidator=validators_1.Validators.composeAsync([this.form.asyncValidator,async]),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}this._updateDomValue()},Object.defineProperty(FormGroupDirective.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),FormGroupDirective.prototype.addControl=function(dir){var ctrl=this.form.get(dir.path);shared_1.setUpControl(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1}),this.directives.push(dir)},FormGroupDirective.prototype.getControl=function(dir){return this.form.get(dir.path)},FormGroupDirective.prototype.removeControl=function(dir){collection_1.ListWrapper.remove(this.directives,dir)},FormGroupDirective.prototype.addFormGroup=function(dir){var ctrl=this.form.get(dir.path);shared_1.setUpFormContainer(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1})},FormGroupDirective.prototype.removeFormGroup=function(dir){},FormGroupDirective.prototype.getFormGroup=function(dir){return this.form.get(dir.path)},FormGroupDirective.prototype.addFormArray=function(dir){var ctrl=this.form.get(dir.path);shared_1.setUpFormContainer(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1})},FormGroupDirective.prototype.removeFormArray=function(dir){},FormGroupDirective.prototype.getFormArray=function(dir){return this.form.get(dir.path)},FormGroupDirective.prototype.updateModel=function(dir,value){var ctrl=this.form.get(dir.path);ctrl.setValue(value)},FormGroupDirective.prototype.onSubmit=function(){return this._submitted=!0,this.ngSubmit.emit(null),!1},FormGroupDirective.prototype.onReset=function(){this.form.reset()},FormGroupDirective.prototype._updateDomValue=function(){var _this=this;this.directives.forEach(function(dir){var ctrl=_this.form.get(dir.path);dir.valueAccessor.writeValue(ctrl.value)})},FormGroupDirective.prototype._checkFormPresent=function(){lang_1.isBlank(this.form)&&reactive_errors_1.ReactiveErrors.missingFormException()},FormGroupDirective.decorators=[{type:core_1.Directive,args:[{selector:"[formGroup]",providers:[exports.formDirectiveProvider],host:{"(submit)":"onSubmit()","(reset)":"onReset()"},exportAs:"ngForm"}]}],FormGroupDirective.ctorParameters=[{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],FormGroupDirective.propDecorators={form:[{type:core_1.Input,args:["formGroup"]}],ngSubmit:[{type:core_1.Output}]},FormGroupDirective}(control_container_1.ControlContainer);exports.FormGroupDirective=FormGroupDirective},{"../../facade/async":273,"../../facade/collection":275,"../../facade/lang":278,"../../validators":283,"../control_container":251,"../reactive_errors":267,"../shared":270,"@angular/core":154}],266:[function(require,module,exports){"use strict";function _hasInvalidParent(parent){return!(parent instanceof FormGroupName||parent instanceof form_group_directive_1.FormGroupDirective||parent instanceof FormArrayName)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),validators_1=require("../../validators"),abstract_form_group_directive_1=require("../abstract_form_group_directive"),control_container_1=require("../control_container"),reactive_errors_1=require("../reactive_errors"),shared_1=require("../shared"),form_group_directive_1=require("./form_group_directive");exports.formGroupNameProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return FormGroupName})};var FormGroupName=function(_super){function FormGroupName(parent,validators,asyncValidators){_super.call(this),this._parent=parent,this._validators=validators,this._asyncValidators=asyncValidators}return __extends(FormGroupName,_super),FormGroupName.prototype._checkParentType=function(){_hasInvalidParent(this._parent)&&reactive_errors_1.ReactiveErrors.groupParentException()},FormGroupName.decorators=[{type:core_1.Directive,args:[{selector:"[formGroupName]",providers:[exports.formGroupNameProvider]}]}],FormGroupName.ctorParameters=[{type:control_container_1.ControlContainer,decorators:[{type:core_1.Optional},{type:core_1.Host},{type:core_1.SkipSelf}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],FormGroupName.propDecorators={name:[{type:core_1.Input,args:["formGroupName"]}]},FormGroupName}(abstract_form_group_directive_1.AbstractFormGroupDirective);exports.FormGroupName=FormGroupName,exports.formArrayNameProvider={provide:control_container_1.ControlContainer,useExisting:core_1.forwardRef(function(){return FormArrayName})};var FormArrayName=function(_super){function FormArrayName(parent,validators,asyncValidators){_super.call(this),this._parent=parent,this._validators=validators,this._asyncValidators=asyncValidators}return __extends(FormArrayName,_super),FormArrayName.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},FormArrayName.prototype.ngOnDestroy=function(){this.formDirective.removeFormArray(this)},Object.defineProperty(FormArrayName.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"path",{get:function(){return shared_1.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"validator",{get:function(){return shared_1.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"asyncValidator",{get:function(){return shared_1.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),FormArrayName.prototype._checkParentType=function(){_hasInvalidParent(this._parent)&&reactive_errors_1.ReactiveErrors.arrayParentException()},FormArrayName.decorators=[{type:core_1.Directive,args:[{selector:"[formArrayName]",providers:[exports.formArrayNameProvider]}]}],FormArrayName.ctorParameters=[{type:control_container_1.ControlContainer,decorators:[{type:core_1.Optional},{type:core_1.Host},{type:core_1.SkipSelf}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_VALIDATORS]}]},{type:Array,decorators:[{type:core_1.Optional},{type:core_1.Self},{type:core_1.Inject,args:[validators_1.NG_ASYNC_VALIDATORS]}]}],FormArrayName.propDecorators={name:[{type:core_1.Input,args:["formArrayName"]}]},FormArrayName}(control_container_1.ControlContainer);exports.FormArrayName=FormArrayName},{"../../validators":283,"../abstract_form_group_directive":249,"../control_container":251,"../reactive_errors":267,"../shared":270,"./form_group_directive":265,"@angular/core":154}],267:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),error_examples_1=require("./error_examples"),ReactiveErrors=function(){function ReactiveErrors(){}return ReactiveErrors.controlParentException=function(){throw new exceptions_1.BaseException("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+error_examples_1.FormErrorExamples.formControlName)},ReactiveErrors.ngModelGroupException=function(){throw new exceptions_1.BaseException('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+error_examples_1.FormErrorExamples.formGroupName+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+error_examples_1.FormErrorExamples.ngModelGroup)},ReactiveErrors.missingFormException=function(){throw new exceptions_1.BaseException("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+error_examples_1.FormErrorExamples.formControlName)},ReactiveErrors.groupParentException=function(){throw new exceptions_1.BaseException("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+error_examples_1.FormErrorExamples.formGroupName)},ReactiveErrors.arrayParentException=function(){throw new exceptions_1.BaseException("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+error_examples_1.FormErrorExamples.formArrayName)},ReactiveErrors}();exports.ReactiveErrors=ReactiveErrors},{"../facade/exceptions":277,"./error_examples":254}],268:[function(require,module,exports){"use strict";function _buildValueString(id,value){return lang_1.isBlank(id)?""+value:(lang_1.isPrimitive(value)||(value="Object"),lang_1.StringWrapper.slice(id+": "+value,0,50))}function _extractId(valueString){return valueString.split(":")[0]}var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.SELECT_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return SelectControlValueAccessor}),multi:!0};var SelectControlValueAccessor=function(){function SelectControlValueAccessor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this._optionMap=new Map,this._idCounter=0,this.onChange=function(_){},this.onTouched=function(){}}return SelectControlValueAccessor.prototype.writeValue=function(value){this.value=value;var valueString=_buildValueString(this._getOptionId(value),value);this._renderer.setElementProperty(this._elementRef.nativeElement,"value",valueString)},SelectControlValueAccessor.prototype.registerOnChange=function(fn){var _this=this;this.onChange=function(valueString){_this.value=valueString,fn(_this._getOptionValue(valueString))}},SelectControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},SelectControlValueAccessor.prototype._registerOption=function(){return(this._idCounter++).toString()},SelectControlValueAccessor.prototype._getOptionId=function(value){for(var _i=0,_a=collection_1.MapWrapper.keys(this._optionMap);_i<_a.length;_i++){var id=_a[_i];if(lang_1.looseIdentical(this._optionMap.get(id),value))return id}return null},SelectControlValueAccessor.prototype._getOptionValue=function(valueString){var value=this._optionMap.get(_extractId(valueString));return lang_1.isPresent(value)?value:valueString},SelectControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[exports.SELECT_VALUE_ACCESSOR]}]}],SelectControlValueAccessor.ctorParameters=[{type:core_1.Renderer},{type:core_1.ElementRef}],SelectControlValueAccessor}();exports.SelectControlValueAccessor=SelectControlValueAccessor;var NgSelectOption=function(){function NgSelectOption(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,lang_1.isPresent(this._select)&&(this.id=this._select._registerOption())}return Object.defineProperty(NgSelectOption.prototype,"ngValue",{set:function(value){null!=this._select&&(this._select._optionMap.set(this.id,value),this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectOption.prototype,"value",{set:function(value){this._setElementValue(value),lang_1.isPresent(this._select)&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),NgSelectOption.prototype._setElementValue=function(value){this._renderer.setElementProperty(this._element.nativeElement,"value",value)},NgSelectOption.prototype.ngOnDestroy=function(){lang_1.isPresent(this._select)&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},NgSelectOption.decorators=[{type:core_1.Directive,args:[{selector:"option"}]}],NgSelectOption.ctorParameters=[{type:core_1.ElementRef},{type:core_1.Renderer},{type:SelectControlValueAccessor,decorators:[{type:core_1.Optional},{type:core_1.Host}]}],NgSelectOption.propDecorators={ngValue:[{type:core_1.Input,args:["ngValue"]}],value:[{type:core_1.Input,args:["value"]}]},NgSelectOption}();exports.NgSelectOption=NgSelectOption},{"../facade/collection":275,"../facade/lang":278,"./control_value_accessor":252,"@angular/core":154}],269:[function(require,module,exports){"use strict";function _buildValueString(id,value){return lang_1.isBlank(id)?""+value:(lang_1.isString(value)&&(value="'"+value+"'"),lang_1.isPrimitive(value)||(value="Object"),lang_1.StringWrapper.slice(id+": "+value,0,50))}function _extractId(valueString){return valueString.split(":")[0]}var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),control_value_accessor_1=require("./control_value_accessor");exports.SELECT_MULTIPLE_VALUE_ACCESSOR={provide:control_value_accessor_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return SelectMultipleControlValueAccessor}),multi:!0};var SelectMultipleControlValueAccessor=(function(){function HTMLCollection(){}return HTMLCollection}(),function(){function SelectMultipleControlValueAccessor(){this._optionMap=new Map,this._idCounter=0,this.onChange=function(_){},this.onTouched=function(){}}return SelectMultipleControlValueAccessor.prototype.writeValue=function(value){var _this=this;if(this.value=value,null!=value){var values=value,ids=values.map(function(v){return _this._getOptionId(v)});this._optionMap.forEach(function(opt,o){opt._setSelected(ids.indexOf(o.toString())>-1)})}},SelectMultipleControlValueAccessor.prototype.registerOnChange=function(fn){var _this=this;this.onChange=function(_){var selected=[];if(_.hasOwnProperty("selectedOptions"))for(var options=_.selectedOptions,i=0;i<options.length;i++){var opt=options.item(i),val=_this._getOptionValue(opt.value);selected.push(val)}else for(var options=_.options,i=0;i<options.length;i++){var opt=options.item(i);if(opt.selected){var val=_this._getOptionValue(opt.value);selected.push(val)}}fn(selected)}},SelectMultipleControlValueAccessor.prototype.registerOnTouched=function(fn){this.onTouched=fn},SelectMultipleControlValueAccessor.prototype._registerOption=function(value){var id=(this._idCounter++).toString();return this._optionMap.set(id,value),id},SelectMultipleControlValueAccessor.prototype._getOptionId=function(value){for(var _i=0,_a=collection_1.MapWrapper.keys(this._optionMap);_i<_a.length;_i++){var id=_a[_i];if(lang_1.looseIdentical(this._optionMap.get(id)._value,value))return id}return null},SelectMultipleControlValueAccessor.prototype._getOptionValue=function(valueString){var opt=this._optionMap.get(_extractId(valueString));return lang_1.isPresent(opt)?opt._value:valueString},SelectMultipleControlValueAccessor.decorators=[{type:core_1.Directive,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[exports.SELECT_MULTIPLE_VALUE_ACCESSOR]}]}],SelectMultipleControlValueAccessor.ctorParameters=[],SelectMultipleControlValueAccessor}());exports.SelectMultipleControlValueAccessor=SelectMultipleControlValueAccessor;var NgSelectMultipleOption=function(){function NgSelectMultipleOption(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,lang_1.isPresent(this._select)&&(this.id=this._select._registerOption(this))}return Object.defineProperty(NgSelectMultipleOption.prototype,"ngValue",{set:function(value){null!=this._select&&(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectMultipleOption.prototype,"value",{set:function(value){lang_1.isPresent(this._select)?(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value)):this._setElementValue(value)},enumerable:!0,configurable:!0}),NgSelectMultipleOption.prototype._setElementValue=function(value){this._renderer.setElementProperty(this._element.nativeElement,"value",value)},NgSelectMultipleOption.prototype._setSelected=function(selected){this._renderer.setElementProperty(this._element.nativeElement,"selected",selected)},NgSelectMultipleOption.prototype.ngOnDestroy=function(){lang_1.isPresent(this._select)&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},NgSelectMultipleOption.decorators=[{type:core_1.Directive,args:[{selector:"option"}]}],NgSelectMultipleOption.ctorParameters=[{type:core_1.ElementRef},{type:core_1.Renderer},{type:SelectMultipleControlValueAccessor,decorators:[{type:core_1.Optional},{type:core_1.Host}]}],NgSelectMultipleOption.propDecorators={ngValue:[{type:core_1.Input,args:["ngValue"]}],value:[{type:core_1.Input,args:["value"]}]},NgSelectMultipleOption}();exports.NgSelectMultipleOption=NgSelectMultipleOption,exports.SELECT_DIRECTIVES=[SelectMultipleControlValueAccessor,NgSelectMultipleOption]},{"../facade/collection":275,"../facade/lang":278,"./control_value_accessor":252,"@angular/core":154}],270:[function(require,module,exports){"use strict";function controlPath(name,parent){var p=collection_1.ListWrapper.clone(parent.path);return p.push(name),p}function setUpControl(control,dir){lang_1.isBlank(control)&&_throwError(dir,"Cannot find control with"),lang_1.isBlank(dir.valueAccessor)&&_throwError(dir,"No value accessor for form control with"),control.validator=validators_1.Validators.compose([control.validator,dir.validator]),control.asyncValidator=validators_1.Validators.composeAsync([control.asyncValidator,dir.asyncValidator]),dir.valueAccessor.writeValue(control.value),dir.valueAccessor.registerOnChange(function(newValue){dir.viewToModelUpdate(newValue),control.markAsDirty(),control.setValue(newValue,{emitModelToViewChange:!1})}),control.registerOnChange(function(newValue,emitModelEvent){dir.valueAccessor.writeValue(newValue),emitModelEvent&&dir.viewToModelUpdate(newValue)}),dir.valueAccessor.registerOnTouched(function(){return control.markAsTouched()})}function setUpFormContainer(control,dir){lang_1.isBlank(control)&&_throwError(dir,"Cannot find control with"),control.validator=validators_1.Validators.compose([control.validator,dir.validator]),control.asyncValidator=validators_1.Validators.composeAsync([control.asyncValidator,dir.asyncValidator])}function _throwError(dir,message){var messageEnd;throw messageEnd=dir.path.length>1?"path: '"+dir.path.join(" -> ")+"'":dir.path[0]?"name: '"+dir.path+"'":"unspecified name attribute",new exceptions_1.BaseException(message+" "+messageEnd)}function composeValidators(validators){return lang_1.isPresent(validators)?validators_1.Validators.compose(validators.map(normalize_validator_1.normalizeValidator)):null}function composeAsyncValidators(validators){return lang_1.isPresent(validators)?validators_1.Validators.composeAsync(validators.map(normalize_validator_1.normalizeAsyncValidator)):null}function isPropertyUpdated(changes,viewModel){if(!collection_1.StringMapWrapper.contains(changes,"model"))return!1;var change=changes.model;return!!change.isFirstChange()||!lang_1.looseIdentical(viewModel,change.currentValue)}function selectValueAccessor(dir,valueAccessors){if(lang_1.isBlank(valueAccessors))return null;var defaultAccessor,builtinAccessor,customAccessor;return valueAccessors.forEach(function(v){lang_1.hasConstructor(v,default_value_accessor_1.DefaultValueAccessor)?defaultAccessor=v:lang_1.hasConstructor(v,checkbox_value_accessor_1.CheckboxControlValueAccessor)||lang_1.hasConstructor(v,number_value_accessor_1.NumberValueAccessor)||lang_1.hasConstructor(v,select_control_value_accessor_1.SelectControlValueAccessor)||lang_1.hasConstructor(v,select_multiple_control_value_accessor_1.SelectMultipleControlValueAccessor)||lang_1.hasConstructor(v,radio_control_value_accessor_1.RadioControlValueAccessor)?(lang_1.isPresent(builtinAccessor)&&_throwError(dir,"More than one built-in value accessor matches form control with"),builtinAccessor=v):(lang_1.isPresent(customAccessor)&&_throwError(dir,"More than one custom value accessor matches form control with"),customAccessor=v)}),lang_1.isPresent(customAccessor)?customAccessor:lang_1.isPresent(builtinAccessor)?builtinAccessor:lang_1.isPresent(defaultAccessor)?defaultAccessor:(_throwError(dir,"No valid value accessor for form control with"),null)}var collection_1=require("../facade/collection"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),validators_1=require("../validators"),checkbox_value_accessor_1=require("./checkbox_value_accessor"),default_value_accessor_1=require("./default_value_accessor"),normalize_validator_1=require("./normalize_validator"),number_value_accessor_1=require("./number_value_accessor"),radio_control_value_accessor_1=require("./radio_control_value_accessor"),select_control_value_accessor_1=require("./select_control_value_accessor"),select_multiple_control_value_accessor_1=require("./select_multiple_control_value_accessor");exports.controlPath=controlPath,exports.setUpControl=setUpControl,exports.setUpFormContainer=setUpFormContainer,exports.composeValidators=composeValidators,exports.composeAsyncValidators=composeAsyncValidators,exports.isPropertyUpdated=isPropertyUpdated,exports.selectValueAccessor=selectValueAccessor},{"../facade/collection":275,"../facade/exceptions":277,"../facade/lang":278,"../validators":283,"./checkbox_value_accessor":250,"./default_value_accessor":253,"./normalize_validator":260,"./number_value_accessor":261,"./radio_control_value_accessor":262,"./select_control_value_accessor":268,"./select_multiple_control_value_accessor":269}],271:[function(require,module,exports){"use strict";var exceptions_1=require("../facade/exceptions"),error_examples_1=require("./error_examples"),TemplateDrivenErrors=function(){function TemplateDrivenErrors(){}return TemplateDrivenErrors.modelParentException=function(){throw new exceptions_1.BaseException('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+error_examples_1.FormErrorExamples.formControlName+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+error_examples_1.FormErrorExamples.ngModelWithFormGroup)},TemplateDrivenErrors.formGroupNameException=function(){throw new exceptions_1.BaseException("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+error_examples_1.FormErrorExamples.formGroupName+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+error_examples_1.FormErrorExamples.ngModelGroup)},TemplateDrivenErrors.missingNameException=function(){throw new exceptions_1.BaseException('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},TemplateDrivenErrors.modelGroupParentException=function(){throw new exceptions_1.BaseException("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+error_examples_1.FormErrorExamples.formGroupName+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+error_examples_1.FormErrorExamples.ngModelGroup)},TemplateDrivenErrors}();exports.TemplateDrivenErrors=TemplateDrivenErrors},{"../facade/exceptions":277,"./error_examples":254}],272:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../facade/lang"),validators_1=require("../validators");exports.REQUIRED=validators_1.Validators.required,exports.REQUIRED_VALIDATOR={provide:validators_1.NG_VALIDATORS,useValue:exports.REQUIRED,multi:!0};var RequiredValidator=function(){function RequiredValidator(){}return RequiredValidator.decorators=[{type:core_1.Directive,args:[{selector:"[required][formControlName],[required][formControl],[required][ngModel]",providers:[exports.REQUIRED_VALIDATOR]}]}],RequiredValidator}();exports.RequiredValidator=RequiredValidator,exports.MIN_LENGTH_VALIDATOR={provide:validators_1.NG_VALIDATORS,useExisting:core_1.forwardRef(function(){return MinLengthValidator}),multi:!0};var MinLengthValidator=function(){function MinLengthValidator(minLength){this._validator=validators_1.Validators.minLength(lang_1.NumberWrapper.parseInt(minLength,10))}return MinLengthValidator.prototype.validate=function(c){return this._validator(c)},MinLengthValidator.decorators=[{type:core_1.Directive,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[exports.MIN_LENGTH_VALIDATOR]}]}],MinLengthValidator.ctorParameters=[{type:void 0,decorators:[{type:core_1.Attribute,args:["minlength"]}]}],MinLengthValidator}();exports.MinLengthValidator=MinLengthValidator,exports.MAX_LENGTH_VALIDATOR={provide:validators_1.NG_VALIDATORS,useExisting:core_1.forwardRef(function(){return MaxLengthValidator}),multi:!0};var MaxLengthValidator=function(){function MaxLengthValidator(maxLength){this._validator=validators_1.Validators.maxLength(lang_1.NumberWrapper.parseInt(maxLength,10))}return MaxLengthValidator.prototype.validate=function(c){return this._validator(c)},MaxLengthValidator.decorators=[{type:core_1.Directive,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[exports.MAX_LENGTH_VALIDATOR]}]}],MaxLengthValidator.ctorParameters=[{type:void 0,decorators:[{type:core_1.Attribute,args:["maxlength"]}]}],MaxLengthValidator}();exports.MaxLengthValidator=MaxLengthValidator,exports.PATTERN_VALIDATOR={provide:validators_1.NG_VALIDATORS,useExisting:core_1.forwardRef(function(){return PatternValidator}),multi:!0};var PatternValidator=function(){function PatternValidator(pattern){this._validator=validators_1.Validators.pattern(pattern);
}return PatternValidator.prototype.validate=function(c){return this._validator(c)},PatternValidator.decorators=[{type:core_1.Directive,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[exports.PATTERN_VALIDATOR]}]}],PatternValidator.ctorParameters=[{type:void 0,decorators:[{type:core_1.Attribute,args:["pattern"]}]}],PatternValidator}();exports.PatternValidator=PatternValidator},{"../facade/lang":278,"../validators":283,"@angular/core":154}],273:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{dup:12,"rxjs/Observable":401,"rxjs/Subject":407}],274:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],275:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{"./lang":278,dup:14}],276:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"./base_wrapped_exception":274,"./collection":275,"./lang":278,dup:15}],277:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./base_wrapped_exception":274,"./exception_handler":276,dup:16}],278:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],279:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),collection_1=require("./facade/collection"),lang_1=require("./facade/lang"),model_1=require("./model"),FormBuilder=function(){function FormBuilder(){}return FormBuilder.prototype.group=function(controlsConfig,extra){void 0===extra&&(extra=null);var controls=this._reduceControls(controlsConfig),optionals=lang_1.isPresent(extra)?collection_1.StringMapWrapper.get(extra,"optionals"):null,validator=lang_1.isPresent(extra)?collection_1.StringMapWrapper.get(extra,"validator"):null,asyncValidator=lang_1.isPresent(extra)?collection_1.StringMapWrapper.get(extra,"asyncValidator"):null;return new model_1.FormGroup(controls,optionals,validator,asyncValidator)},FormBuilder.prototype.control=function(value,validator,asyncValidator){return void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),new model_1.FormControl(value,validator,asyncValidator)},FormBuilder.prototype.array=function(controlsConfig,validator,asyncValidator){var _this=this;void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null);var controls=controlsConfig.map(function(c){return _this._createControl(c)});return new model_1.FormArray(controls,validator,asyncValidator)},FormBuilder.prototype._reduceControls=function(controlsConfig){var _this=this,controls={};return collection_1.StringMapWrapper.forEach(controlsConfig,function(controlConfig,controlName){controls[controlName]=_this._createControl(controlConfig)}),controls},FormBuilder.prototype._createControl=function(controlConfig){if(controlConfig instanceof model_1.FormControl||controlConfig instanceof model_1.FormGroup||controlConfig instanceof model_1.FormArray)return controlConfig;if(lang_1.isArray(controlConfig)){var value=controlConfig[0],validator=controlConfig.length>1?controlConfig[1]:null,asyncValidator=controlConfig.length>2?controlConfig[2]:null;return this.control(value,validator,asyncValidator)}return this.control(controlConfig)},FormBuilder.decorators=[{type:core_1.Injectable}],FormBuilder}();exports.FormBuilder=FormBuilder},{"./facade/collection":275,"./facade/lang":278,"./model":282,"@angular/core":154}],280:[function(require,module,exports){"use strict";function disableDeprecatedForms(){return[]}function provideForms(){return[{provide:core_1.PLATFORM_DIRECTIVES,useValue:directives_1.FORM_DIRECTIVES,multi:!0},exports.REACTIVE_FORM_PROVIDERS]}var core_1=require("@angular/core"),directives_1=require("./directives"),radio_control_value_accessor_1=require("./directives/radio_control_value_accessor"),form_builder_1=require("./form_builder");exports.FORM_PROVIDERS=[radio_control_value_accessor_1.RadioControlRegistry],exports.REACTIVE_FORM_PROVIDERS=[form_builder_1.FormBuilder,radio_control_value_accessor_1.RadioControlRegistry];var FormsModule=function(){function FormsModule(){}return FormsModule.decorators=[{type:core_1.NgModule,args:[{declarations:directives_1.TEMPLATE_DRIVEN_DIRECTIVES,providers:[exports.FORM_PROVIDERS],exports:[directives_1.InternalFormsSharedModule,directives_1.TEMPLATE_DRIVEN_DIRECTIVES]}]}],FormsModule}();exports.FormsModule=FormsModule;var ReactiveFormsModule=function(){function ReactiveFormsModule(){}return ReactiveFormsModule.decorators=[{type:core_1.NgModule,args:[{declarations:[directives_1.REACTIVE_DRIVEN_DIRECTIVES],providers:[exports.REACTIVE_FORM_PROVIDERS],exports:[directives_1.InternalFormsSharedModule,directives_1.REACTIVE_DRIVEN_DIRECTIVES]}]}],ReactiveFormsModule}();exports.ReactiveFormsModule=ReactiveFormsModule,exports.disableDeprecatedForms=disableDeprecatedForms,exports.provideForms=provideForms},{"./directives":247,"./directives/radio_control_value_accessor":262,"./form_builder":279,"@angular/core":154}],281:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var directives_1=require("./directives");exports.FORM_DIRECTIVES=directives_1.FORM_DIRECTIVES,exports.REACTIVE_FORM_DIRECTIVES=directives_1.REACTIVE_FORM_DIRECTIVES;var abstract_control_directive_1=require("./directives/abstract_control_directive");exports.AbstractControlDirective=abstract_control_directive_1.AbstractControlDirective;var abstract_form_group_directive_1=require("./directives/abstract_form_group_directive");exports.AbstractFormGroupDirective=abstract_form_group_directive_1.AbstractFormGroupDirective;var checkbox_value_accessor_1=require("./directives/checkbox_value_accessor");exports.CheckboxControlValueAccessor=checkbox_value_accessor_1.CheckboxControlValueAccessor;var control_container_1=require("./directives/control_container");exports.ControlContainer=control_container_1.ControlContainer;var control_value_accessor_1=require("./directives/control_value_accessor");exports.NG_VALUE_ACCESSOR=control_value_accessor_1.NG_VALUE_ACCESSOR;var default_value_accessor_1=require("./directives/default_value_accessor");exports.DefaultValueAccessor=default_value_accessor_1.DefaultValueAccessor;var ng_control_1=require("./directives/ng_control");exports.NgControl=ng_control_1.NgControl;var ng_control_status_1=require("./directives/ng_control_status");exports.NgControlStatus=ng_control_status_1.NgControlStatus;var ng_form_1=require("./directives/ng_form");exports.NgForm=ng_form_1.NgForm;var ng_model_1=require("./directives/ng_model");exports.NgModel=ng_model_1.NgModel;var ng_model_group_1=require("./directives/ng_model_group");exports.NgModelGroup=ng_model_group_1.NgModelGroup;var form_control_directive_1=require("./directives/reactive_directives/form_control_directive");exports.FormControlDirective=form_control_directive_1.FormControlDirective;var form_control_name_1=require("./directives/reactive_directives/form_control_name");exports.FormControlName=form_control_name_1.FormControlName;var form_group_directive_1=require("./directives/reactive_directives/form_group_directive");exports.FormGroupDirective=form_group_directive_1.FormGroupDirective;var form_group_name_1=require("./directives/reactive_directives/form_group_name");exports.FormArrayName=form_group_name_1.FormArrayName;var form_group_name_2=require("./directives/reactive_directives/form_group_name");exports.FormGroupName=form_group_name_2.FormGroupName;var select_control_value_accessor_1=require("./directives/select_control_value_accessor");exports.NgSelectOption=select_control_value_accessor_1.NgSelectOption,exports.SelectControlValueAccessor=select_control_value_accessor_1.SelectControlValueAccessor;var select_multiple_control_value_accessor_1=require("./directives/select_multiple_control_value_accessor");exports.SelectMultipleControlValueAccessor=select_multiple_control_value_accessor_1.SelectMultipleControlValueAccessor;var validators_1=require("./directives/validators");exports.MaxLengthValidator=validators_1.MaxLengthValidator,exports.MinLengthValidator=validators_1.MinLengthValidator,exports.PatternValidator=validators_1.PatternValidator,exports.RequiredValidator=validators_1.RequiredValidator;var form_builder_1=require("./form_builder");exports.FormBuilder=form_builder_1.FormBuilder;var model_1=require("./model");exports.AbstractControl=model_1.AbstractControl,exports.FormArray=model_1.FormArray,exports.FormControl=model_1.FormControl,exports.FormGroup=model_1.FormGroup;var validators_2=require("./validators");exports.NG_ASYNC_VALIDATORS=validators_2.NG_ASYNC_VALIDATORS,exports.NG_VALIDATORS=validators_2.NG_VALIDATORS,exports.Validators=validators_2.Validators,__export(require("./form_providers"))},{"./directives":247,"./directives/abstract_control_directive":248,"./directives/abstract_form_group_directive":249,"./directives/checkbox_value_accessor":250,"./directives/control_container":251,"./directives/control_value_accessor":252,"./directives/default_value_accessor":253,"./directives/ng_control":255,"./directives/ng_control_status":256,"./directives/ng_form":257,"./directives/ng_model":258,"./directives/ng_model_group":259,"./directives/reactive_directives/form_control_directive":263,"./directives/reactive_directives/form_control_name":264,"./directives/reactive_directives/form_group_directive":265,"./directives/reactive_directives/form_group_name":266,"./directives/select_control_value_accessor":268,"./directives/select_multiple_control_value_accessor":269,"./directives/validators":272,"./form_builder":279,"./form_providers":280,"./model":282,"./validators":283}],282:[function(require,module,exports){"use strict";function isControl(control){return control instanceof AbstractControl}function _find(control,path,delimiter){return lang_1.isBlank(path)?null:(path instanceof Array||(path=path.split(delimiter)),path instanceof Array&&collection_1.ListWrapper.isEmpty(path)?null:path.reduce(function(v,name){if(v instanceof FormGroup)return lang_1.isPresent(v.controls[name])?v.controls[name]:null;if(v instanceof FormArray){var index=name;return lang_1.isPresent(v.at(index))?v.at(index):null}return null},control))}function toObservable(r){return lang_1.isPromise(r)?PromiseObservable_1.PromiseObservable.create(r):r}function coerceToValidator(validator){return Array.isArray(validator)?shared_1.composeValidators(validator):validator}function coerceToAsyncValidator(asyncValidator){return Array.isArray(asyncValidator)?shared_1.composeAsyncValidators(asyncValidator):asyncValidator}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},PromiseObservable_1=require("rxjs/observable/PromiseObservable"),shared_1=require("./directives/shared"),async_1=require("./facade/async"),collection_1=require("./facade/collection"),exceptions_1=require("./facade/exceptions"),lang_1=require("./facade/lang");exports.VALID="VALID",exports.INVALID="INVALID",exports.PENDING="PENDING",exports.isControl=isControl;var AbstractControl=function(){function AbstractControl(validator,asyncValidator){this.validator=validator,this.asyncValidator=asyncValidator,this._pristine=!0,this._touched=!1}return Object.defineProperty(AbstractControl.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valid",{get:function(){return this._status===exports.VALID},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"invalid",{get:function(){return this._status===exports.INVALID},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pristine",{get:function(){return this._pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"touched",{get:function(){return this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"untouched",{get:function(){return!this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valueChanges",{get:function(){return this._valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"statusChanges",{get:function(){return this._statusChanges},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pending",{get:function(){return this._status==exports.PENDING},enumerable:!0,configurable:!0}),AbstractControl.prototype.setAsyncValidators=function(newValidator){this.asyncValidator=coerceToAsyncValidator(newValidator)},AbstractControl.prototype.clearAsyncValidators=function(){this.asyncValidator=null},AbstractControl.prototype.setValidators=function(newValidator){this.validator=coerceToValidator(newValidator)},AbstractControl.prototype.clearValidators=function(){this.validator=null},AbstractControl.prototype.markAsTouched=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;onlySelf=lang_1.normalizeBool(onlySelf),this._touched=!0,lang_1.isPresent(this._parent)&&!onlySelf&&this._parent.markAsTouched({onlySelf:onlySelf})},AbstractControl.prototype.markAsDirty=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;onlySelf=lang_1.normalizeBool(onlySelf),this._pristine=!1,lang_1.isPresent(this._parent)&&!onlySelf&&this._parent.markAsDirty({onlySelf:onlySelf})},AbstractControl.prototype.markAsPristine=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;this._pristine=!0,this._forEachChild(function(control){control.markAsPristine({onlySelf:!0})}),lang_1.isPresent(this._parent)&&!onlySelf&&this._parent._updatePristine({onlySelf:onlySelf})},AbstractControl.prototype.markAsUntouched=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;this._touched=!1,this._forEachChild(function(control){control.markAsUntouched({onlySelf:!0})}),lang_1.isPresent(this._parent)&&!onlySelf&&this._parent._updateTouched({onlySelf:onlySelf})},AbstractControl.prototype.markAsPending=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;onlySelf=lang_1.normalizeBool(onlySelf),this._status=exports.PENDING,lang_1.isPresent(this._parent)&&!onlySelf&&this._parent.markAsPending({onlySelf:onlySelf})},AbstractControl.prototype.setParent=function(parent){this._parent=parent},AbstractControl.prototype.updateValueAndValidity=function(_a){var _b=void 0===_a?{}:_a,onlySelf=_b.onlySelf,emitEvent=_b.emitEvent;onlySelf=lang_1.normalizeBool(onlySelf),emitEvent=!lang_1.isPresent(emitEvent)||emitEvent,this._updateValue(),this._errors=this._runValidator(),this._status=this._calculateStatus(),this._status!=exports.VALID&&this._status!=exports.PENDING||this._runAsyncValidator(emitEvent),emitEvent&&(this._valueChanges.emit(this._value),this._statusChanges.emit(this._status)),lang_1.isPresent(this._parent)&&!onlySelf&&this._parent.updateValueAndValidity({onlySelf:onlySelf,emitEvent:emitEvent})},AbstractControl.prototype._runValidator=function(){return lang_1.isPresent(this.validator)?this.validator(this):null},AbstractControl.prototype._runAsyncValidator=function(emitEvent){var _this=this;if(lang_1.isPresent(this.asyncValidator)){this._status=exports.PENDING,this._cancelExistingSubscription();var obs=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=obs.subscribe({next:function(res){return _this.setErrors(res,{emitEvent:emitEvent})}})}},AbstractControl.prototype._cancelExistingSubscription=function(){lang_1.isPresent(this._asyncValidationSubscription)&&this._asyncValidationSubscription.unsubscribe()},AbstractControl.prototype.setErrors=function(errors,_a){var emitEvent=(void 0===_a?{}:_a).emitEvent;emitEvent=!lang_1.isPresent(emitEvent)||emitEvent,this._errors=errors,this._updateControlsErrors(emitEvent)},AbstractControl.prototype.find=function(path){return _find(this,path,"/")},AbstractControl.prototype.get=function(path){return _find(this,path,".")},AbstractControl.prototype.getError=function(errorCode,path){void 0===path&&(path=null);var control=lang_1.isPresent(path)&&!collection_1.ListWrapper.isEmpty(path)?this.find(path):this;return lang_1.isPresent(control)&&lang_1.isPresent(control._errors)?collection_1.StringMapWrapper.get(control._errors,errorCode):null},AbstractControl.prototype.hasError=function(errorCode,path){return void 0===path&&(path=null),lang_1.isPresent(this.getError(errorCode,path))},Object.defineProperty(AbstractControl.prototype,"root",{get:function(){for(var x=this;lang_1.isPresent(x._parent);)x=x._parent;return x},enumerable:!0,configurable:!0}),AbstractControl.prototype._updateControlsErrors=function(emitEvent){this._status=this._calculateStatus(),emitEvent&&this._statusChanges.emit(this._status),lang_1.isPresent(this._parent)&&this._parent._updateControlsErrors(emitEvent)},AbstractControl.prototype._initObservables=function(){this._valueChanges=new async_1.EventEmitter,this._statusChanges=new async_1.EventEmitter},AbstractControl.prototype._calculateStatus=function(){return lang_1.isPresent(this._errors)?exports.INVALID:this._anyControlsHaveStatus(exports.PENDING)?exports.PENDING:this._anyControlsHaveStatus(exports.INVALID)?exports.INVALID:exports.VALID},AbstractControl.prototype._anyControlsHaveStatus=function(status){return this._anyControls(function(control){return control.status==status})},AbstractControl.prototype._anyControlsDirty=function(){return this._anyControls(function(control){return control.dirty})},AbstractControl.prototype._anyControlsTouched=function(){return this._anyControls(function(control){return control.touched})},AbstractControl.prototype._updatePristine=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;this._pristine=!this._anyControlsDirty(),lang_1.isPresent(this._parent)&&!onlySelf&&this._parent._updatePristine({onlySelf:onlySelf})},AbstractControl.prototype._updateTouched=function(_a){var onlySelf=(void 0===_a?{}:_a).onlySelf;this._touched=this._anyControlsTouched(),lang_1.isPresent(this._parent)&&!onlySelf&&this._parent._updateTouched({onlySelf:onlySelf})},AbstractControl}();exports.AbstractControl=AbstractControl;var FormControl=function(_super){function FormControl(value,validator,asyncValidator){void 0===value&&(value=null),void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),_super.call(this,coerceToValidator(validator),coerceToAsyncValidator(asyncValidator)),this._onChange=[],this._value=value,this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}return __extends(FormControl,_super),FormControl.prototype.setValue=function(value,_a){var _this=this,_b=void 0===_a?{}:_a,onlySelf=_b.onlySelf,emitEvent=_b.emitEvent,emitModelToViewChange=_b.emitModelToViewChange,emitViewToModelChange=_b.emitViewToModelChange;emitModelToViewChange=!lang_1.isPresent(emitModelToViewChange)||emitModelToViewChange,emitViewToModelChange=!lang_1.isPresent(emitViewToModelChange)||emitViewToModelChange,this._value=value,this._onChange.length&&emitModelToViewChange&&this._onChange.forEach(function(changeFn){return changeFn(_this._value,emitViewToModelChange)}),this.updateValueAndValidity({onlySelf:onlySelf,emitEvent:emitEvent})},FormControl.prototype.patchValue=function(value,options){void 0===options&&(options={}),this.setValue(value,options)},FormControl.prototype.updateValue=function(value,options){void 0===options&&(options={}),this.setValue(value,options)},FormControl.prototype.reset=function(value,_a){void 0===value&&(value=null);var onlySelf=(void 0===_a?{}:_a).onlySelf;this.markAsPristine({onlySelf:onlySelf}),this.markAsUntouched({onlySelf:onlySelf}),this.setValue(value,{onlySelf:onlySelf})},FormControl.prototype._updateValue=function(){},FormControl.prototype._anyControls=function(condition){return!1},FormControl.prototype.registerOnChange=function(fn){this._onChange.push(fn)},FormControl.prototype._forEachChild=function(cb){},FormControl}(AbstractControl);exports.FormControl=FormControl;var FormGroup=function(_super){function FormGroup(controls,optionals,validator,asyncValidator){void 0===optionals&&(optionals=null),void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),_super.call(this,validator,asyncValidator),this.controls=controls,this._optionals=lang_1.isPresent(optionals)?optionals:{},this._initObservables(),this._setParentForControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return __extends(FormGroup,_super),FormGroup.prototype.registerControl=function(name,control){return this.controls[name]?this.controls[name]:(this.controls[name]=control,control.setParent(this),control)},FormGroup.prototype.addControl=function(name,control){this.registerControl(name,control),this.updateValueAndValidity()},FormGroup.prototype.removeControl=function(name){collection_1.StringMapWrapper.delete(this.controls,name),this.updateValueAndValidity()},FormGroup.prototype.include=function(controlName){collection_1.StringMapWrapper.set(this._optionals,controlName,!0),this.updateValueAndValidity()},FormGroup.prototype.exclude=function(controlName){collection_1.StringMapWrapper.set(this._optionals,controlName,!1),this.updateValueAndValidity()},FormGroup.prototype.contains=function(controlName){var c=collection_1.StringMapWrapper.contains(this.controls,controlName);return c&&this._included(controlName)},FormGroup.prototype.setValue=function(value,_a){var _this=this,onlySelf=(void 0===_a?{}:_a).onlySelf;this._checkAllValuesPresent(value),collection_1.StringMapWrapper.forEach(value,function(newValue,name){_this._throwIfControlMissing(name),_this.controls[name].setValue(newValue,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:onlySelf})},FormGroup.prototype.patchValue=function(value,_a){var _this=this,onlySelf=(void 0===_a?{}:_a).onlySelf;collection_1.StringMapWrapper.forEach(value,function(newValue,name){_this.controls[name]&&_this.controls[name].patchValue(newValue,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:onlySelf})},FormGroup.prototype.reset=function(value,_a){void 0===value&&(value={});var onlySelf=(void 0===_a?{}:_a).onlySelf;this._forEachChild(function(control,name){control.reset(value[name],{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:onlySelf}),this._updatePristine({onlySelf:onlySelf}),this._updateTouched({onlySelf:onlySelf})},FormGroup.prototype._throwIfControlMissing=function(name){if(!Object.keys(this.controls).length)throw new exceptions_1.BaseException("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[name])throw new exceptions_1.BaseException("Cannot find form control with name: "+name+".")},FormGroup.prototype._forEachChild=function(cb){collection_1.StringMapWrapper.forEach(this.controls,cb)},FormGroup.prototype._setParentForControls=function(){var _this=this;this._forEachChild(function(control,name){control.setParent(_this)})},FormGroup.prototype._updateValue=function(){this._value=this._reduceValue()},FormGroup.prototype._anyControls=function(condition){var _this=this,res=!1;return this._forEachChild(function(control,name){res=res||_this.contains(name)&&condition(control)}),res},FormGroup.prototype._reduceValue=function(){return this._reduceChildren({},function(acc,control,name){return acc[name]=control.value,acc})},FormGroup.prototype._reduceChildren=function(initValue,fn){var _this=this,res=initValue;return this._forEachChild(function(control,name){_this._included(name)&&(res=fn(res,control,name))}),res},FormGroup.prototype._included=function(controlName){var isOptional=collection_1.StringMapWrapper.contains(this._optionals,controlName);return!isOptional||collection_1.StringMapWrapper.get(this._optionals,controlName)},FormGroup.prototype._checkAllValuesPresent=function(value){this._forEachChild(function(control,name){if(void 0===value[name])throw new exceptions_1.BaseException("Must supply a value for form control with name: '"+name+"'.")})},FormGroup}(AbstractControl);exports.FormGroup=FormGroup;var FormArray=function(_super){function FormArray(controls,validator,asyncValidator){void 0===validator&&(validator=null),void 0===asyncValidator&&(asyncValidator=null),_super.call(this,validator,asyncValidator),this.controls=controls,this._initObservables(),this._setParentForControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return __extends(FormArray,_super),FormArray.prototype.at=function(index){return this.controls[index]},FormArray.prototype.push=function(control){this.controls.push(control),control.setParent(this),this.updateValueAndValidity()},FormArray.prototype.insert=function(index,control){collection_1.ListWrapper.insert(this.controls,index,control),control.setParent(this),this.updateValueAndValidity()},FormArray.prototype.removeAt=function(index){collection_1.ListWrapper.removeAt(this.controls,index),this.updateValueAndValidity()},Object.defineProperty(FormArray.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),FormArray.prototype.setValue=function(value,_a){var _this=this,onlySelf=(void 0===_a?{}:_a).onlySelf;this._checkAllValuesPresent(value),value.forEach(function(newValue,index){_this._throwIfControlMissing(index),_this.at(index).setValue(newValue,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:onlySelf})},FormArray.prototype.patchValue=function(value,_a){var _this=this,onlySelf=(void 0===_a?{}:_a).onlySelf;value.forEach(function(newValue,index){_this.at(index)&&_this.at(index).patchValue(newValue,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:onlySelf})},FormArray.prototype.reset=function(value,_a){void 0===value&&(value=[]);var onlySelf=(void 0===_a?{}:_a).onlySelf;this._forEachChild(function(control,index){control.reset(value[index],{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:onlySelf}),this._updatePristine({onlySelf:onlySelf}),this._updateTouched({onlySelf:onlySelf})},FormArray.prototype._throwIfControlMissing=function(index){if(!this.controls.length)throw new exceptions_1.BaseException("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(index))throw new exceptions_1.BaseException("Cannot find form control at index "+index)},FormArray.prototype._forEachChild=function(cb){this.controls.forEach(function(control,index){cb(control,index)})},FormArray.prototype._updateValue=function(){this._value=this.controls.map(function(control){return control.value})},FormArray.prototype._anyControls=function(condition){return this.controls.some(function(control){return condition(control)})},FormArray.prototype._setParentForControls=function(){var _this=this;this._forEachChild(function(control){control.setParent(_this)})},FormArray.prototype._checkAllValuesPresent=function(value){this._forEachChild(function(control,i){if(void 0===value[i])throw new exceptions_1.BaseException("Must supply a value for form control at index: "+i+".")})},FormArray}(AbstractControl);exports.FormArray=FormArray},{"./directives/shared":270,"./facade/async":273,"./facade/collection":275,"./facade/exceptions":277,"./facade/lang":278,"rxjs/observable/PromiseObservable":557}],283:[function(require,module,exports){"use strict";function _convertToPromise(obj){return lang_1.isPromise(obj)?obj:toPromise_1.toPromise.call(obj)}function _executeValidators(control,validators){return validators.map(function(v){return v(control)})}function _executeAsyncValidators(control,validators){return validators.map(function(v){return v(control)})}function _mergeErrors(arrayOfErrors){var res=arrayOfErrors.reduce(function(res,errors){return lang_1.isPresent(errors)?collection_1.StringMapWrapper.merge(res,errors):res},{});return collection_1.StringMapWrapper.isEmpty(res)?null:res}var core_1=require("@angular/core"),toPromise_1=require("rxjs/operator/toPromise"),collection_1=require("./facade/collection"),lang_1=require("./facade/lang");exports.NG_VALIDATORS=new core_1.OpaqueToken("NgValidators"),exports.NG_ASYNC_VALIDATORS=new core_1.OpaqueToken("NgAsyncValidators");var Validators=function(){function Validators(){}return Validators.required=function(control){return lang_1.isBlank(control.value)||lang_1.isString(control.value)&&""==control.value?{required:!0}:null},Validators.minLength=function(minLength){return function(control){if(lang_1.isPresent(Validators.required(control)))return null;var v=control.value;return v.length<minLength?{minlength:{requiredLength:minLength,actualLength:v.length}}:null}},Validators.maxLength=function(maxLength){return function(control){if(lang_1.isPresent(Validators.required(control)))return null;var v=control.value;return v.length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:v.length}}:null}},Validators.pattern=function(pattern){return function(control){if(lang_1.isPresent(Validators.required(control)))return null;var regex=new RegExp("^"+pattern+"$"),v=control.value;return regex.test(v)?null:{pattern:{requiredPattern:"^"+pattern+"$",actualValue:v}}}},Validators.nullValidator=function(c){return null},Validators.compose=function(validators){if(lang_1.isBlank(validators))return null;var presentValidators=validators.filter(lang_1.isPresent);return 0==presentValidators.length?null:function(control){return _mergeErrors(_executeValidators(control,presentValidators))}},Validators.composeAsync=function(validators){if(lang_1.isBlank(validators))return null;var presentValidators=validators.filter(lang_1.isPresent);return 0==presentValidators.length?null:function(control){var promises=_executeAsyncValidators(control,presentValidators).map(_convertToPromise);return Promise.all(promises).then(_mergeErrors)}},Validators}();exports.Validators=Validators},{"./facade/collection":275,"./facade/lang":278,"@angular/core":154,"rxjs/operator/toPromise":680}],284:[function(require,module,exports){"use strict";function _createDefaultCookieXSRFStrategy(){return new xhr_backend_1.CookieXSRFStrategy}function httpFactory(xhrBackend,requestOptions){return new http_1.Http(xhrBackend,requestOptions)}function jsonpFactory(jsonpBackend,requestOptions){return new http_1.Jsonp(jsonpBackend,requestOptions)}var core_1=require("@angular/core"),browser_jsonp_1=require("./src/backends/browser_jsonp"),browser_xhr_1=require("./src/backends/browser_xhr"),jsonp_backend_1=require("./src/backends/jsonp_backend"),xhr_backend_1=require("./src/backends/xhr_backend"),base_request_options_1=require("./src/base_request_options"),base_response_options_1=require("./src/base_response_options"),http_1=require("./src/http"),interfaces_1=require("./src/interfaces"),browser_xhr_2=require("./src/backends/browser_xhr");exports.BrowserXhr=browser_xhr_2.BrowserXhr;var jsonp_backend_2=require("./src/backends/jsonp_backend");exports.JSONPBackend=jsonp_backend_2.JSONPBackend,exports.JSONPConnection=jsonp_backend_2.JSONPConnection;var xhr_backend_2=require("./src/backends/xhr_backend");exports.CookieXSRFStrategy=xhr_backend_2.CookieXSRFStrategy,exports.XHRBackend=xhr_backend_2.XHRBackend,exports.XHRConnection=xhr_backend_2.XHRConnection;var base_request_options_2=require("./src/base_request_options");exports.BaseRequestOptions=base_request_options_2.BaseRequestOptions,exports.RequestOptions=base_request_options_2.RequestOptions;var base_response_options_2=require("./src/base_response_options");exports.BaseResponseOptions=base_response_options_2.BaseResponseOptions,exports.ResponseOptions=base_response_options_2.ResponseOptions;var enums_1=require("./src/enums");exports.ReadyState=enums_1.ReadyState,
exports.RequestMethod=enums_1.RequestMethod,exports.ResponseContentType=enums_1.ResponseContentType,exports.ResponseType=enums_1.ResponseType;var headers_1=require("./src/headers");exports.Headers=headers_1.Headers;var http_2=require("./src/http");exports.Http=http_2.Http,exports.Jsonp=http_2.Jsonp;var interfaces_2=require("./src/interfaces");exports.Connection=interfaces_2.Connection,exports.ConnectionBackend=interfaces_2.ConnectionBackend,exports.XSRFStrategy=interfaces_2.XSRFStrategy;var static_request_1=require("./src/static_request");exports.Request=static_request_1.Request;var static_response_1=require("./src/static_response");exports.Response=static_response_1.Response;var url_search_params_1=require("./src/url_search_params");exports.QueryEncoder=url_search_params_1.QueryEncoder,exports.URLSearchParams=url_search_params_1.URLSearchParams,exports.HTTP_PROVIDERS=[{provide:http_1.Http,useFactory:httpFactory,deps:[xhr_backend_1.XHRBackend,base_request_options_1.RequestOptions]},browser_xhr_1.BrowserXhr,{provide:base_request_options_1.RequestOptions,useClass:base_request_options_1.BaseRequestOptions},{provide:base_response_options_1.ResponseOptions,useClass:base_response_options_1.BaseResponseOptions},xhr_backend_1.XHRBackend,{provide:interfaces_1.XSRFStrategy,useFactory:_createDefaultCookieXSRFStrategy}],exports._createDefaultCookieXSRFStrategy=_createDefaultCookieXSRFStrategy,exports.httpFactory=httpFactory,exports.HTTP_BINDINGS=exports.HTTP_PROVIDERS,exports.JSONP_PROVIDERS=[{provide:http_1.Jsonp,useFactory:jsonpFactory,deps:[jsonp_backend_1.JSONPBackend,base_request_options_1.RequestOptions]},browser_jsonp_1.BrowserJsonp,{provide:base_request_options_1.RequestOptions,useClass:base_request_options_1.BaseRequestOptions},{provide:base_response_options_1.ResponseOptions,useClass:base_response_options_1.BaseResponseOptions},{provide:jsonp_backend_1.JSONPBackend,useClass:jsonp_backend_1.JSONPBackend_}],exports.JSON_BINDINGS=exports.JSONP_PROVIDERS;var HttpModule=function(){function HttpModule(){}return HttpModule.decorators=[{type:core_1.NgModule,args:[{providers:exports.HTTP_PROVIDERS}]}],HttpModule}();exports.HttpModule=HttpModule;var JsonpModule=function(){function JsonpModule(){}return JsonpModule.decorators=[{type:core_1.NgModule,args:[{providers:exports.JSONP_PROVIDERS}]}],JsonpModule}();exports.JsonpModule=JsonpModule},{"./src/backends/browser_jsonp":286,"./src/backends/browser_xhr":287,"./src/backends/jsonp_backend":288,"./src/backends/xhr_backend":289,"./src/base_request_options":290,"./src/base_response_options":291,"./src/enums":293,"./src/headers":299,"./src/http":300,"./src/interfaces":302,"./src/static_request":303,"./src/static_response":304,"./src/url_search_params":305,"@angular/core":154}],285:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(require("./http"))},{"./http":284}],286:[function(require,module,exports){"use strict";function _getJsonpConnections(){return null===_jsonpConnections&&(_jsonpConnections=lang_1.global[exports.JSONP_HOME]={}),_jsonpConnections}var core_1=require("@angular/core"),lang_1=require("../facade/lang"),_nextRequestId=0;exports.JSONP_HOME="__ng_jsonp__";var _jsonpConnections=null,BrowserJsonp=function(){function BrowserJsonp(){}return BrowserJsonp.prototype.build=function(url){var node=document.createElement("script");return node.src=url,node},BrowserJsonp.prototype.nextRequestID=function(){return"__req"+_nextRequestId++},BrowserJsonp.prototype.requestCallback=function(id){return exports.JSONP_HOME+"."+id+".finished"},BrowserJsonp.prototype.exposeConnection=function(id,connection){var connections=_getJsonpConnections();connections[id]=connection},BrowserJsonp.prototype.removeConnection=function(id){var connections=_getJsonpConnections();connections[id]=null},BrowserJsonp.prototype.send=function(node){document.body.appendChild(node)},BrowserJsonp.prototype.cleanup=function(node){node.parentNode&&node.parentNode.removeChild(node)},BrowserJsonp.decorators=[{type:core_1.Injectable}],BrowserJsonp}();exports.BrowserJsonp=BrowserJsonp},{"../facade/lang":298,"@angular/core":154}],287:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),BrowserXhr=function(){function BrowserXhr(){}return BrowserXhr.prototype.build=function(){return new XMLHttpRequest},BrowserXhr.decorators=[{type:core_1.Injectable}],BrowserXhr.ctorParameters=[],BrowserXhr}();exports.BrowserXhr=BrowserXhr},{"@angular/core":154}],288:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),Observable_1=require("rxjs/Observable"),base_response_options_1=require("../base_response_options"),enums_1=require("../enums"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),interfaces_1=require("../interfaces"),static_response_1=require("../static_response"),browser_jsonp_1=require("./browser_jsonp"),JSONP_ERR_NO_CALLBACK="JSONP injected script did not invoke callback.",JSONP_ERR_WRONG_METHOD="JSONP requests must use GET request method.",JSONPConnection=function(){function JSONPConnection(){}return JSONPConnection}();exports.JSONPConnection=JSONPConnection;var JSONPConnection_=function(_super){function JSONPConnection_(req,_dom,baseResponseOptions){var _this=this;if(_super.call(this),this._dom=_dom,this.baseResponseOptions=baseResponseOptions,this._finished=!1,req.method!==enums_1.RequestMethod.Get)throw exceptions_1.makeTypeError(JSONP_ERR_WRONG_METHOD);this.request=req,this.response=new Observable_1.Observable(function(responseObserver){_this.readyState=enums_1.ReadyState.Loading;var id=_this._id=_dom.nextRequestID();_dom.exposeConnection(id,_this);var callback=_dom.requestCallback(_this._id),url=req.url;url.indexOf("=JSONP_CALLBACK&")>-1?url=lang_1.StringWrapper.replace(url,"=JSONP_CALLBACK&","="+callback+"&"):url.lastIndexOf("=JSONP_CALLBACK")===url.length-"=JSONP_CALLBACK".length&&(url=url.substring(0,url.length-"=JSONP_CALLBACK".length)+("="+callback));var script=_this._script=_dom.build(url),onLoad=function(event){if(_this.readyState!==enums_1.ReadyState.Cancelled){if(_this.readyState=enums_1.ReadyState.Done,_dom.cleanup(script),!_this._finished){var responseOptions_1=new base_response_options_1.ResponseOptions({body:JSONP_ERR_NO_CALLBACK,type:enums_1.ResponseType.Error,url:url});return lang_1.isPresent(baseResponseOptions)&&(responseOptions_1=baseResponseOptions.merge(responseOptions_1)),void responseObserver.error(new static_response_1.Response(responseOptions_1))}var responseOptions=new base_response_options_1.ResponseOptions({body:_this._responseData,url:url});lang_1.isPresent(_this.baseResponseOptions)&&(responseOptions=_this.baseResponseOptions.merge(responseOptions)),responseObserver.next(new static_response_1.Response(responseOptions)),responseObserver.complete()}},onError=function(error){if(_this.readyState!==enums_1.ReadyState.Cancelled){_this.readyState=enums_1.ReadyState.Done,_dom.cleanup(script);var responseOptions=new base_response_options_1.ResponseOptions({body:error.message,type:enums_1.ResponseType.Error});lang_1.isPresent(baseResponseOptions)&&(responseOptions=baseResponseOptions.merge(responseOptions)),responseObserver.error(new static_response_1.Response(responseOptions))}};return script.addEventListener("load",onLoad),script.addEventListener("error",onError),_dom.send(script),function(){_this.readyState=enums_1.ReadyState.Cancelled,script.removeEventListener("load",onLoad),script.removeEventListener("error",onError),lang_1.isPresent(script)&&_this._dom.cleanup(script)}})}return __extends(JSONPConnection_,_super),JSONPConnection_.prototype.finished=function(data){this._finished=!0,this._dom.removeConnection(this._id),this.readyState!==enums_1.ReadyState.Cancelled&&(this._responseData=data)},JSONPConnection_}(JSONPConnection);exports.JSONPConnection_=JSONPConnection_;var JSONPBackend=function(_super){function JSONPBackend(){_super.apply(this,arguments)}return __extends(JSONPBackend,_super),JSONPBackend}(interfaces_1.ConnectionBackend);exports.JSONPBackend=JSONPBackend;var JSONPBackend_=function(_super){function JSONPBackend_(_browserJSONP,_baseResponseOptions){_super.call(this),this._browserJSONP=_browserJSONP,this._baseResponseOptions=_baseResponseOptions}return __extends(JSONPBackend_,_super),JSONPBackend_.prototype.createConnection=function(request){return new JSONPConnection_(request,this._browserJSONP,this._baseResponseOptions)},JSONPBackend_.decorators=[{type:core_1.Injectable}],JSONPBackend_.ctorParameters=[{type:browser_jsonp_1.BrowserJsonp},{type:base_response_options_1.ResponseOptions}],JSONPBackend_}(JSONPBackend);exports.JSONPBackend_=JSONPBackend_},{"../base_response_options":291,"../enums":293,"../facade/exceptions":297,"../facade/lang":298,"../interfaces":302,"../static_response":304,"./browser_jsonp":286,"@angular/core":154,"rxjs/Observable":401}],289:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),platform_browser_1=require("@angular/platform-browser"),Observable_1=require("rxjs/Observable"),base_response_options_1=require("../base_response_options"),enums_1=require("../enums"),lang_1=require("../facade/lang"),headers_1=require("../headers"),http_utils_1=require("../http_utils"),interfaces_1=require("../interfaces"),static_response_1=require("../static_response"),browser_xhr_1=require("./browser_xhr"),XSSI_PREFIX=/^\)\]\}',?\n/,XHRConnection=function(){function XHRConnection(req,browserXHR,baseResponseOptions){var _this=this;this.request=req,this.response=new Observable_1.Observable(function(responseObserver){var _xhr=browserXHR.build();_xhr.open(enums_1.RequestMethod[req.method].toUpperCase(),req.url),lang_1.isPresent(req.withCredentials)&&(_xhr.withCredentials=req.withCredentials);var onLoad=function(){var body=lang_1.isPresent(_xhr.response)?_xhr.response:_xhr.responseText;lang_1.isString(body)&&(body=body.replace(XSSI_PREFIX,""));var headers=headers_1.Headers.fromResponseHeaderString(_xhr.getAllResponseHeaders()),url=http_utils_1.getResponseURL(_xhr),status=1223===_xhr.status?204:_xhr.status;0===status&&(status=body?200:0);var statusText=_xhr.statusText||"OK",responseOptions=new base_response_options_1.ResponseOptions({body:body,status:status,headers:headers,statusText:statusText,url:url});lang_1.isPresent(baseResponseOptions)&&(responseOptions=baseResponseOptions.merge(responseOptions));var response=new static_response_1.Response(responseOptions);return response.ok=http_utils_1.isSuccess(status),response.ok?(responseObserver.next(response),void responseObserver.complete()):void responseObserver.error(response)},onError=function(err){var responseOptions=new base_response_options_1.ResponseOptions({body:err,type:enums_1.ResponseType.Error,status:_xhr.status,statusText:_xhr.statusText});lang_1.isPresent(baseResponseOptions)&&(responseOptions=baseResponseOptions.merge(responseOptions)),responseObserver.error(new static_response_1.Response(responseOptions))};if(_this.setDetectedContentType(req,_xhr),lang_1.isPresent(req.headers)&&req.headers.forEach(function(values,name){return _xhr.setRequestHeader(name,values.join(","))}),lang_1.isPresent(req.responseType)&&lang_1.isPresent(_xhr.responseType))switch(req.responseType){case enums_1.ResponseContentType.ArrayBuffer:_xhr.responseType="arraybuffer";break;case enums_1.ResponseContentType.Json:_xhr.responseType="json";break;case enums_1.ResponseContentType.Text:_xhr.responseType="text";break;case enums_1.ResponseContentType.Blob:_xhr.responseType="blob";break;default:throw new Error("The selected responseType is not supported")}return _xhr.addEventListener("load",onLoad),_xhr.addEventListener("error",onError),_xhr.send(_this.request.getBody()),function(){_xhr.removeEventListener("load",onLoad),_xhr.removeEventListener("error",onError),_xhr.abort()}})}return XHRConnection.prototype.setDetectedContentType=function(req,_xhr){if(!lang_1.isPresent(req.headers)||!lang_1.isPresent(req.headers.get("Content-Type")))switch(req.contentType){case enums_1.ContentType.NONE:break;case enums_1.ContentType.JSON:_xhr.setRequestHeader("content-type","application/json");break;case enums_1.ContentType.FORM:_xhr.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8");break;case enums_1.ContentType.TEXT:_xhr.setRequestHeader("content-type","text/plain");break;case enums_1.ContentType.BLOB:var blob=req.blob();blob.type&&_xhr.setRequestHeader("content-type",blob.type)}},XHRConnection}();exports.XHRConnection=XHRConnection;var CookieXSRFStrategy=function(){function CookieXSRFStrategy(_cookieName,_headerName){void 0===_cookieName&&(_cookieName="XSRF-TOKEN"),void 0===_headerName&&(_headerName="X-XSRF-TOKEN"),this._cookieName=_cookieName,this._headerName=_headerName}return CookieXSRFStrategy.prototype.configureRequest=function(req){var xsrfToken=platform_browser_1.__platform_browser_private__.getDOM().getCookie(this._cookieName);xsrfToken&&!req.headers.has(this._headerName)&&req.headers.set(this._headerName,xsrfToken)},CookieXSRFStrategy}();exports.CookieXSRFStrategy=CookieXSRFStrategy;var XHRBackend=function(){function XHRBackend(_browserXHR,_baseResponseOptions,_xsrfStrategy){this._browserXHR=_browserXHR,this._baseResponseOptions=_baseResponseOptions,this._xsrfStrategy=_xsrfStrategy}return XHRBackend.prototype.createConnection=function(request){return this._xsrfStrategy.configureRequest(request),new XHRConnection(request,this._browserXHR,this._baseResponseOptions)},XHRBackend.decorators=[{type:core_1.Injectable}],XHRBackend.ctorParameters=[{type:browser_xhr_1.BrowserXhr},{type:base_response_options_1.ResponseOptions},{type:interfaces_1.XSRFStrategy}],XHRBackend}();exports.XHRBackend=XHRBackend},{"../base_response_options":291,"../enums":293,"../facade/lang":298,"../headers":299,"../http_utils":301,"../interfaces":302,"../static_response":304,"./browser_xhr":287,"@angular/core":154,"@angular/platform-browser":318,"rxjs/Observable":401}],290:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),lang_1=require("../src/facade/lang"),enums_1=require("./enums"),headers_1=require("./headers"),http_utils_1=require("./http_utils"),url_search_params_1=require("./url_search_params"),RequestOptions=function(){function RequestOptions(_a){var _b=void 0===_a?{}:_a,method=_b.method,headers=_b.headers,body=_b.body,url=_b.url,search=_b.search,withCredentials=_b.withCredentials,responseType=_b.responseType;this.method=lang_1.isPresent(method)?http_utils_1.normalizeMethodName(method):null,this.headers=lang_1.isPresent(headers)?headers:null,this.body=lang_1.isPresent(body)?body:null,this.url=lang_1.isPresent(url)?url:null,this.search=lang_1.isPresent(search)?lang_1.isString(search)?new url_search_params_1.URLSearchParams(search):search:null,this.withCredentials=lang_1.isPresent(withCredentials)?withCredentials:null,this.responseType=lang_1.isPresent(responseType)?responseType:null}return RequestOptions.prototype.merge=function(options){return new RequestOptions({method:lang_1.isPresent(options)&&lang_1.isPresent(options.method)?options.method:this.method,headers:lang_1.isPresent(options)&&lang_1.isPresent(options.headers)?options.headers:this.headers,body:lang_1.isPresent(options)&&lang_1.isPresent(options.body)?options.body:this.body,url:lang_1.isPresent(options)&&lang_1.isPresent(options.url)?options.url:this.url,search:lang_1.isPresent(options)&&lang_1.isPresent(options.search)?lang_1.isString(options.search)?new url_search_params_1.URLSearchParams(options.search):options.search.clone():this.search,withCredentials:lang_1.isPresent(options)&&lang_1.isPresent(options.withCredentials)?options.withCredentials:this.withCredentials,responseType:lang_1.isPresent(options)&&lang_1.isPresent(options.responseType)?options.responseType:this.responseType})},RequestOptions}();exports.RequestOptions=RequestOptions;var BaseRequestOptions=function(_super){function BaseRequestOptions(){_super.call(this,{method:enums_1.RequestMethod.Get,headers:new headers_1.Headers})}return __extends(BaseRequestOptions,_super),BaseRequestOptions.decorators=[{type:core_1.Injectable}],BaseRequestOptions.ctorParameters=[],BaseRequestOptions}(RequestOptions);exports.BaseRequestOptions=BaseRequestOptions},{"../src/facade/lang":298,"./enums":293,"./headers":299,"./http_utils":301,"./url_search_params":305,"@angular/core":154}],291:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),lang_1=require("../src/facade/lang"),enums_1=require("./enums"),headers_1=require("./headers"),ResponseOptions=function(){function ResponseOptions(_a){var _b=void 0===_a?{}:_a,body=_b.body,status=_b.status,headers=_b.headers,statusText=_b.statusText,type=_b.type,url=_b.url;this.body=lang_1.isPresent(body)?body:null,this.status=lang_1.isPresent(status)?status:null,this.headers=lang_1.isPresent(headers)?headers:null,this.statusText=lang_1.isPresent(statusText)?statusText:null,this.type=lang_1.isPresent(type)?type:null,this.url=lang_1.isPresent(url)?url:null}return ResponseOptions.prototype.merge=function(options){return new ResponseOptions({body:lang_1.isPresent(options)&&lang_1.isPresent(options.body)?options.body:this.body,status:lang_1.isPresent(options)&&lang_1.isPresent(options.status)?options.status:this.status,headers:lang_1.isPresent(options)&&lang_1.isPresent(options.headers)?options.headers:this.headers,statusText:lang_1.isPresent(options)&&lang_1.isPresent(options.statusText)?options.statusText:this.statusText,type:lang_1.isPresent(options)&&lang_1.isPresent(options.type)?options.type:this.type,url:lang_1.isPresent(options)&&lang_1.isPresent(options.url)?options.url:this.url})},ResponseOptions}();exports.ResponseOptions=ResponseOptions;var BaseResponseOptions=function(_super){function BaseResponseOptions(){_super.call(this,{status:200,statusText:"Ok",type:enums_1.ResponseType.Default,headers:new headers_1.Headers})}return __extends(BaseResponseOptions,_super),BaseResponseOptions.decorators=[{type:core_1.Injectable}],BaseResponseOptions.ctorParameters=[],BaseResponseOptions}(ResponseOptions);exports.BaseResponseOptions=BaseResponseOptions},{"../src/facade/lang":298,"./enums":293,"./headers":299,"@angular/core":154}],292:[function(require,module,exports){"use strict";var lang_1=require("../src/facade/lang"),http_utils_1=require("./http_utils"),url_search_params_1=require("./url_search_params"),Body=function(){function Body(){}return Body.prototype.json=function(){return lang_1.isString(this._body)?lang_1.Json.parse(this._body):this._body instanceof ArrayBuffer?lang_1.Json.parse(this.text()):this._body},Body.prototype.text=function(){return this._body instanceof url_search_params_1.URLSearchParams?this._body.toString():this._body instanceof ArrayBuffer?String.fromCharCode.apply(null,new Uint16Array(this._body)):http_utils_1.isJsObject(this._body)?lang_1.Json.stringify(this._body):this._body.toString()},Body.prototype.arrayBuffer=function(){return this._body instanceof ArrayBuffer?this._body:http_utils_1.stringToArrayBuffer(this.text())},Body.prototype.blob=function(){if(this._body instanceof Blob)return this._body;if(this._body instanceof ArrayBuffer)return new Blob([this._body]);throw new Error("The request body isn't either a blob or an array buffer")},Body}();exports.Body=Body},{"../src/facade/lang":298,"./http_utils":301,"./url_search_params":305}],293:[function(require,module,exports){"use strict";!function(RequestMethod){RequestMethod[RequestMethod.Get=0]="Get",RequestMethod[RequestMethod.Post=1]="Post",RequestMethod[RequestMethod.Put=2]="Put",RequestMethod[RequestMethod.Delete=3]="Delete",RequestMethod[RequestMethod.Options=4]="Options",RequestMethod[RequestMethod.Head=5]="Head",RequestMethod[RequestMethod.Patch=6]="Patch"}(exports.RequestMethod||(exports.RequestMethod={}));exports.RequestMethod;!function(ReadyState){ReadyState[ReadyState.Unsent=0]="Unsent",ReadyState[ReadyState.Open=1]="Open",ReadyState[ReadyState.HeadersReceived=2]="HeadersReceived",ReadyState[ReadyState.Loading=3]="Loading",ReadyState[ReadyState.Done=4]="Done",ReadyState[ReadyState.Cancelled=5]="Cancelled"}(exports.ReadyState||(exports.ReadyState={}));exports.ReadyState;!function(ResponseType){ResponseType[ResponseType.Basic=0]="Basic",ResponseType[ResponseType.Cors=1]="Cors",ResponseType[ResponseType.Default=2]="Default",ResponseType[ResponseType.Error=3]="Error",ResponseType[ResponseType.Opaque=4]="Opaque"}(exports.ResponseType||(exports.ResponseType={}));exports.ResponseType;!function(ContentType){ContentType[ContentType.NONE=0]="NONE",ContentType[ContentType.JSON=1]="JSON",ContentType[ContentType.FORM=2]="FORM",ContentType[ContentType.FORM_DATA=3]="FORM_DATA",ContentType[ContentType.TEXT=4]="TEXT",ContentType[ContentType.BLOB=5]="BLOB",ContentType[ContentType.ARRAY_BUFFER=6]="ARRAY_BUFFER"}(exports.ContentType||(exports.ContentType={}));exports.ContentType;!function(ResponseContentType){ResponseContentType[ResponseContentType.Text=0]="Text",ResponseContentType[ResponseContentType.Json=1]="Json",ResponseContentType[ResponseContentType.ArrayBuffer=2]="ArrayBuffer",ResponseContentType[ResponseContentType.Blob=3]="Blob"}(exports.ResponseContentType||(exports.ResponseContentType={}));exports.ResponseContentType},{}],294:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],295:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{"./lang":298,dup:14}],296:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"./base_wrapped_exception":294,"./collection":295,"./lang":298,dup:15}],297:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./base_wrapped_exception":294,"./exception_handler":296,dup:16}],298:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],299:[function(require,module,exports){"use strict";function normalize(name){return name.toLowerCase()}var collection_1=require("../src/facade/collection"),exceptions_1=require("../src/facade/exceptions"),lang_1=require("../src/facade/lang"),Headers=function(){function Headers(headers){var _this=this;return headers instanceof Headers?void(this._headersMap=headers._headersMap):(this._headersMap=new collection_1.Map,void(lang_1.isBlank(headers)||collection_1.StringMapWrapper.forEach(headers,function(v,k){_this._headersMap.set(normalize(k),collection_1.isListLikeIterable(v)?v:[v])})))}return Headers.fromResponseHeaderString=function(headersString){var headers=new Headers;return headersString.split("\n").forEach(function(line){var index=line.indexOf(":");if(index>0){var key=line.substring(0,index),value=line.substring(index+1).trim();headers.set(key,value)}}),headers},Headers.prototype.append=function(name,value){name=normalize(name);var mapName=this._headersMap.get(name),list=collection_1.isListLikeIterable(mapName)?mapName:[];list.push(value),this._headersMap.set(name,list)},Headers.prototype.delete=function(name){this._headersMap.delete(normalize(name))},Headers.prototype.forEach=function(fn){this._headersMap.forEach(fn)},Headers.prototype.get=function(header){return collection_1.ListWrapper.first(this._headersMap.get(normalize(header)))},Headers.prototype.has=function(header){return this._headersMap.has(normalize(header))},Headers.prototype.keys=function(){return collection_1.MapWrapper.keys(this._headersMap)},Headers.prototype.set=function(header,value){var list=[];if(collection_1.isListLikeIterable(value)){var pushValue=value.join(",");list.push(pushValue)}else list.push(value);this._headersMap.set(normalize(header),list)},Headers.prototype.values=function(){return collection_1.MapWrapper.values(this._headersMap)},Headers.prototype.toJSON=function(){var serializableHeaders={};return this._headersMap.forEach(function(values,name){var list=[];collection_1.iterateListLike(values,function(val){return list=collection_1.ListWrapper.concat(list,val.split(","))}),serializableHeaders[normalize(name)]=list}),serializableHeaders},Headers.prototype.getAll=function(header){var headers=this._headersMap.get(normalize(header));return collection_1.isListLikeIterable(headers)?headers:[]},Headers.prototype.entries=function(){throw new exceptions_1.BaseException('"entries" method is not implemented on Headers class')},Headers}();exports.Headers=Headers},{"../src/facade/collection":295,"../src/facade/exceptions":297,"../src/facade/lang":298}],300:[function(require,module,exports){"use strict";function httpRequest(backend,request){return backend.createConnection(request).response}function mergeOptions(defaultOpts,providedOpts,method,url){var newOptions=defaultOpts;return lang_1.isPresent(providedOpts)?newOptions.merge(new base_request_options_1.RequestOptions({method:providedOpts.method||method,url:providedOpts.url||url,search:providedOpts.search,headers:providedOpts.headers,body:providedOpts.body,withCredentials:providedOpts.withCredentials,responseType:providedOpts.responseType})):lang_1.isPresent(method)?newOptions.merge(new base_request_options_1.RequestOptions({method:method,url:url})):newOptions.merge(new base_request_options_1.RequestOptions({url:url}))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),exceptions_1=require("../src/facade/exceptions"),lang_1=require("../src/facade/lang"),base_request_options_1=require("./base_request_options"),enums_1=require("./enums"),interfaces_1=require("./interfaces"),static_request_1=require("./static_request"),Http=function(){function Http(_backend,_defaultOptions){this._backend=_backend,this._defaultOptions=_defaultOptions}return Http.prototype.request=function(url,options){var responseObservable;if(lang_1.isString(url))responseObservable=httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions,options,enums_1.RequestMethod.Get,url)));else{if(!(url instanceof static_request_1.Request))throw exceptions_1.makeTypeError("First argument must be a url string or Request instance.");responseObservable=httpRequest(this._backend,url)}return responseObservable},Http.prototype.get=function(url,options){return httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions,options,enums_1.RequestMethod.Get,url)))},Http.prototype.post=function(url,body,options){return httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions.merge(new base_request_options_1.RequestOptions({body:body})),options,enums_1.RequestMethod.Post,url)))},Http.prototype.put=function(url,body,options){return httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions.merge(new base_request_options_1.RequestOptions({body:body})),options,enums_1.RequestMethod.Put,url)))},Http.prototype.delete=function(url,options){return httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions,options,enums_1.RequestMethod.Delete,url)))},Http.prototype.patch=function(url,body,options){return httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions.merge(new base_request_options_1.RequestOptions({body:body})),options,enums_1.RequestMethod.Patch,url)))},Http.prototype.head=function(url,options){return httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions,options,enums_1.RequestMethod.Head,url)))},Http.prototype.options=function(url,options){return httpRequest(this._backend,new static_request_1.Request(mergeOptions(this._defaultOptions,options,enums_1.RequestMethod.Options,url)))},Http.decorators=[{type:core_1.Injectable}],Http.ctorParameters=[{type:interfaces_1.ConnectionBackend},{type:base_request_options_1.RequestOptions}],Http}();exports.Http=Http;var Jsonp=function(_super){function Jsonp(backend,defaultOptions){_super.call(this,backend,defaultOptions)}return __extends(Jsonp,_super),Jsonp.prototype.request=function(url,options){var responseObservable;if(lang_1.isString(url)&&(url=new static_request_1.Request(mergeOptions(this._defaultOptions,options,enums_1.RequestMethod.Get,url))),!(url instanceof static_request_1.Request))throw exceptions_1.makeTypeError("First argument must be a url string or Request instance.");return url.method!==enums_1.RequestMethod.Get&&exceptions_1.makeTypeError("JSONP requests must use GET request method."),responseObservable=httpRequest(this._backend,url)},Jsonp.decorators=[{type:core_1.Injectable}],Jsonp.ctorParameters=[{type:interfaces_1.ConnectionBackend},{type:base_request_options_1.RequestOptions}],Jsonp}(Http);exports.Jsonp=Jsonp},{"../src/facade/exceptions":297,"../src/facade/lang":298,"./base_request_options":290,"./enums":293,"./interfaces":302,"./static_request":303,"@angular/core":154}],301:[function(require,module,exports){"use strict";function normalizeMethodName(method){if(lang_1.isString(method)){var originalMethod=method;if(method=method.replace(/(\w)(\w*)/g,function(g0,g1,g2){return g1.toUpperCase()+g2.toLowerCase()}),method=enums_1.RequestMethod[method],"number"!=typeof method)throw exceptions_1.makeTypeError('Invalid request method. The method "'+originalMethod+'" is not supported.')}return method}function getResponseURL(xhr){return"responseURL"in xhr?xhr.responseURL:/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())?xhr.getResponseHeader("X-Request-URL"):void 0}function stringToArrayBuffer(input){for(var view=new Uint16Array(input.length),i=0,strLen=input.length;i<strLen;i++)view[i]=input.charCodeAt(i);return view.buffer}var exceptions_1=require("../src/facade/exceptions"),lang_1=require("../src/facade/lang"),enums_1=require("./enums");exports.normalizeMethodName=normalizeMethodName,exports.isSuccess=function(status){return status>=200&&status<300},exports.getResponseURL=getResponseURL,exports.stringToArrayBuffer=stringToArrayBuffer;var lang_2=require("../src/facade/lang");exports.isJsObject=lang_2.isJsObject},{"../src/facade/exceptions":297,"../src/facade/lang":298,"./enums":293}],302:[function(require,module,exports){"use strict";var ConnectionBackend=function(){function ConnectionBackend(){}return ConnectionBackend}();exports.ConnectionBackend=ConnectionBackend;var Connection=function(){function Connection(){}return Connection}();exports.Connection=Connection;var XSRFStrategy=function(){function XSRFStrategy(){}return XSRFStrategy}();exports.XSRFStrategy=XSRFStrategy},{}],303:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},lang_1=require("../src/facade/lang"),body_1=require("./body"),enums_1=require("./enums"),headers_1=require("./headers"),http_utils_1=require("./http_utils"),url_search_params_1=require("./url_search_params"),Request=function(_super){function Request(requestOptions){_super.call(this);var url=requestOptions.url;if(this.url=requestOptions.url,lang_1.isPresent(requestOptions.search)){var search=requestOptions.search.toString();if(search.length>0){var prefix="?";lang_1.StringWrapper.contains(this.url,"?")&&(prefix="&"==this.url[this.url.length-1]?"":"&"),this.url=url+prefix+search}}this._body=requestOptions.body,this.method=http_utils_1.normalizeMethodName(requestOptions.method),
this.headers=new headers_1.Headers(requestOptions.headers),this.contentType=this.detectContentType(),this.withCredentials=requestOptions.withCredentials,this.responseType=requestOptions.responseType}return __extends(Request,_super),Request.prototype.detectContentType=function(){switch(this.headers.get("content-type")){case"application/json":return enums_1.ContentType.JSON;case"application/x-www-form-urlencoded":return enums_1.ContentType.FORM;case"multipart/form-data":return enums_1.ContentType.FORM_DATA;case"text/plain":case"text/html":return enums_1.ContentType.TEXT;case"application/octet-stream":return enums_1.ContentType.BLOB;default:return this.detectContentTypeFromBody()}},Request.prototype.detectContentTypeFromBody=function(){return null==this._body?enums_1.ContentType.NONE:this._body instanceof url_search_params_1.URLSearchParams?enums_1.ContentType.FORM:this._body instanceof FormData?enums_1.ContentType.FORM_DATA:this._body instanceof Blob?enums_1.ContentType.BLOB:this._body instanceof ArrayBuffer?enums_1.ContentType.ARRAY_BUFFER:this._body&&"object"==typeof this._body?enums_1.ContentType.JSON:enums_1.ContentType.TEXT},Request.prototype.getBody=function(){switch(this.contentType){case enums_1.ContentType.JSON:return this.text();case enums_1.ContentType.FORM:return this.text();case enums_1.ContentType.FORM_DATA:return this._body;case enums_1.ContentType.TEXT:return this.text();case enums_1.ContentType.BLOB:return this.blob();case enums_1.ContentType.ARRAY_BUFFER:return this.arrayBuffer();default:return null}},Request}(body_1.Body);exports.Request=Request;var noop=function(){},w="object"==typeof window?window:noop,FormData=w.FormData||noop,Blob=w.Blob||noop,ArrayBuffer=w.ArrayBuffer||noop},{"../src/facade/lang":298,"./body":292,"./enums":293,"./headers":299,"./http_utils":301,"./url_search_params":305}],304:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},body_1=require("./body"),Response=function(_super){function Response(responseOptions){_super.call(this),this._body=responseOptions.body,this.status=responseOptions.status,this.ok=this.status>=200&&this.status<=299,this.statusText=responseOptions.statusText,this.headers=responseOptions.headers,this.type=responseOptions.type,this.url=responseOptions.url}return __extends(Response,_super),Response.prototype.toString=function(){return"Response with status: "+this.status+" "+this.statusText+" for URL: "+this.url},Response}(body_1.Body);exports.Response=Response},{"./body":292}],305:[function(require,module,exports){"use strict";function paramParser(rawParams){void 0===rawParams&&(rawParams="");var map=new collection_1.Map;if(rawParams.length>0){var params=rawParams.split("&");params.forEach(function(param){var eqIdx=param.indexOf("="),_a=eqIdx==-1?[param,""]:[param.slice(0,eqIdx),param.slice(eqIdx+1)],key=_a[0],val=_a[1],list=map.get(key)||[];list.push(val),map.set(key,list)})}return map}function standardEncoding(v){return encodeURIComponent(v).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,";").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var collection_1=require("../src/facade/collection"),lang_1=require("../src/facade/lang"),QueryEncoder=function(){function QueryEncoder(){}return QueryEncoder.prototype.encodeKey=function(k){return standardEncoding(k)},QueryEncoder.prototype.encodeValue=function(v){return standardEncoding(v)},QueryEncoder}();exports.QueryEncoder=QueryEncoder;var URLSearchParams=function(){function URLSearchParams(rawParams,queryEncoder){void 0===rawParams&&(rawParams=""),void 0===queryEncoder&&(queryEncoder=new QueryEncoder),this.rawParams=rawParams,this.queryEncoder=queryEncoder,this.paramsMap=paramParser(rawParams)}return URLSearchParams.prototype.clone=function(){var clone=new URLSearchParams("",this.queryEncoder);return clone.appendAll(this),clone},URLSearchParams.prototype.has=function(param){return this.paramsMap.has(param)},URLSearchParams.prototype.get=function(param){var storedParam=this.paramsMap.get(param);return collection_1.isListLikeIterable(storedParam)?collection_1.ListWrapper.first(storedParam):null},URLSearchParams.prototype.getAll=function(param){var mapParam=this.paramsMap.get(param);return lang_1.isPresent(mapParam)?mapParam:[]},URLSearchParams.prototype.set=function(param,val){var mapParam=this.paramsMap.get(param),list=lang_1.isPresent(mapParam)?mapParam:[];collection_1.ListWrapper.clear(list),list.push(val),this.paramsMap.set(param,list)},URLSearchParams.prototype.setAll=function(searchParams){var _this=this;searchParams.paramsMap.forEach(function(value,param){var mapParam=_this.paramsMap.get(param),list=lang_1.isPresent(mapParam)?mapParam:[];collection_1.ListWrapper.clear(list),list.push(value[0]),_this.paramsMap.set(param,list)})},URLSearchParams.prototype.append=function(param,val){var mapParam=this.paramsMap.get(param),list=lang_1.isPresent(mapParam)?mapParam:[];list.push(val),this.paramsMap.set(param,list)},URLSearchParams.prototype.appendAll=function(searchParams){var _this=this;searchParams.paramsMap.forEach(function(value,param){for(var mapParam=_this.paramsMap.get(param),list=lang_1.isPresent(mapParam)?mapParam:[],i=0;i<value.length;++i)list.push(value[i]);_this.paramsMap.set(param,list)})},URLSearchParams.prototype.replaceAll=function(searchParams){var _this=this;searchParams.paramsMap.forEach(function(value,param){var mapParam=_this.paramsMap.get(param),list=lang_1.isPresent(mapParam)?mapParam:[];collection_1.ListWrapper.clear(list);for(var i=0;i<value.length;++i)list.push(value[i]);_this.paramsMap.set(param,list)})},URLSearchParams.prototype.toString=function(){var _this=this,paramsList=[];return this.paramsMap.forEach(function(values,k){values.forEach(function(v){return paramsList.push(_this.queryEncoder.encodeKey(k)+"="+_this.queryEncoder.encodeValue(v))})}),paramsList.join("&")},URLSearchParams.prototype.delete=function(param){this.paramsMap.delete(param)},URLSearchParams}();exports.URLSearchParams=URLSearchParams},{"../src/facade/collection":295,"../src/facade/lang":298}],306:[function(require,module,exports){"use strict";var core_1=require("@angular/core");exports.ReflectionCapabilities=core_1.__core_private__.ReflectionCapabilities,exports.reflector=core_1.__core_private__.reflector,exports.Console=core_1.__core_private__.Console},{"@angular/core":154}],307:[function(require,module,exports){"use strict";function bootstrap(appComponentType,customProviders){var compilerOptions,declarations=[],entryComponents=[],deprecationMessages=[],deprecatedConfiguration=compiler_1.analyzeAppProvidersForDeprecatedConfiguration(customProviders);declarations=deprecatedConfiguration.moduleDeclarations.concat(declarations),compilerOptions=deprecatedConfiguration.compilerOptions,deprecationMessages=deprecatedConfiguration.deprecationMessages;var DynamicModule=function(){function DynamicModule(){}return DynamicModule.decorators=[{type:core_1.NgModule,args:[{providers:customProviders,declarations:declarations.concat([appComponentType]),imports:[platform_browser_1.BrowserModule],entryComponents:entryComponents,bootstrap:[appComponentType],schemas:[core_1.CUSTOM_ELEMENTS_SCHEMA]}]}],DynamicModule}();return exports.platformBrowserDynamic().bootstrapModule(DynamicModule,compilerOptions).then(function(moduleRef){var console=moduleRef.injector.get(core_private_1.Console);deprecationMessages.forEach(function(msg){return console.warn(msg)});var appRef=moduleRef.injector.get(core_1.ApplicationRef);return appRef.components[0]})}function bootstrapWorkerUi(workerScriptUri,customProviders){return void 0===customProviders&&(customProviders=[]),Promise.resolve(platform_browser_1.platformWorkerUi([{provide:platform_browser_1.WORKER_SCRIPT,useValue:workerScriptUri}].concat(customProviders)))}function bootstrapWorkerApp(appComponentType,customProviders){console.warn("bootstrapWorkerApp is deprecated. Create an @NgModule that includes the `WorkerAppModule` and use `bootstrapModule` with the `workerAppDynamicPlatform()` instead.");var deprecatedConfiguration=compiler_1.analyzeAppProvidersForDeprecatedConfiguration(customProviders),declarations=[deprecatedConfiguration.moduleDeclarations.concat([appComponentType])],DynamicModule=function(){function DynamicModule(){}return DynamicModule.decorators=[{type:core_1.NgModule,args:[{providers:customProviders,declarations:declarations,imports:[platform_browser_1.WorkerAppModule],bootstrap:[appComponentType]}]}],DynamicModule}();return exports.platformWorkerAppDynamic().bootstrapModule(DynamicModule,deprecatedConfiguration.compilerOptions).then(function(moduleRef){var console=moduleRef.injector.get(core_private_1.Console);deprecatedConfiguration.deprecationMessages.forEach(function(msg){return console.warn(msg)});var appRef=moduleRef.injector.get(core_1.ApplicationRef);return appRef.components[0]})}var compiler_1=require("@angular/compiler"),core_1=require("@angular/core"),platform_browser_1=require("@angular/platform-browser"),core_private_1=require("./core_private"),platform_providers_1=require("./src/platform_providers"),xhr_cache_1=require("./src/xhr/xhr_cache"),xhr_impl_1=require("./src/xhr/xhr_impl");exports.BROWSER_APP_COMPILER_PROVIDERS=[],exports.CACHED_TEMPLATE_PROVIDER=[{provide:compiler_1.XHR,useClass:xhr_cache_1.CachedXHR}],exports.platformBrowserDynamic=core_1.createPlatformFactory(compiler_1.platformCoreDynamic,"browserDynamic",platform_providers_1.INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS),exports.browserDynamicPlatform=exports.platformBrowserDynamic,exports.bootstrap=bootstrap,exports.bootstrapWorkerUi=bootstrapWorkerUi,exports.platformWorkerAppDynamic=core_1.createPlatformFactory(compiler_1.platformCoreDynamic,"workerAppDynamic",[{provide:core_1.COMPILER_OPTIONS,useValue:{providers:[{provide:compiler_1.XHR,useClass:xhr_impl_1.XHRImpl}]},multi:!0}]),exports.workerAppDynamicPlatform=exports.platformWorkerAppDynamic,exports.bootstrapWorkerApp=bootstrapWorkerApp},{"./core_private":306,"./src/platform_providers":314,"./src/xhr/xhr_cache":315,"./src/xhr/xhr_impl":316,"@angular/compiler":65,"@angular/core":154,"@angular/platform-browser":318}],308:[function(require,module,exports){"use strict";var platform_browser_1=require("@angular/platform-browser");exports.INTERNAL_BROWSER_PLATFORM_PROVIDERS=platform_browser_1.__platform_browser_private__.INTERNAL_BROWSER_PLATFORM_PROVIDERS,exports.getDOM=platform_browser_1.__platform_browser_private__.getDOM},{"@angular/platform-browser":318}],309:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],310:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{"./lang":313,dup:14}],311:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"./base_wrapped_exception":309,"./collection":310,"./lang":313,dup:15}],312:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./base_wrapped_exception":309,"./exception_handler":311,dup:16}],313:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],314:[function(require,module,exports){"use strict";var compiler_1=require("@angular/compiler"),core_1=require("@angular/core"),platform_browser_private_1=require("../platform_browser_private"),xhr_impl_1=require("./xhr/xhr_impl");exports.INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS=[platform_browser_private_1.INTERNAL_BROWSER_PLATFORM_PROVIDERS,{provide:core_1.COMPILER_OPTIONS,useValue:{providers:[{provide:compiler_1.XHR,useClass:xhr_impl_1.XHRImpl}]},multi:!0}]},{"../platform_browser_private":308,"./xhr/xhr_impl":316,"@angular/compiler":65,"@angular/core":154}],315:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},compiler_1=require("@angular/compiler"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),CachedXHR=function(_super){function CachedXHR(){if(_super.call(this),this._cache=lang_1.global.$templateCache,null==this._cache)throw new exceptions_1.BaseException("CachedXHR: Template cache was not found in $templateCache.")}return __extends(CachedXHR,_super),CachedXHR.prototype.get=function(url){return this._cache.hasOwnProperty(url)?Promise.resolve(this._cache[url]):Promise.reject("CachedXHR: Did not find cached template for "+url)},CachedXHR}(compiler_1.XHR);exports.CachedXHR=CachedXHR},{"../facade/exceptions":312,"../facade/lang":313,"@angular/compiler":65}],316:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},compiler_1=require("@angular/compiler"),core_1=require("@angular/core"),lang_1=require("../facade/lang"),XHRImpl=function(_super){function XHRImpl(){_super.apply(this,arguments)}return __extends(XHRImpl,_super),XHRImpl.prototype.get=function(url){var resolve,reject,promise=new Promise(function(res,rej){resolve=res,reject=rej}),xhr=new XMLHttpRequest;return xhr.open("GET",url,!0),xhr.responseType="text",xhr.onload=function(){var response=lang_1.isPresent(xhr.response)?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:0),200<=status&&status<=300?resolve(response):reject("Failed to load "+url)},xhr.onerror=function(){reject("Failed to load "+url)},xhr.send(),promise},XHRImpl.decorators=[{type:core_1.Injectable}],XHRImpl}(compiler_1.XHR);exports.XHRImpl=XHRImpl},{"../facade/lang":313,"@angular/compiler":65,"@angular/core":154}],317:[function(require,module,exports){"use strict";var core_1=require("@angular/core");exports.RenderDebugInfo=core_1.__core_private__.RenderDebugInfo,exports.wtfInit=core_1.__core_private__.wtfInit,exports.ReflectionCapabilities=core_1.__core_private__.ReflectionCapabilities,exports.VIEW_ENCAPSULATION_VALUES=core_1.__core_private__.VIEW_ENCAPSULATION_VALUES,exports.DebugDomRootRenderer=core_1.__core_private__.DebugDomRootRenderer,exports.reflector=core_1.__core_private__.reflector,exports.NoOpAnimationPlayer=core_1.__core_private__.NoOpAnimationPlayer,exports.AnimationPlayer=core_1.__core_private__.AnimationPlayer,exports.AnimationSequencePlayer=core_1.__core_private__.AnimationSequencePlayer,exports.AnimationGroupPlayer=core_1.__core_private__.AnimationGroupPlayer,exports.AnimationKeyframe=core_1.__core_private__.AnimationKeyframe,exports.AnimationStyles=core_1.__core_private__.AnimationStyles,exports.prepareFinalAnimationStyles=core_1.__core_private__.prepareFinalAnimationStyles,exports.balanceAnimationKeyframes=core_1.__core_private__.balanceAnimationKeyframes,exports.flattenStyles=core_1.__core_private__.flattenStyles,exports.clearStyles=core_1.__core_private__.clearStyles,exports.collectAndResolveStyles=core_1.__core_private__.collectAndResolveStyles},{"@angular/core":154}],318:[function(require,module,exports){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var browser_1=require("./src/browser");exports.BROWSER_APP_PROVIDERS=browser_1.BROWSER_APP_PROVIDERS,exports.BROWSER_PLATFORM_PROVIDERS=browser_1.BROWSER_PLATFORM_PROVIDERS,exports.BROWSER_SANITIZATION_PROVIDERS=browser_1.BROWSER_SANITIZATION_PROVIDERS,exports.BrowserModule=browser_1.BrowserModule,exports.browserPlatform=browser_1.browserPlatform,exports.platformBrowser=browser_1.platformBrowser;var browser_platform_location_1=require("./src/browser/location/browser_platform_location");exports.BrowserPlatformLocation=browser_platform_location_1.BrowserPlatformLocation;var title_1=require("./src/browser/title");exports.Title=title_1.Title;var tools_1=require("./src/browser/tools/tools");exports.disableDebugTools=tools_1.disableDebugTools,exports.enableDebugTools=tools_1.enableDebugTools;var animation_driver_1=require("./src/dom/animation_driver");exports.AnimationDriver=animation_driver_1.AnimationDriver;var by_1=require("./src/dom/debug/by");exports.By=by_1.By;var dom_tokens_1=require("./src/dom/dom_tokens");exports.DOCUMENT=dom_tokens_1.DOCUMENT;var event_manager_1=require("./src/dom/events/event_manager");exports.EVENT_MANAGER_PLUGINS=event_manager_1.EVENT_MANAGER_PLUGINS,exports.EventManager=event_manager_1.EventManager;var hammer_gestures_1=require("./src/dom/events/hammer_gestures");exports.HAMMER_GESTURE_CONFIG=hammer_gestures_1.HAMMER_GESTURE_CONFIG,exports.HammerGestureConfig=hammer_gestures_1.HammerGestureConfig;var dom_sanitization_service_1=require("./src/security/dom_sanitization_service");exports.DomSanitizationService=dom_sanitization_service_1.DomSanitizationService;var client_message_broker_1=require("./src/web_workers/shared/client_message_broker");exports.ClientMessageBroker=client_message_broker_1.ClientMessageBroker,exports.ClientMessageBrokerFactory=client_message_broker_1.ClientMessageBrokerFactory,exports.FnArg=client_message_broker_1.FnArg,exports.UiArguments=client_message_broker_1.UiArguments;var serializer_1=require("./src/web_workers/shared/serializer");exports.PRIMITIVE=serializer_1.PRIMITIVE;var service_message_broker_1=require("./src/web_workers/shared/service_message_broker");exports.ReceivedMessage=service_message_broker_1.ReceivedMessage,exports.ServiceMessageBroker=service_message_broker_1.ServiceMessageBroker,exports.ServiceMessageBrokerFactory=service_message_broker_1.ServiceMessageBrokerFactory,__export(require("./src/web_workers/shared/message_bus"));var location_providers_1=require("./src/web_workers/worker/location_providers");exports.WORKER_APP_LOCATION_PROVIDERS=location_providers_1.WORKER_APP_LOCATION_PROVIDERS;var location_providers_2=require("./src/web_workers/ui/location_providers");exports.WORKER_UI_LOCATION_PROVIDERS=location_providers_2.WORKER_UI_LOCATION_PROVIDERS,__export(require("./src/worker_render")),__export(require("./src/worker_app")),__export(require("./private_export"))},{"./private_export":319,"./src/browser":320,"./src/browser/location/browser_platform_location":323,"./src/browser/title":326,"./src/browser/tools/tools":328,"./src/dom/animation_driver":329,"./src/dom/debug/by":330,"./src/dom/dom_tokens":334,"./src/dom/events/event_manager":336,"./src/dom/events/hammer_gestures":338,"./src/security/dom_sanitization_service":351,"./src/web_workers/shared/client_message_broker":356,"./src/web_workers/shared/message_bus":357,"./src/web_workers/shared/serializer":362,"./src/web_workers/shared/service_message_broker":363,"./src/web_workers/ui/location_providers":366,"./src/web_workers/worker/location_providers":370,"./src/worker_app":374,"./src/worker_render":375}],319:[function(require,module,exports){"use strict";var browser=require("./src/browser"),ng_proble=require("./src/dom/debug/ng_probe"),dom_adapter=require("./src/dom/dom_adapter"),dom_renderer=require("./src/dom/dom_renderer"),dom_events=require("./src/dom/events/dom_events"),shared_styles_host=require("./src/dom/shared_styles_host");exports.__platform_browser_private__={DomAdapter:dom_adapter.DomAdapter,getDOM:dom_adapter.getDOM,setRootDomAdapter:dom_adapter.setRootDomAdapter,DomRootRenderer:dom_renderer.DomRootRenderer,DomRootRenderer_:dom_renderer.DomRootRenderer_,DomSharedStylesHost:shared_styles_host.DomSharedStylesHost,SharedStylesHost:shared_styles_host.SharedStylesHost,ELEMENT_PROBE_PROVIDERS:ng_proble.ELEMENT_PROBE_PROVIDERS,DomEventsPlugin:dom_events.DomEventsPlugin,initDomAdapter:browser.initDomAdapter,INTERNAL_BROWSER_PLATFORM_PROVIDERS:browser.INTERNAL_BROWSER_PLATFORM_PROVIDERS}},{"./src/browser":320,"./src/dom/debug/ng_probe":331,"./src/dom/dom_adapter":332,"./src/dom/dom_renderer":333,"./src/dom/events/dom_events":335,"./src/dom/shared_styles_host":340}],320:[function(require,module,exports){"use strict";function initDomAdapter(){browser_adapter_1.BrowserDomAdapter.makeCurrent(),core_private_1.wtfInit(),testability_1.BrowserGetTestability.init()}function _exceptionHandler(){return new core_1.ExceptionHandler(dom_adapter_1.getDOM())}function _document(){return dom_adapter_1.getDOM().defaultDoc()}function _resolveDefaultAnimationDriver(){return dom_adapter_1.getDOM().supportsWebAnimation()?new web_animations_driver_1.WebAnimationsDriver:animation_driver_1.AnimationDriver.NOOP}var common_1=require("@angular/common"),core_1=require("@angular/core"),core_private_1=require("../core_private"),animation_driver_1=require("../src/dom/animation_driver"),web_animations_driver_1=require("../src/dom/web_animations_driver"),browser_adapter_1=require("./browser/browser_adapter"),browser_platform_location_1=require("./browser/location/browser_platform_location"),testability_1=require("./browser/testability"),ng_probe_1=require("./dom/debug/ng_probe"),dom_adapter_1=require("./dom/dom_adapter"),dom_renderer_1=require("./dom/dom_renderer"),dom_tokens_1=require("./dom/dom_tokens"),dom_events_1=require("./dom/events/dom_events"),event_manager_1=require("./dom/events/event_manager"),hammer_gestures_1=require("./dom/events/hammer_gestures"),key_events_1=require("./dom/events/key_events"),shared_styles_host_1=require("./dom/shared_styles_host"),dom_sanitization_service_1=require("./security/dom_sanitization_service");exports.INTERNAL_BROWSER_PLATFORM_PROVIDERS=[{provide:core_1.PLATFORM_INITIALIZER,useValue:initDomAdapter,multi:!0},{provide:common_1.PlatformLocation,useClass:browser_platform_location_1.BrowserPlatformLocation}],exports.BROWSER_PLATFORM_PROVIDERS=[core_1.PLATFORM_COMMON_PROVIDERS,exports.INTERNAL_BROWSER_PLATFORM_PROVIDERS],exports.BROWSER_SANITIZATION_PROVIDERS=[{provide:core_1.SanitizationService,useExisting:dom_sanitization_service_1.DomSanitizationService},{provide:dom_sanitization_service_1.DomSanitizationService,useClass:dom_sanitization_service_1.DomSanitizationServiceImpl}],exports.BROWSER_APP_PROVIDERS=[],exports.platformBrowser=core_1.createPlatformFactory(core_1.platformCore,"browser",exports.INTERNAL_BROWSER_PLATFORM_PROVIDERS),exports.browserPlatform=exports.platformBrowser,exports.initDomAdapter=initDomAdapter,exports._exceptionHandler=_exceptionHandler,exports._document=_document,exports._resolveDefaultAnimationDriver=_resolveDefaultAnimationDriver;var BrowserModule=function(){function BrowserModule(){}return BrowserModule.decorators=[{type:core_1.NgModule,args:[{providers:[exports.BROWSER_SANITIZATION_PROVIDERS,{provide:core_1.ExceptionHandler,useFactory:_exceptionHandler,deps:[]},{provide:dom_tokens_1.DOCUMENT,useFactory:_document,deps:[]},{provide:event_manager_1.EVENT_MANAGER_PLUGINS,useClass:dom_events_1.DomEventsPlugin,multi:!0},{provide:event_manager_1.EVENT_MANAGER_PLUGINS,useClass:key_events_1.KeyEventsPlugin,multi:!0},{provide:event_manager_1.EVENT_MANAGER_PLUGINS,useClass:hammer_gestures_1.HammerGesturesPlugin,multi:!0},{provide:hammer_gestures_1.HAMMER_GESTURE_CONFIG,useClass:hammer_gestures_1.HammerGestureConfig},{provide:dom_renderer_1.DomRootRenderer,useClass:dom_renderer_1.DomRootRenderer_},{provide:core_1.RootRenderer,useExisting:dom_renderer_1.DomRootRenderer},{provide:shared_styles_host_1.SharedStylesHost,useExisting:shared_styles_host_1.DomSharedStylesHost},{provide:animation_driver_1.AnimationDriver,useFactory:_resolveDefaultAnimationDriver},shared_styles_host_1.DomSharedStylesHost,core_1.Testability,event_manager_1.EventManager,ng_probe_1.ELEMENT_PROBE_PROVIDERS],exports:[common_1.CommonModule,core_1.ApplicationModule]}]}],BrowserModule}();exports.BrowserModule=BrowserModule},{"../core_private":317,"../src/dom/animation_driver":329,"../src/dom/web_animations_driver":342,"./browser/browser_adapter":321,"./browser/location/browser_platform_location":323,"./browser/testability":325,"./dom/debug/ng_probe":331,"./dom/dom_adapter":332,"./dom/dom_renderer":333,"./dom/dom_tokens":334,"./dom/events/dom_events":335,"./dom/events/event_manager":336,"./dom/events/hammer_gestures":338,"./dom/events/key_events":339,"./dom/shared_styles_host":340,"./security/dom_sanitization_service":351,"@angular/common":1,"@angular/core":154}],321:[function(require,module,exports){"use strict";function getBaseElementHref(){return lang_1.isBlank(baseElement)&&(baseElement=document.querySelector("base"),lang_1.isBlank(baseElement))?null:baseElement.getAttribute("href")}function relativePath(url){return lang_1.isBlank(urlParsingNode)&&(urlParsingNode=document.createElement("a")),urlParsingNode.setAttribute("href",url),"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}function parseCookieValue(cookieStr,name){name=encodeURIComponent(name);for(var _i=0,_a=cookieStr.split(";");_i<_a.length;_i++){var cookie=_a[_i],eqIndex=cookie.indexOf("="),_b=eqIndex==-1?[cookie,""]:[cookie.slice(0,eqIndex),cookie.slice(eqIndex+1)],cookieName=_b[0],cookieValue=_b[1];if(cookieName.trim()===name)return decodeURIComponent(cookieValue)}return null}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},dom_adapter_1=require("../dom/dom_adapter"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),generic_browser_adapter_1=require("./generic_browser_adapter"),_attrToPropMap={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},DOM_KEY_LOCATION_NUMPAD=3,_keyMap={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_chromeNumKeyPadMap={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"},BrowserDomAdapter=function(_super){function BrowserDomAdapter(){_super.apply(this,arguments)}return __extends(BrowserDomAdapter,_super),BrowserDomAdapter.prototype.parse=function(templateHtml){throw new Error("parse not implemented")},BrowserDomAdapter.makeCurrent=function(){dom_adapter_1.setRootDomAdapter(new BrowserDomAdapter)},BrowserDomAdapter.prototype.hasProperty=function(element,name){return name in element},BrowserDomAdapter.prototype.setProperty=function(el,name,value){el[name]=value},BrowserDomAdapter.prototype.getProperty=function(el,name){return el[name]},BrowserDomAdapter.prototype.invoke=function(el,methodName,args){el[methodName].apply(el,args)},BrowserDomAdapter.prototype.logError=function(error){window.console.error?window.console.error(error):window.console.log(error)},BrowserDomAdapter.prototype.log=function(error){window.console.log(error)},BrowserDomAdapter.prototype.logGroup=function(error){window.console.group?(window.console.group(error),this.logError(error)):window.console.log(error)},BrowserDomAdapter.prototype.logGroupEnd=function(){window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(BrowserDomAdapter.prototype,"attrToPropMap",{get:function(){return _attrToPropMap},enumerable:!0,configurable:!0}),BrowserDomAdapter.prototype.query=function(selector){return document.querySelector(selector)},BrowserDomAdapter.prototype.querySelector=function(el,selector){return el.querySelector(selector)},BrowserDomAdapter.prototype.querySelectorAll=function(el,selector){return el.querySelectorAll(selector)},BrowserDomAdapter.prototype.on=function(el,evt,listener){el.addEventListener(evt,listener,!1)},BrowserDomAdapter.prototype.onAndCancel=function(el,evt,listener){return el.addEventListener(evt,listener,!1),function(){el.removeEventListener(evt,listener,!1)}},BrowserDomAdapter.prototype.dispatchEvent=function(el,evt){el.dispatchEvent(evt)},BrowserDomAdapter.prototype.createMouseEvent=function(eventType){var evt=document.createEvent("MouseEvent");return evt.initEvent(eventType,!0,!0),evt},BrowserDomAdapter.prototype.createEvent=function(eventType){var evt=document.createEvent("Event");return evt.initEvent(eventType,!0,!0),evt},BrowserDomAdapter.prototype.preventDefault=function(evt){evt.preventDefault(),evt.returnValue=!1},BrowserDomAdapter.prototype.isPrevented=function(evt){return evt.defaultPrevented||lang_1.isPresent(evt.returnValue)&&!evt.returnValue},BrowserDomAdapter.prototype.getInnerHTML=function(el){return el.innerHTML},BrowserDomAdapter.prototype.getTemplateContent=function(el){return"content"in el&&el instanceof HTMLTemplateElement?el.content:null},BrowserDomAdapter.prototype.getOuterHTML=function(el){return el.outerHTML},BrowserDomAdapter.prototype.nodeName=function(node){return node.nodeName},BrowserDomAdapter.prototype.nodeValue=function(node){return node.nodeValue},BrowserDomAdapter.prototype.type=function(node){return node.type},BrowserDomAdapter.prototype.content=function(node){return this.hasProperty(node,"content")?node.content:node},BrowserDomAdapter.prototype.firstChild=function(el){return el.firstChild},BrowserDomAdapter.prototype.nextSibling=function(el){return el.nextSibling},BrowserDomAdapter.prototype.parentElement=function(el){return el.parentNode},BrowserDomAdapter.prototype.childNodes=function(el){return el.childNodes},BrowserDomAdapter.prototype.childNodesAsList=function(el){for(var childNodes=el.childNodes,res=collection_1.ListWrapper.createFixedSize(childNodes.length),i=0;i<childNodes.length;i++)res[i]=childNodes[i];return res},BrowserDomAdapter.prototype.clearNodes=function(el){for(;el.firstChild;)el.removeChild(el.firstChild)},BrowserDomAdapter.prototype.appendChild=function(el,node){el.appendChild(node)},BrowserDomAdapter.prototype.removeChild=function(el,node){el.removeChild(node)},BrowserDomAdapter.prototype.replaceChild=function(el,newChild,oldChild){el.replaceChild(newChild,oldChild)},BrowserDomAdapter.prototype.remove=function(node){return node.parentNode&&node.parentNode.removeChild(node),node},BrowserDomAdapter.prototype.insertBefore=function(el,node){el.parentNode.insertBefore(node,el)},BrowserDomAdapter.prototype.insertAllBefore=function(el,nodes){nodes.forEach(function(n){return el.parentNode.insertBefore(n,el)})},BrowserDomAdapter.prototype.insertAfter=function(el,node){el.parentNode.insertBefore(node,el.nextSibling)},BrowserDomAdapter.prototype.setInnerHTML=function(el,value){el.innerHTML=value},BrowserDomAdapter.prototype.getText=function(el){return el.textContent},BrowserDomAdapter.prototype.setText=function(el,value){el.textContent=value},BrowserDomAdapter.prototype.getValue=function(el){return el.value},BrowserDomAdapter.prototype.setValue=function(el,value){el.value=value},BrowserDomAdapter.prototype.getChecked=function(el){return el.checked},BrowserDomAdapter.prototype.setChecked=function(el,value){el.checked=value},BrowserDomAdapter.prototype.createComment=function(text){return document.createComment(text)},BrowserDomAdapter.prototype.createTemplate=function(html){var t=document.createElement("template");return t.innerHTML=html,t},BrowserDomAdapter.prototype.createElement=function(tagName,doc){return void 0===doc&&(doc=document),doc.createElement(tagName)},BrowserDomAdapter.prototype.createElementNS=function(ns,tagName,doc){return void 0===doc&&(doc=document),doc.createElementNS(ns,tagName)},BrowserDomAdapter.prototype.createTextNode=function(text,doc){return void 0===doc&&(doc=document),doc.createTextNode(text)},BrowserDomAdapter.prototype.createScriptTag=function(attrName,attrValue,doc){void 0===doc&&(doc=document);var el=doc.createElement("SCRIPT");return el.setAttribute(attrName,attrValue),el},BrowserDomAdapter.prototype.createStyleElement=function(css,doc){void 0===doc&&(doc=document);var style=doc.createElement("style");return this.appendChild(style,this.createTextNode(css)),style},BrowserDomAdapter.prototype.createShadowRoot=function(el){return el.createShadowRoot()},BrowserDomAdapter.prototype.getShadowRoot=function(el){
return el.shadowRoot},BrowserDomAdapter.prototype.getHost=function(el){return el.host},BrowserDomAdapter.prototype.clone=function(node){return node.cloneNode(!0)},BrowserDomAdapter.prototype.getElementsByClassName=function(element,name){return element.getElementsByClassName(name)},BrowserDomAdapter.prototype.getElementsByTagName=function(element,name){return element.getElementsByTagName(name)},BrowserDomAdapter.prototype.classList=function(element){return Array.prototype.slice.call(element.classList,0)},BrowserDomAdapter.prototype.addClass=function(element,className){element.classList.add(className)},BrowserDomAdapter.prototype.removeClass=function(element,className){element.classList.remove(className)},BrowserDomAdapter.prototype.hasClass=function(element,className){return element.classList.contains(className)},BrowserDomAdapter.prototype.setStyle=function(element,styleName,styleValue){element.style[styleName]=styleValue},BrowserDomAdapter.prototype.removeStyle=function(element,stylename){element.style[stylename]=null},BrowserDomAdapter.prototype.getStyle=function(element,stylename){return element.style[stylename]},BrowserDomAdapter.prototype.hasStyle=function(element,styleName,styleValue){void 0===styleValue&&(styleValue=null);var value=this.getStyle(element,styleName)||"";return styleValue?value==styleValue:value.length>0},BrowserDomAdapter.prototype.tagName=function(element){return element.tagName},BrowserDomAdapter.prototype.attributeMap=function(element){for(var res=new Map,elAttrs=element.attributes,i=0;i<elAttrs.length;i++){var attrib=elAttrs[i];res.set(attrib.name,attrib.value)}return res},BrowserDomAdapter.prototype.hasAttribute=function(element,attribute){return element.hasAttribute(attribute)},BrowserDomAdapter.prototype.hasAttributeNS=function(element,ns,attribute){return element.hasAttributeNS(ns,attribute)},BrowserDomAdapter.prototype.getAttribute=function(element,attribute){return element.getAttribute(attribute)},BrowserDomAdapter.prototype.getAttributeNS=function(element,ns,name){return element.getAttributeNS(ns,name)},BrowserDomAdapter.prototype.setAttribute=function(element,name,value){element.setAttribute(name,value)},BrowserDomAdapter.prototype.setAttributeNS=function(element,ns,name,value){element.setAttributeNS(ns,name,value)},BrowserDomAdapter.prototype.removeAttribute=function(element,attribute){element.removeAttribute(attribute)},BrowserDomAdapter.prototype.removeAttributeNS=function(element,ns,name){element.removeAttributeNS(ns,name)},BrowserDomAdapter.prototype.templateAwareRoot=function(el){return this.isTemplateElement(el)?this.content(el):el},BrowserDomAdapter.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},BrowserDomAdapter.prototype.defaultDoc=function(){return document},BrowserDomAdapter.prototype.getBoundingClientRect=function(el){try{return el.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},BrowserDomAdapter.prototype.getTitle=function(){return document.title},BrowserDomAdapter.prototype.setTitle=function(newTitle){document.title=newTitle||""},BrowserDomAdapter.prototype.elementMatches=function(n,selector){var matches=!1;return n instanceof HTMLElement&&(n.matches?matches=n.matches(selector):n.msMatchesSelector?matches=n.msMatchesSelector(selector):n.webkitMatchesSelector&&(matches=n.webkitMatchesSelector(selector))),matches},BrowserDomAdapter.prototype.isTemplateElement=function(el){return el instanceof HTMLElement&&"TEMPLATE"==el.nodeName},BrowserDomAdapter.prototype.isTextNode=function(node){return node.nodeType===Node.TEXT_NODE},BrowserDomAdapter.prototype.isCommentNode=function(node){return node.nodeType===Node.COMMENT_NODE},BrowserDomAdapter.prototype.isElementNode=function(node){return node.nodeType===Node.ELEMENT_NODE},BrowserDomAdapter.prototype.hasShadowRoot=function(node){return node instanceof HTMLElement&&lang_1.isPresent(node.shadowRoot)},BrowserDomAdapter.prototype.isShadowRoot=function(node){return node instanceof DocumentFragment},BrowserDomAdapter.prototype.importIntoDoc=function(node){var toImport=node;return this.isTemplateElement(node)&&(toImport=this.content(node)),document.importNode(toImport,!0)},BrowserDomAdapter.prototype.adoptNode=function(node){return document.adoptNode(node)},BrowserDomAdapter.prototype.getHref=function(el){return el.href},BrowserDomAdapter.prototype.getEventKey=function(event){var key=event.key;if(lang_1.isBlank(key)){if(key=event.keyIdentifier,lang_1.isBlank(key))return"Unidentified";key.startsWith("U+")&&(key=String.fromCharCode(parseInt(key.substring(2),16)),event.location===DOM_KEY_LOCATION_NUMPAD&&_chromeNumKeyPadMap.hasOwnProperty(key)&&(key=_chromeNumKeyPadMap[key]))}return _keyMap.hasOwnProperty(key)&&(key=_keyMap[key]),key},BrowserDomAdapter.prototype.getGlobalEventTarget=function(target){return"window"==target?window:"document"==target?document:"body"==target?document.body:void 0},BrowserDomAdapter.prototype.getHistory=function(){return window.history},BrowserDomAdapter.prototype.getLocation=function(){return window.location},BrowserDomAdapter.prototype.getBaseHref=function(){var href=getBaseElementHref();return lang_1.isBlank(href)?null:relativePath(href)},BrowserDomAdapter.prototype.resetBaseElement=function(){baseElement=null},BrowserDomAdapter.prototype.getUserAgent=function(){return window.navigator.userAgent},BrowserDomAdapter.prototype.setData=function(element,name,value){this.setAttribute(element,"data-"+name,value)},BrowserDomAdapter.prototype.getData=function(element,name){return this.getAttribute(element,"data-"+name)},BrowserDomAdapter.prototype.getComputedStyle=function(element){return getComputedStyle(element)},BrowserDomAdapter.prototype.setGlobalVar=function(path,value){lang_1.setValueOnPath(lang_1.global,path,value)},BrowserDomAdapter.prototype.requestAnimationFrame=function(callback){return window.requestAnimationFrame(callback)},BrowserDomAdapter.prototype.cancelAnimationFrame=function(id){window.cancelAnimationFrame(id)},BrowserDomAdapter.prototype.supportsWebAnimation=function(){return lang_1.isFunction(Element.prototype.animate)},BrowserDomAdapter.prototype.performanceNow=function(){return lang_1.isPresent(window.performance)&&lang_1.isPresent(window.performance.now)?window.performance.now():lang_1.DateWrapper.toMillis(lang_1.DateWrapper.now())},BrowserDomAdapter.prototype.supportsCookies=function(){return!0},BrowserDomAdapter.prototype.getCookie=function(name){return parseCookieValue(document.cookie,name)},BrowserDomAdapter.prototype.setCookie=function(name,value){document.cookie=encodeURIComponent(name)+"="+encodeURIComponent(value)},BrowserDomAdapter}(generic_browser_adapter_1.GenericBrowserDomAdapter);exports.BrowserDomAdapter=BrowserDomAdapter;var baseElement=null,urlParsingNode=null;exports.parseCookieValue=parseCookieValue},{"../dom/dom_adapter":332,"../facade/collection":347,"../facade/lang":350,"./generic_browser_adapter":322}],322:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},dom_adapter_1=require("../dom/dom_adapter"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),GenericBrowserDomAdapter=function(_super){function GenericBrowserDomAdapter(){var _this=this;_super.call(this),this._animationPrefix=null,this._transitionEnd=null;try{var element=this.createElement("div",this.defaultDoc());if(lang_1.isPresent(this.getStyle(element,"animationName")))this._animationPrefix="";else for(var domPrefixes=["Webkit","Moz","O","ms"],i=0;i<domPrefixes.length;i++)if(lang_1.isPresent(this.getStyle(element,domPrefixes[i]+"AnimationName"))){this._animationPrefix="-"+domPrefixes[i].toLowerCase()+"-";break}var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};collection_1.StringMapWrapper.forEach(transEndEventNames,function(value,key){lang_1.isPresent(_this.getStyle(element,key))&&(_this._transitionEnd=value)})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}return __extends(GenericBrowserDomAdapter,_super),GenericBrowserDomAdapter.prototype.getDistributedNodes=function(el){return el.getDistributedNodes()},GenericBrowserDomAdapter.prototype.resolveAndSetHref=function(el,baseUrl,href){el.href=null==href?baseUrl:baseUrl+"/../"+href},GenericBrowserDomAdapter.prototype.supportsDOMEvents=function(){return!0},GenericBrowserDomAdapter.prototype.supportsNativeShadowDOM=function(){return lang_1.isFunction(this.defaultDoc().body.createShadowRoot)},GenericBrowserDomAdapter.prototype.getAnimationPrefix=function(){return lang_1.isPresent(this._animationPrefix)?this._animationPrefix:""},GenericBrowserDomAdapter.prototype.getTransitionEnd=function(){return lang_1.isPresent(this._transitionEnd)?this._transitionEnd:""},GenericBrowserDomAdapter.prototype.supportsAnimation=function(){return lang_1.isPresent(this._animationPrefix)&&lang_1.isPresent(this._transitionEnd)},GenericBrowserDomAdapter}(dom_adapter_1.DomAdapter);exports.GenericBrowserDomAdapter=GenericBrowserDomAdapter},{"../dom/dom_adapter":332,"../facade/collection":347,"../facade/lang":350}],323:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},common_1=require("@angular/common"),core_1=require("@angular/core"),dom_adapter_1=require("../../dom/dom_adapter"),history_1=require("./history"),BrowserPlatformLocation=function(_super){function BrowserPlatformLocation(){_super.call(this),this._init()}return __extends(BrowserPlatformLocation,_super),BrowserPlatformLocation.prototype._init=function(){this._location=dom_adapter_1.getDOM().getLocation(),this._history=dom_adapter_1.getDOM().getHistory()},Object.defineProperty(BrowserPlatformLocation.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),BrowserPlatformLocation.prototype.getBaseHrefFromDOM=function(){return dom_adapter_1.getDOM().getBaseHref()},BrowserPlatformLocation.prototype.onPopState=function(fn){dom_adapter_1.getDOM().getGlobalEventTarget("window").addEventListener("popstate",fn,!1)},BrowserPlatformLocation.prototype.onHashChange=function(fn){dom_adapter_1.getDOM().getGlobalEventTarget("window").addEventListener("hashchange",fn,!1)},Object.defineProperty(BrowserPlatformLocation.prototype,"pathname",{get:function(){return this._location.pathname},set:function(newPath){this._location.pathname=newPath},enumerable:!0,configurable:!0}),Object.defineProperty(BrowserPlatformLocation.prototype,"search",{get:function(){return this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(BrowserPlatformLocation.prototype,"hash",{get:function(){return this._location.hash},enumerable:!0,configurable:!0}),BrowserPlatformLocation.prototype.pushState=function(state,title,url){history_1.supportsState()?this._history.pushState(state,title,url):this._location.hash=url},BrowserPlatformLocation.prototype.replaceState=function(state,title,url){history_1.supportsState()?this._history.replaceState(state,title,url):this._location.hash=url},BrowserPlatformLocation.prototype.forward=function(){this._history.forward()},BrowserPlatformLocation.prototype.back=function(){this._history.back()},BrowserPlatformLocation.decorators=[{type:core_1.Injectable}],BrowserPlatformLocation.ctorParameters=[],BrowserPlatformLocation}(common_1.PlatformLocation);exports.BrowserPlatformLocation=BrowserPlatformLocation},{"../../dom/dom_adapter":332,"./history":324,"@angular/common":1,"@angular/core":154}],324:[function(require,module,exports){"use strict";function supportsState(){return!!window.history.pushState}exports.supportsState=supportsState},{}],325:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),dom_adapter_1=require("../dom/dom_adapter"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),PublicTestability=function(){function PublicTestability(testability){this._testability=testability}return PublicTestability.prototype.isStable=function(){return this._testability.isStable()},PublicTestability.prototype.whenStable=function(callback){this._testability.whenStable(callback)},PublicTestability.prototype.findBindings=function(using,provider,exactMatch){return this.findProviders(using,provider,exactMatch)},PublicTestability.prototype.findProviders=function(using,provider,exactMatch){return this._testability.findBindings(using,provider,exactMatch)},PublicTestability}(),BrowserGetTestability=function(){function BrowserGetTestability(){}return BrowserGetTestability.init=function(){core_1.setTestabilityGetter(new BrowserGetTestability)},BrowserGetTestability.prototype.addToWindow=function(registry){lang_1.global.getAngularTestability=function(elem,findInAncestors){void 0===findInAncestors&&(findInAncestors=!0);var testability=registry.findTestabilityInTree(elem,findInAncestors);if(null==testability)throw new Error("Could not find testability for element.");return new PublicTestability(testability)},lang_1.global.getAllAngularTestabilities=function(){var testabilities=registry.getAllTestabilities();return testabilities.map(function(testability){return new PublicTestability(testability)})},lang_1.global.getAllAngularRootElements=function(){return registry.getAllRootElements()};var whenAllStable=function(callback){var testabilities=lang_1.global.getAllAngularTestabilities(),count=testabilities.length,didWork=!1,decrement=function(didWork_){didWork=didWork||didWork_,count--,0==count&&callback(didWork)};testabilities.forEach(function(testability){testability.whenStable(decrement)})};lang_1.global.frameworkStabilizers||(lang_1.global.frameworkStabilizers=collection_1.ListWrapper.createGrowableSize(0)),lang_1.global.frameworkStabilizers.push(whenAllStable)},BrowserGetTestability.prototype.findTestabilityInTree=function(registry,elem,findInAncestors){if(null==elem)return null;var t=registry.getTestability(elem);return lang_1.isPresent(t)?t:findInAncestors?dom_adapter_1.getDOM().isShadowRoot(elem)?this.findTestabilityInTree(registry,dom_adapter_1.getDOM().getHost(elem),!0):this.findTestabilityInTree(registry,dom_adapter_1.getDOM().parentElement(elem),!0):null},BrowserGetTestability}();exports.BrowserGetTestability=BrowserGetTestability},{"../dom/dom_adapter":332,"../facade/collection":347,"../facade/lang":350,"@angular/core":154}],326:[function(require,module,exports){"use strict";var dom_adapter_1=require("../dom/dom_adapter"),Title=function(){function Title(){}return Title.prototype.getTitle=function(){return dom_adapter_1.getDOM().getTitle()},Title.prototype.setTitle=function(newTitle){dom_adapter_1.getDOM().setTitle(newTitle)},Title}();exports.Title=Title},{"../dom/dom_adapter":332}],327:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),dom_adapter_1=require("../../dom/dom_adapter"),browser_1=require("../../facade/browser"),lang_1=require("../../facade/lang"),ChangeDetectionPerfRecord=function(){function ChangeDetectionPerfRecord(msPerTick,numTicks){this.msPerTick=msPerTick,this.numTicks=numTicks}return ChangeDetectionPerfRecord}();exports.ChangeDetectionPerfRecord=ChangeDetectionPerfRecord;var AngularTools=function(){function AngularTools(ref){this.profiler=new AngularProfiler(ref)}return AngularTools}();exports.AngularTools=AngularTools;var AngularProfiler=function(){function AngularProfiler(ref){this.appRef=ref.injector.get(core_1.ApplicationRef)}return AngularProfiler.prototype.timeChangeDetection=function(config){var record=lang_1.isPresent(config)&&config.record,profileName="Change Detection",isProfilerAvailable=lang_1.isPresent(browser_1.window.console.profile);record&&isProfilerAvailable&&browser_1.window.console.profile(profileName);for(var start=dom_adapter_1.getDOM().performanceNow(),numTicks=0;numTicks<5||dom_adapter_1.getDOM().performanceNow()-start<500;)this.appRef.tick(),numTicks++;var end=dom_adapter_1.getDOM().performanceNow();record&&isProfilerAvailable&&browser_1.window.console.profileEnd(profileName);var msPerTick=(end-start)/numTicks;return browser_1.window.console.log("ran "+numTicks+" change detection cycles"),browser_1.window.console.log(lang_1.NumberWrapper.toFixed(msPerTick,2)+" ms per check"),new ChangeDetectionPerfRecord(msPerTick,numTicks)},AngularProfiler}();exports.AngularProfiler=AngularProfiler},{"../../dom/dom_adapter":332,"../../facade/browser":346,"../../facade/lang":350,"@angular/core":154}],328:[function(require,module,exports){"use strict";function enableDebugTools(ref){return context.ng=new common_tools_1.AngularTools(ref),ref}function disableDebugTools(){delete context.ng}var lang_1=require("../../facade/lang"),common_tools_1=require("./common_tools"),context=lang_1.global;exports.enableDebugTools=enableDebugTools,exports.disableDebugTools=disableDebugTools},{"../../facade/lang":350,"./common_tools":327}],329:[function(require,module,exports){"use strict";var core_private_1=require("../../core_private"),_NoOpAnimationDriver=function(){function _NoOpAnimationDriver(){}return _NoOpAnimationDriver.prototype.animate=function(element,startingStyles,keyframes,duration,delay,easing){return new core_private_1.NoOpAnimationPlayer},_NoOpAnimationDriver}(),AnimationDriver=function(){function AnimationDriver(){}return AnimationDriver.NOOP=new _NoOpAnimationDriver,AnimationDriver}();exports.AnimationDriver=AnimationDriver},{"../../core_private":317}],330:[function(require,module,exports){"use strict";var dom_adapter_1=require("../../dom/dom_adapter"),lang_1=require("../../facade/lang"),By=function(){function By(){}return By.all=function(){return function(debugElement){return!0}},By.css=function(selector){return function(debugElement){return!!lang_1.isPresent(debugElement.nativeElement)&&dom_adapter_1.getDOM().elementMatches(debugElement.nativeElement,selector)}},By.directive=function(type){return function(debugElement){return debugElement.providerTokens.indexOf(type)!==-1}},By}();exports.By=By},{"../../dom/dom_adapter":332,"../../facade/lang":350}],331:[function(require,module,exports){"use strict";function inspectNativeElement(element){return core_1.getDebugNode(element)}function _createConditionalRootRenderer(rootRenderer){return core_1.isDevMode()?_createRootRenderer(rootRenderer):rootRenderer}function _createRootRenderer(rootRenderer){return dom_adapter_1.getDOM().setGlobalVar(INSPECT_GLOBAL_NAME,inspectNativeElement),dom_adapter_1.getDOM().setGlobalVar(CORE_TOKENS_GLOBAL_NAME,CORE_TOKENS),new core_private_1.DebugDomRootRenderer(rootRenderer)}var core_1=require("@angular/core"),core_private_1=require("../../../core_private"),dom_adapter_1=require("../dom_adapter"),dom_renderer_1=require("../dom_renderer"),CORE_TOKENS={ApplicationRef:core_1.ApplicationRef,NgZone:core_1.NgZone},INSPECT_GLOBAL_NAME="ng.probe",CORE_TOKENS_GLOBAL_NAME="ng.coreTokens";exports.inspectNativeElement=inspectNativeElement,exports._createConditionalRootRenderer=_createConditionalRootRenderer,exports.ELEMENT_PROBE_PROVIDERS=[{provide:core_1.RootRenderer,useFactory:_createConditionalRootRenderer,deps:[dom_renderer_1.DomRootRenderer]}],exports.ELEMENT_PROBE_PROVIDERS_PROD_MODE=[{provide:core_1.RootRenderer,useFactory:_createRootRenderer,deps:[dom_renderer_1.DomRootRenderer]}]},{"../../../core_private":317,"../dom_adapter":332,"../dom_renderer":333,"@angular/core":154}],332:[function(require,module,exports){"use strict";function getDOM(){return _DOM}function setDOM(adapter){_DOM=adapter}function setRootDomAdapter(adapter){lang_1.isBlank(_DOM)&&(_DOM=adapter)}var lang_1=require("../facade/lang"),_DOM=null;exports.getDOM=getDOM,exports.setDOM=setDOM,exports.setRootDomAdapter=setRootDomAdapter;var DomAdapter=function(){function DomAdapter(){this.xhrType=null}return DomAdapter.prototype.getXHR=function(){return this.xhrType},Object.defineProperty(DomAdapter.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(value){this._attrToPropMap=value},enumerable:!0,configurable:!0}),DomAdapter}();exports.DomAdapter=DomAdapter},{"../facade/lang":350}],333:[function(require,module,exports){"use strict";function moveNodesAfterSibling(sibling,nodes){var parent=dom_adapter_1.getDOM().parentElement(sibling);if(nodes.length>0&&lang_1.isPresent(parent)){var nextSibling=dom_adapter_1.getDOM().nextSibling(sibling);if(lang_1.isPresent(nextSibling))for(var i=0;i<nodes.length;i++)dom_adapter_1.getDOM().insertBefore(nextSibling,nodes[i]);else for(var i=0;i<nodes.length;i++)dom_adapter_1.getDOM().appendChild(parent,nodes[i])}}function appendNodes(parent,nodes){for(var i=0;i<nodes.length;i++)dom_adapter_1.getDOM().appendChild(parent,nodes[i])}function decoratePreventDefault(eventHandler){return function(event){var allowDefaultBehavior=eventHandler(event);allowDefaultBehavior===!1&&dom_adapter_1.getDOM().preventDefault(event)}}function _shimContentAttribute(componentShortId){return lang_1.StringWrapper.replaceAll(exports.CONTENT_ATTR,COMPONENT_REGEX,componentShortId)}function _shimHostAttribute(componentShortId){return lang_1.StringWrapper.replaceAll(exports.HOST_ATTR,COMPONENT_REGEX,componentShortId)}function _flattenStyles(compId,styles,target){for(var i=0;i<styles.length;i++){var style=styles[i];lang_1.isArray(style)?_flattenStyles(compId,style,target):(style=lang_1.StringWrapper.replaceAll(style,COMPONENT_REGEX,compId),target.push(style))}return target}function splitNamespace(name){if(":"!=name[0])return[null,name];var match=name.match(NS_PREFIX_RE);return[match[1],match[2]]}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),exceptions_1=require("../facade/exceptions"),lang_1=require("../facade/lang"),animation_driver_1=require("./animation_driver"),dom_adapter_1=require("./dom_adapter"),dom_tokens_1=require("./dom_tokens"),event_manager_1=require("./events/event_manager"),shared_styles_host_1=require("./shared_styles_host"),util_1=require("./util"),NAMESPACE_URIS={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},TEMPLATE_COMMENT_TEXT="template bindings={}",TEMPLATE_BINDINGS_EXP=/^template bindings=(.*)$/,DomRootRenderer=function(){function DomRootRenderer(document,eventManager,sharedStylesHost,animationDriver){this.document=document,this.eventManager=eventManager,this.sharedStylesHost=sharedStylesHost,this.animationDriver=animationDriver,this.registeredComponents=new Map}return DomRootRenderer.prototype.renderComponent=function(componentProto){var renderer=this.registeredComponents.get(componentProto.id);return lang_1.isBlank(renderer)&&(renderer=new DomRenderer(this,componentProto,this.animationDriver),this.registeredComponents.set(componentProto.id,renderer)),renderer},DomRootRenderer}();exports.DomRootRenderer=DomRootRenderer;var DomRootRenderer_=function(_super){function DomRootRenderer_(_document,_eventManager,sharedStylesHost,animationDriver){_super.call(this,_document,_eventManager,sharedStylesHost,animationDriver)}return __extends(DomRootRenderer_,_super),DomRootRenderer_.decorators=[{type:core_1.Injectable}],DomRootRenderer_.ctorParameters=[{type:void 0,decorators:[{type:core_1.Inject,args:[dom_tokens_1.DOCUMENT]}]},{type:event_manager_1.EventManager},{type:shared_styles_host_1.DomSharedStylesHost},{type:animation_driver_1.AnimationDriver}],DomRootRenderer_}(DomRootRenderer);exports.DomRootRenderer_=DomRootRenderer_;var DomRenderer=function(){function DomRenderer(_rootRenderer,componentProto,_animationDriver){this._rootRenderer=_rootRenderer,this.componentProto=componentProto,this._animationDriver=_animationDriver,this._styles=_flattenStyles(componentProto.id,componentProto.styles,[]),componentProto.encapsulation!==core_1.ViewEncapsulation.Native&&this._rootRenderer.sharedStylesHost.addStyles(this._styles),this.componentProto.encapsulation===core_1.ViewEncapsulation.Emulated?(this._contentAttr=_shimContentAttribute(componentProto.id),this._hostAttr=_shimHostAttribute(componentProto.id)):(this._contentAttr=null,this._hostAttr=null)}return DomRenderer.prototype.selectRootElement=function(selectorOrNode,debugInfo){var el;if(lang_1.isString(selectorOrNode)){if(el=dom_adapter_1.getDOM().querySelector(this._rootRenderer.document,selectorOrNode),lang_1.isBlank(el))throw new exceptions_1.BaseException('The selector "'+selectorOrNode+'" did not match any elements')}else el=selectorOrNode;return dom_adapter_1.getDOM().clearNodes(el),el},DomRenderer.prototype.createElement=function(parent,name,debugInfo){var nsAndName=splitNamespace(name),el=lang_1.isPresent(nsAndName[0])?dom_adapter_1.getDOM().createElementNS(NAMESPACE_URIS[nsAndName[0]],nsAndName[1]):dom_adapter_1.getDOM().createElement(nsAndName[1]);return lang_1.isPresent(this._contentAttr)&&dom_adapter_1.getDOM().setAttribute(el,this._contentAttr,""),lang_1.isPresent(parent)&&dom_adapter_1.getDOM().appendChild(parent,el),el},DomRenderer.prototype.createViewRoot=function(hostElement){var nodesParent;if(this.componentProto.encapsulation===core_1.ViewEncapsulation.Native){nodesParent=dom_adapter_1.getDOM().createShadowRoot(hostElement),this._rootRenderer.sharedStylesHost.addHost(nodesParent);for(var i=0;i<this._styles.length;i++)dom_adapter_1.getDOM().appendChild(nodesParent,dom_adapter_1.getDOM().createStyleElement(this._styles[i]))}else lang_1.isPresent(this._hostAttr)&&dom_adapter_1.getDOM().setAttribute(hostElement,this._hostAttr,""),nodesParent=hostElement;return nodesParent},DomRenderer.prototype.createTemplateAnchor=function(parentElement,debugInfo){var comment=dom_adapter_1.getDOM().createComment(TEMPLATE_COMMENT_TEXT);return lang_1.isPresent(parentElement)&&dom_adapter_1.getDOM().appendChild(parentElement,comment),comment},DomRenderer.prototype.createText=function(parentElement,value,debugInfo){var node=dom_adapter_1.getDOM().createTextNode(value);return lang_1.isPresent(parentElement)&&dom_adapter_1.getDOM().appendChild(parentElement,node),node},DomRenderer.prototype.projectNodes=function(parentElement,nodes){lang_1.isBlank(parentElement)||appendNodes(parentElement,nodes)},DomRenderer.prototype.attachViewAfter=function(node,viewRootNodes){moveNodesAfterSibling(node,viewRootNodes)},DomRenderer.prototype.detachView=function(viewRootNodes){for(var i=0;i<viewRootNodes.length;i++)dom_adapter_1.getDOM().remove(viewRootNodes[i])},DomRenderer.prototype.destroyView=function(hostElement,viewAllNodes){this.componentProto.encapsulation===core_1.ViewEncapsulation.Native&&lang_1.isPresent(hostElement)&&this._rootRenderer.sharedStylesHost.removeHost(dom_adapter_1.getDOM().getShadowRoot(hostElement))},DomRenderer.prototype.listen=function(renderElement,name,callback){return this._rootRenderer.eventManager.addEventListener(renderElement,name,decoratePreventDefault(callback))},DomRenderer.prototype.listenGlobal=function(target,name,callback){return this._rootRenderer.eventManager.addGlobalEventListener(target,name,decoratePreventDefault(callback))},DomRenderer.prototype.setElementProperty=function(renderElement,propertyName,propertyValue){dom_adapter_1.getDOM().setProperty(renderElement,propertyName,propertyValue)},DomRenderer.prototype.setElementAttribute=function(renderElement,attributeName,attributeValue){var attrNs,nsAndName=splitNamespace(attributeName);lang_1.isPresent(nsAndName[0])&&(attributeName=nsAndName[0]+":"+nsAndName[1],attrNs=NAMESPACE_URIS[nsAndName[0]]),lang_1.isPresent(attributeValue)?lang_1.isPresent(attrNs)?dom_adapter_1.getDOM().setAttributeNS(renderElement,attrNs,attributeName,attributeValue):dom_adapter_1.getDOM().setAttribute(renderElement,attributeName,attributeValue):lang_1.isPresent(attrNs)?dom_adapter_1.getDOM().removeAttributeNS(renderElement,attrNs,nsAndName[1]):dom_adapter_1.getDOM().removeAttribute(renderElement,attributeName)},DomRenderer.prototype.setBindingDebugInfo=function(renderElement,propertyName,propertyValue){var dashCasedPropertyName=util_1.camelCaseToDashCase(propertyName);if(dom_adapter_1.getDOM().isCommentNode(renderElement)){var existingBindings=lang_1.StringWrapper.replaceAll(dom_adapter_1.getDOM().getText(renderElement),/\n/g,"").match(TEMPLATE_BINDINGS_EXP),parsedBindings=lang_1.Json.parse(existingBindings[1]);parsedBindings[dashCasedPropertyName]=propertyValue,dom_adapter_1.getDOM().setText(renderElement,lang_1.StringWrapper.replace(TEMPLATE_COMMENT_TEXT,"{}",lang_1.Json.stringify(parsedBindings)))}else this.setElementAttribute(renderElement,propertyName,propertyValue)},DomRenderer.prototype.setElementClass=function(renderElement,className,isAdd){isAdd?dom_adapter_1.getDOM().addClass(renderElement,className):dom_adapter_1.getDOM().removeClass(renderElement,className)},DomRenderer.prototype.setElementStyle=function(renderElement,styleName,styleValue){lang_1.isPresent(styleValue)?dom_adapter_1.getDOM().setStyle(renderElement,styleName,lang_1.stringify(styleValue)):dom_adapter_1.getDOM().removeStyle(renderElement,styleName)},DomRenderer.prototype.invokeElementMethod=function(renderElement,methodName,args){dom_adapter_1.getDOM().invoke(renderElement,methodName,args)},DomRenderer.prototype.setText=function(renderNode,text){dom_adapter_1.getDOM().setText(renderNode,text)},DomRenderer.prototype.animate=function(element,startingStyles,keyframes,duration,delay,easing){return this._animationDriver.animate(element,startingStyles,keyframes,duration,delay,easing)},DomRenderer}();exports.DomRenderer=DomRenderer;var COMPONENT_REGEX=/%COMP%/g;exports.COMPONENT_VARIABLE="%COMP%",exports.HOST_ATTR="_nghost-"+exports.COMPONENT_VARIABLE,exports.CONTENT_ATTR="_ngcontent-"+exports.COMPONENT_VARIABLE;var NS_PREFIX_RE=/^:([^:]+):(.+)$/},{"../facade/exceptions":349,"../facade/lang":350,"./animation_driver":329,"./dom_adapter":332,"./dom_tokens":334,"./events/event_manager":336,"./shared_styles_host":340,"./util":341,"@angular/core":154}],334:[function(require,module,exports){"use strict";var core_1=require("@angular/core");exports.DOCUMENT=new core_1.OpaqueToken("DocumentToken")},{"@angular/core":154}],335:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),dom_adapter_1=require("../dom_adapter"),event_manager_1=require("./event_manager"),DomEventsPlugin=function(_super){function DomEventsPlugin(){_super.apply(this,arguments)}return __extends(DomEventsPlugin,_super),DomEventsPlugin.prototype.supports=function(eventName){return!0},DomEventsPlugin.prototype.addEventListener=function(element,eventName,handler){var zone=this.manager.getZone(),outsideHandler=function(event){return zone.runGuarded(function(){return handler(event)})};return this.manager.getZone().runOutsideAngular(function(){return dom_adapter_1.getDOM().onAndCancel(element,eventName,outsideHandler)})},DomEventsPlugin.prototype.addGlobalEventListener=function(target,eventName,handler){var element=dom_adapter_1.getDOM().getGlobalEventTarget(target),zone=this.manager.getZone(),outsideHandler=function(event){return zone.runGuarded(function(){return handler(event)})};return this.manager.getZone().runOutsideAngular(function(){return dom_adapter_1.getDOM().onAndCancel(element,eventName,outsideHandler)})},DomEventsPlugin.decorators=[{type:core_1.Injectable}],DomEventsPlugin}(event_manager_1.EventManagerPlugin);exports.DomEventsPlugin=DomEventsPlugin},{"../dom_adapter":332,"./event_manager":336,"@angular/core":154}],336:[function(require,module,exports){
"use strict";var core_1=require("@angular/core"),collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions");exports.EVENT_MANAGER_PLUGINS=new core_1.OpaqueToken("EventManagerPlugins");var EventManager=function(){function EventManager(plugins,_zone){var _this=this;this._zone=_zone,plugins.forEach(function(p){return p.manager=_this}),this._plugins=collection_1.ListWrapper.reversed(plugins)}return EventManager.prototype.addEventListener=function(element,eventName,handler){var plugin=this._findPluginFor(eventName);return plugin.addEventListener(element,eventName,handler)},EventManager.prototype.addGlobalEventListener=function(target,eventName,handler){var plugin=this._findPluginFor(eventName);return plugin.addGlobalEventListener(target,eventName,handler)},EventManager.prototype.getZone=function(){return this._zone},EventManager.prototype._findPluginFor=function(eventName){for(var plugins=this._plugins,i=0;i<plugins.length;i++){var plugin=plugins[i];if(plugin.supports(eventName))return plugin}throw new exceptions_1.BaseException("No event manager plugin found for event "+eventName)},EventManager.decorators=[{type:core_1.Injectable}],EventManager.ctorParameters=[{type:Array,decorators:[{type:core_1.Inject,args:[exports.EVENT_MANAGER_PLUGINS]}]},{type:core_1.NgZone}],EventManager}();exports.EventManager=EventManager;var EventManagerPlugin=function(){function EventManagerPlugin(){}return EventManagerPlugin.prototype.supports=function(eventName){return!1},EventManagerPlugin.prototype.addEventListener=function(element,eventName,handler){throw"not implemented"},EventManagerPlugin.prototype.addGlobalEventListener=function(element,eventName,handler){throw"not implemented"},EventManagerPlugin}();exports.EventManagerPlugin=EventManagerPlugin},{"../../facade/collection":347,"../../facade/exceptions":349,"@angular/core":154}],337:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},collection_1=require("../../facade/collection"),event_manager_1=require("./event_manager"),_eventNames={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},HammerGesturesPluginCommon=function(_super){function HammerGesturesPluginCommon(){_super.call(this)}return __extends(HammerGesturesPluginCommon,_super),HammerGesturesPluginCommon.prototype.supports=function(eventName){return eventName=eventName.toLowerCase(),collection_1.StringMapWrapper.contains(_eventNames,eventName)},HammerGesturesPluginCommon}(event_manager_1.EventManagerPlugin);exports.HammerGesturesPluginCommon=HammerGesturesPluginCommon},{"../../facade/collection":347,"./event_manager":336}],338:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),hammer_common_1=require("./hammer_common");exports.HAMMER_GESTURE_CONFIG=new core_1.OpaqueToken("HammerGestureConfig");var HammerGestureConfig=function(){function HammerGestureConfig(){this.events=[],this.overrides={}}return HammerGestureConfig.prototype.buildHammer=function(element){var mc=new Hammer(element);mc.get("pinch").set({enable:!0}),mc.get("rotate").set({enable:!0});for(var eventName in this.overrides)mc.get(eventName).set(this.overrides[eventName]);return mc},HammerGestureConfig.decorators=[{type:core_1.Injectable}],HammerGestureConfig}();exports.HammerGestureConfig=HammerGestureConfig;var HammerGesturesPlugin=function(_super){function HammerGesturesPlugin(_config){_super.call(this),this._config=_config}return __extends(HammerGesturesPlugin,_super),HammerGesturesPlugin.prototype.supports=function(eventName){if(!_super.prototype.supports.call(this,eventName)&&!this.isCustomEvent(eventName))return!1;if(!lang_1.isPresent(window.Hammer))throw new exceptions_1.BaseException("Hammer.js is not loaded, can not bind "+eventName+" event");return!0},HammerGesturesPlugin.prototype.addEventListener=function(element,eventName,handler){var _this=this,zone=this.manager.getZone();return eventName=eventName.toLowerCase(),zone.runOutsideAngular(function(){var mc=_this._config.buildHammer(element),callback=function(eventObj){zone.runGuarded(function(){handler(eventObj)})};return mc.on(eventName,callback),function(){mc.off(eventName,callback)}})},HammerGesturesPlugin.prototype.isCustomEvent=function(eventName){return this._config.events.indexOf(eventName)>-1},HammerGesturesPlugin.decorators=[{type:core_1.Injectable}],HammerGesturesPlugin.ctorParameters=[{type:HammerGestureConfig,decorators:[{type:core_1.Inject,args:[exports.HAMMER_GESTURE_CONFIG]}]}],HammerGesturesPlugin}(hammer_common_1.HammerGesturesPluginCommon);exports.HammerGesturesPlugin=HammerGesturesPlugin},{"../../facade/exceptions":349,"../../facade/lang":350,"./hammer_common":337,"@angular/core":154}],339:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),dom_adapter_1=require("../dom_adapter"),event_manager_1=require("./event_manager"),modifierKeys=["alt","control","meta","shift"],modifierKeyGetters={alt:function(event){return event.altKey},control:function(event){return event.ctrlKey},meta:function(event){return event.metaKey},shift:function(event){return event.shiftKey}},KeyEventsPlugin=function(_super){function KeyEventsPlugin(){_super.call(this)}return __extends(KeyEventsPlugin,_super),KeyEventsPlugin.prototype.supports=function(eventName){return lang_1.isPresent(KeyEventsPlugin.parseEventName(eventName))},KeyEventsPlugin.prototype.addEventListener=function(element,eventName,handler){var parsedEvent=KeyEventsPlugin.parseEventName(eventName),outsideHandler=KeyEventsPlugin.eventCallback(element,collection_1.StringMapWrapper.get(parsedEvent,"fullKey"),handler,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return dom_adapter_1.getDOM().onAndCancel(element,collection_1.StringMapWrapper.get(parsedEvent,"domEventName"),outsideHandler)})},KeyEventsPlugin.parseEventName=function(eventName){var parts=eventName.toLowerCase().split("."),domEventName=parts.shift();if(0===parts.length||!lang_1.StringWrapper.equals(domEventName,"keydown")&&!lang_1.StringWrapper.equals(domEventName,"keyup"))return null;var key=KeyEventsPlugin._normalizeKey(parts.pop()),fullKey="";if(modifierKeys.forEach(function(modifierName){collection_1.ListWrapper.contains(parts,modifierName)&&(collection_1.ListWrapper.remove(parts,modifierName),fullKey+=modifierName+".")}),fullKey+=key,0!=parts.length||0===key.length)return null;var result=collection_1.StringMapWrapper.create();return collection_1.StringMapWrapper.set(result,"domEventName",domEventName),collection_1.StringMapWrapper.set(result,"fullKey",fullKey),result},KeyEventsPlugin.getEventFullKey=function(event){var fullKey="",key=dom_adapter_1.getDOM().getEventKey(event);return key=key.toLowerCase(),lang_1.StringWrapper.equals(key," ")?key="space":lang_1.StringWrapper.equals(key,".")&&(key="dot"),modifierKeys.forEach(function(modifierName){if(modifierName!=key){var modifierGetter=collection_1.StringMapWrapper.get(modifierKeyGetters,modifierName);modifierGetter(event)&&(fullKey+=modifierName+".")}}),fullKey+=key},KeyEventsPlugin.eventCallback=function(element,fullKey,handler,zone){return function(event){lang_1.StringWrapper.equals(KeyEventsPlugin.getEventFullKey(event),fullKey)&&zone.runGuarded(function(){return handler(event)})}},KeyEventsPlugin._normalizeKey=function(keyName){switch(keyName){case"esc":return"escape";default:return keyName}},KeyEventsPlugin.decorators=[{type:core_1.Injectable}],KeyEventsPlugin.ctorParameters=[],KeyEventsPlugin}(event_manager_1.EventManagerPlugin);exports.KeyEventsPlugin=KeyEventsPlugin},{"../../facade/collection":347,"../../facade/lang":350,"../dom_adapter":332,"./event_manager":336,"@angular/core":154}],340:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),collection_1=require("../facade/collection"),dom_adapter_1=require("./dom_adapter"),dom_tokens_1=require("./dom_tokens"),SharedStylesHost=function(){function SharedStylesHost(){this._styles=[],this._stylesSet=new Set}return SharedStylesHost.prototype.addStyles=function(styles){var _this=this,additions=[];styles.forEach(function(style){collection_1.SetWrapper.has(_this._stylesSet,style)||(_this._stylesSet.add(style),_this._styles.push(style),additions.push(style))}),this.onStylesAdded(additions)},SharedStylesHost.prototype.onStylesAdded=function(additions){},SharedStylesHost.prototype.getAllStyles=function(){return this._styles},SharedStylesHost.decorators=[{type:core_1.Injectable}],SharedStylesHost.ctorParameters=[],SharedStylesHost}();exports.SharedStylesHost=SharedStylesHost;var DomSharedStylesHost=function(_super){function DomSharedStylesHost(doc){_super.call(this),this._hostNodes=new Set,this._hostNodes.add(doc.head)}return __extends(DomSharedStylesHost,_super),DomSharedStylesHost.prototype._addStylesToHost=function(styles,host){for(var i=0;i<styles.length;i++){var style=styles[i];dom_adapter_1.getDOM().appendChild(host,dom_adapter_1.getDOM().createStyleElement(style))}},DomSharedStylesHost.prototype.addHost=function(hostNode){this._addStylesToHost(this._styles,hostNode),this._hostNodes.add(hostNode)},DomSharedStylesHost.prototype.removeHost=function(hostNode){collection_1.SetWrapper.delete(this._hostNodes,hostNode)},DomSharedStylesHost.prototype.onStylesAdded=function(additions){var _this=this;this._hostNodes.forEach(function(hostNode){_this._addStylesToHost(additions,hostNode)})},DomSharedStylesHost.decorators=[{type:core_1.Injectable}],DomSharedStylesHost.ctorParameters=[{type:void 0,decorators:[{type:core_1.Inject,args:[dom_tokens_1.DOCUMENT]}]}],DomSharedStylesHost}(SharedStylesHost);exports.DomSharedStylesHost=DomSharedStylesHost},{"../facade/collection":347,"./dom_adapter":332,"./dom_tokens":334,"@angular/core":154}],341:[function(require,module,exports){"use strict";function camelCaseToDashCase(input){return lang_1.StringWrapper.replaceAllMapped(input,CAMEL_CASE_REGEXP,function(m){return"-"+m[1].toLowerCase()})}function dashCaseToCamelCase(input){return lang_1.StringWrapper.replaceAllMapped(input,DASH_CASE_REGEXP,function(m){return m[1].toUpperCase()})}var lang_1=require("../facade/lang"),CAMEL_CASE_REGEXP=/([A-Z])/g,DASH_CASE_REGEXP=/-([a-z])/g;exports.camelCaseToDashCase=camelCaseToDashCase,exports.dashCaseToCamelCase=dashCaseToCamelCase},{"../facade/lang":350}],342:[function(require,module,exports){"use strict";function _populateStyles(element,styles,defaultStyles){var data={};return styles.styles.forEach(function(entry){collection_1.StringMapWrapper.forEach(entry,function(val,prop){var formattedProp=util_1.dashCaseToCamelCase(prop);data[formattedProp]=val==core_1.AUTO_STYLE?val:val.toString()+_resolveStyleUnit(val,prop,formattedProp)})}),collection_1.StringMapWrapper.forEach(defaultStyles,function(value,prop){lang_1.isPresent(data[prop])||(data[prop]=value)}),data}function _resolveStyleUnit(val,userProvidedProp,formattedProp){var unit="";if(_isPixelDimensionStyle(formattedProp)&&0!=val&&"0"!=val)if(lang_1.isNumber(val))unit="px";else if(0==_findDimensionalSuffix(val.toString()).length)throw new core_1.BaseException("Please provide a CSS unit value for "+userProvidedProp+":"+val);return unit}function _findDimensionalSuffix(value){for(var i=0;i<value.length;i++){var c=lang_1.StringWrapper.charCodeAt(value,i);if(!(c>=_$0&&c<=_$9||c==_$PERIOD))return value.substring(i,value.length)}return""}function _isPixelDimensionStyle(prop){switch(prop){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),util_1=require("./util"),web_animations_player_1=require("./web_animations_player"),WebAnimationsDriver=function(){function WebAnimationsDriver(){}return WebAnimationsDriver.prototype.animate=function(element,startingStyles,keyframes,duration,delay,easing){var formattedSteps=[],startingStyleLookup={};if(lang_1.isPresent(startingStyles)&&startingStyles.styles.length>0&&(startingStyleLookup=_populateStyles(element,startingStyles,{}),startingStyleLookup.offset=0,formattedSteps.push(startingStyleLookup)),keyframes.forEach(function(keyframe){var data=_populateStyles(element,keyframe.styles,startingStyleLookup);data.offset=keyframe.offset,formattedSteps.push(data)}),1==formattedSteps.length){var start=formattedSteps[0];start.offset=null,formattedSteps=[start,start]}var playerOptions={duration:duration,delay:delay,fill:"both"};return easing&&(playerOptions.easing=easing),new web_animations_player_1.WebAnimationsPlayer(element,formattedSteps,playerOptions)},WebAnimationsDriver}();exports.WebAnimationsDriver=WebAnimationsDriver;var _$0=48,_$9=57,_$PERIOD=46},{"../facade/collection":347,"../facade/lang":350,"./util":341,"./web_animations_player":343,"@angular/core":154}],343:[function(require,module,exports){"use strict";function _computeStyle(element,prop){return dom_adapter_1.getDOM().getComputedStyle(element)[prop]}var core_1=require("@angular/core"),collection_1=require("../facade/collection"),lang_1=require("../facade/lang"),dom_adapter_1=require("./dom_adapter"),WebAnimationsPlayer=function(){function WebAnimationsPlayer(element,keyframes,options){this.element=element,this.keyframes=keyframes,this.options=options,this._subscriptions=[],this._finished=!1,this._initialized=!1,this._started=!1,this.parentPlayer=null,this._duration=options.duration}return WebAnimationsPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,lang_1.isPresent(this.parentPlayer)||this.destroy(),this._subscriptions.forEach(function(fn){return fn()}),this._subscriptions=[])},WebAnimationsPlayer.prototype.init=function(){var _this=this;if(!this._initialized){this._initialized=!0;var keyframes=this.keyframes.map(function(styles){var formattedKeyframe={};return collection_1.StringMapWrapper.forEach(styles,function(value,prop){formattedKeyframe[prop]=value==core_1.AUTO_STYLE?_computeStyle(_this.element,prop):value}),formattedKeyframe});this._player=this._triggerWebAnimation(this.element,keyframes,this.options),this.reset(),this._player.onfinish=function(){return _this._onFinish()}}},WebAnimationsPlayer.prototype._triggerWebAnimation=function(element,keyframes,options){return element.animate(keyframes,options)},WebAnimationsPlayer.prototype.onDone=function(fn){this._subscriptions.push(fn)},WebAnimationsPlayer.prototype.play=function(){this.init(),this._player.play()},WebAnimationsPlayer.prototype.pause=function(){this.init(),this._player.pause()},WebAnimationsPlayer.prototype.finish=function(){this.init(),this._onFinish(),this._player.finish()},WebAnimationsPlayer.prototype.reset=function(){this._player.cancel()},WebAnimationsPlayer.prototype.restart=function(){this.reset(),this.play()},WebAnimationsPlayer.prototype.hasStarted=function(){return this._started},WebAnimationsPlayer.prototype.destroy=function(){this.reset(),this._onFinish()},Object.defineProperty(WebAnimationsPlayer.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0}),WebAnimationsPlayer.prototype.setPosition=function(p){this._player.currentTime=p*this.totalTime},WebAnimationsPlayer.prototype.getPosition=function(){return this._player.currentTime/this.totalTime},WebAnimationsPlayer}();exports.WebAnimationsPlayer=WebAnimationsPlayer},{"../facade/collection":347,"../facade/lang":350,"./dom_adapter":332,"@angular/core":154}],344:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{dup:12,"rxjs/Observable":401,"rxjs/Subject":407}],345:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],346:[function(require,module,exports){"use strict";var win="undefined"!=typeof window&&window||{};exports.window=win,exports.document=win.document,exports.location=win.location,exports.gc=win.gc?function(){return win.gc()}:function(){return null},exports.performance=win.performance?win.performance:null,exports.Event=win.Event,exports.MouseEvent=win.MouseEvent,exports.KeyboardEvent=win.KeyboardEvent,exports.EventTarget=win.EventTarget,exports.History=win.History,exports.Location=win.Location,exports.EventListener=win.EventListener},{}],347:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{"./lang":350,dup:14}],348:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"./base_wrapped_exception":345,"./collection":347,"./lang":350,dup:15}],349:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"./base_wrapped_exception":345,"./exception_handler":348,dup:16}],350:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],351:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core");exports.SecurityContext=core_1.SecurityContext;var html_sanitizer_1=require("./html_sanitizer"),style_sanitizer_1=require("./style_sanitizer"),url_sanitizer_1=require("./url_sanitizer"),DomSanitizationService=function(){function DomSanitizationService(){}return DomSanitizationService}();exports.DomSanitizationService=DomSanitizationService;var DomSanitizationServiceImpl=function(_super){function DomSanitizationServiceImpl(){_super.apply(this,arguments)}return __extends(DomSanitizationServiceImpl,_super),DomSanitizationServiceImpl.prototype.sanitize=function(ctx,value){if(null==value)return null;switch(ctx){case core_1.SecurityContext.NONE:return value;case core_1.SecurityContext.HTML:return value instanceof SafeHtmlImpl?value.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(value,"HTML"),html_sanitizer_1.sanitizeHtml(String(value)));case core_1.SecurityContext.STYLE:return value instanceof SafeStyleImpl?value.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(value,"Style"),style_sanitizer_1.sanitizeStyle(value));case core_1.SecurityContext.SCRIPT:if(value instanceof SafeScriptImpl)return value.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(value,"Script"),new Error("unsafe value used in a script context");case core_1.SecurityContext.URL:return value instanceof SafeResourceUrlImpl||value instanceof SafeUrlImpl?value.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(value,"URL"),url_sanitizer_1.sanitizeUrl(String(value)));case core_1.SecurityContext.RESOURCE_URL:if(value instanceof SafeResourceUrlImpl)return value.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(value,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+ctx+" (see http://g.co/ng/security#xss)")}},DomSanitizationServiceImpl.prototype.checkNotSafeValue=function(value,expectedType){if(value instanceof SafeValueImpl)throw new Error("Required a safe "+expectedType+", got a "+value.getTypeName()+" (see http://g.co/ng/security#xss)")},DomSanitizationServiceImpl.prototype.bypassSecurityTrustHtml=function(value){return new SafeHtmlImpl(value)},DomSanitizationServiceImpl.prototype.bypassSecurityTrustStyle=function(value){return new SafeStyleImpl(value)},DomSanitizationServiceImpl.prototype.bypassSecurityTrustScript=function(value){return new SafeScriptImpl(value)},DomSanitizationServiceImpl.prototype.bypassSecurityTrustUrl=function(value){return new SafeUrlImpl(value)},DomSanitizationServiceImpl.prototype.bypassSecurityTrustResourceUrl=function(value){return new SafeResourceUrlImpl(value)},DomSanitizationServiceImpl.decorators=[{type:core_1.Injectable}],DomSanitizationServiceImpl}(DomSanitizationService);exports.DomSanitizationServiceImpl=DomSanitizationServiceImpl;var SafeValueImpl=function(){function SafeValueImpl(changingThisBreaksApplicationSecurity){this.changingThisBreaksApplicationSecurity=changingThisBreaksApplicationSecurity}return SafeValueImpl.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},SafeValueImpl}(),SafeHtmlImpl=function(_super){function SafeHtmlImpl(){_super.apply(this,arguments)}return __extends(SafeHtmlImpl,_super),SafeHtmlImpl.prototype.getTypeName=function(){return"HTML"},SafeHtmlImpl}(SafeValueImpl),SafeStyleImpl=function(_super){function SafeStyleImpl(){_super.apply(this,arguments)}return __extends(SafeStyleImpl,_super),SafeStyleImpl.prototype.getTypeName=function(){return"Style"},SafeStyleImpl}(SafeValueImpl),SafeScriptImpl=function(_super){function SafeScriptImpl(){_super.apply(this,arguments)}return __extends(SafeScriptImpl,_super),SafeScriptImpl.prototype.getTypeName=function(){return"Script"},SafeScriptImpl}(SafeValueImpl),SafeUrlImpl=function(_super){function SafeUrlImpl(){_super.apply(this,arguments)}return __extends(SafeUrlImpl,_super),SafeUrlImpl.prototype.getTypeName=function(){return"URL"},SafeUrlImpl}(SafeValueImpl),SafeResourceUrlImpl=function(_super){function SafeResourceUrlImpl(){_super.apply(this,arguments)}return __extends(SafeResourceUrlImpl,_super),SafeResourceUrlImpl.prototype.getTypeName=function(){return"ResourceURL"},SafeResourceUrlImpl}(SafeValueImpl)},{"./html_sanitizer":352,"./style_sanitizer":353,"./url_sanitizer":354,"@angular/core":154}],352:[function(require,module,exports){"use strict";function getInertElement(){if(inertElement)return inertElement;DOM=dom_adapter_1.getDOM();var templateEl=DOM.createElement("template");if("content"in templateEl)return templateEl;var doc=DOM.createHtmlDocument();if(inertElement=DOM.querySelector(doc,"body"),null==inertElement){var html=DOM.createElement("html",doc);inertElement=DOM.createElement("body",doc),DOM.appendChild(html,inertElement),DOM.appendChild(doc,html)}return inertElement}function tagSet(tags){for(var res={},_i=0,_a=tags.split(",");_i<_a.length;_i++){var t=_a[_i];res[t]=!0}return res}function merge(){for(var sets=[],_i=0;_i<arguments.length;_i++)sets[_i-0]=arguments[_i];for(var res={},_a=0,sets_1=sets;_a<sets_1.length;_a++){var s=sets_1[_a];for(var v in s)s.hasOwnProperty(v)&&(res[v]=!0)}return res}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(match){var hi=match.charCodeAt(0),low=match.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(match){return"&#"+match.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function stripCustomNsAttrs(el){DOM.attributeMap(el).forEach(function(_,attrName){"xmlns:ns1"!==attrName&&0!==attrName.indexOf("ns1:")||DOM.removeAttribute(el,attrName)});for(var _i=0,_a=DOM.childNodesAsList(el);_i<_a.length;_i++){var n=_a[_i];DOM.isElementNode(n)&&stripCustomNsAttrs(n)}}function sanitizeHtml(unsafeHtmlInput){try{var containerEl=getInertElement(),unsafeHtml=unsafeHtmlInput?String(unsafeHtmlInput):"",mXSSAttempts=5,parsedHtml=unsafeHtml;do{if(0===mXSSAttempts)throw new Error("Failed to sanitize html because the input is unstable");mXSSAttempts--,unsafeHtml=parsedHtml,DOM.setInnerHTML(containerEl,unsafeHtml),DOM.defaultDoc().documentMode&&stripCustomNsAttrs(containerEl),parsedHtml=DOM.getInnerHTML(containerEl)}while(unsafeHtml!==parsedHtml);for(var sanitizer=new SanitizingHtmlSerializer,safeHtml=sanitizer.sanitizeChildren(DOM.getTemplateContent(containerEl)||containerEl),parent_1=DOM.getTemplateContent(containerEl)||containerEl,_i=0,_a=DOM.childNodesAsList(parent_1);_i<_a.length;_i++){var child=_a[_i];DOM.removeChild(parent_1,child)}return core_1.isDevMode()&&sanitizer.sanitizedSomething&&DOM.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),safeHtml}catch(e){throw inertElement=null,e}}var core_1=require("@angular/core"),dom_adapter_1=require("../dom/dom_adapter"),url_sanitizer_1=require("./url_sanitizer"),inertElement=null,DOM=null,VOID_ELEMENTS=tagSet("area,br,col,hr,img,wbr"),OPTIONAL_END_TAG_BLOCK_ELEMENTS=tagSet("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),OPTIONAL_END_TAG_INLINE_ELEMENTS=tagSet("rp,rt"),OPTIONAL_END_TAG_ELEMENTS=merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,OPTIONAL_END_TAG_BLOCK_ELEMENTS),BLOCK_ELEMENTS=merge(OPTIONAL_END_TAG_BLOCK_ELEMENTS,tagSet("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),INLINE_ELEMENTS=merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,tagSet("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),VALID_ELEMENTS=merge(VOID_ELEMENTS,BLOCK_ELEMENTS,INLINE_ELEMENTS,OPTIONAL_END_TAG_ELEMENTS),URI_ATTRS=tagSet("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),SRCSET_ATTRS=tagSet("srcset"),HTML_ATTRS=tagSet("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),VALID_ATTRS=merge(URI_ATTRS,SRCSET_ATTRS,HTML_ATTRS),SanitizingHtmlSerializer=function(){function SanitizingHtmlSerializer(){this.sanitizedSomething=!1,this.buf=[]}return SanitizingHtmlSerializer.prototype.sanitizeChildren=function(el){for(var current=el.firstChild;current;)if(DOM.isElementNode(current)?this.startElement(current):DOM.isTextNode(current)?this.chars(DOM.nodeValue(current)):this.sanitizedSomething=!0,DOM.firstChild(current))current=DOM.firstChild(current);else for(;current;){if(DOM.isElementNode(current)&&this.endElement(current),DOM.nextSibling(current)){current=DOM.nextSibling(current);break}current=DOM.parentElement(current)}return this.buf.join("")},SanitizingHtmlSerializer.prototype.startElement=function(element){var _this=this,tagName=DOM.nodeName(element).toLowerCase();return VALID_ELEMENTS.hasOwnProperty(tagName)?(this.buf.push("<"),this.buf.push(tagName),DOM.attributeMap(element).forEach(function(value,attrName){var lower=attrName.toLowerCase();return VALID_ATTRS.hasOwnProperty(lower)?(URI_ATTRS[lower]&&(value=url_sanitizer_1.sanitizeUrl(value)),SRCSET_ATTRS[lower]&&(value=url_sanitizer_1.sanitizeSrcset(value)),_this.buf.push(" "),_this.buf.push(attrName),_this.buf.push('="'),_this.buf.push(encodeEntities(value)),void _this.buf.push('"')):void(_this.sanitizedSomething=!0)}),void this.buf.push(">")):void(this.sanitizedSomething=!0)},SanitizingHtmlSerializer.prototype.endElement=function(current){var tagName=DOM.nodeName(current).toLowerCase();VALID_ELEMENTS.hasOwnProperty(tagName)&&!VOID_ELEMENTS.hasOwnProperty(tagName)&&(this.buf.push("</"),this.buf.push(tagName),this.buf.push(">"))},SanitizingHtmlSerializer.prototype.chars=function(chars){this.buf.push(encodeEntities(chars))},SanitizingHtmlSerializer}(),SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g;exports.sanitizeHtml=sanitizeHtml},{"../dom/dom_adapter":332,"./url_sanitizer":354,"@angular/core":154}],353:[function(require,module,exports){"use strict";function hasBalancedQuotes(value){for(var outsideSingle=!0,outsideDouble=!0,i=0;i<value.length;i++){var c=value.charAt(i);"'"===c&&outsideDouble?outsideSingle=!outsideSingle:'"'===c&&outsideSingle&&(outsideDouble=!outsideDouble)}return outsideSingle&&outsideDouble}function sanitizeStyle(value){if(value=String(value).trim(),!value)return"";var urlMatch=value.match(URL_RE);return urlMatch&&url_sanitizer_1.sanitizeUrl(urlMatch[1])===urlMatch[1]||value.match(SAFE_STYLE_VALUE)&&hasBalancedQuotes(value)?value:(core_1.isDevMode()&&dom_adapter_1.getDOM().log("WARNING: sanitizing unsafe style value "+value+" (see http://g.co/ng/security#xss)."),"unsafe")}var core_1=require("@angular/core"),dom_adapter_1=require("../dom/dom_adapter"),url_sanitizer_1=require("./url_sanitizer"),VALUES="[-,.\"'%_!# a-zA-Z0-9]+",TRANSFORMATION_FNS="(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?",COLOR_FNS="(?:rgb|hsl)a?",FN_ARGS="\\([-0-9.%, a-zA-Z]+\\)",SAFE_STYLE_VALUE=new RegExp("^("+VALUES+"|(?:"+TRANSFORMATION_FNS+"|"+COLOR_FNS+")"+FN_ARGS+")$","g"),URL_RE=/^url\(([^)]+)\)$/;exports.sanitizeStyle=sanitizeStyle},{"../dom/dom_adapter":332,"./url_sanitizer":354,"@angular/core":154}],354:[function(require,module,exports){"use strict";function sanitizeUrl(url){return url=String(url),url.match(SAFE_URL_PATTERN)||url.match(DATA_URL_PATTERN)?url:(core_1.isDevMode()&&dom_adapter_1.getDOM().log("WARNING: sanitizing unsafe URL value "+url+" (see http://g.co/ng/security#xss)"),"unsafe:"+url)}function sanitizeSrcset(srcset){return srcset=String(srcset),srcset.split(",").map(function(srcset){return sanitizeUrl(srcset.trim())}).join(", ")}var core_1=require("@angular/core"),dom_adapter_1=require("../dom/dom_adapter"),SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;exports.sanitizeUrl=sanitizeUrl,exports.sanitizeSrcset=sanitizeSrcset},{"../dom/dom_adapter":332,"@angular/core":154}],355:[function(require,module,exports){"use strict";var core_1=require("@angular/core");exports.ON_WEB_WORKER=new core_1.OpaqueToken("WebWorker.onWebWorker")},{"@angular/core":154}],356:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),message_bus_1=require("./message_bus"),serializer_1=require("./serializer"),ClientMessageBrokerFactory=function(){function ClientMessageBrokerFactory(){}return ClientMessageBrokerFactory}();exports.ClientMessageBrokerFactory=ClientMessageBrokerFactory;var ClientMessageBrokerFactory_=function(_super){function ClientMessageBrokerFactory_(_messageBus,_serializer){
_super.call(this),this._messageBus=_messageBus,this._serializer=_serializer}return __extends(ClientMessageBrokerFactory_,_super),ClientMessageBrokerFactory_.prototype.createMessageBroker=function(channel,runInZone){return void 0===runInZone&&(runInZone=!0),this._messageBus.initChannel(channel,runInZone),new ClientMessageBroker_(this._messageBus,this._serializer,channel)},ClientMessageBrokerFactory_.decorators=[{type:core_1.Injectable}],ClientMessageBrokerFactory_.ctorParameters=[{type:message_bus_1.MessageBus},{type:serializer_1.Serializer}],ClientMessageBrokerFactory_}(ClientMessageBrokerFactory);exports.ClientMessageBrokerFactory_=ClientMessageBrokerFactory_;var ClientMessageBroker=function(){function ClientMessageBroker(){}return ClientMessageBroker}();exports.ClientMessageBroker=ClientMessageBroker;var ClientMessageBroker_=function(_super){function ClientMessageBroker_(messageBus,_serializer,channel){var _this=this;_super.call(this),this.channel=channel,this._pending=new Map,this._sink=messageBus.to(channel),this._serializer=_serializer;var source=messageBus.from(channel);source.subscribe({next:function(message){return _this._handleMessage(message)}})}return __extends(ClientMessageBroker_,_super),ClientMessageBroker_.prototype._generateMessageId=function(name){for(var time=lang_1.stringify(lang_1.DateWrapper.toMillis(lang_1.DateWrapper.now())),iteration=0,id=name+time+lang_1.stringify(iteration);lang_1.isPresent(this._pending[id]);)id=""+name+time+iteration,iteration++;return id},ClientMessageBroker_.prototype.runOnService=function(args,returnType){var _this=this,fnArgs=[];lang_1.isPresent(args.args)&&args.args.forEach(function(argument){null!=argument.type?fnArgs.push(_this._serializer.serialize(argument.value,argument.type)):fnArgs.push(argument.value)});var promise,id=null;if(null!=returnType){var completer_1;promise=new Promise(function(resolve,reject){completer_1={resolve:resolve,reject:reject}}),id=this._generateMessageId(args.method),this._pending.set(id,completer_1),promise.catch(function(err){lang_1.print(err),completer_1.reject(err)}),promise=promise.then(function(value){return null==_this._serializer?value:_this._serializer.deserialize(value,returnType)})}else promise=null;var message={method:args.method,args:fnArgs};return null!=id&&(message.id=id),this._sink.emit(message),promise},ClientMessageBroker_.prototype._handleMessage=function(message){var data=new MessageData(message);if(lang_1.StringWrapper.equals(data.type,"result")||lang_1.StringWrapper.equals(data.type,"error")){var id=data.id;this._pending.has(id)&&(lang_1.StringWrapper.equals(data.type,"result")?this._pending.get(id).resolve(data.value):this._pending.get(id).reject(data.value),this._pending.delete(id))}},ClientMessageBroker_}(ClientMessageBroker);exports.ClientMessageBroker_=ClientMessageBroker_;var MessageData=function(){function MessageData(data){this.type=collection_1.StringMapWrapper.get(data,"type"),this.id=this._getValueIfPresent(data,"id"),this.value=this._getValueIfPresent(data,"value")}return MessageData.prototype._getValueIfPresent=function(data,key){return collection_1.StringMapWrapper.contains(data,key)?collection_1.StringMapWrapper.get(data,key):null},MessageData}(),FnArg=function(){function FnArg(value,type){this.value=value,this.type=type}return FnArg}();exports.FnArg=FnArg;var UiArguments=function(){function UiArguments(method,args){this.method=method,this.args=args}return UiArguments}();exports.UiArguments=UiArguments},{"../../facade/collection":347,"../../facade/lang":350,"./message_bus":357,"./serializer":362,"@angular/core":154}],357:[function(require,module,exports){"use strict";var MessageBus=function(){function MessageBus(){}return MessageBus}();exports.MessageBus=MessageBus},{}],358:[function(require,module,exports){"use strict";exports.RENDERER_CHANNEL="ng-Renderer",exports.EVENT_CHANNEL="ng-Events",exports.ROUTER_CHANNEL="ng-Router"},{}],359:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),async_1=require("../../facade/async"),collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),PostMessageBusSink=function(){function PostMessageBusSink(_postMessageTarget){this._postMessageTarget=_postMessageTarget,this._channels=collection_1.StringMapWrapper.create(),this._messageBuffer=[]}return PostMessageBusSink.prototype.attachToZone=function(zone){var _this=this;this._zone=zone,this._zone.runOutsideAngular(function(){_this._zone.onStable.subscribe({next:function(){_this._handleOnEventDone()}})})},PostMessageBusSink.prototype.initChannel=function(channel,runInZone){var _this=this;if(void 0===runInZone&&(runInZone=!0),collection_1.StringMapWrapper.contains(this._channels,channel))throw new exceptions_1.BaseException(channel+" has already been initialized");var emitter=new async_1.EventEmitter((!1)),channelInfo=new _Channel(emitter,runInZone);this._channels[channel]=channelInfo,emitter.subscribe(function(data){var message={channel:channel,message:data};runInZone?_this._messageBuffer.push(message):_this._sendMessages([message])})},PostMessageBusSink.prototype.to=function(channel){if(collection_1.StringMapWrapper.contains(this._channels,channel))return this._channels[channel].emitter;throw new exceptions_1.BaseException(channel+" is not set up. Did you forget to call initChannel?")},PostMessageBusSink.prototype._handleOnEventDone=function(){this._messageBuffer.length>0&&(this._sendMessages(this._messageBuffer),this._messageBuffer=[])},PostMessageBusSink.prototype._sendMessages=function(messages){this._postMessageTarget.postMessage(messages)},PostMessageBusSink}();exports.PostMessageBusSink=PostMessageBusSink;var PostMessageBusSource=function(){function PostMessageBusSource(eventTarget){var _this=this;if(this._channels=collection_1.StringMapWrapper.create(),eventTarget)eventTarget.addEventListener("message",function(ev){return _this._handleMessages(ev)});else{var workerScope=self;workerScope.addEventListener("message",function(ev){return _this._handleMessages(ev)})}}return PostMessageBusSource.prototype.attachToZone=function(zone){this._zone=zone},PostMessageBusSource.prototype.initChannel=function(channel,runInZone){if(void 0===runInZone&&(runInZone=!0),collection_1.StringMapWrapper.contains(this._channels,channel))throw new exceptions_1.BaseException(channel+" has already been initialized");var emitter=new async_1.EventEmitter((!1)),channelInfo=new _Channel(emitter,runInZone);this._channels[channel]=channelInfo},PostMessageBusSource.prototype.from=function(channel){if(collection_1.StringMapWrapper.contains(this._channels,channel))return this._channels[channel].emitter;throw new exceptions_1.BaseException(channel+" is not set up. Did you forget to call initChannel?")},PostMessageBusSource.prototype._handleMessages=function(ev){for(var messages=ev.data,i=0;i<messages.length;i++)this._handleMessage(messages[i])},PostMessageBusSource.prototype._handleMessage=function(data){var channel=data.channel;if(collection_1.StringMapWrapper.contains(this._channels,channel)){var channelInfo=this._channels[channel];channelInfo.runInZone?this._zone.run(function(){channelInfo.emitter.emit(data.message)}):channelInfo.emitter.emit(data.message)}},PostMessageBusSource}();exports.PostMessageBusSource=PostMessageBusSource;var PostMessageBus=function(){function PostMessageBus(sink,source){this.sink=sink,this.source=source}return PostMessageBus.prototype.attachToZone=function(zone){this.source.attachToZone(zone),this.sink.attachToZone(zone)},PostMessageBus.prototype.initChannel=function(channel,runInZone){void 0===runInZone&&(runInZone=!0),this.source.initChannel(channel,runInZone),this.sink.initChannel(channel,runInZone)},PostMessageBus.prototype.from=function(channel){return this.source.from(channel)},PostMessageBus.prototype.to=function(channel){return this.sink.to(channel)},PostMessageBus.decorators=[{type:core_1.Injectable}],PostMessageBus.ctorParameters=[{type:PostMessageBusSink},{type:PostMessageBusSource}],PostMessageBus}();exports.PostMessageBus=PostMessageBus;var _Channel=function(){function _Channel(emitter,runInZone){this.emitter=emitter,this.runInZone=runInZone}return _Channel}()},{"../../facade/async":344,"../../facade/collection":347,"../../facade/exceptions":349,"@angular/core":154}],360:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),RenderStore=function(){function RenderStore(){this._nextIndex=0,this._lookupById=new Map,this._lookupByObject=new Map}return RenderStore.prototype.allocateId=function(){return this._nextIndex++},RenderStore.prototype.store=function(obj,id){this._lookupById.set(id,obj),this._lookupByObject.set(obj,id)},RenderStore.prototype.remove=function(obj){var index=this._lookupByObject.get(obj);this._lookupByObject.delete(obj),this._lookupById.delete(index)},RenderStore.prototype.deserialize=function(id){return null==id?null:this._lookupById.has(id)?this._lookupById.get(id):null},RenderStore.prototype.serialize=function(obj){return null==obj?null:this._lookupByObject.get(obj)},RenderStore.decorators=[{type:core_1.Injectable}],RenderStore.ctorParameters=[],RenderStore}();exports.RenderStore=RenderStore},{"@angular/core":154}],361:[function(require,module,exports){"use strict";var LocationType=function(){function LocationType(href,protocol,host,hostname,port,pathname,search,hash,origin){this.href=href,this.protocol=protocol,this.host=host,this.hostname=hostname,this.port=port,this.pathname=pathname,this.search=search,this.hash=hash,this.origin=origin}return LocationType}();exports.LocationType=LocationType},{}],362:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),core_private_1=require("../../../core_private"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),render_store_1=require("./render_store"),serialized_types_1=require("./serialized_types");exports.PRIMITIVE=String;var Serializer=function(){function Serializer(_renderStore){this._renderStore=_renderStore}return Serializer.prototype.serialize=function(obj,type){var _this=this;if(!lang_1.isPresent(obj))return null;if(lang_1.isArray(obj))return obj.map(function(v){return _this.serialize(v,type)});if(type==exports.PRIMITIVE)return obj;if(type==RenderStoreObject)return this._renderStore.serialize(obj);if(type===core_1.RenderComponentType)return this._serializeRenderComponentType(obj);if(type===core_1.ViewEncapsulation)return lang_1.serializeEnum(obj);if(type===serialized_types_1.LocationType)return this._serializeLocation(obj);throw new exceptions_1.BaseException("No serializer for "+type.toString())},Serializer.prototype.deserialize=function(map,type,data){var _this=this;if(!lang_1.isPresent(map))return null;if(lang_1.isArray(map)){var obj=[];return map.forEach(function(val){return obj.push(_this.deserialize(val,type,data))}),obj}if(type==exports.PRIMITIVE)return map;if(type==RenderStoreObject)return this._renderStore.deserialize(map);if(type===core_1.RenderComponentType)return this._deserializeRenderComponentType(map);if(type===core_1.ViewEncapsulation)return core_private_1.VIEW_ENCAPSULATION_VALUES[map];if(type===serialized_types_1.LocationType)return this._deserializeLocation(map);throw new exceptions_1.BaseException("No deserializer for "+type.toString())},Serializer.prototype._serializeLocation=function(loc){return{href:loc.href,protocol:loc.protocol,host:loc.host,hostname:loc.hostname,port:loc.port,pathname:loc.pathname,search:loc.search,hash:loc.hash,origin:loc.origin}},Serializer.prototype._deserializeLocation=function(loc){return new serialized_types_1.LocationType(loc.href,loc.protocol,loc.host,loc.hostname,loc.port,loc.pathname,loc.search,loc.hash,loc.origin)},Serializer.prototype._serializeRenderComponentType=function(obj){return{id:obj.id,templateUrl:obj.templateUrl,slotCount:obj.slotCount,encapsulation:this.serialize(obj.encapsulation,core_1.ViewEncapsulation),styles:this.serialize(obj.styles,exports.PRIMITIVE)}},Serializer.prototype._deserializeRenderComponentType=function(map){return new core_1.RenderComponentType(map.id,map.templateUrl,map.slotCount,this.deserialize(map.encapsulation,core_1.ViewEncapsulation),this.deserialize(map.styles,exports.PRIMITIVE),{})},Serializer.decorators=[{type:core_1.Injectable}],Serializer.ctorParameters=[{type:render_store_1.RenderStore}],Serializer}();exports.Serializer=Serializer;var RenderStoreObject=function(){function RenderStoreObject(){}return RenderStoreObject}();exports.RenderStoreObject=RenderStoreObject},{"../../../core_private":317,"../../facade/exceptions":349,"../../facade/lang":350,"./render_store":360,"./serialized_types":361,"@angular/core":154}],363:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},core_1=require("@angular/core"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),message_bus_1=require("../shared/message_bus"),serializer_1=require("../shared/serializer"),ServiceMessageBrokerFactory=function(){function ServiceMessageBrokerFactory(){}return ServiceMessageBrokerFactory}();exports.ServiceMessageBrokerFactory=ServiceMessageBrokerFactory;var ServiceMessageBrokerFactory_=function(_super){function ServiceMessageBrokerFactory_(_messageBus,_serializer){_super.call(this),this._messageBus=_messageBus,this._serializer=_serializer}return __extends(ServiceMessageBrokerFactory_,_super),ServiceMessageBrokerFactory_.prototype.createMessageBroker=function(channel,runInZone){return void 0===runInZone&&(runInZone=!0),this._messageBus.initChannel(channel,runInZone),new ServiceMessageBroker_(this._messageBus,this._serializer,channel)},ServiceMessageBrokerFactory_.decorators=[{type:core_1.Injectable}],ServiceMessageBrokerFactory_.ctorParameters=[{type:message_bus_1.MessageBus},{type:serializer_1.Serializer}],ServiceMessageBrokerFactory_}(ServiceMessageBrokerFactory);exports.ServiceMessageBrokerFactory_=ServiceMessageBrokerFactory_;var ServiceMessageBroker=function(){function ServiceMessageBroker(){}return ServiceMessageBroker}();exports.ServiceMessageBroker=ServiceMessageBroker;var ServiceMessageBroker_=function(_super){function ServiceMessageBroker_(messageBus,_serializer,channel){var _this=this;_super.call(this),this._serializer=_serializer,this.channel=channel,this._methods=new collection_1.Map,this._sink=messageBus.to(channel);var source=messageBus.from(channel);source.subscribe({next:function(message){return _this._handleMessage(message)}})}return __extends(ServiceMessageBroker_,_super),ServiceMessageBroker_.prototype.registerMethod=function(methodName,signature,method,returnType){var _this=this;this._methods.set(methodName,function(message){for(var serializedArgs=message.args,numArgs=null===signature?0:signature.length,deserializedArgs=collection_1.ListWrapper.createFixedSize(numArgs),i=0;i<numArgs;i++){var serializedArg=serializedArgs[i];deserializedArgs[i]=_this._serializer.deserialize(serializedArg,signature[i])}var promise=lang_1.FunctionWrapper.apply(method,deserializedArgs);lang_1.isPresent(returnType)&&lang_1.isPresent(promise)&&_this._wrapWebWorkerPromise(message.id,promise,returnType)})},ServiceMessageBroker_.prototype._handleMessage=function(map){var message=new ReceivedMessage(map);this._methods.has(message.method)&&this._methods.get(message.method)(message)},ServiceMessageBroker_.prototype._wrapWebWorkerPromise=function(id,promise,type){var _this=this;promise.then(function(result){_this._sink.emit({type:"result",value:_this._serializer.serialize(result,type),id:id})})},ServiceMessageBroker_}(ServiceMessageBroker);exports.ServiceMessageBroker_=ServiceMessageBroker_;var ReceivedMessage=function(){function ReceivedMessage(data){this.method=data.method,this.args=data.args,this.id=data.id,this.type=data.type}return ReceivedMessage}();exports.ReceivedMessage=ReceivedMessage},{"../../facade/collection":347,"../../facade/lang":350,"../shared/message_bus":357,"../shared/serializer":362,"@angular/core":154}],364:[function(require,module,exports){"use strict";var exceptions_1=require("../../facade/exceptions"),serializer_1=require("../shared/serializer"),event_serializer_1=require("./event_serializer"),EventDispatcher=function(){function EventDispatcher(_sink,_serializer){this._sink=_sink,this._serializer=_serializer}return EventDispatcher.prototype.dispatchRenderEvent=function(element,eventTarget,eventName,event){var serializedEvent;switch(event.type){case"click":case"mouseup":case"mousedown":case"dblclick":case"contextmenu":case"mouseenter":case"mouseleave":case"mousemove":case"mouseout":case"mouseover":case"show":serializedEvent=event_serializer_1.serializeMouseEvent(event);break;case"keydown":case"keypress":case"keyup":serializedEvent=event_serializer_1.serializeKeyboardEvent(event);break;case"input":case"change":case"blur":serializedEvent=event_serializer_1.serializeEventWithTarget(event);break;case"abort":case"afterprint":case"beforeprint":case"cached":case"canplay":case"canplaythrough":case"chargingchange":case"chargingtimechange":case"close":case"dischargingtimechange":case"DOMContentLoaded":case"downloading":case"durationchange":case"emptied":case"ended":case"error":case"fullscreenchange":case"fullscreenerror":case"invalid":case"languagechange":case"levelfchange":case"loadeddata":case"loadedmetadata":case"obsolete":case"offline":case"online":case"open":case"orientatoinchange":case"pause":case"pointerlockchange":case"pointerlockerror":case"play":case"playing":case"ratechange":case"readystatechange":case"reset":case"scroll":case"seeked":case"seeking":case"stalled":case"submit":case"success":case"suspend":case"timeupdate":case"updateready":case"visibilitychange":case"volumechange":case"waiting":serializedEvent=event_serializer_1.serializeGenericEvent(event);break;case"transitionend":serializedEvent=event_serializer_1.serializeTransitionEvent(event);break;default:throw new exceptions_1.BaseException(eventName+" not supported on WebWorkers")}return this._sink.emit({element:this._serializer.serialize(element,serializer_1.RenderStoreObject),eventName:eventName,eventTarget:eventTarget,event:serializedEvent}),!1},EventDispatcher}();exports.EventDispatcher=EventDispatcher},{"../../facade/exceptions":349,"../shared/serializer":362,"./event_serializer":365}],365:[function(require,module,exports){"use strict";function serializeGenericEvent(e){return serializeEvent(e,EVENT_PROPERTIES)}function serializeEventWithTarget(e){var serializedEvent=serializeEvent(e,EVENT_PROPERTIES);return addTarget(e,serializedEvent)}function serializeMouseEvent(e){return serializeEvent(e,MOUSE_EVENT_PROPERTIES)}function serializeKeyboardEvent(e){var serializedEvent=serializeEvent(e,KEYBOARD_EVENT_PROPERTIES);return addTarget(e,serializedEvent)}function serializeTransitionEvent(e){var serializedEvent=serializeEvent(e,TRANSITION_EVENT_PROPERTIES);return addTarget(e,serializedEvent)}function addTarget(e,serializedEvent){if(NODES_WITH_VALUE.has(e.target.tagName.toLowerCase())){var target=e.target;serializedEvent.target={value:target.value},lang_1.isPresent(target.files)&&(serializedEvent.target.files=target.files)}return serializedEvent}function serializeEvent(e,properties){for(var serialized={},i=0;i<properties.length;i++){var prop=properties[i];serialized[prop]=e[prop]}return serialized}var collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),MOUSE_EVENT_PROPERTIES=["altKey","button","clientX","clientY","metaKey","movementX","movementY","offsetX","offsetY","region","screenX","screenY","shiftKey"],KEYBOARD_EVENT_PROPERTIES=["altkey","charCode","code","ctrlKey","isComposing","key","keyCode","location","metaKey","repeat","shiftKey","which"],TRANSITION_EVENT_PROPERTIES=["propertyName","elapsedTime","pseudoElement"],EVENT_PROPERTIES=["type","bubbles","cancelable"],NODES_WITH_VALUE=new collection_1.Set(["input","select","option","button","li","meter","progress","param","textarea"]);exports.serializeGenericEvent=serializeGenericEvent,exports.serializeEventWithTarget=serializeEventWithTarget,exports.serializeMouseEvent=serializeMouseEvent,exports.serializeKeyboardEvent=serializeKeyboardEvent,exports.serializeTransitionEvent=serializeTransitionEvent},{"../../facade/collection":347,"../../facade/lang":350}],366:[function(require,module,exports){"use strict";function initUiLocation(injector){return function(){var zone=injector.get(core_1.NgZone);zone.runGuarded(function(){return injector.get(platform_location_1.MessageBasedPlatformLocation).start()})}}var core_1=require("@angular/core"),browser_platform_location_1=require("../../browser/location/browser_platform_location"),platform_location_1=require("./platform_location");exports.WORKER_UI_LOCATION_PROVIDERS=[platform_location_1.MessageBasedPlatformLocation,browser_platform_location_1.BrowserPlatformLocation,{provide:core_1.PLATFORM_INITIALIZER,useFactory:initUiLocation,multi:!0,deps:[core_1.Injector]}]},{"../../browser/location/browser_platform_location":323,"./platform_location":367,"@angular/core":154}],367:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),browser_platform_location_1=require("../../browser/location/browser_platform_location"),lang_1=require("../../facade/lang"),message_bus_1=require("../shared/message_bus"),messaging_api_1=require("../shared/messaging_api"),serialized_types_1=require("../shared/serialized_types"),serializer_1=require("../shared/serializer"),service_message_broker_1=require("../shared/service_message_broker"),MessageBasedPlatformLocation=function(){function MessageBasedPlatformLocation(_brokerFactory,_platformLocation,bus,_serializer){this._brokerFactory=_brokerFactory,this._platformLocation=_platformLocation,this._serializer=_serializer,this._platformLocation.onPopState(lang_1.FunctionWrapper.bind(this._sendUrlChangeEvent,this)),this._platformLocation.onHashChange(lang_1.FunctionWrapper.bind(this._sendUrlChangeEvent,this)),this._broker=this._brokerFactory.createMessageBroker(messaging_api_1.ROUTER_CHANNEL),this._channelSink=bus.to(messaging_api_1.ROUTER_CHANNEL)}return MessageBasedPlatformLocation.prototype.start=function(){this._broker.registerMethod("getLocation",null,lang_1.FunctionWrapper.bind(this._getLocation,this),serialized_types_1.LocationType),this._broker.registerMethod("setPathname",[serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._setPathname,this)),this._broker.registerMethod("pushState",[serializer_1.PRIMITIVE,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._platformLocation.pushState,this._platformLocation)),this._broker.registerMethod("replaceState",[serializer_1.PRIMITIVE,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._platformLocation.replaceState,this._platformLocation)),this._broker.registerMethod("forward",null,lang_1.FunctionWrapper.bind(this._platformLocation.forward,this._platformLocation)),this._broker.registerMethod("back",null,lang_1.FunctionWrapper.bind(this._platformLocation.back,this._platformLocation))},MessageBasedPlatformLocation.prototype._getLocation=function(){return Promise.resolve(this._platformLocation.location)},MessageBasedPlatformLocation.prototype._sendUrlChangeEvent=function(e){var loc=this._serializer.serialize(this._platformLocation.location,serialized_types_1.LocationType),serializedEvent={type:e.type};this._channelSink.emit({event:serializedEvent,location:loc})},MessageBasedPlatformLocation.prototype._setPathname=function(pathname){this._platformLocation.pathname=pathname},MessageBasedPlatformLocation.decorators=[{type:core_1.Injectable}],MessageBasedPlatformLocation.ctorParameters=[{type:service_message_broker_1.ServiceMessageBrokerFactory},{type:browser_platform_location_1.BrowserPlatformLocation},{type:message_bus_1.MessageBus},{type:serializer_1.Serializer}],MessageBasedPlatformLocation}();exports.MessageBasedPlatformLocation=MessageBasedPlatformLocation},{"../../browser/location/browser_platform_location":323,"../../facade/lang":350,"../shared/message_bus":357,"../shared/messaging_api":358,"../shared/serialized_types":361,"../shared/serializer":362,"../shared/service_message_broker":363,"@angular/core":154}],368:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),lang_1=require("../../facade/lang"),message_bus_1=require("../shared/message_bus"),messaging_api_1=require("../shared/messaging_api"),render_store_1=require("../shared/render_store"),serializer_1=require("../shared/serializer"),service_message_broker_1=require("../shared/service_message_broker"),event_dispatcher_1=require("../ui/event_dispatcher"),MessageBasedRenderer=function(){function MessageBasedRenderer(_brokerFactory,_bus,_serializer,_renderStore,_rootRenderer){this._brokerFactory=_brokerFactory,this._bus=_bus,this._serializer=_serializer,this._renderStore=_renderStore,this._rootRenderer=_rootRenderer}return MessageBasedRenderer.prototype.start=function(){var broker=this._brokerFactory.createMessageBroker(messaging_api_1.RENDERER_CHANNEL);this._bus.initChannel(messaging_api_1.EVENT_CHANNEL),this._eventDispatcher=new event_dispatcher_1.EventDispatcher(this._bus.to(messaging_api_1.EVENT_CHANNEL),this._serializer),broker.registerMethod("renderComponent",[core_1.RenderComponentType,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._renderComponent,this)),broker.registerMethod("selectRootElement",[serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._selectRootElement,this)),broker.registerMethod("createElement",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._createElement,this)),broker.registerMethod("createViewRoot",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._createViewRoot,this)),broker.registerMethod("createTemplateAnchor",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._createTemplateAnchor,this)),broker.registerMethod("createText",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._createText,this)),broker.registerMethod("projectNodes",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.RenderStoreObject],lang_1.FunctionWrapper.bind(this._projectNodes,this)),broker.registerMethod("attachViewAfter",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.RenderStoreObject],lang_1.FunctionWrapper.bind(this._attachViewAfter,this)),broker.registerMethod("detachView",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject],lang_1.FunctionWrapper.bind(this._detachView,this)),broker.registerMethod("destroyView",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.RenderStoreObject],lang_1.FunctionWrapper.bind(this._destroyView,this)),broker.registerMethod("setElementProperty",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._setElementProperty,this)),broker.registerMethod("setElementAttribute",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._setElementAttribute,this)),broker.registerMethod("setBindingDebugInfo",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._setBindingDebugInfo,this)),broker.registerMethod("setElementClass",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._setElementClass,this)),broker.registerMethod("setElementStyle",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._setElementStyle,this)),broker.registerMethod("invokeElementMethod",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._invokeElementMethod,this)),broker.registerMethod("setText",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._setText,this)),broker.registerMethod("listen",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._listen,this)),broker.registerMethod("listenGlobal",[serializer_1.RenderStoreObject,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE,serializer_1.PRIMITIVE],lang_1.FunctionWrapper.bind(this._listenGlobal,this)),broker.registerMethod("listenDone",[serializer_1.RenderStoreObject,serializer_1.RenderStoreObject],lang_1.FunctionWrapper.bind(this._listenDone,this))},MessageBasedRenderer.prototype._renderComponent=function(renderComponentType,rendererId){var renderer=this._rootRenderer.renderComponent(renderComponentType);this._renderStore.store(renderer,rendererId)},MessageBasedRenderer.prototype._selectRootElement=function(renderer,selector,elId){this._renderStore.store(renderer.selectRootElement(selector,null),elId)},MessageBasedRenderer.prototype._createElement=function(renderer,parentElement,name,elId){this._renderStore.store(renderer.createElement(parentElement,name,null),elId)},MessageBasedRenderer.prototype._createViewRoot=function(renderer,hostElement,elId){var viewRoot=renderer.createViewRoot(hostElement);this._renderStore.serialize(hostElement)!==elId&&this._renderStore.store(viewRoot,elId)},MessageBasedRenderer.prototype._createTemplateAnchor=function(renderer,parentElement,elId){this._renderStore.store(renderer.createTemplateAnchor(parentElement,null),elId)},MessageBasedRenderer.prototype._createText=function(renderer,parentElement,value,elId){this._renderStore.store(renderer.createText(parentElement,value,null),elId)},MessageBasedRenderer.prototype._projectNodes=function(renderer,parentElement,nodes){renderer.projectNodes(parentElement,nodes)},MessageBasedRenderer.prototype._attachViewAfter=function(renderer,node,viewRootNodes){renderer.attachViewAfter(node,viewRootNodes)},MessageBasedRenderer.prototype._detachView=function(renderer,viewRootNodes){renderer.detachView(viewRootNodes)},MessageBasedRenderer.prototype._destroyView=function(renderer,hostElement,viewAllNodes){renderer.destroyView(hostElement,viewAllNodes);for(var i=0;i<viewAllNodes.length;i++)this._renderStore.remove(viewAllNodes[i])},MessageBasedRenderer.prototype._setElementProperty=function(renderer,renderElement,propertyName,propertyValue){renderer.setElementProperty(renderElement,propertyName,propertyValue)},MessageBasedRenderer.prototype._setElementAttribute=function(renderer,renderElement,attributeName,attributeValue){renderer.setElementAttribute(renderElement,attributeName,attributeValue)},MessageBasedRenderer.prototype._setBindingDebugInfo=function(renderer,renderElement,propertyName,propertyValue){renderer.setBindingDebugInfo(renderElement,propertyName,propertyValue)},MessageBasedRenderer.prototype._setElementClass=function(renderer,renderElement,className,isAdd){renderer.setElementClass(renderElement,className,isAdd)},MessageBasedRenderer.prototype._setElementStyle=function(renderer,renderElement,styleName,styleValue){renderer.setElementStyle(renderElement,styleName,styleValue)},MessageBasedRenderer.prototype._invokeElementMethod=function(renderer,renderElement,methodName,args){renderer.invokeElementMethod(renderElement,methodName,args)},MessageBasedRenderer.prototype._setText=function(renderer,renderNode,text){renderer.setText(renderNode,text)},MessageBasedRenderer.prototype._listen=function(renderer,renderElement,eventName,unlistenId){
var _this=this,unregisterCallback=renderer.listen(renderElement,eventName,function(event){return _this._eventDispatcher.dispatchRenderEvent(renderElement,null,eventName,event)});this._renderStore.store(unregisterCallback,unlistenId)},MessageBasedRenderer.prototype._listenGlobal=function(renderer,eventTarget,eventName,unlistenId){var _this=this,unregisterCallback=renderer.listenGlobal(eventTarget,eventName,function(event){return _this._eventDispatcher.dispatchRenderEvent(null,eventTarget,eventName,event)});this._renderStore.store(unregisterCallback,unlistenId)},MessageBasedRenderer.prototype._listenDone=function(renderer,unlistenCallback){unlistenCallback()},MessageBasedRenderer.decorators=[{type:core_1.Injectable}],MessageBasedRenderer.ctorParameters=[{type:service_message_broker_1.ServiceMessageBrokerFactory},{type:message_bus_1.MessageBus},{type:serializer_1.Serializer},{type:render_store_1.RenderStore},{type:core_1.RootRenderer}],MessageBasedRenderer}();exports.MessageBasedRenderer=MessageBasedRenderer},{"../../facade/lang":350,"../shared/message_bus":357,"../shared/messaging_api":358,"../shared/render_store":360,"../shared/serializer":362,"../shared/service_message_broker":363,"../ui/event_dispatcher":364,"@angular/core":154}],369:[function(require,module,exports){"use strict";function deserializeGenericEvent(serializedEvent){return serializedEvent}exports.deserializeGenericEvent=deserializeGenericEvent},{}],370:[function(require,module,exports){"use strict";function appInitFnFactory(platformLocation,zone){return function(){return zone.runGuarded(function(){return platformLocation.init()})}}var common_1=require("@angular/common"),core_1=require("@angular/core"),platform_location_1=require("./platform_location");exports.WORKER_APP_LOCATION_PROVIDERS=[{provide:common_1.PlatformLocation,useClass:platform_location_1.WebWorkerPlatformLocation},{provide:core_1.APP_INITIALIZER,useFactory:appInitFnFactory,multi:!0,deps:[common_1.PlatformLocation,core_1.NgZone]}]},{"./platform_location":371,"@angular/common":1,"@angular/core":154}],371:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},common_1=require("@angular/common"),core_1=require("@angular/core"),collection_1=require("../../facade/collection"),exceptions_1=require("../../facade/exceptions"),lang_1=require("../../facade/lang"),client_message_broker_1=require("../shared/client_message_broker"),message_bus_1=require("../shared/message_bus"),messaging_api_1=require("../shared/messaging_api"),serialized_types_1=require("../shared/serialized_types"),serializer_1=require("../shared/serializer"),event_deserializer_1=require("./event_deserializer"),WebWorkerPlatformLocation=function(_super){function WebWorkerPlatformLocation(brokerFactory,bus,_serializer){var _this=this;_super.call(this),this._serializer=_serializer,this._popStateListeners=[],this._hashChangeListeners=[],this._location=null,this._broker=brokerFactory.createMessageBroker(messaging_api_1.ROUTER_CHANNEL),this._channelSource=bus.from(messaging_api_1.ROUTER_CHANNEL),this._channelSource.subscribe({next:function(msg){var listeners=null;if(collection_1.StringMapWrapper.contains(msg,"event")){var type=msg.event.type;if(lang_1.StringWrapper.equals(type,"popstate")?listeners=_this._popStateListeners:lang_1.StringWrapper.equals(type,"hashchange")&&(listeners=_this._hashChangeListeners),null!==listeners){var e_1=event_deserializer_1.deserializeGenericEvent(msg.event);_this._location=_this._serializer.deserialize(msg.location,serialized_types_1.LocationType),listeners.forEach(function(fn){return fn(e_1)})}}}})}return __extends(WebWorkerPlatformLocation,_super),WebWorkerPlatformLocation.prototype.init=function(){var _this=this,args=new client_message_broker_1.UiArguments("getLocation"),locationPromise=this._broker.runOnService(args,serialized_types_1.LocationType);return locationPromise.then(function(val){return _this._location=val,!0},function(err){throw new exceptions_1.BaseException(err)})},WebWorkerPlatformLocation.prototype.getBaseHrefFromDOM=function(){throw new exceptions_1.BaseException("Attempt to get base href from DOM from WebWorker. You must either provide a value for the APP_BASE_HREF token through DI or use the hash location strategy.")},WebWorkerPlatformLocation.prototype.onPopState=function(fn){this._popStateListeners.push(fn)},WebWorkerPlatformLocation.prototype.onHashChange=function(fn){this._hashChangeListeners.push(fn)},Object.defineProperty(WebWorkerPlatformLocation.prototype,"pathname",{get:function(){return null===this._location?null:this._location.pathname},set:function(newPath){if(null===this._location)throw new exceptions_1.BaseException("Attempt to set pathname before value is obtained from UI");this._location.pathname=newPath;var fnArgs=[new client_message_broker_1.FnArg(newPath,serializer_1.PRIMITIVE)],args=new client_message_broker_1.UiArguments("setPathname",fnArgs);this._broker.runOnService(args,null)},enumerable:!0,configurable:!0}),Object.defineProperty(WebWorkerPlatformLocation.prototype,"search",{get:function(){return null===this._location?null:this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(WebWorkerPlatformLocation.prototype,"hash",{get:function(){return null===this._location?null:this._location.hash},enumerable:!0,configurable:!0}),WebWorkerPlatformLocation.prototype.pushState=function(state,title,url){var fnArgs=[new client_message_broker_1.FnArg(state,serializer_1.PRIMITIVE),new client_message_broker_1.FnArg(title,serializer_1.PRIMITIVE),new client_message_broker_1.FnArg(url,serializer_1.PRIMITIVE)],args=new client_message_broker_1.UiArguments("pushState",fnArgs);this._broker.runOnService(args,null)},WebWorkerPlatformLocation.prototype.replaceState=function(state,title,url){var fnArgs=[new client_message_broker_1.FnArg(state,serializer_1.PRIMITIVE),new client_message_broker_1.FnArg(title,serializer_1.PRIMITIVE),new client_message_broker_1.FnArg(url,serializer_1.PRIMITIVE)],args=new client_message_broker_1.UiArguments("replaceState",fnArgs);this._broker.runOnService(args,null)},WebWorkerPlatformLocation.prototype.forward=function(){var args=new client_message_broker_1.UiArguments("forward");this._broker.runOnService(args,null)},WebWorkerPlatformLocation.prototype.back=function(){var args=new client_message_broker_1.UiArguments("back");this._broker.runOnService(args,null)},WebWorkerPlatformLocation.decorators=[{type:core_1.Injectable}],WebWorkerPlatformLocation.ctorParameters=[{type:client_message_broker_1.ClientMessageBrokerFactory},{type:message_bus_1.MessageBus},{type:serializer_1.Serializer}],WebWorkerPlatformLocation}(common_1.PlatformLocation);exports.WebWorkerPlatformLocation=WebWorkerPlatformLocation},{"../../facade/collection":347,"../../facade/exceptions":349,"../../facade/lang":350,"../shared/client_message_broker":356,"../shared/message_bus":357,"../shared/messaging_api":358,"../shared/serialized_types":361,"../shared/serializer":362,"./event_deserializer":369,"@angular/common":1,"@angular/core":154}],372:[function(require,module,exports){"use strict";function eventNameWithTarget(target,eventName){return target+":"+eventName}var core_1=require("@angular/core"),collection_1=require("../../facade/collection"),lang_1=require("../../facade/lang"),client_message_broker_1=require("../shared/client_message_broker"),message_bus_1=require("../shared/message_bus"),messaging_api_1=require("../shared/messaging_api"),render_store_1=require("../shared/render_store"),serializer_1=require("../shared/serializer"),event_deserializer_1=require("./event_deserializer"),WebWorkerRootRenderer=function(){function WebWorkerRootRenderer(messageBrokerFactory,bus,_serializer,_renderStore){var _this=this;this._serializer=_serializer,this._renderStore=_renderStore,this.globalEvents=new NamedEventEmitter,this._componentRenderers=new Map,this._messageBroker=messageBrokerFactory.createMessageBroker(messaging_api_1.RENDERER_CHANNEL),bus.initChannel(messaging_api_1.EVENT_CHANNEL);var source=bus.from(messaging_api_1.EVENT_CHANNEL);source.subscribe({next:function(message){return _this._dispatchEvent(message)}})}return WebWorkerRootRenderer.prototype._dispatchEvent=function(message){var eventName=message.eventName,target=message.eventTarget,event=event_deserializer_1.deserializeGenericEvent(message.event);if(lang_1.isPresent(target))this.globalEvents.dispatchEvent(eventNameWithTarget(target,eventName),event);else{var element=this._serializer.deserialize(message.element,serializer_1.RenderStoreObject);element.events.dispatchEvent(eventName,event)}},WebWorkerRootRenderer.prototype.renderComponent=function(componentType){var result=this._componentRenderers.get(componentType.id);if(lang_1.isBlank(result)){result=new WebWorkerRenderer(this,componentType),this._componentRenderers.set(componentType.id,result);var id=this._renderStore.allocateId();this._renderStore.store(result,id),this.runOnService("renderComponent",[new client_message_broker_1.FnArg(componentType,core_1.RenderComponentType),new client_message_broker_1.FnArg(result,serializer_1.RenderStoreObject)])}return result},WebWorkerRootRenderer.prototype.runOnService=function(fnName,fnArgs){var args=new client_message_broker_1.UiArguments(fnName,fnArgs);this._messageBroker.runOnService(args,null)},WebWorkerRootRenderer.prototype.allocateNode=function(){var result=new WebWorkerRenderNode,id=this._renderStore.allocateId();return this._renderStore.store(result,id),result},WebWorkerRootRenderer.prototype.allocateId=function(){return this._renderStore.allocateId()},WebWorkerRootRenderer.prototype.destroyNodes=function(nodes){for(var i=0;i<nodes.length;i++)this._renderStore.remove(nodes[i])},WebWorkerRootRenderer.decorators=[{type:core_1.Injectable}],WebWorkerRootRenderer.ctorParameters=[{type:client_message_broker_1.ClientMessageBrokerFactory},{type:message_bus_1.MessageBus},{type:serializer_1.Serializer},{type:render_store_1.RenderStore}],WebWorkerRootRenderer}();exports.WebWorkerRootRenderer=WebWorkerRootRenderer;var WebWorkerRenderer=function(){function WebWorkerRenderer(_rootRenderer,_componentType){this._rootRenderer=_rootRenderer,this._componentType=_componentType}return WebWorkerRenderer.prototype._runOnService=function(fnName,fnArgs){var fnArgsWithRenderer=[new client_message_broker_1.FnArg(this,serializer_1.RenderStoreObject)].concat(fnArgs);this._rootRenderer.runOnService(fnName,fnArgsWithRenderer)},WebWorkerRenderer.prototype.selectRootElement=function(selectorOrNode,debugInfo){var node=this._rootRenderer.allocateNode();return this._runOnService("selectRootElement",[new client_message_broker_1.FnArg(selectorOrNode,null),new client_message_broker_1.FnArg(node,serializer_1.RenderStoreObject)]),node},WebWorkerRenderer.prototype.createElement=function(parentElement,name,debugInfo){var node=this._rootRenderer.allocateNode();return this._runOnService("createElement",[new client_message_broker_1.FnArg(parentElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(name,null),new client_message_broker_1.FnArg(node,serializer_1.RenderStoreObject)]),node},WebWorkerRenderer.prototype.createViewRoot=function(hostElement){var viewRoot=this._componentType.encapsulation===core_1.ViewEncapsulation.Native?this._rootRenderer.allocateNode():hostElement;return this._runOnService("createViewRoot",[new client_message_broker_1.FnArg(hostElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(viewRoot,serializer_1.RenderStoreObject)]),viewRoot},WebWorkerRenderer.prototype.createTemplateAnchor=function(parentElement,debugInfo){var node=this._rootRenderer.allocateNode();return this._runOnService("createTemplateAnchor",[new client_message_broker_1.FnArg(parentElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(node,serializer_1.RenderStoreObject)]),node},WebWorkerRenderer.prototype.createText=function(parentElement,value,debugInfo){var node=this._rootRenderer.allocateNode();return this._runOnService("createText",[new client_message_broker_1.FnArg(parentElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(value,null),new client_message_broker_1.FnArg(node,serializer_1.RenderStoreObject)]),node},WebWorkerRenderer.prototype.projectNodes=function(parentElement,nodes){this._runOnService("projectNodes",[new client_message_broker_1.FnArg(parentElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(nodes,serializer_1.RenderStoreObject)])},WebWorkerRenderer.prototype.attachViewAfter=function(node,viewRootNodes){this._runOnService("attachViewAfter",[new client_message_broker_1.FnArg(node,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(viewRootNodes,serializer_1.RenderStoreObject)])},WebWorkerRenderer.prototype.detachView=function(viewRootNodes){this._runOnService("detachView",[new client_message_broker_1.FnArg(viewRootNodes,serializer_1.RenderStoreObject)])},WebWorkerRenderer.prototype.destroyView=function(hostElement,viewAllNodes){this._runOnService("destroyView",[new client_message_broker_1.FnArg(hostElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(viewAllNodes,serializer_1.RenderStoreObject)]),this._rootRenderer.destroyNodes(viewAllNodes)},WebWorkerRenderer.prototype.setElementProperty=function(renderElement,propertyName,propertyValue){this._runOnService("setElementProperty",[new client_message_broker_1.FnArg(renderElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(propertyName,null),new client_message_broker_1.FnArg(propertyValue,null)])},WebWorkerRenderer.prototype.setElementAttribute=function(renderElement,attributeName,attributeValue){this._runOnService("setElementAttribute",[new client_message_broker_1.FnArg(renderElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(attributeName,null),new client_message_broker_1.FnArg(attributeValue,null)])},WebWorkerRenderer.prototype.setBindingDebugInfo=function(renderElement,propertyName,propertyValue){this._runOnService("setBindingDebugInfo",[new client_message_broker_1.FnArg(renderElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(propertyName,null),new client_message_broker_1.FnArg(propertyValue,null)])},WebWorkerRenderer.prototype.setElementClass=function(renderElement,className,isAdd){this._runOnService("setElementClass",[new client_message_broker_1.FnArg(renderElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(className,null),new client_message_broker_1.FnArg(isAdd,null)])},WebWorkerRenderer.prototype.setElementStyle=function(renderElement,styleName,styleValue){this._runOnService("setElementStyle",[new client_message_broker_1.FnArg(renderElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(styleName,null),new client_message_broker_1.FnArg(styleValue,null)])},WebWorkerRenderer.prototype.invokeElementMethod=function(renderElement,methodName,args){this._runOnService("invokeElementMethod",[new client_message_broker_1.FnArg(renderElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(methodName,null),new client_message_broker_1.FnArg(args,null)])},WebWorkerRenderer.prototype.setText=function(renderNode,text){this._runOnService("setText",[new client_message_broker_1.FnArg(renderNode,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(text,null)])},WebWorkerRenderer.prototype.listen=function(renderElement,name,callback){var _this=this;renderElement.events.listen(name,callback);var unlistenCallbackId=this._rootRenderer.allocateId();return this._runOnService("listen",[new client_message_broker_1.FnArg(renderElement,serializer_1.RenderStoreObject),new client_message_broker_1.FnArg(name,null),new client_message_broker_1.FnArg(unlistenCallbackId,null)]),function(){renderElement.events.unlisten(name,callback),_this._runOnService("listenDone",[new client_message_broker_1.FnArg(unlistenCallbackId,null)])}},WebWorkerRenderer.prototype.listenGlobal=function(target,name,callback){var _this=this;this._rootRenderer.globalEvents.listen(eventNameWithTarget(target,name),callback);var unlistenCallbackId=this._rootRenderer.allocateId();return this._runOnService("listenGlobal",[new client_message_broker_1.FnArg(target,null),new client_message_broker_1.FnArg(name,null),new client_message_broker_1.FnArg(unlistenCallbackId,null)]),function(){_this._rootRenderer.globalEvents.unlisten(eventNameWithTarget(target,name),callback),_this._runOnService("listenDone",[new client_message_broker_1.FnArg(unlistenCallbackId,null)])}},WebWorkerRenderer.prototype.animate=function(element,startingStyles,keyframes,duration,delay,easing){return null},WebWorkerRenderer}();exports.WebWorkerRenderer=WebWorkerRenderer;var NamedEventEmitter=function(){function NamedEventEmitter(){}return NamedEventEmitter.prototype._getListeners=function(eventName){lang_1.isBlank(this._listeners)&&(this._listeners=new Map);var listeners=this._listeners.get(eventName);return lang_1.isBlank(listeners)&&(listeners=[],this._listeners.set(eventName,listeners)),listeners},NamedEventEmitter.prototype.listen=function(eventName,callback){this._getListeners(eventName).push(callback)},NamedEventEmitter.prototype.unlisten=function(eventName,callback){collection_1.ListWrapper.remove(this._getListeners(eventName),callback)},NamedEventEmitter.prototype.dispatchEvent=function(eventName,event){for(var listeners=this._getListeners(eventName),i=0;i<listeners.length;i++)listeners[i](event)},NamedEventEmitter}();exports.NamedEventEmitter=NamedEventEmitter;var WebWorkerRenderNode=function(){function WebWorkerRenderNode(){this.events=new NamedEventEmitter}return WebWorkerRenderNode}();exports.WebWorkerRenderNode=WebWorkerRenderNode},{"../../facade/collection":347,"../../facade/lang":350,"../shared/client_message_broker":356,"../shared/message_bus":357,"../shared/messaging_api":358,"../shared/render_store":360,"../shared/serializer":362,"./event_deserializer":369,"@angular/core":154}],373:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},dom_adapter_1=require("../../dom/dom_adapter"),WorkerDomAdapter=function(_super){function WorkerDomAdapter(){_super.apply(this,arguments)}return __extends(WorkerDomAdapter,_super),WorkerDomAdapter.makeCurrent=function(){dom_adapter_1.setRootDomAdapter(new WorkerDomAdapter)},WorkerDomAdapter.prototype.logError=function(error){console.error?console.error(error):console.log(error)},WorkerDomAdapter.prototype.log=function(error){console.log(error)},WorkerDomAdapter.prototype.logGroup=function(error){console.group?(console.group(error),this.logError(error)):console.log(error)},WorkerDomAdapter.prototype.logGroupEnd=function(){console.groupEnd&&console.groupEnd()},WorkerDomAdapter.prototype.hasProperty=function(element,name){throw"not implemented"},WorkerDomAdapter.prototype.setProperty=function(el,name,value){throw"not implemented"},WorkerDomAdapter.prototype.getProperty=function(el,name){throw"not implemented"},WorkerDomAdapter.prototype.invoke=function(el,methodName,args){throw"not implemented"},WorkerDomAdapter.prototype.getXHR=function(){throw"not implemented"},Object.defineProperty(WorkerDomAdapter.prototype,"attrToPropMap",{get:function(){throw"not implemented"},set:function(value){throw"not implemented"},enumerable:!0,configurable:!0}),WorkerDomAdapter.prototype.parse=function(templateHtml){throw"not implemented"},WorkerDomAdapter.prototype.query=function(selector){throw"not implemented"},WorkerDomAdapter.prototype.querySelector=function(el,selector){throw"not implemented"},WorkerDomAdapter.prototype.querySelectorAll=function(el,selector){throw"not implemented"},WorkerDomAdapter.prototype.on=function(el,evt,listener){throw"not implemented"},WorkerDomAdapter.prototype.onAndCancel=function(el,evt,listener){throw"not implemented"},WorkerDomAdapter.prototype.dispatchEvent=function(el,evt){throw"not implemented"},WorkerDomAdapter.prototype.createMouseEvent=function(eventType){throw"not implemented"},WorkerDomAdapter.prototype.createEvent=function(eventType){throw"not implemented"},WorkerDomAdapter.prototype.preventDefault=function(evt){throw"not implemented"},WorkerDomAdapter.prototype.isPrevented=function(evt){throw"not implemented"},WorkerDomAdapter.prototype.getInnerHTML=function(el){throw"not implemented"},WorkerDomAdapter.prototype.getTemplateContent=function(el){throw"not implemented"},WorkerDomAdapter.prototype.getOuterHTML=function(el){throw"not implemented"},WorkerDomAdapter.prototype.nodeName=function(node){throw"not implemented"},WorkerDomAdapter.prototype.nodeValue=function(node){throw"not implemented"},WorkerDomAdapter.prototype.type=function(node){throw"not implemented"},WorkerDomAdapter.prototype.content=function(node){throw"not implemented"},WorkerDomAdapter.prototype.firstChild=function(el){throw"not implemented"},WorkerDomAdapter.prototype.nextSibling=function(el){throw"not implemented"},WorkerDomAdapter.prototype.parentElement=function(el){throw"not implemented"},WorkerDomAdapter.prototype.childNodes=function(el){throw"not implemented"},WorkerDomAdapter.prototype.childNodesAsList=function(el){throw"not implemented"},WorkerDomAdapter.prototype.clearNodes=function(el){throw"not implemented"},WorkerDomAdapter.prototype.appendChild=function(el,node){throw"not implemented"},WorkerDomAdapter.prototype.removeChild=function(el,node){throw"not implemented"},WorkerDomAdapter.prototype.replaceChild=function(el,newNode,oldNode){throw"not implemented"},WorkerDomAdapter.prototype.remove=function(el){throw"not implemented"},WorkerDomAdapter.prototype.insertBefore=function(el,node){throw"not implemented"},WorkerDomAdapter.prototype.insertAllBefore=function(el,nodes){throw"not implemented"},WorkerDomAdapter.prototype.insertAfter=function(el,node){throw"not implemented"},WorkerDomAdapter.prototype.setInnerHTML=function(el,value){throw"not implemented"},WorkerDomAdapter.prototype.getText=function(el){throw"not implemented"},WorkerDomAdapter.prototype.setText=function(el,value){throw"not implemented"},WorkerDomAdapter.prototype.getValue=function(el){throw"not implemented"},WorkerDomAdapter.prototype.setValue=function(el,value){throw"not implemented"},WorkerDomAdapter.prototype.getChecked=function(el){throw"not implemented"},WorkerDomAdapter.prototype.setChecked=function(el,value){throw"not implemented"},WorkerDomAdapter.prototype.createComment=function(text){throw"not implemented"},WorkerDomAdapter.prototype.createTemplate=function(html){throw"not implemented"},WorkerDomAdapter.prototype.createElement=function(tagName,doc){throw"not implemented"},WorkerDomAdapter.prototype.createElementNS=function(ns,tagName,doc){throw"not implemented"},WorkerDomAdapter.prototype.createTextNode=function(text,doc){throw"not implemented"},WorkerDomAdapter.prototype.createScriptTag=function(attrName,attrValue,doc){throw"not implemented"},WorkerDomAdapter.prototype.createStyleElement=function(css,doc){throw"not implemented"},WorkerDomAdapter.prototype.createShadowRoot=function(el){throw"not implemented"},WorkerDomAdapter.prototype.getShadowRoot=function(el){throw"not implemented"},WorkerDomAdapter.prototype.getHost=function(el){throw"not implemented"},WorkerDomAdapter.prototype.getDistributedNodes=function(el){throw"not implemented"},WorkerDomAdapter.prototype.clone=function(node){throw"not implemented"},WorkerDomAdapter.prototype.getElementsByClassName=function(element,name){throw"not implemented"},WorkerDomAdapter.prototype.getElementsByTagName=function(element,name){throw"not implemented"},WorkerDomAdapter.prototype.classList=function(element){throw"not implemented"},WorkerDomAdapter.prototype.addClass=function(element,className){throw"not implemented"},WorkerDomAdapter.prototype.removeClass=function(element,className){throw"not implemented"},WorkerDomAdapter.prototype.hasClass=function(element,className){throw"not implemented"},WorkerDomAdapter.prototype.setStyle=function(element,styleName,styleValue){throw"not implemented"},WorkerDomAdapter.prototype.removeStyle=function(element,styleName){throw"not implemented"},WorkerDomAdapter.prototype.getStyle=function(element,styleName){throw"not implemented"},WorkerDomAdapter.prototype.hasStyle=function(element,styleName,styleValue){throw"not implemented"},WorkerDomAdapter.prototype.tagName=function(element){throw"not implemented"},WorkerDomAdapter.prototype.attributeMap=function(element){throw"not implemented"},WorkerDomAdapter.prototype.hasAttribute=function(element,attribute){throw"not implemented"},WorkerDomAdapter.prototype.hasAttributeNS=function(element,ns,attribute){throw"not implemented"},WorkerDomAdapter.prototype.getAttribute=function(element,attribute){throw"not implemented"},WorkerDomAdapter.prototype.getAttributeNS=function(element,ns,attribute){throw"not implemented"},WorkerDomAdapter.prototype.setAttribute=function(element,name,value){throw"not implemented"},WorkerDomAdapter.prototype.setAttributeNS=function(element,ns,name,value){throw"not implemented"},WorkerDomAdapter.prototype.removeAttribute=function(element,attribute){throw"not implemented"},WorkerDomAdapter.prototype.removeAttributeNS=function(element,ns,attribute){throw"not implemented"},WorkerDomAdapter.prototype.templateAwareRoot=function(el){throw"not implemented"},WorkerDomAdapter.prototype.createHtmlDocument=function(){throw"not implemented"},WorkerDomAdapter.prototype.defaultDoc=function(){throw"not implemented"},WorkerDomAdapter.prototype.getBoundingClientRect=function(el){throw"not implemented"},WorkerDomAdapter.prototype.getTitle=function(){throw"not implemented"},WorkerDomAdapter.prototype.setTitle=function(newTitle){throw"not implemented"},WorkerDomAdapter.prototype.elementMatches=function(n,selector){throw"not implemented"},WorkerDomAdapter.prototype.isTemplateElement=function(el){throw"not implemented"},WorkerDomAdapter.prototype.isTextNode=function(node){throw"not implemented"},WorkerDomAdapter.prototype.isCommentNode=function(node){throw"not implemented"},WorkerDomAdapter.prototype.isElementNode=function(node){throw"not implemented"},WorkerDomAdapter.prototype.hasShadowRoot=function(node){throw"not implemented"},WorkerDomAdapter.prototype.isShadowRoot=function(node){throw"not implemented"},WorkerDomAdapter.prototype.importIntoDoc=function(node){throw"not implemented"},WorkerDomAdapter.prototype.adoptNode=function(node){throw"not implemented"},WorkerDomAdapter.prototype.getHref=function(element){throw"not implemented"},WorkerDomAdapter.prototype.getEventKey=function(event){throw"not implemented"},WorkerDomAdapter.prototype.resolveAndSetHref=function(element,baseUrl,href){throw"not implemented"},WorkerDomAdapter.prototype.supportsDOMEvents=function(){throw"not implemented"},WorkerDomAdapter.prototype.supportsNativeShadowDOM=function(){throw"not implemented"},WorkerDomAdapter.prototype.getGlobalEventTarget=function(target){throw"not implemented"},WorkerDomAdapter.prototype.getHistory=function(){throw"not implemented"},WorkerDomAdapter.prototype.getLocation=function(){throw"not implemented"},WorkerDomAdapter.prototype.getBaseHref=function(){throw"not implemented"},WorkerDomAdapter.prototype.resetBaseElement=function(){throw"not implemented"},WorkerDomAdapter.prototype.getUserAgent=function(){throw"not implemented"},WorkerDomAdapter.prototype.setData=function(element,name,value){throw"not implemented"},WorkerDomAdapter.prototype.getComputedStyle=function(element){throw"not implemented"},WorkerDomAdapter.prototype.getData=function(element,name){throw"not implemented"},WorkerDomAdapter.prototype.setGlobalVar=function(name,value){throw"not implemented"},WorkerDomAdapter.prototype.requestAnimationFrame=function(callback){throw"not implemented"},WorkerDomAdapter.prototype.cancelAnimationFrame=function(id){throw"not implemented"},WorkerDomAdapter.prototype.performanceNow=function(){throw"not implemented"},WorkerDomAdapter.prototype.getAnimationPrefix=function(){throw"not implemented"},WorkerDomAdapter.prototype.getTransitionEnd=function(){throw"not implemented"},WorkerDomAdapter.prototype.supportsAnimation=function(){throw"not implemented"},WorkerDomAdapter.prototype.supportsWebAnimation=function(){throw"not implemented"},WorkerDomAdapter.prototype.supportsCookies=function(){return!1},WorkerDomAdapter.prototype.getCookie=function(name){throw"not implemented"},WorkerDomAdapter.prototype.setCookie=function(name,value){throw"not implemented"},WorkerDomAdapter}(dom_adapter_1.DomAdapter);exports.WorkerDomAdapter=WorkerDomAdapter},{"../../dom/dom_adapter":332}],374:[function(require,module,exports){"use strict";function _exceptionHandler(){return new core_1.ExceptionHandler(new PrintLogger)}function createMessageBus(zone){var sink=new post_message_bus_1.PostMessageBusSink(_postMessage),source=new post_message_bus_1.PostMessageBusSource,bus=new post_message_bus_1.PostMessageBus(sink,source);return bus.attachToZone(zone),bus}function setupWebWorker(){worker_adapter_1.WorkerDomAdapter.makeCurrent()}var common_1=require("@angular/common"),core_1=require("@angular/core"),browser_1=require("./browser"),lang_1=require("./facade/lang"),api_1=require("./web_workers/shared/api"),client_message_broker_1=require("./web_workers/shared/client_message_broker"),message_bus_1=require("./web_workers/shared/message_bus"),post_message_bus_1=require("./web_workers/shared/post_message_bus"),render_store_1=require("./web_workers/shared/render_store"),serializer_1=require("./web_workers/shared/serializer"),service_message_broker_1=require("./web_workers/shared/service_message_broker"),renderer_1=require("./web_workers/worker/renderer"),worker_adapter_1=require("./web_workers/worker/worker_adapter"),PrintLogger=function(){function PrintLogger(){this.log=lang_1.print,this.logError=lang_1.print,this.logGroup=lang_1.print}return PrintLogger.prototype.logGroupEnd=function(){},PrintLogger}();exports.WORKER_APP_PLATFORM_PROVIDERS=core_1.PLATFORM_COMMON_PROVIDERS,exports.WORKER_APP_APPLICATION_PROVIDERS=[],exports.platformWorkerApp=core_1.createPlatformFactory(core_1.platformCore,"workerApp"),exports.workerAppPlatform=exports.platformWorkerApp;var _postMessage={postMessage:function(message,transferrables){postMessage(message,transferrables)}},WorkerAppModule=function(){function WorkerAppModule(){}return WorkerAppModule.decorators=[{type:core_1.NgModule,args:[{providers:[common_1.FORM_PROVIDERS,browser_1.BROWSER_SANITIZATION_PROVIDERS,serializer_1.Serializer,{provide:client_message_broker_1.ClientMessageBrokerFactory,useClass:client_message_broker_1.ClientMessageBrokerFactory_},{provide:service_message_broker_1.ServiceMessageBrokerFactory,useClass:service_message_broker_1.ServiceMessageBrokerFactory_},renderer_1.WebWorkerRootRenderer,{provide:core_1.RootRenderer,useExisting:renderer_1.WebWorkerRootRenderer},{provide:api_1.ON_WEB_WORKER,useValue:!0},render_store_1.RenderStore,{provide:core_1.ExceptionHandler,useFactory:_exceptionHandler,deps:[]},{provide:message_bus_1.MessageBus,useFactory:createMessageBus,deps:[core_1.NgZone]},{provide:core_1.APP_INITIALIZER,useValue:setupWebWorker,multi:!0}],exports:[common_1.CommonModule,core_1.ApplicationModule]}]}],WorkerAppModule}();exports.WorkerAppModule=WorkerAppModule},{"./browser":320,"./facade/lang":350,"./web_workers/shared/api":355,"./web_workers/shared/client_message_broker":356,"./web_workers/shared/message_bus":357,"./web_workers/shared/post_message_bus":359,"./web_workers/shared/render_store":360,"./web_workers/shared/serializer":362,"./web_workers/shared/service_message_broker":363,"./web_workers/worker/renderer":372,"./web_workers/worker/worker_adapter":373,"@angular/common":1,"@angular/core":154}],375:[function(require,module,exports){"use strict";function initializeGenericWorkerRenderer(injector){
var bus=injector.get(message_bus_1.MessageBus),zone=injector.get(core_1.NgZone);bus.attachToZone(zone);var services=injector.get(exports.WORKER_UI_STARTABLE_MESSAGING_SERVICE);zone.runGuarded(function(){services.forEach(function(svc){svc.start()})})}function messageBusFactory(instance){return instance.bus}function initWebWorkerRenderPlatform(injector){return function(){browser_adapter_1.BrowserDomAdapter.makeCurrent(),core_private_1.wtfInit(),testability_1.BrowserGetTestability.init();var scriptUri;try{scriptUri=injector.get(exports.WORKER_SCRIPT)}catch(e){throw new exceptions_1.BaseException("You must provide your WebWorker's initialization script with the WORKER_SCRIPT token")}var instance=injector.get(WebWorkerInstance);spawnWebWorker(scriptUri,instance),initializeGenericWorkerRenderer(injector)}}function _exceptionHandler(){return new core_1.ExceptionHandler(dom_adapter_1.getDOM())}function _document(){return dom_adapter_1.getDOM().defaultDoc()}function createNgZone(){return new core_1.NgZone({enableLongStackTrace:core_1.isDevMode()})}function spawnWebWorker(uri,instance){var webWorker=new Worker(uri),sink=new post_message_bus_1.PostMessageBusSink(webWorker),source=new post_message_bus_1.PostMessageBusSource(webWorker),bus=new post_message_bus_1.PostMessageBus(sink,source);instance.init(webWorker,bus)}function _resolveDefaultAnimationDriver(){return animation_driver_1.AnimationDriver.NOOP}var core_1=require("@angular/core"),core_private_1=require("../core_private"),browser_1=require("./browser"),browser_adapter_1=require("./browser/browser_adapter"),testability_1=require("./browser/testability"),animation_driver_1=require("./dom/animation_driver"),dom_adapter_1=require("./dom/dom_adapter"),dom_renderer_1=require("./dom/dom_renderer"),dom_tokens_1=require("./dom/dom_tokens"),dom_events_1=require("./dom/events/dom_events"),event_manager_1=require("./dom/events/event_manager"),hammer_gestures_1=require("./dom/events/hammer_gestures"),key_events_1=require("./dom/events/key_events"),shared_styles_host_1=require("./dom/shared_styles_host"),exceptions_1=require("./facade/exceptions"),api_1=require("./web_workers/shared/api"),client_message_broker_1=require("./web_workers/shared/client_message_broker"),message_bus_1=require("./web_workers/shared/message_bus"),post_message_bus_1=require("./web_workers/shared/post_message_bus"),render_store_1=require("./web_workers/shared/render_store"),serializer_1=require("./web_workers/shared/serializer"),service_message_broker_1=require("./web_workers/shared/service_message_broker"),renderer_1=require("./web_workers/ui/renderer"),WebWorkerInstance=function(){function WebWorkerInstance(){}return WebWorkerInstance.prototype.init=function(worker,bus){this.worker=worker,this.bus=bus},WebWorkerInstance.decorators=[{type:core_1.Injectable}],WebWorkerInstance}();exports.WebWorkerInstance=WebWorkerInstance,exports.WORKER_SCRIPT=new core_1.OpaqueToken("WebWorkerScript"),exports.WORKER_UI_STARTABLE_MESSAGING_SERVICE=new core_1.OpaqueToken("WorkerRenderStartableMsgService"),exports._WORKER_UI_PLATFORM_PROVIDERS=[{provide:core_1.NgZone,useFactory:createNgZone,deps:[]},renderer_1.MessageBasedRenderer,{provide:exports.WORKER_UI_STARTABLE_MESSAGING_SERVICE,useExisting:renderer_1.MessageBasedRenderer,multi:!0},browser_1.BROWSER_SANITIZATION_PROVIDERS,{provide:core_1.ExceptionHandler,useFactory:_exceptionHandler,deps:[]},{provide:dom_tokens_1.DOCUMENT,useFactory:_document,deps:[]},{provide:event_manager_1.EVENT_MANAGER_PLUGINS,useClass:dom_events_1.DomEventsPlugin,multi:!0},{provide:event_manager_1.EVENT_MANAGER_PLUGINS,useClass:key_events_1.KeyEventsPlugin,multi:!0},{provide:event_manager_1.EVENT_MANAGER_PLUGINS,useClass:hammer_gestures_1.HammerGesturesPlugin,multi:!0},{provide:hammer_gestures_1.HAMMER_GESTURE_CONFIG,useClass:hammer_gestures_1.HammerGestureConfig},{provide:dom_renderer_1.DomRootRenderer,useClass:dom_renderer_1.DomRootRenderer_},{provide:core_1.RootRenderer,useExisting:dom_renderer_1.DomRootRenderer},{provide:shared_styles_host_1.SharedStylesHost,useExisting:shared_styles_host_1.DomSharedStylesHost},{provide:service_message_broker_1.ServiceMessageBrokerFactory,useClass:service_message_broker_1.ServiceMessageBrokerFactory_},{provide:client_message_broker_1.ClientMessageBrokerFactory,useClass:client_message_broker_1.ClientMessageBrokerFactory_},{provide:animation_driver_1.AnimationDriver,useFactory:_resolveDefaultAnimationDriver},serializer_1.Serializer,{provide:api_1.ON_WEB_WORKER,useValue:!1},render_store_1.RenderStore,shared_styles_host_1.DomSharedStylesHost,core_1.Testability,event_manager_1.EventManager,WebWorkerInstance,{provide:core_1.PLATFORM_INITIALIZER,useFactory:initWebWorkerRenderPlatform,multi:!0,deps:[core_1.Injector]},{provide:message_bus_1.MessageBus,useFactory:messageBusFactory,deps:[WebWorkerInstance]}],exports.WORKER_UI_PLATFORM_PROVIDERS=[core_1.PLATFORM_COMMON_PROVIDERS,exports._WORKER_UI_PLATFORM_PROVIDERS],exports.WORKER_UI_APPLICATION_PROVIDERS=[],exports.platformWorkerUi=core_1.createPlatformFactory(core_1.platformCore,"workerUi",exports._WORKER_UI_PLATFORM_PROVIDERS),exports.workerUiPlatform=exports.platformWorkerUi},{"../core_private":317,"./browser":320,"./browser/browser_adapter":321,"./browser/testability":325,"./dom/animation_driver":329,"./dom/dom_adapter":332,"./dom/dom_renderer":333,"./dom/dom_tokens":334,"./dom/events/dom_events":335,"./dom/events/event_manager":336,"./dom/events/hammer_gestures":338,"./dom/events/key_events":339,"./dom/shared_styles_host":340,"./facade/exceptions":349,"./web_workers/shared/api":355,"./web_workers/shared/client_message_broker":356,"./web_workers/shared/message_bus":357,"./web_workers/shared/post_message_bus":359,"./web_workers/shared/render_store":360,"./web_workers/shared/serializer":362,"./web_workers/shared/service_message_broker":363,"./web_workers/ui/renderer":368,"@angular/core":154}],376:[function(require,module,exports){"use strict";var common_router_providers_1=require("./src/common_router_providers");exports.provideRouterConfig=common_router_providers_1.provideRouterConfig,exports.provideRoutes=common_router_providers_1.provideRoutes;var router_link_1=require("./src/directives/router_link");exports.RouterLink=router_link_1.RouterLink,exports.RouterLinkWithHref=router_link_1.RouterLinkWithHref;var router_link_active_1=require("./src/directives/router_link_active");exports.RouterLinkActive=router_link_active_1.RouterLinkActive;var router_outlet_1=require("./src/directives/router_outlet");exports.RouterOutlet=router_outlet_1.RouterOutlet;var router_1=require("./src/router");exports.NavigationCancel=router_1.NavigationCancel,exports.NavigationEnd=router_1.NavigationEnd,exports.NavigationError=router_1.NavigationError,exports.NavigationStart=router_1.NavigationStart,exports.Router=router_1.Router,exports.RoutesRecognized=router_1.RoutesRecognized;var router_module_1=require("./src/router_module");exports.ROUTER_DIRECTIVES=router_module_1.ROUTER_DIRECTIVES,exports.RouterModule=router_module_1.RouterModule;var router_outlet_map_1=require("./src/router_outlet_map");exports.RouterOutletMap=router_outlet_map_1.RouterOutletMap;var router_providers_1=require("./src/router_providers");exports.provideRouter=router_providers_1.provideRouter;var router_state_1=require("./src/router_state");exports.ActivatedRoute=router_state_1.ActivatedRoute,exports.ActivatedRouteSnapshot=router_state_1.ActivatedRouteSnapshot,exports.RouterState=router_state_1.RouterState,exports.RouterStateSnapshot=router_state_1.RouterStateSnapshot;var shared_1=require("./src/shared");exports.PRIMARY_OUTLET=shared_1.PRIMARY_OUTLET;var url_tree_1=require("./src/url_tree");exports.DefaultUrlSerializer=url_tree_1.DefaultUrlSerializer,exports.UrlSegment=url_tree_1.UrlSegment,exports.UrlSerializer=url_tree_1.UrlSerializer,exports.UrlTree=url_tree_1.UrlTree},{"./src/common_router_providers":378,"./src/directives/router_link":382,"./src/directives/router_link_active":383,"./src/directives/router_outlet":384,"./src/router":387,"./src/router_module":389,"./src/router_outlet_map":390,"./src/router_providers":391,"./src/router_state":392,"./src/shared":393,"./src/url_tree":394}],377:[function(require,module,exports){"use strict";function noMatch(segmentGroup){return new Observable_1.Observable(function(obs){return obs.error(new NoMatch(segmentGroup))})}function absoluteRedirect(segments){return new Observable_1.Observable(function(obs){return obs.error(new AbsoluteRedirect(segments))})}function canLoadFails(route){return new Observable_1.Observable(function(obs){return obs.error(new Error("Cannot load children because the guard of the route \"path: '"+route.path+"'\" returned false"))})}function applyRedirects(injector,configLoader,urlTree,config){return new ApplyRedirects(injector,configLoader,urlTree,config).apply()}function runGuards(injector,route){var canLoad=route.canLoad;if(!canLoad||0===canLoad.length)return of_1.of(!0);var obs=from_1.from(canLoad).map(function(c){var guard=injector.get(c);return guard.canLoad?collection_1.wrapIntoObservable(guard.canLoad(route)):collection_1.wrapIntoObservable(guard(route))});return collection_1.andObservables(obs)}function match(segmentGroup,route,segments){var noMatch={matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}};if(""===route.path)return(route.terminal||"full"===route.pathMatch)&&(segmentGroup.hasChildren()||segments.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};for(var path=route.path,parts=path.split("/"),positionalParamSegments={},consumedSegments=[],currentIndex=0,i=0;i<parts.length;++i){if(currentIndex>=segments.length)return noMatch;var current=segments[currentIndex],p=parts[i],isPosParam=p.startsWith(":");if(!isPosParam&&p!==current.path)return noMatch;isPosParam&&(positionalParamSegments[p.substring(1)]=current),consumedSegments.push(current),currentIndex++}return route.terminal&&(segmentGroup.hasChildren()||currentIndex<segments.length)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:consumedSegments,lastChild:currentIndex,positionalParamSegments:positionalParamSegments}}function applyRedirectCommands(segments,redirectTo,posParams){var r=redirectTo.startsWith("/")?redirectTo.substring(1):redirectTo;return""===r?[]:createSegments(redirectTo,r.split("/"),segments,posParams)}function createSegments(redirectTo,parts,segments,posParams){return parts.map(function(p){return p.startsWith(":")?findPosParam(p,posParams,redirectTo):findOrCreateSegment(p,segments)})}function findPosParam(part,posParams,redirectTo){var paramName=part.substring(1),pos=posParams[paramName];if(!pos)throw new Error("Cannot redirect to '"+redirectTo+"'. Cannot find '"+part+"'.");return pos}function findOrCreateSegment(part,segments){for(var idx=0,_i=0,segments_1=segments;_i<segments_1.length;_i++){var s=segments_1[_i];if(s.path===part)return segments.splice(idx),s;idx++}return new url_tree_1.UrlSegment(part,{})}function split(segmentGroup,consumedSegments,slicedSegments,config){if(slicedSegments.length>0&&containsEmptyPathRedirectsWithNamedOutlets(segmentGroup,slicedSegments,config)){var s=new url_tree_1.UrlSegmentGroup(consumedSegments,createChildrenForEmptySegments(config,new url_tree_1.UrlSegmentGroup(slicedSegments,segmentGroup.children)));return{segmentGroup:mergeTrivialChildren(s),slicedSegments:[]}}if(0===slicedSegments.length&&containsEmptyPathRedirects(segmentGroup,slicedSegments,config)){var s=new url_tree_1.UrlSegmentGroup(segmentGroup.segments,addEmptySegmentsToChildrenIfNeeded(segmentGroup,slicedSegments,config,segmentGroup.children));return{segmentGroup:mergeTrivialChildren(s),slicedSegments:slicedSegments}}return{segmentGroup:segmentGroup,slicedSegments:slicedSegments}}function mergeTrivialChildren(s){if(1===s.numberOfChildren&&s.children[shared_1.PRIMARY_OUTLET]){var c=s.children[shared_1.PRIMARY_OUTLET];return new url_tree_1.UrlSegmentGroup(s.segments.concat(c.segments),c.children)}return s}function addEmptySegmentsToChildrenIfNeeded(segmentGroup,slicedSegments,routes,children){for(var res={},_i=0,routes_1=routes;_i<routes_1.length;_i++){var r=routes_1[_i];emptyPathRedirect(segmentGroup,slicedSegments,r)&&!children[getOutlet(r)]&&(res[getOutlet(r)]=new url_tree_1.UrlSegmentGroup([],{}))}return collection_1.merge(children,res)}function createChildrenForEmptySegments(routes,primarySegmentGroup){var res={};res[shared_1.PRIMARY_OUTLET]=primarySegmentGroup;for(var _i=0,routes_2=routes;_i<routes_2.length;_i++){var r=routes_2[_i];""===r.path&&getOutlet(r)!==shared_1.PRIMARY_OUTLET&&(res[getOutlet(r)]=new url_tree_1.UrlSegmentGroup([],{}))}return res}function containsEmptyPathRedirectsWithNamedOutlets(segmentGroup,slicedSegments,routes){return routes.filter(function(r){return emptyPathRedirect(segmentGroup,slicedSegments,r)&&getOutlet(r)!==shared_1.PRIMARY_OUTLET}).length>0}function containsEmptyPathRedirects(segmentGroup,slicedSegments,routes){return routes.filter(function(r){return emptyPathRedirect(segmentGroup,slicedSegments,r)}).length>0}function emptyPathRedirect(segmentGroup,slicedSegments,r){return(!(segmentGroup.hasChildren()||slicedSegments.length>0)||!r.terminal&&"full"!==r.pathMatch)&&(""===r.path&&void 0!==r.redirectTo)}function getOutlet(route){return route.outlet?route.outlet:shared_1.PRIMARY_OUTLET}require("rxjs/add/operator/first"),require("rxjs/add/operator/catch"),require("rxjs/add/operator/concatAll");var Observable_1=require("rxjs/Observable"),from_1=require("rxjs/observable/from"),of_1=require("rxjs/observable/of"),EmptyError_1=require("rxjs/util/EmptyError"),router_config_loader_1=require("./router_config_loader"),shared_1=require("./shared"),url_tree_1=require("./url_tree"),collection_1=require("./utils/collection"),NoMatch=function(){function NoMatch(segmentGroup){void 0===segmentGroup&&(segmentGroup=null),this.segmentGroup=segmentGroup}return NoMatch}(),AbsoluteRedirect=function(){function AbsoluteRedirect(segments){this.segments=segments}return AbsoluteRedirect}();exports.applyRedirects=applyRedirects;var ApplyRedirects=function(){function ApplyRedirects(injector,configLoader,urlTree,config){this.injector=injector,this.configLoader=configLoader,this.urlTree=urlTree,this.config=config,this.allowRedirects=!0}return ApplyRedirects.prototype.apply=function(){var _this=this;return this.expandSegmentGroup(this.injector,this.config,this.urlTree.root,shared_1.PRIMARY_OUTLET).map(function(rootSegmentGroup){return _this.createUrlTree(rootSegmentGroup)}).catch(function(e){if(e instanceof AbsoluteRedirect){_this.allowRedirects=!1;var group=new url_tree_1.UrlSegmentGroup([],(_a={},_a[shared_1.PRIMARY_OUTLET]=new url_tree_1.UrlSegmentGroup(e.segments,{}),_a));return _this.match(group)}throw e instanceof NoMatch?_this.noMatchError(e):e;var _a})},ApplyRedirects.prototype.match=function(segmentGroup){var _this=this;return this.expandSegmentGroup(this.injector,this.config,segmentGroup,shared_1.PRIMARY_OUTLET).map(function(rootSegmentGroup){return _this.createUrlTree(rootSegmentGroup)}).catch(function(e){throw e instanceof NoMatch?_this.noMatchError(e):e})},ApplyRedirects.prototype.noMatchError=function(e){return new Error("Cannot match any routes: '"+e.segmentGroup+"'")},ApplyRedirects.prototype.createUrlTree=function(rootCandidate){var root=rootCandidate.segments.length>0?new url_tree_1.UrlSegmentGroup([],(_a={},_a[shared_1.PRIMARY_OUTLET]=rootCandidate,_a)):rootCandidate;return new url_tree_1.UrlTree(root,this.urlTree.queryParams,this.urlTree.fragment);var _a},ApplyRedirects.prototype.expandSegmentGroup=function(injector,routes,segmentGroup,outlet){return 0===segmentGroup.segments.length&&segmentGroup.hasChildren()?this.expandChildren(injector,routes,segmentGroup).map(function(children){return new url_tree_1.UrlSegmentGroup([],children)}):this.expandSegment(injector,segmentGroup,routes,segmentGroup.segments,outlet,!0)},ApplyRedirects.prototype.expandChildren=function(injector,routes,segmentGroup){var _this=this;return collection_1.waitForMap(segmentGroup.children,function(childOutlet,child){return _this.expandSegmentGroup(injector,routes,child,childOutlet)})},ApplyRedirects.prototype.expandSegment=function(injector,segmentGroup,routes,segments,outlet,allowRedirects){var _this=this,processRoutes=of_1.of.apply(void 0,routes).map(function(r){return _this.expandSegmentAgainstRoute(injector,segmentGroup,routes,r,segments,outlet,allowRedirects).catch(function(e){if(e instanceof NoMatch)return of_1.of(null);throw e})}).concatAll();return processRoutes.first(function(s){return!!s}).catch(function(e,_){throw e instanceof EmptyError_1.EmptyError?new NoMatch(segmentGroup):e})},ApplyRedirects.prototype.expandSegmentAgainstRoute=function(injector,segmentGroup,routes,route,paths,outlet,allowRedirects){return getOutlet(route)!==outlet?noMatch(segmentGroup):void 0===route.redirectTo||allowRedirects&&this.allowRedirects?void 0===route.redirectTo?this.matchSegmentAgainstRoute(injector,segmentGroup,route,paths):this.expandSegmentAgainstRouteUsingRedirect(injector,segmentGroup,routes,route,paths,outlet):noMatch(segmentGroup)},ApplyRedirects.prototype.expandSegmentAgainstRouteUsingRedirect=function(injector,segmentGroup,routes,route,segments,outlet){return"**"===route.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(route):this.expandRegularSegmentAgainstRouteUsingRedirect(injector,segmentGroup,routes,route,segments,outlet)},ApplyRedirects.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(route){var newSegments=applyRedirectCommands([],route.redirectTo,{});return route.redirectTo.startsWith("/")?absoluteRedirect(newSegments):of_1.of(new url_tree_1.UrlSegmentGroup(newSegments,{}))},ApplyRedirects.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(injector,segmentGroup,routes,route,segments,outlet){var _a=match(segmentGroup,route,segments),matched=_a.matched,consumedSegments=_a.consumedSegments,lastChild=_a.lastChild,positionalParamSegments=_a.positionalParamSegments;if(!matched)return noMatch(segmentGroup);var newSegments=applyRedirectCommands(consumedSegments,route.redirectTo,positionalParamSegments);return route.redirectTo.startsWith("/")?absoluteRedirect(newSegments):this.expandSegment(injector,segmentGroup,routes,newSegments.concat(segments.slice(lastChild)),outlet,!1)},ApplyRedirects.prototype.matchSegmentAgainstRoute=function(injector,rawSegmentGroup,route,segments){var _this=this;if("**"===route.path)return of_1.of(new url_tree_1.UrlSegmentGroup(segments,{}));var _a=match(rawSegmentGroup,route,segments),matched=_a.matched,consumedSegments_1=_a.consumedSegments,lastChild=_a.lastChild;if(!matched)return noMatch(rawSegmentGroup);var rawSlicedSegments_1=segments.slice(lastChild);return this.getChildConfig(injector,route).mergeMap(function(routerConfig){var childInjector=routerConfig.injector,childConfig=routerConfig.routes,_a=split(rawSegmentGroup,consumedSegments_1,rawSlicedSegments_1,childConfig),segmentGroup=_a.segmentGroup,slicedSegments=_a.slicedSegments;return 0===slicedSegments.length&&segmentGroup.hasChildren()?_this.expandChildren(childInjector,childConfig,segmentGroup).map(function(children){return new url_tree_1.UrlSegmentGroup(consumedSegments_1,children)}):0===childConfig.length&&0===slicedSegments.length?of_1.of(new url_tree_1.UrlSegmentGroup(consumedSegments_1,{})):_this.expandSegment(childInjector,segmentGroup,childConfig,slicedSegments,shared_1.PRIMARY_OUTLET,!0).map(function(cs){return new url_tree_1.UrlSegmentGroup(consumedSegments_1.concat(cs.segments),cs.children)})})},ApplyRedirects.prototype.getChildConfig=function(injector,route){var _this=this;return route.children?of_1.of(new router_config_loader_1.LoadedRouterConfig(route.children,injector,null)):route.loadChildren?runGuards(injector,route).mergeMap(function(shouldLoad){return shouldLoad?_this.configLoader.load(injector,route.loadChildren).map(function(r){return route._loadedConfig=r,r}):canLoadFails(route)}):of_1.of(new router_config_loader_1.LoadedRouterConfig([],injector,null))},ApplyRedirects}()},{"./router_config_loader":388,"./shared":393,"./url_tree":394,"./utils/collection":395,"rxjs/Observable":401,"rxjs/add/operator/catch":446,"rxjs/add/operator/concatAll":450,"rxjs/add/operator/first":474,"rxjs/observable/from":574,"rxjs/observable/of":582,"rxjs/util/EmptyError":713}],378:[function(require,module,exports){"use strict";function setupRouter(ref,resolver,urlSerializer,outletMap,location,injector,loader,config,opts){if(void 0===opts&&(opts={}),0==ref.componentTypes.length)throw new Error("Bootstrap at least one component before injecting Router.");var componentType=ref.componentTypes[0],r=new router_1.Router(componentType,resolver,urlSerializer,outletMap,location,injector,loader,collection_1.flatten(config));return opts.enableTracing&&r.events.subscribe(function(e){console.group("Router Event: "+e.constructor.name),console.log(e.toString()),console.log(e),console.groupEnd()}),r}function rootRoute(router){return router.routerState.root}function initialRouterNavigation(router){return function(){router.initialNavigation()}}function provideRouter(routes,config){return void 0===config&&(config={}),[provideRoutes(routes),{provide:exports.ROUTER_CONFIGURATION,useValue:config},common_1.Location,{provide:common_1.LocationStrategy,useClass:common_1.PathLocationStrategy},{provide:url_tree_1.UrlSerializer,useClass:url_tree_1.DefaultUrlSerializer},{provide:router_1.Router,useFactory:setupRouter,deps:[core_1.ApplicationRef,core_1.ComponentResolver,url_tree_1.UrlSerializer,router_outlet_map_1.RouterOutletMap,common_1.Location,core_1.Injector,core_1.NgModuleFactoryLoader,router_config_loader_1.ROUTES,exports.ROUTER_CONFIGURATION]},router_outlet_map_1.RouterOutletMap,{provide:router_state_1.ActivatedRoute,useFactory:rootRoute,deps:[router_1.Router]},provideRouterInitializer(),{provide:core_1.NgModuleFactoryLoader,useClass:core_1.SystemJsNgModuleLoader}]}function provideRouterInitializer(){return{provide:core_1.APP_BOOTSTRAP_LISTENER,multi:!0,useFactory:initialRouterNavigation,deps:[router_1.Router]}}function provideRoutes(routes){return[{provide:core_1.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:routes},{provide:router_config_loader_1.ROUTES,multi:!0,useValue:routes}]}function provideRouterConfig(config){return{provide:exports.ROUTER_CONFIGURATION,useValue:config}}var common_1=require("@angular/common"),core_1=require("@angular/core"),router_1=require("./router"),router_config_loader_1=require("./router_config_loader"),router_outlet_map_1=require("./router_outlet_map"),router_state_1=require("./router_state"),url_tree_1=require("./url_tree"),collection_1=require("./utils/collection");exports.ROUTER_CONFIGURATION=new core_1.OpaqueToken("ROUTER_CONFIGURATION"),exports.setupRouter=setupRouter,exports.rootRoute=rootRoute,exports.initialRouterNavigation=initialRouterNavigation,exports.provideRouter=provideRouter,exports.provideRouterInitializer=provideRouterInitializer,exports.provideRoutes=provideRoutes,exports.provideRouterConfig=provideRouterConfig},{"./router":387,"./router_config_loader":388,"./router_outlet_map":390,"./router_state":392,"./url_tree":394,"./utils/collection":395,"@angular/common":1,"@angular/core":154}],379:[function(require,module,exports){"use strict";function validateConfig(config){config.forEach(validateNode)}function validateNode(route){if(Array.isArray(route))throw new Error("Invalid route configuration: Array cannot be specified");if(route.redirectTo&&route.children)throw new Error("Invalid configuration of route '"+route.path+"': redirectTo and children cannot be used together");if(route.redirectTo&&route.loadChildren)throw new Error("Invalid configuration of route '"+route.path+"': redirectTo and loadChildren cannot be used together");if(route.children&&route.loadChildren)throw new Error("Invalid configuration of route '"+route.path+"': children and loadChildren cannot be used together");if(route.redirectTo&&route.component)throw new Error("Invalid configuration of route '"+route.path+"': redirectTo and component cannot be used together");if(void 0===route.redirectTo&&!route.component&&!route.children&&!route.loadChildren)throw new Error("Invalid configuration of route '"+route.path+"': one of the following must be provided (component or redirectTo or children or loadChildren)");if(void 0===route.path)throw new Error("Invalid route configuration: routes must have path specified");if(route.path.startsWith("/"))throw new Error("Invalid route configuration of route '"+route.path+"': path cannot start with a slash");if(""===route.path&&void 0!==route.redirectTo&&void 0===route.terminal&&void 0===route.pathMatch){var exp="The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.";throw new Error("Invalid route configuration of route '{path: \""+route.path+'", redirectTo: "'+route.redirectTo+"\"}': please provide 'pathMatch'. "+exp)}if(void 0!==route.pathMatch&&"full"!==route.pathMatch&&"prefix"!==route.pathMatch)throw new Error("Invalid configuration of route '"+route.path+"': pathMatch can only be set to 'prefix' or 'full'")}exports.validateConfig=validateConfig},{}],380:[function(require,module,exports){"use strict";function createRouterState(curr,prevState){var root=createNode(curr._root,prevState?prevState._root:void 0);return new router_state_1.RouterState(root,curr)}function createNode(curr,prevState){if(prevState&&equalRouteSnapshots(prevState.value.snapshot,curr.value)){var value=prevState.value;value._futureSnapshot=curr.value;var children=createOrReuseChildren(curr,prevState);return new tree_1.TreeNode(value,children)}var value=createActivatedRoute(curr.value),children=curr.children.map(function(c){return createNode(c)});return new tree_1.TreeNode(value,children)}function createOrReuseChildren(curr,prevState){return curr.children.map(function(child){for(var _i=0,_a=prevState.children;_i<_a.length;_i++){var p=_a[_i];if(equalRouteSnapshots(p.value.snapshot,child.value))return createNode(child,p)}return createNode(child)})}function createActivatedRoute(c){return new router_state_1.ActivatedRoute(new BehaviorSubject_1.BehaviorSubject(c.url),new BehaviorSubject_1.BehaviorSubject(c.params),new BehaviorSubject_1.BehaviorSubject(c.queryParams),new BehaviorSubject_1.BehaviorSubject(c.fragment),new BehaviorSubject_1.BehaviorSubject(c.data),c.outlet,c.component,c)}function equalRouteSnapshots(a,b){return a._routeConfig===b._routeConfig}var BehaviorSubject_1=require("rxjs/BehaviorSubject"),router_state_1=require("./router_state"),tree_1=require("./utils/tree");exports.createRouterState=createRouterState},{"./router_state":392,"./utils/tree":396,"rxjs/BehaviorSubject":398}],381:[function(require,module,exports){"use strict";function createUrlTree(route,urlTree,commands,queryParams,fragment){if(0===commands.length)return tree(urlTree.root,urlTree.root,urlTree,queryParams,fragment);var normalizedCommands=normalizeCommands(commands);if(validateCommands(normalizedCommands),navigateToRoot(normalizedCommands))return tree(urlTree.root,new url_tree_1.UrlSegmentGroup([],{}),urlTree,queryParams,fragment);var startingPosition=findStartingPosition(normalizedCommands,urlTree,route),segmentGroup=startingPosition.processChildren?updateSegmentGroupChildren(startingPosition.segmentGroup,startingPosition.index,normalizedCommands.commands):updateSegmentGroup(startingPosition.segmentGroup,startingPosition.index,normalizedCommands.commands);return tree(startingPosition.segmentGroup,segmentGroup,urlTree,queryParams,fragment)}function validateCommands(n){if(n.isAbsolute&&n.commands.length>0&&isMatrixParams(n.commands[0]))throw new Error("Root segment cannot have matrix parameters");var c=n.commands.filter(function(c){return"object"==typeof c&&void 0!==c.outlets});if(c.length>0&&c[0]!==n.commands[n.commands.length-1])throw new Error("{outlets:{}} has to be the last command")}function isMatrixParams(command){return"object"==typeof command&&void 0===command.outlets&&void 0===command.segmentPath}function tree(oldSegmentGroup,newSegmentGroup,urlTree,queryParams,fragment){return urlTree.root===oldSegmentGroup?new url_tree_1.UrlTree(newSegmentGroup,stringify(queryParams),fragment):new url_tree_1.UrlTree(replaceSegment(urlTree.root,oldSegmentGroup,newSegmentGroup),stringify(queryParams),fragment)}function replaceSegment(current,oldSegment,newSegment){var children={};return collection_1.forEach(current.children,function(c,outletName){c===oldSegment?children[outletName]=newSegment:children[outletName]=replaceSegment(c,oldSegment,newSegment)}),new url_tree_1.UrlSegmentGroup(current.segments,children)}function navigateToRoot(normalizedChange){return normalizedChange.isAbsolute&&1===normalizedChange.commands.length&&"/"==normalizedChange.commands[0]}function normalizeCommands(commands){if("string"==typeof commands[0]&&1===commands.length&&"/"==commands[0])return new NormalizedNavigationCommands((!0),0,commands);for(var numberOfDoubleDots=0,isAbsolute=!1,res=[],_loop_1=function(i){var c=commands[i];if("object"==typeof c&&void 0!==c.outlets){var r_1={};return collection_1.forEach(c.outlets,function(commands,name){"string"==typeof commands?r_1[name]=commands.split("/"):r_1[name]=commands}),res.push({outlets:r_1}),"continue"}if("object"==typeof c&&void 0!==c.segmentPath)return res.push(c.segmentPath),"continue";if("string"!=typeof c)return res.push(c),"continue";if(0===i)for(var parts=c.split("/"),j=0;j<parts.length;++j){var cc=parts[j];0==j&&"."==cc||(0==j&&""==cc?isAbsolute=!0:".."==cc?numberOfDoubleDots++:""!=cc&&res.push(cc))}else res.push(c)},i=0;i<commands.length;++i)_loop_1(i);return new NormalizedNavigationCommands(isAbsolute,numberOfDoubleDots,res)}function findStartingPosition(normalizedChange,urlTree,route){if(normalizedChange.isAbsolute)return new Position(urlTree.root,(!0),0);if(route.snapshot._lastPathIndex===-1)return new Position(route.snapshot._urlSegment,(!0),0);if(route.snapshot._lastPathIndex+1-normalizedChange.numberOfDoubleDots>=0)return new Position(route.snapshot._urlSegment,(!1),route.snapshot._lastPathIndex+1-normalizedChange.numberOfDoubleDots);throw new Error("Invalid number of '../'")}function getPath(command){return""+command}function getOutlets(commands){return"object"!=typeof commands[0]?(_a={},_a[shared_1.PRIMARY_OUTLET]=commands,_a):void 0===commands[0].outlets?(_b={},_b[shared_1.PRIMARY_OUTLET]=commands,_b):commands[0].outlets;var _a,_b}function updateSegmentGroup(segmentGroup,startIndex,commands){if(segmentGroup||(segmentGroup=new url_tree_1.UrlSegmentGroup([],{})),0===segmentGroup.segments.length&&segmentGroup.hasChildren())return updateSegmentGroupChildren(segmentGroup,startIndex,commands);var m=prefixedWith(segmentGroup,startIndex,commands),slicedCommands=commands.slice(m.lastIndex);return m.match&&0===slicedCommands.length?new url_tree_1.UrlSegmentGroup(segmentGroup.segments,{}):m.match&&!segmentGroup.hasChildren()?createNewSegmentGroup(segmentGroup,startIndex,commands):m.match?updateSegmentGroupChildren(segmentGroup,0,slicedCommands):createNewSegmentGroup(segmentGroup,startIndex,commands)}function updateSegmentGroupChildren(segmentGroup,startIndex,commands){if(0===commands.length)return new url_tree_1.UrlSegmentGroup(segmentGroup.segments,{});var outlets_1=getOutlets(commands),children_1={};return collection_1.forEach(outlets_1,function(commands,outlet){null!==commands&&(children_1[outlet]=updateSegmentGroup(segmentGroup.children[outlet],startIndex,commands))}),collection_1.forEach(segmentGroup.children,function(child,childOutlet){void 0===outlets_1[childOutlet]&&(children_1[childOutlet]=child)}),new url_tree_1.UrlSegmentGroup(segmentGroup.segments,children_1)}function prefixedWith(segmentGroup,startIndex,commands){for(var currentCommandIndex=0,currentPathIndex=startIndex,noMatch={match:!1,lastIndex:0};currentPathIndex<segmentGroup.segments.length;){if(currentCommandIndex>=commands.length)return noMatch;
var path=segmentGroup.segments[currentPathIndex],curr=getPath(commands[currentCommandIndex]),next=currentCommandIndex<commands.length-1?commands[currentCommandIndex+1]:null;if(curr&&next&&"object"==typeof next&&void 0===next.outlets){if(!compare(curr,next,path))return noMatch;currentCommandIndex+=2}else{if(!compare(curr,{},path))return noMatch;currentCommandIndex++}currentPathIndex++}return{match:!0,lastIndex:currentCommandIndex}}function createNewSegmentGroup(segmentGroup,startIndex,commands){for(var paths=segmentGroup.segments.slice(0,startIndex),i=0;i<commands.length;){if("object"==typeof commands[i]&&void 0!==commands[i].outlets){var children=createNewSegmentChldren(commands[i].outlets);return new url_tree_1.UrlSegmentGroup(paths,children)}if(0!==i||"object"!=typeof commands[0]){var curr=getPath(commands[i]),next=i<commands.length-1?commands[i+1]:null;curr&&next&&"object"==typeof next?(paths.push(new url_tree_1.UrlSegment(curr,stringify(next))),i+=2):(paths.push(new url_tree_1.UrlSegment(curr,{})),i++)}else{var p=segmentGroup.segments[startIndex];paths.push(new url_tree_1.UrlSegment(p.path,commands[0])),i++}}return new url_tree_1.UrlSegmentGroup(paths,{})}function createNewSegmentChldren(outlets){var children={};return collection_1.forEach(outlets,function(commands,outlet){null!==commands&&(children[outlet]=createNewSegmentGroup(new url_tree_1.UrlSegmentGroup([],{}),0,commands))}),children}function stringify(params){var res={};return collection_1.forEach(params,function(v,k){return res[k]=""+v}),res}function compare(path,params,segment){return path==segment.path&&collection_1.shallowEqual(params,segment.parameters)}var shared_1=require("./shared"),url_tree_1=require("./url_tree"),collection_1=require("./utils/collection");exports.createUrlTree=createUrlTree;var NormalizedNavigationCommands=function(){function NormalizedNavigationCommands(isAbsolute,numberOfDoubleDots,commands){this.isAbsolute=isAbsolute,this.numberOfDoubleDots=numberOfDoubleDots,this.commands=commands}return NormalizedNavigationCommands}(),Position=function(){function Position(segmentGroup,processChildren,index){this.segmentGroup=segmentGroup,this.processChildren=processChildren,this.index=index}return Position}()},{"./shared":393,"./url_tree":394,"./utils/collection":395}],382:[function(require,module,exports){"use strict";function toBool(s){return""===s||!!s}var common_1=require("@angular/common"),core_1=require("@angular/core"),router_1=require("../router"),router_state_1=require("../router_state"),RouterLink=function(){function RouterLink(router,route,locationStrategy){this.router=router,this.route=route,this.locationStrategy=locationStrategy,this.commands=[]}return Object.defineProperty(RouterLink.prototype,"routerLink",{set:function(data){Array.isArray(data)?this.commands=data:this.commands=[data]},enumerable:!0,configurable:!0}),RouterLink.prototype.onClick=function(button,ctrlKey,metaKey){return!(0===button&&!ctrlKey&&!metaKey)||(this.router.navigateByUrl(this.urlTree),!1)},Object.defineProperty(RouterLink.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:toBool(this.preserveQueryParams),preserveFragment:toBool(this.preserveFragment)})},enumerable:!0,configurable:!0}),RouterLink.decorators=[{type:core_1.Directive,args:[{selector:":not(a)[routerLink]"}]}],RouterLink.ctorParameters=[{type:router_1.Router},{type:router_state_1.ActivatedRoute},{type:common_1.LocationStrategy}],RouterLink.propDecorators={queryParams:[{type:core_1.Input}],fragment:[{type:core_1.Input}],preserveQueryParams:[{type:core_1.Input}],preserveFragment:[{type:core_1.Input}],routerLink:[{type:core_1.Input}],onClick:[{type:core_1.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]},RouterLink}();exports.RouterLink=RouterLink;var RouterLinkWithHref=function(){function RouterLinkWithHref(router,route,locationStrategy){var _this=this;this.router=router,this.route=route,this.locationStrategy=locationStrategy,this.commands=[],this.subscription=router.events.subscribe(function(s){s instanceof router_1.NavigationEnd&&_this.updateTargetUrlAndHref()})}return Object.defineProperty(RouterLinkWithHref.prototype,"routerLink",{set:function(data){Array.isArray(data)?this.commands=data:this.commands=[data]},enumerable:!0,configurable:!0}),RouterLinkWithHref.prototype.ngOnChanges=function(changes){this.updateTargetUrlAndHref()},RouterLinkWithHref.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},RouterLinkWithHref.prototype.onClick=function(button,ctrlKey,metaKey){return!(0===button&&!ctrlKey&&!metaKey)||("string"==typeof this.target&&"_self"!=this.target||(this.router.navigateByUrl(this.urlTree),!1))},RouterLinkWithHref.prototype.updateTargetUrlAndHref=function(){this.urlTree=this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:toBool(this.preserveQueryParams),preserveFragment:toBool(this.preserveFragment)}),this.urlTree&&(this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)))},RouterLinkWithHref.decorators=[{type:core_1.Directive,args:[{selector:"a[routerLink]"}]}],RouterLinkWithHref.ctorParameters=[{type:router_1.Router},{type:router_state_1.ActivatedRoute},{type:common_1.LocationStrategy}],RouterLinkWithHref.propDecorators={target:[{type:core_1.Input}],queryParams:[{type:core_1.Input}],fragment:[{type:core_1.Input}],routerLinkOptions:[{type:core_1.Input}],preserveQueryParams:[{type:core_1.Input}],preserveFragment:[{type:core_1.Input}],href:[{type:core_1.HostBinding}],routerLink:[{type:core_1.Input}],onClick:[{type:core_1.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]},RouterLinkWithHref}();exports.RouterLinkWithHref=RouterLinkWithHref},{"../router":387,"../router_state":392,"@angular/common":1,"@angular/core":154}],383:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),router_1=require("../router"),router_link_1=require("./router_link"),RouterLinkActive=function(){function RouterLinkActive(router,element,renderer){var _this=this;this.router=router,this.element=element,this.renderer=renderer,this.classes=[],this.routerLinkActiveOptions={exact:!1},this.subscription=router.events.subscribe(function(s){s instanceof router_1.NavigationEnd&&_this.update()})}return RouterLinkActive.prototype.ngAfterContentInit=function(){var _this=this;this.links.changes.subscribe(function(s){return _this.update()}),this.linksWithHrefs.changes.subscribe(function(s){return _this.update()}),this.update()},Object.defineProperty(RouterLinkActive.prototype,"routerLinkActive",{set:function(data){Array.isArray(data)?this.classes=data:this.classes=data.split(" ")},enumerable:!0,configurable:!0}),RouterLinkActive.prototype.ngOnChanges=function(changes){this.update()},RouterLinkActive.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},RouterLinkActive.prototype.update=function(){var _this=this;if(this.links&&this.linksWithHrefs&&this.router.navigated){var isActiveLinks=this.reduceList(this.links),isActiveLinksWithHrefs=this.reduceList(this.linksWithHrefs);this.classes.forEach(function(c){return _this.renderer.setElementClass(_this.element.nativeElement,c,isActiveLinks||isActiveLinksWithHrefs)})}},RouterLinkActive.prototype.reduceList=function(q){var _this=this;return q.reduce(function(res,link){return res||_this.router.isActive(link.urlTree,_this.routerLinkActiveOptions.exact)},!1)},RouterLinkActive.decorators=[{type:core_1.Directive,args:[{selector:"[routerLinkActive]"}]}],RouterLinkActive.ctorParameters=[{type:router_1.Router},{type:core_1.ElementRef},{type:core_1.Renderer}],RouterLinkActive.propDecorators={links:[{type:core_1.ContentChildren,args:[router_link_1.RouterLink,{descendants:!0}]}],linksWithHrefs:[{type:core_1.ContentChildren,args:[router_link_1.RouterLinkWithHref,{descendants:!0}]}],routerLinkActiveOptions:[{type:core_1.Input}],routerLinkActive:[{type:core_1.Input}]},RouterLinkActive}();exports.RouterLinkActive=RouterLinkActive},{"../router":387,"./router_link":382,"@angular/core":154}],384:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),router_outlet_map_1=require("../router_outlet_map"),shared_1=require("../shared"),RouterOutlet=function(){function RouterOutlet(parentOutletMap,location,resolver,name){this.parentOutletMap=parentOutletMap,this.location=location,this.resolver=resolver,this.name=name,this.activateEvents=new core_1.EventEmitter,this.deactivateEvents=new core_1.EventEmitter,parentOutletMap.registerOutlet(name?name:shared_1.PRIMARY_OUTLET,this)}return RouterOutlet.prototype.ngOnDestroy=function(){this.parentOutletMap.removeOutlet(this.name?this.name:shared_1.PRIMARY_OUTLET)},Object.defineProperty(RouterOutlet.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(RouterOutlet.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(RouterOutlet.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),RouterOutlet.prototype.deactivate=function(){if(this.activated){var c=this.component;this.activated.destroy(),this.activated=null,this.deactivateEvents.emit(c)}},RouterOutlet.prototype.activate=function(activatedRoute,loadedResolver,loadedInjector,providers,outletMap){this.outletMap=outletMap,this._activatedRoute=activatedRoute;var factory,snapshot=activatedRoute._futureSnapshot,component=snapshot._routeConfig.component;try{factory="string"==typeof component?snapshot._resolvedComponentFactory:loadedResolver?loadedResolver.resolveComponentFactory(component):this.resolver.resolveComponentFactory(component)}catch(e){if(!(e instanceof core_1.NoComponentFactoryError))throw e;var componentName=component?component.name:null;console.warn("'"+componentName+"' not found in entryComponents array.  To ensure all components referred\n          to by the Routes are compiled, you must add '"+componentName+"' to the\n          'entryComponents' array of your application component. This will be required in a future\n          release of the router."),factory=snapshot._resolvedComponentFactory}var injector=loadedInjector?loadedInjector:this.location.parentInjector,inj=core_1.ReflectiveInjector.fromResolvedProviders(providers,injector);this.activated=this.location.createComponent(factory,this.location.length,inj,[]),this.activated.changeDetectorRef.detectChanges(),this.activateEvents.emit(this.activated.instance)},RouterOutlet.decorators=[{type:core_1.Directive,args:[{selector:"router-outlet"}]}],RouterOutlet.ctorParameters=[{type:router_outlet_map_1.RouterOutletMap},{type:core_1.ViewContainerRef},{type:core_1.ComponentFactoryResolver},{type:void 0,decorators:[{type:core_1.Attribute,args:["name"]}]}],RouterOutlet.propDecorators={activateEvents:[{type:core_1.Output,args:["activate"]}],deactivateEvents:[{type:core_1.Output,args:["deactivate"]}]},RouterOutlet}();exports.RouterOutlet=RouterOutlet},{"../router_outlet_map":390,"../shared":393,"@angular/core":154}],385:[function(require,module,exports){"use strict";function recognize(rootComponentType,config,urlTree,url){return new Recognizer(rootComponentType,config,urlTree,url).recognize()}function sortActivatedRouteSnapshots(nodes){nodes.sort(function(a,b){return a.value.outlet===shared_1.PRIMARY_OUTLET?-1:b.value.outlet===shared_1.PRIMARY_OUTLET?1:a.value.outlet.localeCompare(b.value.outlet)})}function getChildConfig(route){return route.children?route.children:route.loadChildren?route._loadedConfig.routes:[]}function match(segmentGroup,route,segments,parent){if(""===route.path){if((route.terminal||"full"===route.pathMatch)&&(segmentGroup.hasChildren()||segments.length>0))throw new NoMatch;var params=parent?parent.params:{};return{consumedSegments:[],lastChild:0,parameters:params}}for(var path=route.path,parts=path.split("/"),posParameters={},consumedSegments=[],currentIndex=0,i=0;i<parts.length;++i){if(currentIndex>=segments.length)throw new NoMatch;var current=segments[currentIndex],p=parts[i],isPosParam=p.startsWith(":");if(!isPosParam&&p!==current.path)throw new NoMatch;isPosParam&&(posParameters[p.substring(1)]=current.path),consumedSegments.push(current),currentIndex++}if((route.terminal||"full"===route.pathMatch)&&(segmentGroup.hasChildren()||currentIndex<segments.length))throw new NoMatch;var parameters=collection_1.merge(posParameters,consumedSegments[consumedSegments.length-1].parameters);return{consumedSegments:consumedSegments,lastChild:currentIndex,parameters:parameters}}function checkOutletNameUniqueness(nodes){var names={};nodes.forEach(function(n){var routeWithSameOutletName=names[n.value.outlet];if(routeWithSameOutletName){var p=routeWithSameOutletName.url.map(function(s){return s.toString()}).join("/"),c=n.value.url.map(function(s){return s.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+p+"' and '"+c+"'.")}names[n.value.outlet]=n.value})}function getSourceSegmentGroup(segmentGroup){for(var s=segmentGroup;s._sourceSegment;)s=s._sourceSegment;return s}function getPathIndexShift(segmentGroup){for(var s=segmentGroup,res=s._segmentIndexShift?s._segmentIndexShift:0;s._sourceSegment;)s=s._sourceSegment,res+=s._segmentIndexShift?s._segmentIndexShift:0;return res-1}function split(segmentGroup,consumedSegments,slicedSegments,config){if(slicedSegments.length>0&&containsEmptyPathMatchesWithNamedOutlets(segmentGroup,slicedSegments,config)){var s=new url_tree_1.UrlSegmentGroup(consumedSegments,createChildrenForEmptyPaths(segmentGroup,consumedSegments,config,new url_tree_1.UrlSegmentGroup(slicedSegments,segmentGroup.children)));return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:[]}}if(0===slicedSegments.length&&containsEmptyPathMatches(segmentGroup,slicedSegments,config)){var s=new url_tree_1.UrlSegmentGroup(segmentGroup.segments,addEmptyPathsToChildrenIfNeeded(segmentGroup,slicedSegments,config,segmentGroup.children));return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:slicedSegments}}var s=new url_tree_1.UrlSegmentGroup(segmentGroup.segments,segmentGroup.children);return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:slicedSegments}}function addEmptyPathsToChildrenIfNeeded(segmentGroup,slicedSegments,routes,children){for(var res={},_i=0,routes_1=routes;_i<routes_1.length;_i++){var r=routes_1[_i];if(emptyPathMatch(segmentGroup,slicedSegments,r)&&!children[getOutlet(r)]){var s=new url_tree_1.UrlSegmentGroup([],{});s._sourceSegment=segmentGroup,s._segmentIndexShift=segmentGroup.segments.length,res[getOutlet(r)]=s}}return collection_1.merge(children,res)}function createChildrenForEmptyPaths(segmentGroup,consumedSegments,routes,primarySegment){var res={};res[shared_1.PRIMARY_OUTLET]=primarySegment,primarySegment._sourceSegment=segmentGroup,primarySegment._segmentIndexShift=consumedSegments.length;for(var _i=0,routes_2=routes;_i<routes_2.length;_i++){var r=routes_2[_i];if(""===r.path&&getOutlet(r)!==shared_1.PRIMARY_OUTLET){var s=new url_tree_1.UrlSegmentGroup([],{});s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,res[getOutlet(r)]=s}}return res}function containsEmptyPathMatchesWithNamedOutlets(segmentGroup,slicedSegments,routes){return routes.filter(function(r){return emptyPathMatch(segmentGroup,slicedSegments,r)&&getOutlet(r)!==shared_1.PRIMARY_OUTLET}).length>0}function containsEmptyPathMatches(segmentGroup,slicedSegments,routes){return routes.filter(function(r){return emptyPathMatch(segmentGroup,slicedSegments,r)}).length>0}function emptyPathMatch(segmentGroup,slicedSegments,r){return(!(segmentGroup.hasChildren()||slicedSegments.length>0)||!r.terminal&&"full"!==r.pathMatch)&&(""===r.path&&void 0===r.redirectTo)}function getOutlet(route){return route.outlet?route.outlet:shared_1.PRIMARY_OUTLET}function getData(route){return route.data?route.data:{}}function getResolve(route){return route.resolve?route.resolve:{}}var Observable_1=require("rxjs/Observable"),of_1=require("rxjs/observable/of"),router_state_1=require("./router_state"),shared_1=require("./shared"),url_tree_1=require("./url_tree"),collection_1=require("./utils/collection"),tree_1=require("./utils/tree"),NoMatch=function(){function NoMatch(){}return NoMatch}(),InheritedFromParent=function(){function InheritedFromParent(parent,snapshot,params,data,resolve){this.parent=parent,this.snapshot=snapshot,this.params=params,this.data=data,this.resolve=resolve}return Object.defineProperty(InheritedFromParent.prototype,"allParams",{get:function(){return this.parent?collection_1.merge(this.parent.allParams,this.params):this.params},enumerable:!0,configurable:!0}),Object.defineProperty(InheritedFromParent.prototype,"allData",{get:function(){return this.parent?collection_1.merge(this.parent.allData,this.data):this.data},enumerable:!0,configurable:!0}),InheritedFromParent.empty=function(snapshot){return new InheritedFromParent(null,snapshot,{},{},new router_state_1.InheritedResolve(null,{}))},InheritedFromParent}();exports.recognize=recognize;var Recognizer=function(){function Recognizer(rootComponentType,config,urlTree,url){this.rootComponentType=rootComponentType,this.config=config,this.urlTree=urlTree,this.url=url}return Recognizer.prototype.recognize=function(){try{var rootSegmentGroup=split(this.urlTree.root,[],[],this.config).segmentGroup,children=this.processSegmentGroup(this.config,rootSegmentGroup,InheritedFromParent.empty(null),shared_1.PRIMARY_OUTLET),root=new router_state_1.ActivatedRouteSnapshot([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},shared_1.PRIMARY_OUTLET,this.rootComponentType,null,this.urlTree.root,(-1),router_state_1.InheritedResolve.empty),rootNode=new tree_1.TreeNode(root,children);return of_1.of(new router_state_1.RouterStateSnapshot(this.url,rootNode))}catch(e){return new Observable_1.Observable(function(obs){return obs.error(e)})}},Recognizer.prototype.processSegmentGroup=function(config,segmentGroup,inherited,outlet){return 0===segmentGroup.segments.length&&segmentGroup.hasChildren()?this.processChildren(config,segmentGroup,inherited):this.processSegment(config,segmentGroup,0,segmentGroup.segments,inherited,outlet)},Recognizer.prototype.processChildren=function(config,segmentGroup,inherited){var _this=this,children=url_tree_1.mapChildrenIntoArray(segmentGroup,function(child,childOutlet){return _this.processSegmentGroup(config,child,inherited,childOutlet)});return checkOutletNameUniqueness(children),sortActivatedRouteSnapshots(children),children},Recognizer.prototype.processSegment=function(config,segmentGroup,pathIndex,segments,inherited,outlet){for(var _i=0,config_1=config;_i<config_1.length;_i++){var r=config_1[_i];try{return this.processSegmentAgainstRoute(r,segmentGroup,pathIndex,segments,inherited,outlet)}catch(e){if(!(e instanceof NoMatch))throw e}}throw new NoMatch},Recognizer.prototype.processSegmentAgainstRoute=function(route,rawSegment,pathIndex,segments,inherited,outlet){if(route.redirectTo)throw new NoMatch;if((route.outlet?route.outlet:shared_1.PRIMARY_OUTLET)!==outlet)throw new NoMatch;var newInheritedResolve=new router_state_1.InheritedResolve(inherited.resolve,getResolve(route));if("**"===route.path){var params=segments.length>0?collection_1.last(segments).parameters:{},snapshot_1=new router_state_1.ActivatedRouteSnapshot(segments,Object.freeze(collection_1.merge(inherited.allParams,params)),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,collection_1.merge(inherited.allData,getData(route)),outlet,route.component,route,getSourceSegmentGroup(rawSegment),getPathIndexShift(rawSegment)+segments.length,newInheritedResolve);return[new tree_1.TreeNode(snapshot_1,[])]}var _a=match(rawSegment,route,segments,inherited.snapshot),consumedSegments=_a.consumedSegments,parameters=_a.parameters,lastChild=_a.lastChild,rawSlicedSegments=segments.slice(lastChild),childConfig=getChildConfig(route),_b=split(rawSegment,consumedSegments,rawSlicedSegments,childConfig),segmentGroup=_b.segmentGroup,slicedSegments=_b.slicedSegments,snapshot=new router_state_1.ActivatedRouteSnapshot(consumedSegments,Object.freeze(collection_1.merge(inherited.allParams,parameters)),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,collection_1.merge(inherited.allData,getData(route)),outlet,route.component,route,getSourceSegmentGroup(rawSegment),getPathIndexShift(rawSegment)+consumedSegments.length,newInheritedResolve),newInherited=route.component?InheritedFromParent.empty(snapshot):new InheritedFromParent(inherited,snapshot,parameters,getData(route),newInheritedResolve);if(0===slicedSegments.length&&segmentGroup.hasChildren()){var children=this.processChildren(childConfig,segmentGroup,newInherited);return[new tree_1.TreeNode(snapshot,children)]}if(0===childConfig.length&&0===slicedSegments.length)return[new tree_1.TreeNode(snapshot,[])];var children=this.processSegment(childConfig,segmentGroup,pathIndex+lastChild,slicedSegments,newInherited,shared_1.PRIMARY_OUTLET);return[new tree_1.TreeNode(snapshot,children)]},Recognizer}()},{"./router_state":392,"./shared":393,"./url_tree":394,"./utils/collection":395,"./utils/tree":396,"rxjs/Observable":401,"rxjs/observable/of":582}],386:[function(require,module,exports){"use strict";function resolve(resolver,state){return resolveNode(resolver,state._root).map(function(_){return state})}function resolveNode(resolver,node){if(0===node.children.length)return fromPromise_1.fromPromise(resolveComponent(resolver,node.value).then(function(factory){return node.value._resolvedComponentFactory=factory,node.value}));var c=node.children.map(function(c){return resolveNode(resolver,c).toPromise()});return forkJoin_1.forkJoin(c).map(function(_){return resolveComponent(resolver,node.value).then(function(factory){return node.value._resolvedComponentFactory=factory,node.value})})}function resolveComponent(resolver,snapshot){return snapshot.component&&snapshot._routeConfig&&"string"==typeof snapshot.component?resolver.resolveComponent(snapshot.component):Promise.resolve(null)}require("rxjs/add/operator/map"),require("rxjs/add/operator/toPromise");var forkJoin_1=require("rxjs/observable/forkJoin"),fromPromise_1=require("rxjs/observable/fromPromise");exports.resolve=resolve},{"rxjs/add/operator/map":480,"rxjs/add/operator/toPromise":529,"rxjs/observable/forkJoin":573,"rxjs/observable/fromPromise":577}],387:[function(require,module,exports){"use strict";function closestLoadedConfig(state,snapshot){var b=state.pathFromRoot(snapshot).filter(function(s){var config=s._routeConfig;return config&&config._loadedConfig&&s!==snapshot});return b.length>0?b[b.length-1]._routeConfig._loadedConfig:null}function nodeChildrenAsMap(node){return node?node.children.reduce(function(m,c){return m[c.value.outlet]=c,m},{}):{}}function getOutlet(outletMap,route){var outlet=outletMap._outlets[route.outlet];if(!outlet){var componentName=route.component.name;throw route.outlet===shared_1.PRIMARY_OUTLET?new Error("Cannot find primary outlet to load '"+componentName+"'"):new Error("Cannot find the outlet "+route.outlet+" to load '"+componentName+"'")}return outlet}require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/mergeAll"),require("rxjs/add/operator/reduce"),require("rxjs/add/operator/every");var core_1=require("@angular/core"),Subject_1=require("rxjs/Subject"),from_1=require("rxjs/observable/from"),of_1=require("rxjs/observable/of"),apply_redirects_1=require("./apply_redirects"),config_1=require("./config"),create_router_state_1=require("./create_router_state"),create_url_tree_1=require("./create_url_tree"),recognize_1=require("./recognize"),resolve_1=require("./resolve"),router_config_loader_1=require("./router_config_loader"),router_outlet_map_1=require("./router_outlet_map"),router_state_1=require("./router_state"),shared_1=require("./shared"),url_tree_1=require("./url_tree"),collection_1=require("./utils/collection"),NavigationStart=function(){function NavigationStart(id,url){this.id=id,this.url=url}return NavigationStart.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},NavigationStart}();exports.NavigationStart=NavigationStart;var NavigationEnd=function(){function NavigationEnd(id,url,urlAfterRedirects){this.id=id,this.url=url,this.urlAfterRedirects=urlAfterRedirects}return NavigationEnd.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},NavigationEnd}();exports.NavigationEnd=NavigationEnd;var NavigationCancel=function(){function NavigationCancel(id,url){this.id=id,this.url=url}return NavigationCancel.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},NavigationCancel}();exports.NavigationCancel=NavigationCancel;var NavigationError=function(){function NavigationError(id,url,error){this.id=id,this.url=url,this.error=error}return NavigationError.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},NavigationError}();exports.NavigationError=NavigationError;var RoutesRecognized=function(){function RoutesRecognized(id,url,urlAfterRedirects,state){this.id=id,this.url=url,this.urlAfterRedirects=urlAfterRedirects,this.state=state}return RoutesRecognized.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},RoutesRecognized}();exports.RoutesRecognized=RoutesRecognized;var Router=function(){function Router(rootComponentType,resolver,urlSerializer,outletMap,location,injector,loader,config){this.rootComponentType=rootComponentType,this.resolver=resolver,this.urlSerializer=urlSerializer,this.outletMap=outletMap,this.location=location,this.injector=injector,this.navigationId=0,this.navigated=!1,this.resetConfig(config),this.routerEvents=new Subject_1.Subject,this.currentUrlTree=url_tree_1.createEmptyUrlTree(),this.configLoader=new router_config_loader_1.RouterConfigLoader(loader),this.currentRouterState=router_state_1.createEmptyState(this.currentUrlTree,this.rootComponentType)}return Router.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),this.navigateByUrl(this.location.path(!0))},Object.defineProperty(Router.prototype,"routerState",{get:function(){return this.currentRouterState},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"events",{get:function(){return this.routerEvents},enumerable:!0,configurable:!0}),Router.prototype.resetConfig=function(config){config_1.validateConfig(config),this.config=config},Router.prototype.ngOnDestroy=function(){this.dispose()},Router.prototype.dispose=function(){this.locationSubscription.unsubscribe()},Router.prototype.createUrlTree=function(commands,_a){var _b=void 0===_a?{}:_a,relativeTo=_b.relativeTo,queryParams=_b.queryParams,fragment=_b.fragment,preserveQueryParams=_b.preserveQueryParams,preserveFragment=_b.preserveFragment,a=relativeTo?relativeTo:this.routerState.root,q=preserveQueryParams?this.currentUrlTree.queryParams:queryParams,f=preserveFragment?this.currentUrlTree.fragment:fragment;return create_url_tree_1.createUrlTree(a,this.currentUrlTree,commands,q,f)},Router.prototype.navigateByUrl=function(url,extras){if(void 0===extras&&(extras={skipLocationChange:!1}),url instanceof url_tree_1.UrlTree)return this.scheduleNavigation(url,extras);var urlTree=this.urlSerializer.parse(url);return this.scheduleNavigation(urlTree,extras)},Router.prototype.navigate=function(commands,extras){return void 0===extras&&(extras={skipLocationChange:!1}),this.scheduleNavigation(this.createUrlTree(commands,extras),extras)},Router.prototype.serializeUrl=function(url){return this.urlSerializer.serialize(url)},Router.prototype.parseUrl=function(url){return this.urlSerializer.parse(url)},Router.prototype.isActive=function(url,exact){if(url instanceof url_tree_1.UrlTree)return url_tree_1.containsTree(this.currentUrlTree,url,exact);var urlTree=this.urlSerializer.parse(url);return url_tree_1.containsTree(this.currentUrlTree,urlTree,exact)},Router.prototype.scheduleNavigation=function(url,extras){var _this=this,id=++this.navigationId;return this.routerEvents.next(new NavigationStart(id,this.serializeUrl(url))),Promise.resolve().then(function(_){return _this.runNavigate(url,extras.skipLocationChange,id)})},Router.prototype.setUpLocationChangeListener=function(){var _this=this;this.locationSubscription=this.location.subscribe(Zone.current.wrap(function(change){var tree=_this.urlSerializer.parse(change.url);return _this.currentUrlTree.toString()!==tree.toString()?_this.scheduleNavigation(tree,change.pop):null}))},Router.prototype.runNavigate=function(url,preventPushState,id){var _this=this;return id!==this.navigationId?(this.location.go(this.urlSerializer.serialize(this.currentUrlTree)),this.routerEvents.next(new NavigationCancel(id,this.serializeUrl(url))),Promise.resolve(!1)):new Promise(function(resolvePromise,rejectPromise){var state,navigationIsSuccessful,preActivation,appliedUrl,storedState=_this.currentRouterState,storedUrl=_this.currentUrlTree;apply_redirects_1.applyRedirects(_this.injector,_this.configLoader,url,_this.config).mergeMap(function(u){return appliedUrl=u,recognize_1.recognize(_this.rootComponentType,_this.config,appliedUrl,_this.serializeUrl(appliedUrl))}).mergeMap(function(newRouterStateSnapshot){return _this.routerEvents.next(new RoutesRecognized(id,_this.serializeUrl(url),_this.serializeUrl(appliedUrl),newRouterStateSnapshot)),resolve_1.resolve(_this.resolver,newRouterStateSnapshot)}).map(function(routerStateSnapshot){return create_router_state_1.createRouterState(routerStateSnapshot,_this.currentRouterState)}).map(function(newState){state=newState,preActivation=new PreActivation(state.snapshot,_this.currentRouterState.snapshot,_this.injector),preActivation.traverse(_this.outletMap)}).mergeMap(function(_){return preActivation.checkGuards()}).mergeMap(function(shouldActivate){return shouldActivate?preActivation.resolveData().map(function(){return shouldActivate}):of_1.of(shouldActivate)}).forEach(function(shouldActivate){if(!shouldActivate||id!==_this.navigationId)return _this.routerEvents.next(new NavigationCancel(id,_this.serializeUrl(url))),void(navigationIsSuccessful=!1);if(_this.currentUrlTree=appliedUrl,_this.currentRouterState=state,new ActivateRoutes(state,storedState).activate(_this.outletMap),!preventPushState){var path=_this.urlSerializer.serialize(appliedUrl);_this.location.isCurrentPathEqualTo(path)?_this.location.replaceState(path):_this.location.go(path)}navigationIsSuccessful=!0}).then(function(){_this.navigated=!0,_this.routerEvents.next(new NavigationEnd(id,_this.serializeUrl(url),_this.serializeUrl(appliedUrl))),resolvePromise(navigationIsSuccessful)},function(e){_this.currentRouterState=storedState,_this.currentUrlTree=storedUrl,_this.routerEvents.next(new NavigationError(id,_this.serializeUrl(url),e)),rejectPromise(e)})})},Router}();exports.Router=Router;var CanActivate=function(){function CanActivate(path){this.path=path}return Object.defineProperty(CanActivate.prototype,"route",{get:function(){return this.path[this.path.length-1]},enumerable:!0,configurable:!0}),CanActivate}(),CanDeactivate=function(){function CanDeactivate(component,route){this.component=component,
this.route=route}return CanDeactivate}(),PreActivation=function(){function PreActivation(future,curr,injector){this.future=future,this.curr=curr,this.injector=injector,this.checks=[]}return PreActivation.prototype.traverse=function(parentOutletMap){var futureRoot=this.future._root,currRoot=this.curr?this.curr._root:null;this.traverseChildRoutes(futureRoot,currRoot,parentOutletMap,[futureRoot.value])},PreActivation.prototype.checkGuards=function(){var _this=this;return 0===this.checks.length?of_1.of(!0):from_1.from(this.checks).map(function(s){if(s instanceof CanActivate)return collection_1.andObservables(from_1.from([_this.runCanActivate(s.route),_this.runCanActivateChild(s.path)]));if(s instanceof CanDeactivate){var s2=s;return _this.runCanDeactivate(s2.component,s2.route)}throw new Error("Cannot be reached")}).mergeAll().every(function(result){return result===!0})},PreActivation.prototype.resolveData=function(){var _this=this;return 0===this.checks.length?of_1.of(null):from_1.from(this.checks).mergeMap(function(s){return s instanceof CanActivate?_this.runResolve(s.route):of_1.of(null)}).reduce(function(_,__){return _})},PreActivation.prototype.traverseChildRoutes=function(futureNode,currNode,outletMap,futurePath){var _this=this,prevChildren=nodeChildrenAsMap(currNode);futureNode.children.forEach(function(c){_this.traverseRoutes(c,prevChildren[c.value.outlet],outletMap,futurePath.concat([c.value])),delete prevChildren[c.value.outlet]}),collection_1.forEach(prevChildren,function(v,k){return _this.deactivateOutletAndItChildren(v,outletMap._outlets[k])})},PreActivation.prototype.traverseRoutes=function(futureNode,currNode,parentOutletMap,futurePath){var future=futureNode.value,curr=currNode?currNode.value:null,outlet=parentOutletMap?parentOutletMap._outlets[futureNode.value.outlet]:null;curr&&future._routeConfig===curr._routeConfig?(collection_1.shallowEqual(future.params,curr.params)||this.checks.push(new CanDeactivate(outlet.component,curr),new CanActivate(futurePath)),future.component?this.traverseChildRoutes(futureNode,currNode,outlet?outlet.outletMap:null,futurePath):this.traverseChildRoutes(futureNode,currNode,parentOutletMap,futurePath)):(curr&&(curr.component?this.deactivateOutletAndItChildren(curr,outlet):this.deactivateOutletMap(parentOutletMap)),this.checks.push(new CanActivate(futurePath)),future.component?this.traverseChildRoutes(futureNode,null,outlet?outlet.outletMap:null,futurePath):this.traverseChildRoutes(futureNode,null,parentOutletMap,futurePath))},PreActivation.prototype.deactivateOutletAndItChildren=function(route,outlet){outlet&&outlet.isActivated&&(this.deactivateOutletMap(outlet.outletMap),this.checks.push(new CanDeactivate(outlet.component,route)))},PreActivation.prototype.deactivateOutletMap=function(outletMap){var _this=this;collection_1.forEach(outletMap._outlets,function(v){v.isActivated&&_this.deactivateOutletAndItChildren(v.activatedRoute.snapshot,v)})},PreActivation.prototype.runCanActivate=function(future){var _this=this,canActivate=future._routeConfig?future._routeConfig.canActivate:null;if(!canActivate||0===canActivate.length)return of_1.of(!0);var obs=from_1.from(canActivate).map(function(c){var guard=_this.getToken(c,future,_this.future);return guard.canActivate?collection_1.wrapIntoObservable(guard.canActivate(future,_this.future)):collection_1.wrapIntoObservable(guard(future,_this.future))});return collection_1.andObservables(obs)},PreActivation.prototype.runCanActivateChild=function(path){var _this=this,future=path[path.length-1],canActivateChildGuards=path.slice(0,path.length-1).reverse().map(function(p){return _this.extractCanActivateChild(p)}).filter(function(_){return null!==_});return collection_1.andObservables(from_1.from(canActivateChildGuards).map(function(d){var obs=from_1.from(d.guards).map(function(c){var guard=_this.getToken(c,c.node,_this.future);return guard.canActivateChild?collection_1.wrapIntoObservable(guard.canActivateChild(future,_this.future)):collection_1.wrapIntoObservable(guard(future,_this.future))});return collection_1.andObservables(obs)}))},PreActivation.prototype.extractCanActivateChild=function(p){var canActivateChild=p._routeConfig?p._routeConfig.canActivateChild:null;return canActivateChild&&0!==canActivateChild.length?{node:p,guards:canActivateChild}:null},PreActivation.prototype.runCanDeactivate=function(component,curr){var _this=this,canDeactivate=curr&&curr._routeConfig?curr._routeConfig.canDeactivate:null;return canDeactivate&&0!==canDeactivate.length?from_1.from(canDeactivate).map(function(c){var guard=_this.getToken(c,curr,_this.curr);return guard.canDeactivate?collection_1.wrapIntoObservable(guard.canDeactivate(component,curr,_this.curr)):collection_1.wrapIntoObservable(guard(component,curr,_this.curr))}).mergeAll().every(function(result){return result===!0}):of_1.of(!0)},PreActivation.prototype.runResolve=function(future){var resolve=future._resolve;return this.resolveNode(resolve.current,future).map(function(resolvedData){return resolve.resolvedData=resolvedData,future.data=collection_1.merge(future.data,resolve.flattenedResolvedData),null})},PreActivation.prototype.resolveNode=function(resolve,future){var _this=this;return collection_1.waitForMap(resolve,function(k,v){var resolver=_this.getToken(v,future,_this.future);return resolver.resolve?collection_1.wrapIntoObservable(resolver.resolve(future,_this.future)):collection_1.wrapIntoObservable(resolver(future,_this.future))})},PreActivation.prototype.getToken=function(token,snapshot,state){var config=closestLoadedConfig(state,snapshot),injector=config?config.injector:this.injector;return injector.get(token)},PreActivation}(),ActivateRoutes=function(){function ActivateRoutes(futureState,currState){this.futureState=futureState,this.currState=currState}return ActivateRoutes.prototype.activate=function(parentOutletMap){var futureRoot=this.futureState._root,currRoot=this.currState?this.currState._root:null;router_state_1.advanceActivatedRoute(this.futureState.root),this.activateChildRoutes(futureRoot,currRoot,parentOutletMap)},ActivateRoutes.prototype.activateChildRoutes=function(futureNode,currNode,outletMap){var _this=this,prevChildren=nodeChildrenAsMap(currNode);futureNode.children.forEach(function(c){_this.activateRoutes(c,prevChildren[c.value.outlet],outletMap),delete prevChildren[c.value.outlet]}),collection_1.forEach(prevChildren,function(v,k){return _this.deactivateOutletAndItChildren(outletMap._outlets[k])})},ActivateRoutes.prototype.activateRoutes=function(futureNode,currNode,parentOutletMap){var future=futureNode.value,curr=currNode?currNode.value:null;if(future===curr)if(router_state_1.advanceActivatedRoute(future),future.component){var outlet=getOutlet(parentOutletMap,futureNode.value);this.activateChildRoutes(futureNode,currNode,outlet.outletMap)}else this.activateChildRoutes(futureNode,currNode,parentOutletMap);else{if(curr)if(curr.component){var outlet=getOutlet(parentOutletMap,futureNode.value);this.deactivateOutletAndItChildren(outlet)}else this.deactivateOutletMap(parentOutletMap);if(future.component){router_state_1.advanceActivatedRoute(future);var outlet=getOutlet(parentOutletMap,futureNode.value),outletMap=new router_outlet_map_1.RouterOutletMap;this.placeComponentIntoOutlet(outletMap,future,outlet),this.activateChildRoutes(futureNode,null,outletMap)}else router_state_1.advanceActivatedRoute(future),this.activateChildRoutes(futureNode,null,parentOutletMap)}},ActivateRoutes.prototype.placeComponentIntoOutlet=function(outletMap,future,outlet){var resolved=[{provide:router_state_1.ActivatedRoute,useValue:future},{provide:router_outlet_map_1.RouterOutletMap,useValue:outletMap}],config=closestLoadedConfig(this.futureState.snapshot,future.snapshot),loadedFactoryResolver=null,loadedInjector=null;config&&(loadedFactoryResolver=config.factoryResolver,loadedInjector=config.injector,resolved.push({provide:core_1.ComponentFactoryResolver,useValue:loadedFactoryResolver})),outlet.activate(future,loadedFactoryResolver,loadedInjector,core_1.ReflectiveInjector.resolve(resolved),outletMap)},ActivateRoutes.prototype.deactivateOutletAndItChildren=function(outlet){outlet&&outlet.isActivated&&(this.deactivateOutletMap(outlet.outletMap),outlet.deactivate())},ActivateRoutes.prototype.deactivateOutletMap=function(outletMap){var _this=this;collection_1.forEach(outletMap._outlets,function(v){return _this.deactivateOutletAndItChildren(v)})},ActivateRoutes}()},{"./apply_redirects":377,"./config":379,"./create_router_state":380,"./create_url_tree":381,"./recognize":385,"./resolve":386,"./router_config_loader":388,"./router_outlet_map":390,"./router_state":392,"./shared":393,"./url_tree":394,"./utils/collection":395,"@angular/core":154,"rxjs/Subject":407,"rxjs/add/operator/every":466,"rxjs/add/operator/map":480,"rxjs/add/operator/mergeAll":485,"rxjs/add/operator/mergeMap":486,"rxjs/add/operator/reduce":501,"rxjs/observable/from":574,"rxjs/observable/of":582}],388:[function(require,module,exports){"use strict";var core_1=require("@angular/core"),fromPromise_1=require("rxjs/observable/fromPromise"),collection_1=require("./utils/collection");exports.ROUTER_CONFIG=new core_1.OpaqueToken("ROUTER_CONFIG"),exports.ROUTES=new core_1.OpaqueToken("ROUTES");var LoadedRouterConfig=function(){function LoadedRouterConfig(routes,injector,factoryResolver){this.routes=routes,this.injector=injector,this.factoryResolver=factoryResolver}return LoadedRouterConfig}();exports.LoadedRouterConfig=LoadedRouterConfig;var RouterConfigLoader=function(){function RouterConfigLoader(loader){this.loader=loader}return RouterConfigLoader.prototype.load=function(parentInjector,path){return fromPromise_1.fromPromise(this.loader.load(path).then(function(r){var ref=r.create(parentInjector);return new LoadedRouterConfig(collection_1.flatten(ref.injector.get(exports.ROUTES)),ref.injector,ref.componentFactoryResolver)}))},RouterConfigLoader}();exports.RouterConfigLoader=RouterConfigLoader},{"./utils/collection":395,"@angular/core":154,"rxjs/observable/fromPromise":577}],389:[function(require,module,exports){"use strict";function provideLocationStrategy(platformLocationStrategy,baseHref,options){return void 0===options&&(options={}),options.useHash?new common_1.HashLocationStrategy(platformLocationStrategy,baseHref):new common_1.PathLocationStrategy(platformLocationStrategy,baseHref)}var common_1=require("@angular/common"),core_1=require("@angular/core"),common_router_providers_1=require("./common_router_providers"),router_link_1=require("./directives/router_link"),router_link_active_1=require("./directives/router_link_active"),router_outlet_1=require("./directives/router_outlet"),router_1=require("./router"),router_config_loader_1=require("./router_config_loader"),router_outlet_map_1=require("./router_outlet_map"),router_state_1=require("./router_state"),url_tree_1=require("./url_tree");exports.ROUTER_DIRECTIVES=[router_outlet_1.RouterOutlet,router_link_1.RouterLink,router_link_1.RouterLinkWithHref,router_link_active_1.RouterLinkActive];({provide:common_1.LocationStrategy,useClass:common_1.PathLocationStrategy}),{provide:common_1.LocationStrategy,useClass:common_1.HashLocationStrategy};exports.ROUTER_PROVIDERS=[common_1.Location,{provide:url_tree_1.UrlSerializer,useClass:url_tree_1.DefaultUrlSerializer},{provide:router_1.Router,useFactory:common_router_providers_1.setupRouter,deps:[core_1.ApplicationRef,core_1.ComponentResolver,url_tree_1.UrlSerializer,router_outlet_map_1.RouterOutletMap,common_1.Location,core_1.Injector,core_1.NgModuleFactoryLoader,router_config_loader_1.ROUTES,common_router_providers_1.ROUTER_CONFIGURATION]},router_outlet_map_1.RouterOutletMap,{provide:router_state_1.ActivatedRoute,useFactory:common_router_providers_1.rootRoute,deps:[router_1.Router]},{provide:core_1.NgModuleFactoryLoader,useClass:core_1.SystemJsNgModuleLoader},{provide:common_router_providers_1.ROUTER_CONFIGURATION,useValue:{enableTracing:!1}}];var RouterModule=function(){function RouterModule(){}return RouterModule.forRoot=function(routes,config){return{ngModule:RouterModule,providers:[exports.ROUTER_PROVIDERS,common_router_providers_1.provideRoutes(routes),{provide:common_router_providers_1.ROUTER_CONFIGURATION,useValue:config?config:{}},{provide:common_1.LocationStrategy,useFactory:provideLocationStrategy,deps:[common_1.PlatformLocation,[new core_1.Inject(common_1.APP_BASE_HREF),new core_1.Optional],common_router_providers_1.ROUTER_CONFIGURATION]},common_router_providers_1.provideRouterInitializer()]}},RouterModule.forChild=function(routes){return{ngModule:RouterModule,providers:[common_router_providers_1.provideRoutes(routes)]}},RouterModule.decorators=[{type:core_1.NgModule,args:[{declarations:exports.ROUTER_DIRECTIVES,exports:exports.ROUTER_DIRECTIVES}]}],RouterModule}();exports.RouterModule=RouterModule,exports.provideLocationStrategy=provideLocationStrategy},{"./common_router_providers":378,"./directives/router_link":382,"./directives/router_link_active":383,"./directives/router_outlet":384,"./router":387,"./router_config_loader":388,"./router_outlet_map":390,"./router_state":392,"./url_tree":394,"@angular/common":1,"@angular/core":154}],390:[function(require,module,exports){"use strict";var RouterOutletMap=function(){function RouterOutletMap(){this._outlets={}}return RouterOutletMap.prototype.registerOutlet=function(name,outlet){this._outlets[name]=outlet},RouterOutletMap.prototype.removeOutlet=function(name){this._outlets[name]=void 0},RouterOutletMap}();exports.RouterOutletMap=RouterOutletMap},{}],391:[function(require,module,exports){"use strict";function provideRouter(config,opts){return void 0===opts&&(opts={}),[{provide:common_1.PlatformLocation,useClass:platform_browser_1.BrowserPlatformLocation}].concat(common_router_providers_1.provideRouter(config,opts))}var common_1=require("@angular/common"),platform_browser_1=require("@angular/platform-browser"),common_router_providers_1=require("./common_router_providers");exports.provideRouter=provideRouter},{"./common_router_providers":378,"@angular/common":1,"@angular/platform-browser":318}],392:[function(require,module,exports){"use strict";function createEmptyState(urlTree,rootComponent){var snapshot=createEmptyStateSnapshot(urlTree,rootComponent),emptyUrl=new BehaviorSubject_1.BehaviorSubject([new url_tree_1.UrlSegment("",{})]),emptyParams=new BehaviorSubject_1.BehaviorSubject({}),emptyData=new BehaviorSubject_1.BehaviorSubject({}),emptyQueryParams=new BehaviorSubject_1.BehaviorSubject({}),fragment=new BehaviorSubject_1.BehaviorSubject(""),activated=new ActivatedRoute(emptyUrl,emptyParams,emptyQueryParams,fragment,emptyData,shared_1.PRIMARY_OUTLET,rootComponent,snapshot.root);return activated.snapshot=snapshot.root,new RouterState(new tree_1.TreeNode(activated,[]),snapshot)}function createEmptyStateSnapshot(urlTree,rootComponent){var emptyParams={},emptyData={},emptyQueryParams={},fragment="",activated=new ActivatedRouteSnapshot([],emptyParams,emptyQueryParams,fragment,emptyData,shared_1.PRIMARY_OUTLET,rootComponent,null,urlTree.root,(-1),InheritedResolve.empty);return new RouterStateSnapshot("",new tree_1.TreeNode(activated,[]))}function setRouterStateSnapshot(state,node){node.value._routerState=state,node.children.forEach(function(c){return setRouterStateSnapshot(state,c)})}function serializeNode(node){var c=node.children.length>0?" { "+node.children.map(serializeNode).join(", ")+" } ":"";return""+node.value+c}function advanceActivatedRoute(route){route.snapshot?(collection_1.shallowEqual(route.snapshot.queryParams,route._futureSnapshot.queryParams)||route.queryParams.next(route._futureSnapshot.queryParams),route.snapshot.fragment!==route._futureSnapshot.fragment&&route.fragment.next(route._futureSnapshot.fragment),collection_1.shallowEqual(route.snapshot.params,route._futureSnapshot.params)||(route.params.next(route._futureSnapshot.params),route.data.next(route._futureSnapshot.data)),collection_1.shallowEqualArrays(route.snapshot.url,route._futureSnapshot.url)||route.url.next(route._futureSnapshot.url),route.snapshot=route._futureSnapshot):(route.snapshot=route._futureSnapshot,route.data.next(route._futureSnapshot.data))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},BehaviorSubject_1=require("rxjs/BehaviorSubject"),shared_1=require("./shared"),url_tree_1=require("./url_tree"),collection_1=require("./utils/collection"),tree_1=require("./utils/tree"),RouterState=function(_super){function RouterState(root,snapshot){_super.call(this,root),this.snapshot=snapshot,setRouterStateSnapshot(this,root)}return __extends(RouterState,_super),Object.defineProperty(RouterState.prototype,"queryParams",{get:function(){return this.root.queryParams},enumerable:!0,configurable:!0}),Object.defineProperty(RouterState.prototype,"fragment",{get:function(){return this.root.fragment},enumerable:!0,configurable:!0}),RouterState.prototype.toString=function(){return this.snapshot.toString()},RouterState}(tree_1.Tree);exports.RouterState=RouterState,exports.createEmptyState=createEmptyState;var ActivatedRoute=function(){function ActivatedRoute(url,params,queryParams,fragment,data,outlet,component,futureSnapshot){this.url=url,this.params=params,this.queryParams=queryParams,this.fragment=fragment,this.data=data,this.outlet=outlet,this.component=component,this._futureSnapshot=futureSnapshot}return Object.defineProperty(ActivatedRoute.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRoute.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),ActivatedRoute.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},ActivatedRoute}();exports.ActivatedRoute=ActivatedRoute;var InheritedResolve=function(){function InheritedResolve(parent,current){this.parent=parent,this.current=current,this.resolvedData={}}return Object.defineProperty(InheritedResolve.prototype,"flattenedResolvedData",{get:function(){return this.parent?collection_1.merge(this.parent.flattenedResolvedData,this.resolvedData):this.resolvedData},enumerable:!0,configurable:!0}),Object.defineProperty(InheritedResolve,"empty",{get:function(){return new InheritedResolve(null,{})},enumerable:!0,configurable:!0}),InheritedResolve}();exports.InheritedResolve=InheritedResolve;var ActivatedRouteSnapshot=function(){function ActivatedRouteSnapshot(url,params,queryParams,fragment,data,outlet,component,routeConfig,urlSegment,lastPathIndex,resolve){this.url=url,this.params=params,this.queryParams=queryParams,this.fragment=fragment,this.data=data,this.outlet=outlet,this.component=component,this._routeConfig=routeConfig,this._urlSegment=urlSegment,this._lastPathIndex=lastPathIndex,this._resolve=resolve}return Object.defineProperty(ActivatedRouteSnapshot.prototype,"routeConfig",{get:function(){return this._routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(ActivatedRouteSnapshot.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),ActivatedRouteSnapshot.prototype.toString=function(){var url=this.url.map(function(s){return s.toString()}).join("/"),matched=this._routeConfig?this._routeConfig.path:"";return"Route(url:'"+url+"', path:'"+matched+"')"},ActivatedRouteSnapshot}();exports.ActivatedRouteSnapshot=ActivatedRouteSnapshot;var RouterStateSnapshot=function(_super){function RouterStateSnapshot(url,root){_super.call(this,root),this.url=url,setRouterStateSnapshot(this,root)}return __extends(RouterStateSnapshot,_super),Object.defineProperty(RouterStateSnapshot.prototype,"queryParams",{get:function(){return this.root.queryParams},enumerable:!0,configurable:!0}),Object.defineProperty(RouterStateSnapshot.prototype,"fragment",{get:function(){return this.root.fragment},enumerable:!0,configurable:!0}),RouterStateSnapshot.prototype.toString=function(){return serializeNode(this._root)},RouterStateSnapshot}(tree_1.Tree);exports.RouterStateSnapshot=RouterStateSnapshot,exports.advanceActivatedRoute=advanceActivatedRoute},{"./shared":393,"./url_tree":394,"./utils/collection":395,"./utils/tree":396,"rxjs/BehaviorSubject":398}],393:[function(require,module,exports){"use strict";exports.PRIMARY_OUTLET="primary"},{}],394:[function(require,module,exports){"use strict";function createEmptyUrlTree(){return new UrlTree(new UrlSegmentGroup([],{}),{},null)}function containsTree(container,containee,exact){return exact?equalSegmentGroups(container.root,containee.root):containsSegmentGroup(container.root,containee.root)}function equalSegmentGroups(container,containee){if(!equalPath(container.segments,containee.segments))return!1;if(container.numberOfChildren!==containee.numberOfChildren)return!1;for(var c in containee.children){if(!container.children[c])return!1;if(!equalSegmentGroups(container.children[c],containee.children[c]))return!1}return!0}function containsSegmentGroup(container,containee){return containsSegmentGroupHelper(container,containee,containee.segments)}function containsSegmentGroupHelper(container,containee,containeePaths){if(container.segments.length>containeePaths.length){var current=container.segments.slice(0,containeePaths.length);return!!equalPath(current,containeePaths)&&!containee.hasChildren()}if(container.segments.length===containeePaths.length){if(!equalPath(container.segments,containeePaths))return!1;for(var c in containee.children){if(!container.children[c])return!1;if(!containsSegmentGroup(container.children[c],containee.children[c]))return!1}return!0}var current=containeePaths.slice(0,container.segments.length),next=containeePaths.slice(container.segments.length);return!!equalPath(container.segments,current)&&(!!container.children[shared_1.PRIMARY_OUTLET]&&containsSegmentGroupHelper(container.children[shared_1.PRIMARY_OUTLET],containee,next))}function equalSegments(a,b){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i){if(a[i].path!==b[i].path)return!1;if(!collection_1.shallowEqual(a[i].parameters,b[i].parameters))return!1}return!0}function equalPath(a,b){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(a[i].path!==b[i].path)return!1;return!0}function mapChildrenIntoArray(segment,fn){var res=[];return collection_1.forEach(segment.children,function(child,childOutlet){childOutlet===shared_1.PRIMARY_OUTLET&&(res=res.concat(fn(child,childOutlet)))}),collection_1.forEach(segment.children,function(child,childOutlet){childOutlet!==shared_1.PRIMARY_OUTLET&&(res=res.concat(fn(child,childOutlet)))}),res}function serializePaths(segment){return segment.segments.map(function(p){return serializePath(p)}).join("/")}function serializeSegment(segment,root){if(segment.hasChildren()&&root){var primary=segment.children[shared_1.PRIMARY_OUTLET]?serializeSegment(segment.children[shared_1.PRIMARY_OUTLET],!1):"",children_1=[];return collection_1.forEach(segment.children,function(v,k){k!==shared_1.PRIMARY_OUTLET&&children_1.push(k+":"+serializeSegment(v,!1))}),children_1.length>0?primary+"("+children_1.join("//")+")":""+primary}if(segment.hasChildren()&&!root){var children=mapChildrenIntoArray(segment,function(v,k){return k===shared_1.PRIMARY_OUTLET?[serializeSegment(segment.children[shared_1.PRIMARY_OUTLET],!1)]:[k+":"+serializeSegment(v,!1)]});return serializePaths(segment)+"/("+children.join("//")+")"}return serializePaths(segment)}function encode(s){return encodeURIComponent(s)}function decode(s){return decodeURIComponent(s)}function serializePath(path){return""+encode(path.path)+serializeParams(path.parameters)}function serializeParams(params){return pairs(params).map(function(p){return";"+encode(p.first)+"="+encode(p.second)}).join("")}function serializeQueryParams(params){var strs=pairs(params).map(function(p){return encode(p.first)+"="+encode(p.second)});return strs.length>0?"?"+strs.join("&"):""}function pairs(obj){var res=[];for(var prop in obj)obj.hasOwnProperty(prop)&&res.push(new Pair(prop,obj[prop]));return res}function matchSegments(str){SEGMENT_RE.lastIndex=0;var match=str.match(SEGMENT_RE);return match?match[0]:""}function matchQueryParams(str){QUERY_PARAM_RE.lastIndex=0;var match=str.match(SEGMENT_RE);return match?match[0]:""}function matchUrlQueryParamValue(str){QUERY_PARAM_VALUE_RE.lastIndex=0;var match=str.match(QUERY_PARAM_VALUE_RE);return match?match[0]:""}var shared_1=require("./shared"),collection_1=require("./utils/collection");exports.createEmptyUrlTree=createEmptyUrlTree,exports.containsTree=containsTree;var UrlTree=function(){function UrlTree(root,queryParams,fragment){this.root=root,this.queryParams=queryParams,this.fragment=fragment}return UrlTree.prototype.toString=function(){return(new DefaultUrlSerializer).serialize(this)},UrlTree}();exports.UrlTree=UrlTree;var UrlSegmentGroup=function(){function UrlSegmentGroup(segments,children){var _this=this;this.segments=segments,this.children=children,this.parent=null,collection_1.forEach(children,function(v,k){return v.parent=_this})}return UrlSegmentGroup.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(UrlSegmentGroup.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),UrlSegmentGroup.prototype.toString=function(){return serializePaths(this)},UrlSegmentGroup}();exports.UrlSegmentGroup=UrlSegmentGroup;var UrlSegment=function(){function UrlSegment(path,parameters){this.path=path,this.parameters=parameters}return UrlSegment.prototype.toString=function(){return serializePath(this)},UrlSegment}();exports.UrlSegment=UrlSegment,exports.equalSegments=equalSegments,exports.equalPath=equalPath,exports.mapChildrenIntoArray=mapChildrenIntoArray;var UrlSerializer=function(){function UrlSerializer(){}return UrlSerializer}();exports.UrlSerializer=UrlSerializer;var DefaultUrlSerializer=function(){function DefaultUrlSerializer(){}return DefaultUrlSerializer.prototype.parse=function(url){var p=new UrlParser(url);return new UrlTree(p.parseRootSegment(),p.parseQueryParams(),p.parseFragment())},DefaultUrlSerializer.prototype.serialize=function(tree){var segment="/"+serializeSegment(tree.root,!0),query=serializeQueryParams(tree.queryParams),fragment=null!==tree.fragment&&void 0!==tree.fragment?"#"+encodeURIComponent(tree.fragment):"";return""+segment+query+fragment},DefaultUrlSerializer}();exports.DefaultUrlSerializer=DefaultUrlSerializer,exports.serializePaths=serializePaths,exports.encode=encode,exports.decode=decode,exports.serializePath=serializePath;var Pair=function(){function Pair(first,second){this.first=first,this.second=second}return Pair}(),SEGMENT_RE=/^[^\/\(\)\?;=&#]+/,QUERY_PARAM_RE=/^[^=\?&#]+/,QUERY_PARAM_VALUE_RE=/^[^\?&#]+/,UrlParser=function(){function UrlParser(url){this.url=url,this.remaining=url}return UrlParser.prototype.peekStartsWith=function(str){return this.remaining.startsWith(str)},UrlParser.prototype.capture=function(str){if(!this.remaining.startsWith(str))throw new Error('Expected "'+str+'".');this.remaining=this.remaining.substring(str.length)},UrlParser.prototype.parseRootSegment=function(){return this.remaining.startsWith("/")&&this.capture("/"),""===this.remaining||this.remaining.startsWith("?")||this.remaining.startsWith("#")?new UrlSegmentGroup([],{}):new UrlSegmentGroup([],this.parseChildren())},UrlParser.prototype.parseChildren=function(){if(0==this.remaining.length)return{};this.peekStartsWith("/")&&this.capture("/");var paths=[];for(this.peekStartsWith("(")||paths.push(this.parseSegments());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),paths.push(this.parseSegments());var children={};this.peekStartsWith("/(")&&(this.capture("/"),children=this.parseParens(!0));var res={};return this.peekStartsWith("(")&&(res=this.parseParens(!1)),(paths.length>0||Object.keys(children).length>0)&&(res[shared_1.PRIMARY_OUTLET]=new UrlSegmentGroup(paths,children)),res},UrlParser.prototype.parseSegments=function(){var path=matchSegments(this.remaining);if(""===path&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");this.capture(path);var matrixParams={};return this.peekStartsWith(";")&&(matrixParams=this.parseMatrixParams()),new UrlSegment(decode(path),matrixParams)},UrlParser.prototype.parseQueryParams=function(){var params={};if(this.peekStartsWith("?"))for(this.capture("?"),this.parseQueryParam(params);this.remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(params);return params},UrlParser.prototype.parseFragment=function(){return this.peekStartsWith("#")?decode(this.remaining.substring(1)):null},UrlParser.prototype.parseMatrixParams=function(){for(var params={};this.remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(params);return params},UrlParser.prototype.parseParam=function(params){var key=matchSegments(this.remaining);if(key){this.capture(key);var value="true";if(this.peekStartsWith("=")){this.capture("=");var valueMatch=matchSegments(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}params[decode(key)]=decode(value)}},UrlParser.prototype.parseQueryParam=function(params){var key=matchQueryParams(this.remaining);if(key){this.capture(key);var value="";if(this.peekStartsWith("=")){this.capture("=");var valueMatch=matchUrlQueryParamValue(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}params[decode(key)]=decode(value)}},UrlParser.prototype.parseParens=function(allowPrimary){var segments={};for(this.capture("(");!this.peekStartsWith(")")&&this.remaining.length>0;){var path=matchSegments(this.remaining),next=this.remaining[path.length];if("/"!==next&&")"!==next&&";"!==next)throw new Error("Cannot parse url '"+this.url+"'");var outletName=void 0;path.indexOf(":")>-1?(outletName=path.substr(0,path.indexOf(":")),this.capture(outletName),this.capture(":")):allowPrimary&&(outletName=shared_1.PRIMARY_OUTLET);var children=this.parseChildren();segments[outletName]=1===Object.keys(children).length?children[shared_1.PRIMARY_OUTLET]:new UrlSegmentGroup([],children),this.peekStartsWith("//")&&this.capture("//")}return this.capture(")"),segments},UrlParser}()},{"./shared":393,"./utils/collection":395}],395:[function(require,module,exports){"use strict";function shallowEqualArrays(a,b){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!shallowEqual(a[i],b[i]))return!1;return!0}function shallowEqual(a,b){var k1=Object.keys(a),k2=Object.keys(b);if(k1.length!=k2.length)return!1;for(var key,i=0;i<k1.length;i++)if(key=k1[i],a[key]!==b[key])return!1;return!0}function flatten(a){
for(var target=[],i=0;i<a.length;++i)for(var j=0;j<a[i].length;++j)target.push(a[i][j]);return target}function first(a){return a.length>0?a[0]:null}function last(a){return a.length>0?a[a.length-1]:null}function and(bools){return bools.reduce(function(a,b){return a&&b},!0)}function merge(m1,m2){var m={};for(var attr in m1)m1.hasOwnProperty(attr)&&(m[attr]=m1[attr]);for(var attr in m2)m2.hasOwnProperty(attr)&&(m[attr]=m2[attr]);return m}function forEach(map,callback){for(var prop in map)map.hasOwnProperty(prop)&&callback(map[prop],prop)}function waitForMap(obj,fn){var waitFor=[],res={};return forEach(obj,function(a,k){k===shared_1.PRIMARY_OUTLET&&waitFor.push(fn(k,a).map(function(_){return res[k]=_,_}))}),forEach(obj,function(a,k){k!==shared_1.PRIMARY_OUTLET&&waitFor.push(fn(k,a).map(function(_){return res[k]=_,_}))}),waitFor.length>0?of_1.of.apply(void 0,waitFor).concatAll().last().map(function(last){return res}):of_1.of(res)}function andObservables(observables){return observables.mergeAll().every(function(result){return result===!0})}function wrapIntoObservable(value){return value instanceof Observable_1.Observable?value:value instanceof Promise?fromPromise_1.fromPromise(value):of_1.of(value)}require("rxjs/add/operator/concatAll"),require("rxjs/add/operator/last");var Observable_1=require("rxjs/Observable"),fromPromise_1=require("rxjs/observable/fromPromise"),of_1=require("rxjs/observable/of"),shared_1=require("../shared");exports.shallowEqualArrays=shallowEqualArrays,exports.shallowEqual=shallowEqual,exports.flatten=flatten,exports.first=first,exports.last=last,exports.and=and,exports.merge=merge,exports.forEach=forEach,exports.waitForMap=waitForMap,exports.andObservables=andObservables,exports.wrapIntoObservable=wrapIntoObservable},{"../shared":393,"rxjs/Observable":401,"rxjs/add/operator/concatAll":450,"rxjs/add/operator/last":478,"rxjs/observable/fromPromise":577,"rxjs/observable/of":582}],396:[function(require,module,exports){"use strict";function findNode(expected,c){if(expected===c.value)return c;for(var _i=0,_a=c.children;_i<_a.length;_i++){var cc=_a[_i],r=findNode(expected,cc);if(r)return r}return null}function findPath(expected,c,collected){if(collected.push(c),expected===c.value)return collected;for(var _i=0,_a=c.children;_i<_a.length;_i++){var cc=_a[_i],cloned=collected.slice(0),r=findPath(expected,cc,cloned);if(r.length>0)return r}return[]}var Tree=function(){function Tree(root){this._root=root}return Object.defineProperty(Tree.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),Tree.prototype.parent=function(t){var p=this.pathFromRoot(t);return p.length>1?p[p.length-2]:null},Tree.prototype.children=function(t){var n=findNode(t,this._root);return n?n.children.map(function(t){return t.value}):[]},Tree.prototype.firstChild=function(t){var n=findNode(t,this._root);return n&&n.children.length>0?n.children[0].value:null},Tree.prototype.siblings=function(t){var p=findPath(t,this._root,[]);if(p.length<2)return[];var c=p[p.length-2].children.map(function(c){return c.value});return c.filter(function(cc){return cc!==t})},Tree.prototype.pathFromRoot=function(t){return findPath(t,this._root,[]).map(function(s){return s.value})},Tree}();exports.Tree=Tree;var TreeNode=function(){function TreeNode(value,children){this.value=value,this.children=children}return TreeNode.prototype.toString=function(){return"TreeNode("+this.value+")"},TreeNode}();exports.TreeNode=TreeNode},{}],397:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("./Subject"),Subscription_1=require("./Subscription"),AsyncSubject=function(_super){function AsyncSubject(){_super.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return __extends(AsyncSubject,_super),AsyncSubject.prototype._subscribe=function(subscriber){return this.hasCompleted&&this.hasNext?(subscriber.next(this.value),subscriber.complete(),Subscription_1.Subscription.EMPTY):this.hasError?(subscriber.error(this.thrownError),Subscription_1.Subscription.EMPTY):_super.prototype._subscribe.call(this,subscriber)},AsyncSubject.prototype.next=function(value){this.hasCompleted||(this.value=value,this.hasNext=!0)},AsyncSubject.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&_super.prototype.next.call(this,this.value),_super.prototype.complete.call(this)},AsyncSubject}(Subject_1.Subject);exports.AsyncSubject=AsyncSubject},{"./Subject":407,"./Subscription":410}],398:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("./Subject"),ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError"),BehaviorSubject=function(_super){function BehaviorSubject(_value){_super.call(this),this._value=_value}return __extends(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return subscription&&!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return this._value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(Subject_1.Subject);exports.BehaviorSubject=BehaviorSubject},{"./Subject":407,"./util/ObjectUnsubscribedError":718}],399:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("./Subscriber"),InnerSubscriber=function(_super){function InnerSubscriber(parent,outerValue,outerIndex){_super.call(this),this.parent=parent,this.outerValue=outerValue,this.outerIndex=outerIndex,this.index=0}return __extends(InnerSubscriber,_super),InnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(error){this.parent.notifyError(error,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(Subscriber_1.Subscriber);exports.InnerSubscriber=InnerSubscriber},{"./Subscriber":409}],400:[function(require,module,exports){"use strict";var Observable_1=require("./Observable"),Notification=function(){function Notification(kind,value,exception){this.kind=kind,this.value=value,this.exception=exception,this.hasValue="N"===kind}return Notification.prototype.observe=function(observer){switch(this.kind){case"N":return observer.next&&observer.next(this.value);case"E":return observer.error&&observer.error(this.exception);case"C":return observer.complete&&observer.complete()}},Notification.prototype.do=function(next,error,complete){var kind=this.kind;switch(kind){case"N":return next&&next(this.value);case"E":return error&&error(this.exception);case"C":return complete&&complete()}},Notification.prototype.accept=function(nextOrObserver,error,complete){return nextOrObserver&&"function"==typeof nextOrObserver.next?this.observe(nextOrObserver):this.do(nextOrObserver,error,complete)},Notification.prototype.toObservable=function(){var kind=this.kind;switch(kind){case"N":return Observable_1.Observable.of(this.value);case"E":return Observable_1.Observable.throw(this.exception);case"C":return Observable_1.Observable.empty()}throw new Error("unexpected notification kind value")},Notification.createNext=function(value){return"undefined"!=typeof value?new Notification("N",value):this.undefinedValueNotification},Notification.createError=function(err){return new Notification("E",(void 0),err)},Notification.createComplete=function(){return this.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",(void 0)),Notification}();exports.Notification=Notification},{"./Observable":401}],401:[function(require,module,exports){"use strict";var root_1=require("./util/root"),toSubscriber_1=require("./util/toSubscriber"),observable_1=require("./symbol/observable"),Observable=function(){function Observable(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator,sink=toSubscriber_1.toSubscriber(observerOrNext,error,complete);if(operator?operator.call(sink,this):sink.add(this._subscribe(sink)),sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink},Observable.prototype.forEach=function(next,PromiseCtor){var _this=this;if(PromiseCtor||(root_1.root.Rx&&root_1.root.Rx.config&&root_1.root.Rx.config.Promise?PromiseCtor=root_1.root.Rx.config.Promise:root_1.root.Promise&&(PromiseCtor=root_1.root.Promise)),!PromiseCtor)throw new Error("no Promise impl found");return new PromiseCtor(function(resolve,reject){var subscription=_this.subscribe(function(value){if(subscription)try{next(value)}catch(err){reject(err),subscription.unsubscribe()}else next(value)},reject,resolve)})},Observable.prototype._subscribe=function(subscriber){return this.source.subscribe(subscriber)},Observable.prototype[observable_1.$$observable]=function(){return this},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();exports.Observable=Observable},{"./symbol/observable":704,"./util/root":732,"./util/toSubscriber":734}],402:[function(require,module,exports){"use strict";exports.empty={closed:!0,next:function(value){},error:function(err){throw err},complete:function(){}}},{}],403:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("./Subscriber"),OuterSubscriber=function(_super){function OuterSubscriber(){_super.apply(this,arguments)}return __extends(OuterSubscriber,_super),OuterSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},OuterSubscriber.prototype.notifyError=function(error,innerSub){this.destination.error(error)},OuterSubscriber.prototype.notifyComplete=function(innerSub){this.destination.complete()},OuterSubscriber}(Subscriber_1.Subscriber);exports.OuterSubscriber=OuterSubscriber},{"./Subscriber":409}],404:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("./Subject"),queue_1=require("./scheduler/queue"),observeOn_1=require("./operator/observeOn"),ReplaySubject=function(_super){function ReplaySubject(bufferSize,windowTime,scheduler){void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),_super.call(this),this.scheduler=scheduler,this._events=[],this._bufferSize=bufferSize<1?1:bufferSize,this._windowTime=windowTime<1?1:windowTime}return __extends(ReplaySubject,_super),ReplaySubject.prototype.next=function(value){var now=this._getNow();this._events.push(new ReplayEvent(now,value)),this._trimBufferThenGetEvents(),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){var _events=this._trimBufferThenGetEvents(),scheduler=this.scheduler;scheduler&&subscriber.add(subscriber=new observeOn_1.ObserveOnSubscriber(subscriber,scheduler));for(var len=_events.length,i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i].value);return _super.prototype._subscribe.call(this,subscriber)},ReplaySubject.prototype._getNow=function(){return(this.scheduler||queue_1.queue).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(){for(var now=this._getNow(),_bufferSize=this._bufferSize,_windowTime=this._windowTime,_events=this._events,eventsCount=_events.length,spliceCount=0;spliceCount<eventsCount&&!(now-_events[spliceCount].time<_windowTime);)spliceCount++;return eventsCount>_bufferSize&&(spliceCount=Math.max(spliceCount,eventsCount-_bufferSize)),spliceCount>0&&_events.splice(0,spliceCount),_events},ReplaySubject}(Subject_1.Subject);exports.ReplaySubject=ReplaySubject;var ReplayEvent=function(){function ReplayEvent(time,value){this.time=time,this.value=value}return ReplayEvent}()},{"./Subject":407,"./operator/observeOn":642,"./scheduler/queue":702}],405:[function(require,module,exports){"use strict";var Subject_1=require("./Subject");exports.Subject=Subject_1.Subject;var Observable_1=require("./Observable");exports.Observable=Observable_1.Observable,require("./add/observable/bindCallback"),require("./add/observable/bindNodeCallback"),require("./add/observable/combineLatest"),require("./add/observable/concat"),require("./add/observable/defer"),require("./add/observable/empty"),require("./add/observable/forkJoin"),require("./add/observable/from"),require("./add/observable/fromEvent"),require("./add/observable/fromEventPattern"),require("./add/observable/fromPromise"),require("./add/observable/generate"),require("./add/observable/if"),require("./add/observable/interval"),require("./add/observable/merge"),require("./add/observable/race"),require("./add/observable/never"),require("./add/observable/of"),require("./add/observable/onErrorResumeNext"),require("./add/observable/pairs"),require("./add/observable/range"),require("./add/observable/using"),require("./add/observable/throw"),require("./add/observable/timer"),require("./add/observable/zip"),require("./add/observable/dom/ajax"),require("./add/observable/dom/webSocket"),require("./add/operator/buffer"),require("./add/operator/bufferCount"),require("./add/operator/bufferTime"),require("./add/operator/bufferToggle"),require("./add/operator/bufferWhen"),require("./add/operator/cache"),require("./add/operator/catch"),require("./add/operator/combineAll"),require("./add/operator/combineLatest"),require("./add/operator/concat"),require("./add/operator/concatAll"),require("./add/operator/concatMap"),require("./add/operator/concatMapTo"),require("./add/operator/count"),require("./add/operator/dematerialize"),require("./add/operator/debounce"),require("./add/operator/debounceTime"),require("./add/operator/defaultIfEmpty"),require("./add/operator/delay"),require("./add/operator/delayWhen"),require("./add/operator/distinct"),require("./add/operator/distinctKey"),require("./add/operator/distinctUntilChanged"),require("./add/operator/distinctUntilKeyChanged"),require("./add/operator/do"),require("./add/operator/exhaust"),require("./add/operator/exhaustMap"),require("./add/operator/expand"),require("./add/operator/elementAt"),require("./add/operator/filter"),require("./add/operator/finally"),require("./add/operator/find"),require("./add/operator/findIndex"),require("./add/operator/first"),require("./add/operator/groupBy"),require("./add/operator/ignoreElements"),require("./add/operator/isEmpty"),require("./add/operator/audit"),require("./add/operator/auditTime"),require("./add/operator/last"),require("./add/operator/let"),require("./add/operator/every"),require("./add/operator/map"),require("./add/operator/mapTo"),require("./add/operator/materialize"),require("./add/operator/max"),require("./add/operator/merge"),require("./add/operator/mergeAll"),require("./add/operator/mergeMap"),require("./add/operator/mergeMapTo"),require("./add/operator/mergeScan"),require("./add/operator/min"),require("./add/operator/multicast"),require("./add/operator/observeOn"),require("./add/operator/onErrorResumeNext"),require("./add/operator/pairwise"),require("./add/operator/partition"),require("./add/operator/pluck"),require("./add/operator/publish"),require("./add/operator/publishBehavior"),require("./add/operator/publishReplay"),require("./add/operator/publishLast"),require("./add/operator/race"),require("./add/operator/reduce"),require("./add/operator/repeat"),require("./add/operator/retry"),require("./add/operator/retryWhen"),require("./add/operator/sample"),require("./add/operator/sampleTime"),require("./add/operator/scan"),require("./add/operator/share"),require("./add/operator/single"),require("./add/operator/skip"),require("./add/operator/skipUntil"),require("./add/operator/skipWhile"),require("./add/operator/startWith"),require("./add/operator/subscribeOn"),require("./add/operator/switch"),require("./add/operator/switchMap"),require("./add/operator/switchMapTo"),require("./add/operator/take"),require("./add/operator/takeLast"),require("./add/operator/takeUntil"),require("./add/operator/takeWhile"),require("./add/operator/throttle"),require("./add/operator/throttleTime"),require("./add/operator/timeInterval"),require("./add/operator/timeout"),require("./add/operator/timeoutWith"),require("./add/operator/timestamp"),require("./add/operator/toArray"),require("./add/operator/toPromise"),require("./add/operator/window"),require("./add/operator/windowCount"),require("./add/operator/windowTime"),require("./add/operator/windowToggle"),require("./add/operator/windowWhen"),require("./add/operator/withLatestFrom"),require("./add/operator/zip"),require("./add/operator/zipAll");var Subscription_1=require("./Subscription");exports.Subscription=Subscription_1.Subscription;var Subscriber_1=require("./Subscriber");exports.Subscriber=Subscriber_1.Subscriber;var AsyncSubject_1=require("./AsyncSubject");exports.AsyncSubject=AsyncSubject_1.AsyncSubject;var ReplaySubject_1=require("./ReplaySubject");exports.ReplaySubject=ReplaySubject_1.ReplaySubject;var BehaviorSubject_1=require("./BehaviorSubject");exports.BehaviorSubject=BehaviorSubject_1.BehaviorSubject;var MulticastObservable_1=require("./observable/MulticastObservable");exports.MulticastObservable=MulticastObservable_1.MulticastObservable;var ConnectableObservable_1=require("./observable/ConnectableObservable");exports.ConnectableObservable=ConnectableObservable_1.ConnectableObservable;var Notification_1=require("./Notification");exports.Notification=Notification_1.Notification;var EmptyError_1=require("./util/EmptyError");exports.EmptyError=EmptyError_1.EmptyError;var ArgumentOutOfRangeError_1=require("./util/ArgumentOutOfRangeError");exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;var ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError");exports.ObjectUnsubscribedError=ObjectUnsubscribedError_1.ObjectUnsubscribedError;var UnsubscriptionError_1=require("./util/UnsubscriptionError");exports.UnsubscriptionError=UnsubscriptionError_1.UnsubscriptionError;var timeInterval_1=require("./operator/timeInterval");exports.TimeInterval=timeInterval_1.TimeInterval;var timestamp_1=require("./operator/timestamp");exports.Timestamp=timestamp_1.Timestamp;var TestScheduler_1=require("./testing/TestScheduler");exports.TestScheduler=TestScheduler_1.TestScheduler;var VirtualTimeScheduler_1=require("./scheduler/VirtualTimeScheduler");exports.VirtualTimeScheduler=VirtualTimeScheduler_1.VirtualTimeScheduler;var AjaxObservable_1=require("./observable/dom/AjaxObservable");exports.AjaxResponse=AjaxObservable_1.AjaxResponse,exports.AjaxError=AjaxObservable_1.AjaxError,exports.AjaxTimeoutError=AjaxObservable_1.AjaxTimeoutError;var asap_1=require("./scheduler/asap"),async_1=require("./scheduler/async"),queue_1=require("./scheduler/queue"),animationFrame_1=require("./scheduler/animationFrame"),rxSubscriber_1=require("./symbol/rxSubscriber"),iterator_1=require("./symbol/iterator"),observable_1=require("./symbol/observable"),Scheduler={asap:asap_1.asap,queue:queue_1.queue,animationFrame:animationFrame_1.animationFrame,async:async_1.async};exports.Scheduler=Scheduler;var Symbol={rxSubscriber:rxSubscriber_1.$$rxSubscriber,observable:observable_1.$$observable,iterator:iterator_1.$$iterator};exports.Symbol=Symbol},{"./AsyncSubject":397,"./BehaviorSubject":398,"./Notification":400,"./Observable":401,"./ReplaySubject":404,"./Subject":407,"./Subscriber":409,"./Subscription":410,"./add/observable/bindCallback":411,"./add/observable/bindNodeCallback":412,"./add/observable/combineLatest":413,"./add/observable/concat":414,"./add/observable/defer":415,"./add/observable/dom/ajax":416,"./add/observable/dom/webSocket":417,"./add/observable/empty":418,"./add/observable/forkJoin":419,"./add/observable/from":420,"./add/observable/fromEvent":421,"./add/observable/fromEventPattern":422,"./add/observable/fromPromise":423,"./add/observable/generate":424,"./add/observable/if":425,"./add/observable/interval":426,"./add/observable/merge":427,"./add/observable/never":428,"./add/observable/of":429,"./add/observable/onErrorResumeNext":430,"./add/observable/pairs":431,"./add/observable/race":432,"./add/observable/range":433,"./add/observable/throw":434,"./add/observable/timer":435,"./add/observable/using":436,"./add/observable/zip":437,"./add/operator/audit":438,"./add/operator/auditTime":439,"./add/operator/buffer":440,"./add/operator/bufferCount":441,"./add/operator/bufferTime":442,"./add/operator/bufferToggle":443,"./add/operator/bufferWhen":444,"./add/operator/cache":445,"./add/operator/catch":446,"./add/operator/combineAll":447,"./add/operator/combineLatest":448,"./add/operator/concat":449,"./add/operator/concatAll":450,"./add/operator/concatMap":451,"./add/operator/concatMapTo":452,"./add/operator/count":453,"./add/operator/debounce":454,"./add/operator/debounceTime":455,"./add/operator/defaultIfEmpty":456,"./add/operator/delay":457,"./add/operator/delayWhen":458,"./add/operator/dematerialize":459,"./add/operator/distinct":460,"./add/operator/distinctKey":461,"./add/operator/distinctUntilChanged":462,"./add/operator/distinctUntilKeyChanged":463,"./add/operator/do":464,"./add/operator/elementAt":465,"./add/operator/every":466,"./add/operator/exhaust":467,"./add/operator/exhaustMap":468,"./add/operator/expand":469,"./add/operator/filter":470,"./add/operator/finally":471,"./add/operator/find":472,"./add/operator/findIndex":473,"./add/operator/first":474,"./add/operator/groupBy":475,"./add/operator/ignoreElements":476,"./add/operator/isEmpty":477,"./add/operator/last":478,"./add/operator/let":479,"./add/operator/map":480,"./add/operator/mapTo":481,"./add/operator/materialize":482,"./add/operator/max":483,"./add/operator/merge":484,"./add/operator/mergeAll":485,"./add/operator/mergeMap":486,"./add/operator/mergeMapTo":487,"./add/operator/mergeScan":488,"./add/operator/min":489,"./add/operator/multicast":490,"./add/operator/observeOn":491,"./add/operator/onErrorResumeNext":492,"./add/operator/pairwise":493,"./add/operator/partition":494,"./add/operator/pluck":495,"./add/operator/publish":496,"./add/operator/publishBehavior":497,"./add/operator/publishLast":498,"./add/operator/publishReplay":499,"./add/operator/race":500,"./add/operator/reduce":501,"./add/operator/repeat":502,"./add/operator/retry":503,"./add/operator/retryWhen":504,"./add/operator/sample":505,"./add/operator/sampleTime":506,"./add/operator/scan":507,"./add/operator/share":508,"./add/operator/single":509,"./add/operator/skip":510,"./add/operator/skipUntil":511,"./add/operator/skipWhile":512,"./add/operator/startWith":513,"./add/operator/subscribeOn":514,"./add/operator/switch":515,"./add/operator/switchMap":516,"./add/operator/switchMapTo":517,"./add/operator/take":518,"./add/operator/takeLast":519,"./add/operator/takeUntil":520,"./add/operator/takeWhile":521,"./add/operator/throttle":522,"./add/operator/throttleTime":523,"./add/operator/timeInterval":524,"./add/operator/timeout":525,"./add/operator/timeoutWith":526,"./add/operator/timestamp":527,"./add/operator/toArray":528,"./add/operator/toPromise":529,"./add/operator/window":530,"./add/operator/windowCount":531,"./add/operator/windowTime":532,"./add/operator/windowToggle":533,"./add/operator/windowWhen":534,"./add/operator/withLatestFrom":535,"./add/operator/zip":536,"./add/operator/zipAll":537,"./observable/ConnectableObservable":542,"./observable/MulticastObservable":554,"./observable/dom/AjaxObservable":568,"./operator/timeInterval":675,"./operator/timestamp":678,"./scheduler/VirtualTimeScheduler":698,"./scheduler/animationFrame":699,"./scheduler/asap":700,"./scheduler/async":701,"./scheduler/queue":702,"./symbol/iterator":703,"./symbol/observable":704,"./symbol/rxSubscriber":705,"./testing/TestScheduler":710,"./util/ArgumentOutOfRangeError":712,"./util/EmptyError":713,"./util/ObjectUnsubscribedError":718,"./util/UnsubscriptionError":719}],406:[function(require,module,exports){"use strict";var Scheduler=function(){function Scheduler(SchedulerAction,now){void 0===now&&(now=Scheduler.now),this.SchedulerAction=SchedulerAction,this.now=now}return Scheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),new this.SchedulerAction(this,work).schedule(state,delay)},Scheduler.now=Date.now?Date.now:function(){return+new Date},Scheduler}();exports.Scheduler=Scheduler},{}],407:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("./Observable"),Subscriber_1=require("./Subscriber"),Subscription_1=require("./Subscription"),ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError"),SubjectSubscription_1=require("./SubjectSubscription"),rxSubscriber_1=require("./symbol/rxSubscriber"),SubjectSubscriber=function(_super){function SubjectSubscriber(destination){_super.call(this,destination),this.destination=destination}return __extends(SubjectSubscriber,_super),SubjectSubscriber}(Subscriber_1.Subscriber);exports.SubjectSubscriber=SubjectSubscriber;var Subject=function(_super){function Subject(){_super.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return __extends(Subject,_super),Subject.prototype[rxSubscriber_1.$$rxSubscriber]=function(){return new SubjectSubscriber(this)},Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype.next=function(value){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;if(!this.isStopped)for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].next(value)},Subject.prototype.error=function(err){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=err,this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].error(err);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._subscribe=function(subscriber){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return this.hasError?(subscriber.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.isStopped?(subscriber.complete(),Subscription_1.Subscription.EMPTY):(this.observers.push(subscriber),new SubjectSubscription_1.SubjectSubscription(this,subscriber))},Subject.prototype.asObservable=function(){var observable=new Observable_1.Observable;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(Observable_1.Observable);exports.Subject=Subject;var AnonymousSubject=function(_super){function AnonymousSubject(destination,source){_super.call(this),this.destination=destination,this.source=source}return __extends(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var destination=this.destination;destination&&destination.next&&destination.next(value)},AnonymousSubject.prototype.error=function(err){var destination=this.destination;destination&&destination.error&&this.destination.error(err)},AnonymousSubject.prototype.complete=function(){var destination=this.destination;destination&&destination.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(subscriber){var source=this.source;return source?this.source.subscribe(subscriber):Subscription_1.Subscription.EMPTY},AnonymousSubject}(Subject);exports.AnonymousSubject=AnonymousSubject},{"./Observable":401,"./SubjectSubscription":408,"./Subscriber":409,"./Subscription":410,"./symbol/rxSubscriber":705,"./util/ObjectUnsubscribedError":718}],408:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=require("./Subscription"),SubjectSubscription=function(_super){function SubjectSubscription(subject,subscriber){_super.call(this),this.subject=subject,this.subscriber=subscriber,this.closed=!1}return __extends(SubjectSubscription,_super),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var subject=this.subject,observers=subject.observers;if(this.subject=null,observers&&0!==observers.length&&!subject.isStopped&&!subject.closed){var subscriberIndex=observers.indexOf(this.subscriber);subscriberIndex!==-1&&observers.splice(subscriberIndex,1)}}},SubjectSubscription}(Subscription_1.Subscription);exports.SubjectSubscription=SubjectSubscription},{"./Subscription":410}],409:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isFunction_1=require("./util/isFunction"),Subscription_1=require("./Subscription"),Observer_1=require("./Observer"),rxSubscriber_1=require("./symbol/rxSubscriber"),Subscriber=function(_super){function Subscriber(destinationOrNext,error,complete){switch(_super.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Observer_1.empty;break;case 1:if(!destinationOrNext){this.destination=Observer_1.empty;break}if("object"==typeof destinationOrNext){destinationOrNext instanceof Subscriber?(this.destination=destinationOrNext,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,destinationOrNext));break}default:this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,destinationOrNext,error,complete)}}return __extends(Subscriber,_super),Subscriber.prototype[rxSubscriber_1.$$rxSubscriber]=function(){return this},Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber},Subscriber.prototype.next=function(value){this.isStopped||this._next(value)},Subscriber.prototype.error=function(err){
this.isStopped||(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){this.destination.error(err),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber}(Subscription_1.Subscription);exports.Subscriber=Subscriber;var SafeSubscriber=function(_super){function SafeSubscriber(_parent,observerOrNext,error,complete){_super.call(this),this._parent=_parent;var next,context=this;isFunction_1.isFunction(observerOrNext)?next=observerOrNext:observerOrNext&&(context=observerOrNext,next=observerOrNext.next,error=observerOrNext.error,complete=observerOrNext.complete,isFunction_1.isFunction(context.unsubscribe)&&this.add(context.unsubscribe.bind(context)),context.unsubscribe=this.unsubscribe.bind(this)),this._context=context,this._next=next,this._error=error,this._complete=complete}return __extends(SafeSubscriber,_super),SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parent=this._parent;_parent.syncErrorThrowable?this.__tryOrSetError(_parent,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}},SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parent=this._parent;if(this._error)_parent.syncErrorThrowable?(this.__tryOrSetError(_parent,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else{if(!_parent.syncErrorThrowable)throw this.unsubscribe(),err;_parent.syncErrorValue=err,_parent.syncErrorThrown=!0,this.unsubscribe()}}},SafeSubscriber.prototype.complete=function(){if(!this.isStopped){var _parent=this._parent;this._complete?_parent.syncErrorThrowable?(this.__tryOrSetError(_parent,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value)}catch(err){throw this.unsubscribe(),err}},SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){try{fn.call(this._context,value)}catch(err){return parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0}return!1},SafeSubscriber.prototype._unsubscribe=function(){var _parent=this._parent;this._context=null,this._parent=null,_parent.unsubscribe()},SafeSubscriber}(Subscriber)},{"./Observer":402,"./Subscription":410,"./symbol/rxSubscriber":705,"./util/isFunction":725}],410:[function(require,module,exports){"use strict";var isArray_1=require("./util/isArray"),isObject_1=require("./util/isObject"),isFunction_1=require("./util/isFunction"),tryCatch_1=require("./util/tryCatch"),errorObject_1=require("./util/errorObject"),UnsubscriptionError_1=require("./util/UnsubscriptionError"),Subscription=function(){function Subscription(unsubscribe){this.closed=!1,unsubscribe&&(this._unsubscribe=unsubscribe)}return Subscription.prototype.unsubscribe=function(){var errors,hasErrors=!1;if(!this.closed){this.closed=!0;var _a=this,_unsubscribe=_a._unsubscribe,_subscriptions=_a._subscriptions;if(this._subscriptions=null,isFunction_1.isFunction(_unsubscribe)){var trial=tryCatch_1.tryCatch(_unsubscribe).call(this);trial===errorObject_1.errorObject&&(hasErrors=!0,(errors=errors||[]).push(errorObject_1.errorObject.e))}if(isArray_1.isArray(_subscriptions))for(var index=-1,len=_subscriptions.length;++index<len;){var sub=_subscriptions[index];if(isObject_1.isObject(sub)){var trial=tryCatch_1.tryCatch(sub.unsubscribe).call(sub);if(trial===errorObject_1.errorObject){hasErrors=!0,errors=errors||[];var err=errorObject_1.errorObject.e;err instanceof UnsubscriptionError_1.UnsubscriptionError?errors=errors.concat(err.errors):errors.push(err)}}}if(hasErrors)throw new UnsubscriptionError_1.UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){if(!teardown||teardown===Subscription.EMPTY)return Subscription.EMPTY;if(teardown===this)return this;var sub=teardown;switch(typeof teardown){case"function":sub=new Subscription(teardown);case"object":if(sub.closed||"function"!=typeof sub.unsubscribe)break;this.closed?sub.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(sub);break;default:throw new Error("unrecognized teardown "+teardown+" added to Subscription.")}return sub},Subscription.prototype.remove=function(subscription){if(null!=subscription&&subscription!==this&&subscription!==Subscription.EMPTY){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);subscriptionIndex!==-1&&subscriptions.splice(subscriptionIndex,1)}}},Subscription.EMPTY=function(empty){return empty.closed=!0,empty}(new Subscription),Subscription}();exports.Subscription=Subscription},{"./util/UnsubscriptionError":719,"./util/errorObject":722,"./util/isArray":723,"./util/isFunction":725,"./util/isObject":727,"./util/tryCatch":735}],411:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),bindCallback_1=require("../../observable/bindCallback");Observable_1.Observable.bindCallback=bindCallback_1.bindCallback},{"../../Observable":401,"../../observable/bindCallback":563}],412:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),bindNodeCallback_1=require("../../observable/bindNodeCallback");Observable_1.Observable.bindNodeCallback=bindNodeCallback_1.bindNodeCallback},{"../../Observable":401,"../../observable/bindNodeCallback":564}],413:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),combineLatest_1=require("../../observable/combineLatest");Observable_1.Observable.combineLatest=combineLatest_1.combineLatest},{"../../Observable":401,"../../observable/combineLatest":565}],414:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),concat_1=require("../../observable/concat");Observable_1.Observable.concat=concat_1.concat},{"../../Observable":401,"../../observable/concat":566}],415:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),defer_1=require("../../observable/defer");Observable_1.Observable.defer=defer_1.defer},{"../../Observable":401,"../../observable/defer":567}],416:[function(require,module,exports){"use strict";var Observable_1=require("../../../Observable"),ajax_1=require("../../../observable/dom/ajax");Observable_1.Observable.ajax=ajax_1.ajax},{"../../../Observable":401,"../../../observable/dom/ajax":570}],417:[function(require,module,exports){"use strict";var Observable_1=require("../../../Observable"),webSocket_1=require("../../../observable/dom/webSocket");Observable_1.Observable.webSocket=webSocket_1.webSocket},{"../../../Observable":401,"../../../observable/dom/webSocket":571}],418:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),empty_1=require("../../observable/empty");Observable_1.Observable.empty=empty_1.empty},{"../../Observable":401,"../../observable/empty":572}],419:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),forkJoin_1=require("../../observable/forkJoin");Observable_1.Observable.forkJoin=forkJoin_1.forkJoin},{"../../Observable":401,"../../observable/forkJoin":573}],420:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),from_1=require("../../observable/from");Observable_1.Observable.from=from_1.from},{"../../Observable":401,"../../observable/from":574}],421:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),fromEvent_1=require("../../observable/fromEvent");Observable_1.Observable.fromEvent=fromEvent_1.fromEvent},{"../../Observable":401,"../../observable/fromEvent":575}],422:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),fromEventPattern_1=require("../../observable/fromEventPattern");Observable_1.Observable.fromEventPattern=fromEventPattern_1.fromEventPattern},{"../../Observable":401,"../../observable/fromEventPattern":576}],423:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),fromPromise_1=require("../../observable/fromPromise");Observable_1.Observable.fromPromise=fromPromise_1.fromPromise},{"../../Observable":401,"../../observable/fromPromise":577}],424:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),GenerateObservable_1=require("../../observable/GenerateObservable");Observable_1.Observable.generate=GenerateObservable_1.GenerateObservable.create},{"../../Observable":401,"../../observable/GenerateObservable":550}],425:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),if_1=require("../../observable/if");Observable_1.Observable.if=if_1._if},{"../../Observable":401,"../../observable/if":578}],426:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),interval_1=require("../../observable/interval");Observable_1.Observable.interval=interval_1.interval},{"../../Observable":401,"../../observable/interval":579}],427:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),merge_1=require("../../observable/merge");Observable_1.Observable.merge=merge_1.merge},{"../../Observable":401,"../../observable/merge":580}],428:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),never_1=require("../../observable/never");Observable_1.Observable.never=never_1.never},{"../../Observable":401,"../../observable/never":581}],429:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),of_1=require("../../observable/of");Observable_1.Observable.of=of_1.of},{"../../Observable":401,"../../observable/of":582}],430:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),onErrorResumeNext_1=require("../../operator/onErrorResumeNext");Observable_1.Observable.onErrorResumeNext=onErrorResumeNext_1.onErrorResumeNextStatic},{"../../Observable":401,"../../operator/onErrorResumeNext":643}],431:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),pairs_1=require("../../observable/pairs");Observable_1.Observable.pairs=pairs_1.pairs},{"../../Observable":401,"../../observable/pairs":583}],432:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),race_1=require("../../operator/race");Observable_1.Observable.race=race_1.raceStatic},{"../../Observable":401,"../../operator/race":651}],433:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),range_1=require("../../observable/range");Observable_1.Observable.range=range_1.range},{"../../Observable":401,"../../observable/range":584}],434:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),throw_1=require("../../observable/throw");Observable_1.Observable.throw=throw_1._throw},{"../../Observable":401,"../../observable/throw":585}],435:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),timer_1=require("../../observable/timer");Observable_1.Observable.timer=timer_1.timer},{"../../Observable":401,"../../observable/timer":586}],436:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),using_1=require("../../observable/using");Observable_1.Observable.using=using_1.using},{"../../Observable":401,"../../observable/using":587}],437:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),zip_1=require("../../observable/zip");Observable_1.Observable.zip=zip_1.zip},{"../../Observable":401,"../../observable/zip":588}],438:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),audit_1=require("../../operator/audit");Observable_1.Observable.prototype.audit=audit_1.audit},{"../../Observable":401,"../../operator/audit":589}],439:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),auditTime_1=require("../../operator/auditTime");Observable_1.Observable.prototype.auditTime=auditTime_1.auditTime},{"../../Observable":401,"../../operator/auditTime":590}],440:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),buffer_1=require("../../operator/buffer");Observable_1.Observable.prototype.buffer=buffer_1.buffer},{"../../Observable":401,"../../operator/buffer":591}],441:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),bufferCount_1=require("../../operator/bufferCount");Observable_1.Observable.prototype.bufferCount=bufferCount_1.bufferCount},{"../../Observable":401,"../../operator/bufferCount":592}],442:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),bufferTime_1=require("../../operator/bufferTime");Observable_1.Observable.prototype.bufferTime=bufferTime_1.bufferTime},{"../../Observable":401,"../../operator/bufferTime":593}],443:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),bufferToggle_1=require("../../operator/bufferToggle");Observable_1.Observable.prototype.bufferToggle=bufferToggle_1.bufferToggle},{"../../Observable":401,"../../operator/bufferToggle":594}],444:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),bufferWhen_1=require("../../operator/bufferWhen");Observable_1.Observable.prototype.bufferWhen=bufferWhen_1.bufferWhen},{"../../Observable":401,"../../operator/bufferWhen":595}],445:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),cache_1=require("../../operator/cache");Observable_1.Observable.prototype.cache=cache_1.cache},{"../../Observable":401,"../../operator/cache":596}],446:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),catch_1=require("../../operator/catch");Observable_1.Observable.prototype.catch=catch_1._catch},{"../../Observable":401,"../../operator/catch":597}],447:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),combineAll_1=require("../../operator/combineAll");Observable_1.Observable.prototype.combineAll=combineAll_1.combineAll},{"../../Observable":401,"../../operator/combineAll":598}],448:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),combineLatest_1=require("../../operator/combineLatest");Observable_1.Observable.prototype.combineLatest=combineLatest_1.combineLatest},{"../../Observable":401,"../../operator/combineLatest":599}],449:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),concat_1=require("../../operator/concat");Observable_1.Observable.prototype.concat=concat_1.concat},{"../../Observable":401,"../../operator/concat":600}],450:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),concatAll_1=require("../../operator/concatAll");Observable_1.Observable.prototype.concatAll=concatAll_1.concatAll},{"../../Observable":401,"../../operator/concatAll":601}],451:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),concatMap_1=require("../../operator/concatMap");Observable_1.Observable.prototype.concatMap=concatMap_1.concatMap},{"../../Observable":401,"../../operator/concatMap":602}],452:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),concatMapTo_1=require("../../operator/concatMapTo");Observable_1.Observable.prototype.concatMapTo=concatMapTo_1.concatMapTo},{"../../Observable":401,"../../operator/concatMapTo":603}],453:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),count_1=require("../../operator/count");Observable_1.Observable.prototype.count=count_1.count},{"../../Observable":401,"../../operator/count":604}],454:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),debounce_1=require("../../operator/debounce");Observable_1.Observable.prototype.debounce=debounce_1.debounce},{"../../Observable":401,"../../operator/debounce":605}],455:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),debounceTime_1=require("../../operator/debounceTime");Observable_1.Observable.prototype.debounceTime=debounceTime_1.debounceTime},{"../../Observable":401,"../../operator/debounceTime":606}],456:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),defaultIfEmpty_1=require("../../operator/defaultIfEmpty");Observable_1.Observable.prototype.defaultIfEmpty=defaultIfEmpty_1.defaultIfEmpty},{"../../Observable":401,"../../operator/defaultIfEmpty":607}],457:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),delay_1=require("../../operator/delay");Observable_1.Observable.prototype.delay=delay_1.delay},{"../../Observable":401,"../../operator/delay":608}],458:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),delayWhen_1=require("../../operator/delayWhen");Observable_1.Observable.prototype.delayWhen=delayWhen_1.delayWhen},{"../../Observable":401,"../../operator/delayWhen":609}],459:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),dematerialize_1=require("../../operator/dematerialize");Observable_1.Observable.prototype.dematerialize=dematerialize_1.dematerialize},{"../../Observable":401,"../../operator/dematerialize":610}],460:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),distinct_1=require("../../operator/distinct");Observable_1.Observable.prototype.distinct=distinct_1.distinct},{"../../Observable":401,"../../operator/distinct":611}],461:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),distinctKey_1=require("../../operator/distinctKey");Observable_1.Observable.prototype.distinctKey=distinctKey_1.distinctKey},{"../../Observable":401,"../../operator/distinctKey":612}],462:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),distinctUntilChanged_1=require("../../operator/distinctUntilChanged");Observable_1.Observable.prototype.distinctUntilChanged=distinctUntilChanged_1.distinctUntilChanged},{"../../Observable":401,"../../operator/distinctUntilChanged":613}],463:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),distinctUntilKeyChanged_1=require("../../operator/distinctUntilKeyChanged");Observable_1.Observable.prototype.distinctUntilKeyChanged=distinctUntilKeyChanged_1.distinctUntilKeyChanged},{"../../Observable":401,"../../operator/distinctUntilKeyChanged":614}],464:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),do_1=require("../../operator/do");Observable_1.Observable.prototype.do=do_1._do},{"../../Observable":401,"../../operator/do":615}],465:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),elementAt_1=require("../../operator/elementAt");Observable_1.Observable.prototype.elementAt=elementAt_1.elementAt},{"../../Observable":401,"../../operator/elementAt":616}],466:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),every_1=require("../../operator/every");Observable_1.Observable.prototype.every=every_1.every},{"../../Observable":401,"../../operator/every":617}],467:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),exhaust_1=require("../../operator/exhaust");Observable_1.Observable.prototype.exhaust=exhaust_1.exhaust},{"../../Observable":401,"../../operator/exhaust":618}],468:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),exhaustMap_1=require("../../operator/exhaustMap");Observable_1.Observable.prototype.exhaustMap=exhaustMap_1.exhaustMap},{"../../Observable":401,"../../operator/exhaustMap":619}],469:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),expand_1=require("../../operator/expand");Observable_1.Observable.prototype.expand=expand_1.expand},{"../../Observable":401,"../../operator/expand":620}],470:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),filter_1=require("../../operator/filter");Observable_1.Observable.prototype.filter=filter_1.filter},{"../../Observable":401,"../../operator/filter":621}],471:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),finally_1=require("../../operator/finally");Observable_1.Observable.prototype.finally=finally_1._finally},{"../../Observable":401,"../../operator/finally":622}],472:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),find_1=require("../../operator/find");Observable_1.Observable.prototype.find=find_1.find},{"../../Observable":401,"../../operator/find":623}],473:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),findIndex_1=require("../../operator/findIndex");Observable_1.Observable.prototype.findIndex=findIndex_1.findIndex},{"../../Observable":401,"../../operator/findIndex":624}],474:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),first_1=require("../../operator/first");Observable_1.Observable.prototype.first=first_1.first},{"../../Observable":401,"../../operator/first":625}],475:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),groupBy_1=require("../../operator/groupBy");Observable_1.Observable.prototype.groupBy=groupBy_1.groupBy},{"../../Observable":401,"../../operator/groupBy":626}],476:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),ignoreElements_1=require("../../operator/ignoreElements");Observable_1.Observable.prototype.ignoreElements=ignoreElements_1.ignoreElements},{"../../Observable":401,"../../operator/ignoreElements":627}],477:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),isEmpty_1=require("../../operator/isEmpty");Observable_1.Observable.prototype.isEmpty=isEmpty_1.isEmpty},{"../../Observable":401,"../../operator/isEmpty":628}],478:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),last_1=require("../../operator/last");Observable_1.Observable.prototype.last=last_1.last},{"../../Observable":401,"../../operator/last":629}],479:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),let_1=require("../../operator/let");Observable_1.Observable.prototype.let=let_1.letProto,Observable_1.Observable.prototype.letBind=let_1.letProto},{"../../Observable":401,"../../operator/let":630}],480:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),map_1=require("../../operator/map");Observable_1.Observable.prototype.map=map_1.map},{"../../Observable":401,"../../operator/map":631}],481:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),mapTo_1=require("../../operator/mapTo");Observable_1.Observable.prototype.mapTo=mapTo_1.mapTo},{"../../Observable":401,"../../operator/mapTo":632}],482:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),materialize_1=require("../../operator/materialize");Observable_1.Observable.prototype.materialize=materialize_1.materialize},{"../../Observable":401,"../../operator/materialize":633}],483:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),max_1=require("../../operator/max");Observable_1.Observable.prototype.max=max_1.max},{"../../Observable":401,"../../operator/max":634}],484:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),merge_1=require("../../operator/merge");Observable_1.Observable.prototype.merge=merge_1.merge},{"../../Observable":401,"../../operator/merge":635}],485:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),mergeAll_1=require("../../operator/mergeAll");Observable_1.Observable.prototype.mergeAll=mergeAll_1.mergeAll},{"../../Observable":401,"../../operator/mergeAll":636}],486:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),mergeMap_1=require("../../operator/mergeMap");Observable_1.Observable.prototype.mergeMap=mergeMap_1.mergeMap,Observable_1.Observable.prototype.flatMap=mergeMap_1.mergeMap},{"../../Observable":401,"../../operator/mergeMap":637}],487:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),mergeMapTo_1=require("../../operator/mergeMapTo");Observable_1.Observable.prototype.flatMapTo=mergeMapTo_1.mergeMapTo,Observable_1.Observable.prototype.mergeMapTo=mergeMapTo_1.mergeMapTo},{"../../Observable":401,"../../operator/mergeMapTo":638}],488:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),mergeScan_1=require("../../operator/mergeScan");Observable_1.Observable.prototype.mergeScan=mergeScan_1.mergeScan},{"../../Observable":401,"../../operator/mergeScan":639}],489:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),min_1=require("../../operator/min");Observable_1.Observable.prototype.min=min_1.min},{"../../Observable":401,"../../operator/min":640}],490:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),multicast_1=require("../../operator/multicast");Observable_1.Observable.prototype.multicast=multicast_1.multicast},{"../../Observable":401,"../../operator/multicast":641}],491:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),observeOn_1=require("../../operator/observeOn");Observable_1.Observable.prototype.observeOn=observeOn_1.observeOn},{"../../Observable":401,"../../operator/observeOn":642}],492:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),onErrorResumeNext_1=require("../../operator/onErrorResumeNext");Observable_1.Observable.prototype.onErrorResumeNext=onErrorResumeNext_1.onErrorResumeNext},{"../../Observable":401,"../../operator/onErrorResumeNext":643}],493:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),pairwise_1=require("../../operator/pairwise");Observable_1.Observable.prototype.pairwise=pairwise_1.pairwise},{"../../Observable":401,"../../operator/pairwise":644}],494:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),partition_1=require("../../operator/partition");Observable_1.Observable.prototype.partition=partition_1.partition},{"../../Observable":401,"../../operator/partition":645}],495:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),pluck_1=require("../../operator/pluck");Observable_1.Observable.prototype.pluck=pluck_1.pluck},{"../../Observable":401,"../../operator/pluck":646}],496:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),publish_1=require("../../operator/publish");Observable_1.Observable.prototype.publish=publish_1.publish},{"../../Observable":401,"../../operator/publish":647}],497:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),publishBehavior_1=require("../../operator/publishBehavior");Observable_1.Observable.prototype.publishBehavior=publishBehavior_1.publishBehavior},{"../../Observable":401,"../../operator/publishBehavior":648}],498:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),publishLast_1=require("../../operator/publishLast");Observable_1.Observable.prototype.publishLast=publishLast_1.publishLast},{"../../Observable":401,"../../operator/publishLast":649}],499:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),publishReplay_1=require("../../operator/publishReplay");Observable_1.Observable.prototype.publishReplay=publishReplay_1.publishReplay},{"../../Observable":401,"../../operator/publishReplay":650}],500:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),race_1=require("../../operator/race");Observable_1.Observable.prototype.race=race_1.race},{"../../Observable":401,"../../operator/race":651}],501:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),reduce_1=require("../../operator/reduce");Observable_1.Observable.prototype.reduce=reduce_1.reduce},{"../../Observable":401,"../../operator/reduce":652}],502:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),repeat_1=require("../../operator/repeat");Observable_1.Observable.prototype.repeat=repeat_1.repeat},{"../../Observable":401,"../../operator/repeat":653}],503:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),retry_1=require("../../operator/retry");Observable_1.Observable.prototype.retry=retry_1.retry},{"../../Observable":401,"../../operator/retry":654}],504:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),retryWhen_1=require("../../operator/retryWhen");Observable_1.Observable.prototype.retryWhen=retryWhen_1.retryWhen},{"../../Observable":401,"../../operator/retryWhen":655}],505:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),sample_1=require("../../operator/sample");Observable_1.Observable.prototype.sample=sample_1.sample},{"../../Observable":401,"../../operator/sample":656}],506:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),sampleTime_1=require("../../operator/sampleTime");Observable_1.Observable.prototype.sampleTime=sampleTime_1.sampleTime},{"../../Observable":401,"../../operator/sampleTime":657}],507:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),scan_1=require("../../operator/scan");Observable_1.Observable.prototype.scan=scan_1.scan},{"../../Observable":401,"../../operator/scan":658}],508:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),share_1=require("../../operator/share");Observable_1.Observable.prototype.share=share_1.share},{"../../Observable":401,"../../operator/share":659}],509:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),single_1=require("../../operator/single");Observable_1.Observable.prototype.single=single_1.single},{"../../Observable":401,"../../operator/single":660}],510:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),skip_1=require("../../operator/skip");Observable_1.Observable.prototype.skip=skip_1.skip},{"../../Observable":401,"../../operator/skip":661}],511:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),skipUntil_1=require("../../operator/skipUntil");Observable_1.Observable.prototype.skipUntil=skipUntil_1.skipUntil},{"../../Observable":401,"../../operator/skipUntil":662}],512:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),skipWhile_1=require("../../operator/skipWhile");Observable_1.Observable.prototype.skipWhile=skipWhile_1.skipWhile},{"../../Observable":401,"../../operator/skipWhile":663}],513:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),startWith_1=require("../../operator/startWith");
Observable_1.Observable.prototype.startWith=startWith_1.startWith},{"../../Observable":401,"../../operator/startWith":664}],514:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),subscribeOn_1=require("../../operator/subscribeOn");Observable_1.Observable.prototype.subscribeOn=subscribeOn_1.subscribeOn},{"../../Observable":401,"../../operator/subscribeOn":665}],515:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),switch_1=require("../../operator/switch");Observable_1.Observable.prototype.switch=switch_1._switch},{"../../Observable":401,"../../operator/switch":666}],516:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),switchMap_1=require("../../operator/switchMap");Observable_1.Observable.prototype.switchMap=switchMap_1.switchMap},{"../../Observable":401,"../../operator/switchMap":667}],517:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),switchMapTo_1=require("../../operator/switchMapTo");Observable_1.Observable.prototype.switchMapTo=switchMapTo_1.switchMapTo},{"../../Observable":401,"../../operator/switchMapTo":668}],518:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),take_1=require("../../operator/take");Observable_1.Observable.prototype.take=take_1.take},{"../../Observable":401,"../../operator/take":669}],519:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),takeLast_1=require("../../operator/takeLast");Observable_1.Observable.prototype.takeLast=takeLast_1.takeLast},{"../../Observable":401,"../../operator/takeLast":670}],520:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),takeUntil_1=require("../../operator/takeUntil");Observable_1.Observable.prototype.takeUntil=takeUntil_1.takeUntil},{"../../Observable":401,"../../operator/takeUntil":671}],521:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),takeWhile_1=require("../../operator/takeWhile");Observable_1.Observable.prototype.takeWhile=takeWhile_1.takeWhile},{"../../Observable":401,"../../operator/takeWhile":672}],522:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),throttle_1=require("../../operator/throttle");Observable_1.Observable.prototype.throttle=throttle_1.throttle},{"../../Observable":401,"../../operator/throttle":673}],523:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),throttleTime_1=require("../../operator/throttleTime");Observable_1.Observable.prototype.throttleTime=throttleTime_1.throttleTime},{"../../Observable":401,"../../operator/throttleTime":674}],524:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),timeInterval_1=require("../../operator/timeInterval");Observable_1.Observable.prototype.timeInterval=timeInterval_1.timeInterval},{"../../Observable":401,"../../operator/timeInterval":675}],525:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),timeout_1=require("../../operator/timeout");Observable_1.Observable.prototype.timeout=timeout_1.timeout},{"../../Observable":401,"../../operator/timeout":676}],526:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),timeoutWith_1=require("../../operator/timeoutWith");Observable_1.Observable.prototype.timeoutWith=timeoutWith_1.timeoutWith},{"../../Observable":401,"../../operator/timeoutWith":677}],527:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),timestamp_1=require("../../operator/timestamp");Observable_1.Observable.prototype.timestamp=timestamp_1.timestamp},{"../../Observable":401,"../../operator/timestamp":678}],528:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),toArray_1=require("../../operator/toArray");Observable_1.Observable.prototype.toArray=toArray_1.toArray},{"../../Observable":401,"../../operator/toArray":679}],529:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),toPromise_1=require("../../operator/toPromise");Observable_1.Observable.prototype.toPromise=toPromise_1.toPromise},{"../../Observable":401,"../../operator/toPromise":680}],530:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),window_1=require("../../operator/window");Observable_1.Observable.prototype.window=window_1.window},{"../../Observable":401,"../../operator/window":681}],531:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),windowCount_1=require("../../operator/windowCount");Observable_1.Observable.prototype.windowCount=windowCount_1.windowCount},{"../../Observable":401,"../../operator/windowCount":682}],532:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),windowTime_1=require("../../operator/windowTime");Observable_1.Observable.prototype.windowTime=windowTime_1.windowTime},{"../../Observable":401,"../../operator/windowTime":683}],533:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),windowToggle_1=require("../../operator/windowToggle");Observable_1.Observable.prototype.windowToggle=windowToggle_1.windowToggle},{"../../Observable":401,"../../operator/windowToggle":684}],534:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),windowWhen_1=require("../../operator/windowWhen");Observable_1.Observable.prototype.windowWhen=windowWhen_1.windowWhen},{"../../Observable":401,"../../operator/windowWhen":685}],535:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),withLatestFrom_1=require("../../operator/withLatestFrom");Observable_1.Observable.prototype.withLatestFrom=withLatestFrom_1.withLatestFrom},{"../../Observable":401,"../../operator/withLatestFrom":686}],536:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),zip_1=require("../../operator/zip");Observable_1.Observable.prototype.zip=zip_1.zipProto},{"../../Observable":401,"../../operator/zip":687}],537:[function(require,module,exports){"use strict";var Observable_1=require("../../Observable"),zipAll_1=require("../../operator/zipAll");Observable_1.Observable.prototype.zipAll=zipAll_1.zipAll},{"../../Observable":401,"../../operator/zipAll":688}],538:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),ScalarObservable_1=require("./ScalarObservable"),EmptyObservable_1=require("./EmptyObservable"),ArrayLikeObservable=function(_super){function ArrayLikeObservable(arrayLike,scheduler){_super.call(this),this.arrayLike=arrayLike,this.scheduler=scheduler,scheduler||1!==arrayLike.length||(this._isScalar=!0,this.value=arrayLike[0])}return __extends(ArrayLikeObservable,_super),ArrayLikeObservable.create=function(arrayLike,scheduler){var length=arrayLike.length;return 0===length?new EmptyObservable_1.EmptyObservable:1===length?new ScalarObservable_1.ScalarObservable(arrayLike[0],scheduler):new ArrayLikeObservable(arrayLike,scheduler)},ArrayLikeObservable.dispatch=function(state){var arrayLike=state.arrayLike,index=state.index,length=state.length,subscriber=state.subscriber;if(!subscriber.closed){if(index>=length)return void subscriber.complete();subscriber.next(arrayLike[index]),state.index=index+1,this.schedule(state)}},ArrayLikeObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,arrayLike=_a.arrayLike,scheduler=_a.scheduler,length=arrayLike.length;if(scheduler)return scheduler.schedule(ArrayLikeObservable.dispatch,0,{arrayLike:arrayLike,index:index,length:length,subscriber:subscriber});for(var i=0;i<length&&!subscriber.closed;i++)subscriber.next(arrayLike[i]);subscriber.complete()},ArrayLikeObservable}(Observable_1.Observable);exports.ArrayLikeObservable=ArrayLikeObservable},{"../Observable":401,"./EmptyObservable":544,"./ScalarObservable":559}],539:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),ScalarObservable_1=require("./ScalarObservable"),EmptyObservable_1=require("./EmptyObservable"),isScheduler_1=require("../util/isScheduler"),ArrayObservable=function(_super){function ArrayObservable(array,scheduler){_super.call(this),this.array=array,this.scheduler=scheduler,scheduler||1!==array.length||(this._isScalar=!0,this.value=array[0])}return __extends(ArrayObservable,_super),ArrayObservable.create=function(array,scheduler){return new ArrayObservable(array,scheduler)},ArrayObservable.of=function(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i-0]=arguments[_i];var scheduler=array[array.length-1];isScheduler_1.isScheduler(scheduler)?array.pop():scheduler=null;var len=array.length;return len>1?new ArrayObservable(array,scheduler):1===len?new ScalarObservable_1.ScalarObservable(array[0],scheduler):new EmptyObservable_1.EmptyObservable(scheduler)},ArrayObservable.dispatch=function(state){var array=state.array,index=state.index,count=state.count,subscriber=state.subscriber;return index>=count?void subscriber.complete():(subscriber.next(array[index]),void(subscriber.closed||(state.index=index+1,this.schedule(state))))},ArrayObservable.prototype._subscribe=function(subscriber){var index=0,array=this.array,count=array.length,scheduler=this.scheduler;if(scheduler)return scheduler.schedule(ArrayObservable.dispatch,0,{array:array,index:index,count:count,subscriber:subscriber});for(var i=0;i<count&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.complete()},ArrayObservable}(Observable_1.Observable);exports.ArrayObservable=ArrayObservable},{"../Observable":401,"../util/isScheduler":729,"./EmptyObservable":544,"./ScalarObservable":559}],540:[function(require,module,exports){"use strict";function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),AsyncSubject_1=require("../AsyncSubject"),BoundCallbackObservable=function(_super){function BoundCallbackObservable(callbackFunc,selector,args,scheduler){_super.call(this),this.callbackFunc=callbackFunc,this.selector=selector,this.args=args,this.scheduler=scheduler}return __extends(BoundCallbackObservable,_super),BoundCallbackObservable.create=function(func,selector,scheduler){return void 0===selector&&(selector=void 0),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];return new BoundCallbackObservable(func,selector,args,scheduler)}},BoundCallbackObservable.prototype._subscribe=function(subscriber){var callbackFunc=this.callbackFunc,args=this.args,scheduler=this.scheduler,subject=this.subject;if(scheduler)return scheduler.schedule(BoundCallbackObservable.dispatch,0,{source:this,subscriber:subscriber});if(!subject){subject=this.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject;if(selector){var result_1=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_1===errorObject_1.errorObject?subject.error(errorObject_1.errorObject.e):(subject.next(result_1),subject.complete())}else subject.next(1===innerArgs.length?innerArgs[0]:innerArgs),subject.complete()};handler.source=this;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}return subject.subscribe(subscriber)},BoundCallbackObservable.dispatch=function(state){var self=this,source=state.source,subscriber=state.subscriber,callbackFunc=source.callbackFunc,args=source.args,scheduler=source.scheduler,subject=source.subject;if(!subject){subject=source.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject;if(selector){var result_2=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_2===errorObject_1.errorObject?self.add(scheduler.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:subject})):self.add(scheduler.schedule(dispatchNext,0,{value:result_2,subject:subject}))}else{var value=1===innerArgs.length?innerArgs[0]:innerArgs;self.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}};handler.source=source;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}self.add(subject.subscribe(subscriber))},BoundCallbackObservable}(Observable_1.Observable);exports.BoundCallbackObservable=BoundCallbackObservable},{"../AsyncSubject":397,"../Observable":401,"../util/errorObject":722,"../util/tryCatch":735}],541:[function(require,module,exports){"use strict";function dispatch(state){var self=this,source=state.source,subscriber=state.subscriber,_a=source,callbackFunc=_a.callbackFunc,args=_a.args,scheduler=_a.scheduler,subject=source.subject;if(!subject){subject=source.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject,err=innerArgs.shift();if(err)subject.error(err);else if(selector){var result_2=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_2===errorObject_1.errorObject?self.add(scheduler.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:subject})):self.add(scheduler.schedule(dispatchNext,0,{value:result_2,subject:subject}))}else{var value=1===innerArgs.length?innerArgs[0]:innerArgs;self.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}};handler.source=source;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}self.add(subject.subscribe(subscriber))}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),AsyncSubject_1=require("../AsyncSubject"),BoundNodeCallbackObservable=function(_super){function BoundNodeCallbackObservable(callbackFunc,selector,args,scheduler){_super.call(this),this.callbackFunc=callbackFunc,this.selector=selector,this.args=args,this.scheduler=scheduler}return __extends(BoundNodeCallbackObservable,_super),BoundNodeCallbackObservable.create=function(func,selector,scheduler){return void 0===selector&&(selector=void 0),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];return new BoundNodeCallbackObservable(func,selector,args,scheduler)}},BoundNodeCallbackObservable.prototype._subscribe=function(subscriber){var callbackFunc=this.callbackFunc,args=this.args,scheduler=this.scheduler,subject=this.subject;if(scheduler)return scheduler.schedule(dispatch,0,{source:this,subscriber:subscriber});if(!subject){subject=this.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject,err=innerArgs.shift();if(err)subject.error(err);else if(selector){var result_1=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_1===errorObject_1.errorObject?subject.error(errorObject_1.errorObject.e):(subject.next(result_1),subject.complete())}else subject.next(1===innerArgs.length?innerArgs[0]:innerArgs),subject.complete()};handler.source=this;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}return subject.subscribe(subscriber)},BoundNodeCallbackObservable}(Observable_1.Observable);exports.BoundNodeCallbackObservable=BoundNodeCallbackObservable},{"../AsyncSubject":397,"../Observable":401,"../util/errorObject":722,"../util/tryCatch":735}],542:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../Subject"),Observable_1=require("../Observable"),Subscriber_1=require("../Subscriber"),Subscription_1=require("../Subscription"),ConnectableObservable=function(_super){function ConnectableObservable(source,subjectFactory){_super.call(this),this.source=source,this.subjectFactory=subjectFactory,this._refCount=0}return __extends(ConnectableObservable,_super),ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber)},ConnectableObservable.prototype.getSubject=function(){var subject=this._subject;return subject&&!subject.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var connection=this._connection;return connection||(connection=this._connection=new Subscription_1.Subscription,connection.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),connection.closed?(this._connection=null,connection=Subscription_1.Subscription.EMPTY):this._connection=connection),connection},ConnectableObservable.prototype.refCount=function(){return this.lift(new RefCountOperator(this))},ConnectableObservable}(Observable_1.Observable);exports.ConnectableObservable=ConnectableObservable;var ConnectableSubscriber=function(_super){function ConnectableSubscriber(destination,connectable){_super.call(this,destination),this.connectable=connectable}return __extends(ConnectableSubscriber,_super),ConnectableSubscriber.prototype._error=function(err){this._unsubscribe(),_super.prototype._error.call(this,err)},ConnectableSubscriber.prototype._complete=function(){this._unsubscribe(),_super.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(connectable){this.connectable=null;var connection=connectable._connection;connectable._refCount=0,connectable._subject=null,connectable._connection=null,connection&&connection.unsubscribe()}},ConnectableSubscriber}(Subject_1.SubjectSubscriber),RefCountOperator=function(){function RefCountOperator(connectable){this.connectable=connectable}return RefCountOperator.prototype.call=function(subscriber,source){var connectable=this.connectable;connectable._refCount++;var refCounter=new RefCountSubscriber(subscriber,connectable),subscription=source._subscribe(refCounter);return refCounter.closed||(refCounter.connection=connectable.connect()),subscription},RefCountOperator}(),RefCountSubscriber=function(_super){function RefCountSubscriber(destination,connectable){_super.call(this,destination),this.connectable=connectable}return __extends(RefCountSubscriber,_super),RefCountSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(!connectable)return void(this.connection=null);this.connectable=null;var refCount=connectable._refCount;if(refCount<=0)return void(this.connection=null);if(connectable._refCount=refCount-1,refCount>1)return void(this.connection=null);var connection=this.connection,sharedConnection=connectable._connection;this.connection=null,!sharedConnection||connection&&sharedConnection!==connection||sharedConnection.unsubscribe()},RefCountSubscriber}(Subscriber_1.Subscriber)},{"../Observable":401,"../Subject":407,"../Subscriber":409,"../Subscription":410}],543:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber"),DeferObservable=function(_super){function DeferObservable(observableFactory){_super.call(this),this.observableFactory=observableFactory}return __extends(DeferObservable,_super),DeferObservable.create=function(observableFactory){return new DeferObservable(observableFactory)},DeferObservable.prototype._subscribe=function(subscriber){return new DeferSubscriber(subscriber,this.observableFactory)},DeferObservable}(Observable_1.Observable);exports.DeferObservable=DeferObservable;var DeferSubscriber=function(_super){function DeferSubscriber(destination,factory){_super.call(this,destination),this.factory=factory,this.tryDefer()}return __extends(DeferSubscriber,_super),DeferSubscriber.prototype.tryDefer=function(){try{this._callFactory()}catch(err){this._error(err)}},DeferSubscriber.prototype._callFactory=function(){var result=this.factory();result&&this.add(subscribeToResult_1.subscribeToResult(this,result))},DeferSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../Observable":401,"../OuterSubscriber":403,"../util/subscribeToResult":733}],544:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),EmptyObservable=function(_super){function EmptyObservable(scheduler){_super.call(this),this.scheduler=scheduler}return __extends(EmptyObservable,_super),EmptyObservable.create=function(scheduler){return new EmptyObservable(scheduler)},EmptyObservable.dispatch=function(arg){var subscriber=arg.subscriber;subscriber.complete()},EmptyObservable.prototype._subscribe=function(subscriber){var scheduler=this.scheduler;return scheduler?scheduler.schedule(EmptyObservable.dispatch,0,{subscriber:subscriber}):void subscriber.complete()},EmptyObservable}(Observable_1.Observable);exports.EmptyObservable=EmptyObservable},{"../Observable":401}],545:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),ErrorObservable=function(_super){function ErrorObservable(error,scheduler){_super.call(this),this.error=error,this.scheduler=scheduler}return __extends(ErrorObservable,_super),ErrorObservable.create=function(error,scheduler){return new ErrorObservable(error,scheduler)},ErrorObservable.dispatch=function(arg){var error=arg.error,subscriber=arg.subscriber;subscriber.error(error)},ErrorObservable.prototype._subscribe=function(subscriber){var error=this.error,scheduler=this.scheduler;return scheduler?scheduler.schedule(ErrorObservable.dispatch,0,{error:error,subscriber:subscriber}):void subscriber.error(error)},ErrorObservable}(Observable_1.Observable);exports.ErrorObservable=ErrorObservable},{"../Observable":401}],546:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),EmptyObservable_1=require("./EmptyObservable"),isArray_1=require("../util/isArray"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber"),ForkJoinObservable=function(_super){function ForkJoinObservable(sources,resultSelector){_super.call(this),this.sources=sources,this.resultSelector=resultSelector}return __extends(ForkJoinObservable,_super),ForkJoinObservable.create=function(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i-0]=arguments[_i];if(null===sources||0===arguments.length)return new EmptyObservable_1.EmptyObservable;var resultSelector=null;return"function"==typeof sources[sources.length-1]&&(resultSelector=sources.pop()),1===sources.length&&isArray_1.isArray(sources[0])&&(sources=sources[0]),0===sources.length?new EmptyObservable_1.EmptyObservable:new ForkJoinObservable(sources,resultSelector)},ForkJoinObservable.prototype._subscribe=function(subscriber){return new ForkJoinSubscriber(subscriber,this.sources,this.resultSelector)},ForkJoinObservable}(Observable_1.Observable);exports.ForkJoinObservable=ForkJoinObservable;var ForkJoinSubscriber=function(_super){function ForkJoinSubscriber(destination,sources,resultSelector){_super.call(this,destination),this.sources=sources,this.resultSelector=resultSelector,this.completed=0,this.haveValues=0;var len=sources.length;this.total=len,this.values=new Array(len);for(var i=0;i<len;i++){var source=sources[i],innerSubscription=subscribeToResult_1.subscribeToResult(this,source,null,i);innerSubscription&&(innerSubscription.outerIndex=i,this.add(innerSubscription))}}return __extends(ForkJoinSubscriber,_super),ForkJoinSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue,innerSub._hasValue||(innerSub._hasValue=!0,this.haveValues++)},ForkJoinSubscriber.prototype.notifyComplete=function(innerSub){var destination=this.destination,_a=this,haveValues=_a.haveValues,resultSelector=_a.resultSelector,values=_a.values,len=values.length;if(!innerSub._hasValue)return void destination.complete();if(this.completed++,this.completed===len){if(haveValues===len){var value=resultSelector?resultSelector.apply(this,values):values;destination.next(value)}destination.complete()}},ForkJoinSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../Observable":401,"../OuterSubscriber":403,"../util/isArray":723,"../util/subscribeToResult":733,"./EmptyObservable":544}],547:[function(require,module,exports){"use strict";function isNodeStyleEventEmmitter(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.addListener&&"function"==typeof sourceObj.removeListener}function isJQueryStyleEventEmitter(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.on&&"function"==typeof sourceObj.off}function isNodeList(sourceObj){return!!sourceObj&&"[object NodeList]"===sourceObj.toString()}function isHTMLCollection(sourceObj){return!!sourceObj&&"[object HTMLCollection]"===sourceObj.toString()}function isEventTarget(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.addEventListener&&"function"==typeof sourceObj.removeEventListener}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),tryCatch_1=require("../util/tryCatch"),isFunction_1=require("../util/isFunction"),errorObject_1=require("../util/errorObject"),Subscription_1=require("../Subscription"),FromEventObservable=function(_super){function FromEventObservable(sourceObj,eventName,selector,options){_super.call(this),this.sourceObj=sourceObj,this.eventName=eventName,this.selector=selector,this.options=options}return __extends(FromEventObservable,_super),FromEventObservable.create=function(target,eventName,options,selector){return isFunction_1.isFunction(options)&&(selector=options,options=void 0),new FromEventObservable(target,eventName,selector,options)},FromEventObservable.setupSubscription=function(sourceObj,eventName,handler,subscriber,options){var unsubscribe;if(isNodeList(sourceObj)||isHTMLCollection(sourceObj))for(var i=0,len=sourceObj.length;i<len;i++)FromEventObservable.setupSubscription(sourceObj[i],eventName,handler,subscriber,options);else if(isEventTarget(sourceObj)){var source_1=sourceObj;sourceObj.addEventListener(eventName,handler,options),unsubscribe=function(){return source_1.removeEventListener(eventName,handler)}}else if(isJQueryStyleEventEmitter(sourceObj)){var source_2=sourceObj;sourceObj.on(eventName,handler),unsubscribe=function(){return source_2.off(eventName,handler)}}else if(isNodeStyleEventEmmitter(sourceObj)){var source_3=sourceObj;sourceObj.addListener(eventName,handler),unsubscribe=function(){return source_3.removeListener(eventName,handler)}}subscriber.add(new Subscription_1.Subscription(unsubscribe))},FromEventObservable.prototype._subscribe=function(subscriber){var sourceObj=this.sourceObj,eventName=this.eventName,options=this.options,selector=this.selector,handler=selector?function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var result=tryCatch_1.tryCatch(selector).apply(void 0,args);result===errorObject_1.errorObject?subscriber.error(errorObject_1.errorObject.e):subscriber.next(result)}:function(e){return subscriber.next(e)};FromEventObservable.setupSubscription(sourceObj,eventName,handler,subscriber,options)},FromEventObservable}(Observable_1.Observable);exports.FromEventObservable=FromEventObservable},{"../Observable":401,"../Subscription":410,"../util/errorObject":722,"../util/isFunction":725,"../util/tryCatch":735}],548:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),Subscription_1=require("../Subscription"),FromEventPatternObservable=function(_super){function FromEventPatternObservable(addHandler,removeHandler,selector){_super.call(this),this.addHandler=addHandler,this.removeHandler=removeHandler,this.selector=selector}return __extends(FromEventPatternObservable,_super),FromEventPatternObservable.create=function(addHandler,removeHandler,selector){return new FromEventPatternObservable(addHandler,removeHandler,selector)},FromEventPatternObservable.prototype._subscribe=function(subscriber){var _this=this,removeHandler=this.removeHandler,handler=this.selector?function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];_this._callSelector(subscriber,args)}:function(e){subscriber.next(e)};this._callAddHandler(handler,subscriber),subscriber.add(new Subscription_1.Subscription(function(){removeHandler(handler)}))},FromEventPatternObservable.prototype._callSelector=function(subscriber,args){try{var result=this.selector.apply(this,args);subscriber.next(result)}catch(e){subscriber.error(e)}},FromEventPatternObservable.prototype._callAddHandler=function(handler,errorSubscriber){try{this.addHandler(handler)}catch(e){errorSubscriber.error(e)}},FromEventPatternObservable}(Observable_1.Observable);exports.FromEventPatternObservable=FromEventPatternObservable},{"../Observable":401,"../Subscription":410}],549:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){
this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isArray_1=require("../util/isArray"),isPromise_1=require("../util/isPromise"),PromiseObservable_1=require("./PromiseObservable"),IteratorObservable_1=require("./IteratorObservable"),ArrayObservable_1=require("./ArrayObservable"),ArrayLikeObservable_1=require("./ArrayLikeObservable"),iterator_1=require("../symbol/iterator"),Observable_1=require("../Observable"),observeOn_1=require("../operator/observeOn"),observable_1=require("../symbol/observable"),isArrayLike=function(x){return x&&"number"==typeof x.length},FromObservable=function(_super){function FromObservable(ish,scheduler){_super.call(this,null),this.ish=ish,this.scheduler=scheduler}return __extends(FromObservable,_super),FromObservable.create=function(ish,scheduler){if(null!=ish){if("function"==typeof ish[observable_1.$$observable])return ish instanceof Observable_1.Observable&&!scheduler?ish:new FromObservable(ish,scheduler);if(isArray_1.isArray(ish))return new ArrayObservable_1.ArrayObservable(ish,scheduler);if(isPromise_1.isPromise(ish))return new PromiseObservable_1.PromiseObservable(ish,scheduler);if("function"==typeof ish[iterator_1.$$iterator]||"string"==typeof ish)return new IteratorObservable_1.IteratorObservable(ish,scheduler);if(isArrayLike(ish))return new ArrayLikeObservable_1.ArrayLikeObservable(ish,scheduler)}throw new TypeError((null!==ish&&typeof ish||ish)+" is not observable")},FromObservable.prototype._subscribe=function(subscriber){var ish=this.ish,scheduler=this.scheduler;return null==scheduler?ish[observable_1.$$observable]().subscribe(subscriber):ish[observable_1.$$observable]().subscribe(new observeOn_1.ObserveOnSubscriber(subscriber,scheduler,0))},FromObservable}(Observable_1.Observable);exports.FromObservable=FromObservable},{"../Observable":401,"../operator/observeOn":642,"../symbol/iterator":703,"../symbol/observable":704,"../util/isArray":723,"../util/isPromise":728,"./ArrayLikeObservable":538,"./ArrayObservable":539,"./IteratorObservable":553,"./PromiseObservable":557}],550:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),isScheduler_1=require("../util/isScheduler"),selfSelector=function(value){return value},GenerateObservable=function(_super){function GenerateObservable(initialState,condition,iterate,resultSelector,scheduler){_super.call(this),this.initialState=initialState,this.condition=condition,this.iterate=iterate,this.resultSelector=resultSelector,this.scheduler=scheduler}return __extends(GenerateObservable,_super),GenerateObservable.create=function(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler){return 1==arguments.length?new GenerateObservable(initialStateOrOptions.initialState,initialStateOrOptions.condition,initialStateOrOptions.iterate,initialStateOrOptions.resultSelector||selfSelector,initialStateOrOptions.scheduler):void 0===resultSelectorOrObservable||isScheduler_1.isScheduler(resultSelectorOrObservable)?new GenerateObservable(initialStateOrOptions,condition,iterate,selfSelector,resultSelectorOrObservable):new GenerateObservable(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler)},GenerateObservable.prototype._subscribe=function(subscriber){var state=this.initialState;if(this.scheduler)return this.scheduler.schedule(GenerateObservable.dispatch,0,{subscriber:subscriber,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:state});for(var _a=this,condition=_a.condition,resultSelector=_a.resultSelector,iterate=_a.iterate;;){if(condition){var conditionResult=void 0;try{conditionResult=condition(state)}catch(err){return void subscriber.error(err)}if(!conditionResult){subscriber.complete();break}}var value=void 0;try{value=resultSelector(state)}catch(err){return void subscriber.error(err)}if(subscriber.next(value),subscriber.closed)break;try{state=iterate(state)}catch(err){return void subscriber.error(err)}}},GenerateObservable.dispatch=function(state){var subscriber=state.subscriber,condition=state.condition;if(!subscriber.closed){if(state.needIterate)try{state.state=state.iterate(state.state)}catch(err){return void subscriber.error(err)}else state.needIterate=!0;if(condition){var conditionResult=void 0;try{conditionResult=condition(state.state)}catch(err){return void subscriber.error(err)}if(!conditionResult)return void subscriber.complete();if(subscriber.closed)return}var value;try{value=state.resultSelector(state.state)}catch(err){return void subscriber.error(err)}if(!subscriber.closed&&(subscriber.next(value),!subscriber.closed))return this.schedule(state)}},GenerateObservable}(Observable_1.Observable);exports.GenerateObservable=GenerateObservable},{"../Observable":401,"../util/isScheduler":729}],551:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber"),IfObservable=function(_super){function IfObservable(condition,thenSource,elseSource){_super.call(this),this.condition=condition,this.thenSource=thenSource,this.elseSource=elseSource}return __extends(IfObservable,_super),IfObservable.create=function(condition,thenSource,elseSource){return new IfObservable(condition,thenSource,elseSource)},IfObservable.prototype._subscribe=function(subscriber){var _a=this,condition=_a.condition,thenSource=_a.thenSource,elseSource=_a.elseSource;return new IfSubscriber(subscriber,condition,thenSource,elseSource)},IfObservable}(Observable_1.Observable);exports.IfObservable=IfObservable;var IfSubscriber=function(_super){function IfSubscriber(destination,condition,thenSource,elseSource){_super.call(this,destination),this.condition=condition,this.thenSource=thenSource,this.elseSource=elseSource,this.tryIf()}return __extends(IfSubscriber,_super),IfSubscriber.prototype.tryIf=function(){var result,_a=this,condition=_a.condition,thenSource=_a.thenSource,elseSource=_a.elseSource;try{result=condition();var source=result?thenSource:elseSource;source?this.add(subscribeToResult_1.subscribeToResult(this,source)):this._complete()}catch(err){this._error(err)}},IfSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../Observable":401,"../OuterSubscriber":403,"../util/subscribeToResult":733}],552:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isNumeric_1=require("../util/isNumeric"),Observable_1=require("../Observable"),async_1=require("../scheduler/async"),IntervalObservable=function(_super){function IntervalObservable(period,scheduler){void 0===period&&(period=0),void 0===scheduler&&(scheduler=async_1.async),_super.call(this),this.period=period,this.scheduler=scheduler,(!isNumeric_1.isNumeric(period)||period<0)&&(this.period=0),scheduler&&"function"==typeof scheduler.schedule||(this.scheduler=async_1.async)}return __extends(IntervalObservable,_super),IntervalObservable.create=function(period,scheduler){return void 0===period&&(period=0),void 0===scheduler&&(scheduler=async_1.async),new IntervalObservable(period,scheduler)},IntervalObservable.dispatch=function(state){var index=state.index,subscriber=state.subscriber,period=state.period;subscriber.next(index),subscriber.closed||(state.index+=1,this.schedule(state,period))},IntervalObservable.prototype._subscribe=function(subscriber){var index=0,period=this.period,scheduler=this.scheduler;subscriber.add(scheduler.schedule(IntervalObservable.dispatch,period,{index:index,subscriber:subscriber,period:period}))},IntervalObservable}(Observable_1.Observable);exports.IntervalObservable=IntervalObservable},{"../Observable":401,"../scheduler/async":701,"../util/isNumeric":726}],553:[function(require,module,exports){"use strict";function getIterator(obj){var i=obj[iterator_1.$$iterator];if(!i&&"string"==typeof obj)return new StringIterator(obj);if(!i&&void 0!==obj.length)return new ArrayIterator(obj);if(!i)throw new TypeError("object is not iterable");return obj[iterator_1.$$iterator]()}function toLength(o){var len=+o.length;return isNaN(len)?0:0!==len&&numberIsFinite(len)?(len=sign(len)*Math.floor(Math.abs(len)),len<=0?0:len>maxSafeInteger?maxSafeInteger:len):len}function numberIsFinite(value){return"number"==typeof value&&root_1.root.isFinite(value)}function sign(value){var valueAsNumber=+value;return 0===valueAsNumber?valueAsNumber:isNaN(valueAsNumber)?valueAsNumber:valueAsNumber<0?-1:1}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=require("../util/root"),Observable_1=require("../Observable"),iterator_1=require("../symbol/iterator"),IteratorObservable=function(_super){function IteratorObservable(iterator,scheduler){if(_super.call(this),this.scheduler=scheduler,null==iterator)throw new Error("iterator cannot be null.");this.iterator=getIterator(iterator)}return __extends(IteratorObservable,_super),IteratorObservable.create=function(iterator,scheduler){return new IteratorObservable(iterator,scheduler)},IteratorObservable.dispatch=function(state){var index=state.index,hasError=state.hasError,iterator=state.iterator,subscriber=state.subscriber;if(hasError)return void subscriber.error(state.error);var result=iterator.next();return result.done?void subscriber.complete():(subscriber.next(result.value),state.index=index+1,void(subscriber.closed||this.schedule(state)))},IteratorObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,iterator=_a.iterator,scheduler=_a.scheduler;if(scheduler)return scheduler.schedule(IteratorObservable.dispatch,0,{index:index,iterator:iterator,subscriber:subscriber});for(;;){var result=iterator.next();if(result.done){subscriber.complete();break}if(subscriber.next(result.value),subscriber.closed)break}},IteratorObservable}(Observable_1.Observable);exports.IteratorObservable=IteratorObservable;var StringIterator=function(){function StringIterator(str,idx,len){void 0===idx&&(idx=0),void 0===len&&(len=str.length),this.str=str,this.idx=idx,this.len=len}return StringIterator.prototype[iterator_1.$$iterator]=function(){return this},StringIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},StringIterator}(),ArrayIterator=function(){function ArrayIterator(arr,idx,len){void 0===idx&&(idx=0),void 0===len&&(len=toLength(arr)),this.arr=arr,this.idx=idx,this.len=len}return ArrayIterator.prototype[iterator_1.$$iterator]=function(){return this},ArrayIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},ArrayIterator}(),maxSafeInteger=Math.pow(2,53)-1},{"../Observable":401,"../symbol/iterator":703,"../util/root":732}],554:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),ConnectableObservable_1=require("../observable/ConnectableObservable"),MulticastObservable=function(_super){function MulticastObservable(source,subjectFactory,selector){_super.call(this),this.source=source,this.subjectFactory=subjectFactory,this.selector=selector}return __extends(MulticastObservable,_super),MulticastObservable.prototype._subscribe=function(subscriber){var _a=this,selector=_a.selector,source=_a.source,connectable=new ConnectableObservable_1.ConnectableObservable(source,this.subjectFactory),subscription=selector(connectable).subscribe(subscriber);return subscription.add(connectable.connect()),subscription},MulticastObservable}(Observable_1.Observable);exports.MulticastObservable=MulticastObservable},{"../Observable":401,"../observable/ConnectableObservable":542}],555:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),noop_1=require("../util/noop"),NeverObservable=function(_super){function NeverObservable(){_super.call(this)}return __extends(NeverObservable,_super),NeverObservable.create=function(){return new NeverObservable},NeverObservable.prototype._subscribe=function(subscriber){noop_1.noop()},NeverObservable}(Observable_1.Observable);exports.NeverObservable=NeverObservable},{"../Observable":401,"../util/noop":730}],556:[function(require,module,exports){"use strict";function dispatch(state){var obj=state.obj,keys=state.keys,length=state.length,index=state.index,subscriber=state.subscriber;if(index===length)return void subscriber.complete();var key=keys[index];subscriber.next([key,obj[key]]),state.index=index+1,this.schedule(state)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),PairsObservable=function(_super){function PairsObservable(obj,scheduler){_super.call(this),this.obj=obj,this.scheduler=scheduler,this.keys=Object.keys(obj)}return __extends(PairsObservable,_super),PairsObservable.create=function(obj,scheduler){return new PairsObservable(obj,scheduler)},PairsObservable.prototype._subscribe=function(subscriber){var _a=this,keys=_a.keys,scheduler=_a.scheduler,length=keys.length;if(scheduler)return scheduler.schedule(dispatch,0,{obj:this.obj,keys:keys,length:length,index:0,subscriber:subscriber});for(var idx=0;idx<length;idx++){var key=keys[idx];subscriber.next([key,this.obj[key]])}subscriber.complete()},PairsObservable}(Observable_1.Observable);exports.PairsObservable=PairsObservable},{"../Observable":401}],557:[function(require,module,exports){"use strict";function dispatchNext(arg){var value=arg.value,subscriber=arg.subscriber;subscriber.closed||(subscriber.next(value),subscriber.complete())}function dispatchError(arg){var err=arg.err,subscriber=arg.subscriber;subscriber.closed||subscriber.error(err)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=require("../util/root"),Observable_1=require("../Observable"),PromiseObservable=function(_super){function PromiseObservable(promise,scheduler){_super.call(this),this.promise=promise,this.scheduler=scheduler}return __extends(PromiseObservable,_super),PromiseObservable.create=function(promise,scheduler){return new PromiseObservable(promise,scheduler)},PromiseObservable.prototype._subscribe=function(subscriber){var _this=this,promise=this.promise,scheduler=this.scheduler;if(null==scheduler)this._isScalar?subscriber.closed||(subscriber.next(this.value),subscriber.complete()):promise.then(function(value){_this.value=value,_this._isScalar=!0,subscriber.closed||(subscriber.next(value),subscriber.complete())},function(err){subscriber.closed||subscriber.error(err)}).then(null,function(err){root_1.root.setTimeout(function(){throw err})});else if(this._isScalar){if(!subscriber.closed)return scheduler.schedule(dispatchNext,0,{value:this.value,subscriber:subscriber})}else promise.then(function(value){_this.value=value,_this._isScalar=!0,subscriber.closed||subscriber.add(scheduler.schedule(dispatchNext,0,{value:value,subscriber:subscriber}))},function(err){subscriber.closed||subscriber.add(scheduler.schedule(dispatchError,0,{err:err,subscriber:subscriber}))}).then(null,function(err){root_1.root.setTimeout(function(){throw err})})},PromiseObservable}(Observable_1.Observable);exports.PromiseObservable=PromiseObservable},{"../Observable":401,"../util/root":732}],558:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),RangeObservable=function(_super){function RangeObservable(start,count,scheduler){_super.call(this),this.start=start,this._count=count,this.scheduler=scheduler}return __extends(RangeObservable,_super),RangeObservable.create=function(start,count,scheduler){return void 0===start&&(start=0),void 0===count&&(count=0),new RangeObservable(start,count,scheduler)},RangeObservable.dispatch=function(state){var start=state.start,index=state.index,count=state.count,subscriber=state.subscriber;return index>=count?void subscriber.complete():(subscriber.next(start),void(subscriber.closed||(state.index=index+1,state.start=start+1,this.schedule(state))))},RangeObservable.prototype._subscribe=function(subscriber){var index=0,start=this.start,count=this._count,scheduler=this.scheduler;if(scheduler)return scheduler.schedule(RangeObservable.dispatch,0,{index:index,count:count,start:start,subscriber:subscriber});for(;;){if(index++>=count){subscriber.complete();break}if(subscriber.next(start++),subscriber.closed)break}},RangeObservable}(Observable_1.Observable);exports.RangeObservable=RangeObservable},{"../Observable":401}],559:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),ScalarObservable=function(_super){function ScalarObservable(value,scheduler){_super.call(this),this.value=value,this.scheduler=scheduler,this._isScalar=!0,scheduler&&(this._isScalar=!1)}return __extends(ScalarObservable,_super),ScalarObservable.create=function(value,scheduler){return new ScalarObservable(value,scheduler)},ScalarObservable.dispatch=function(state){var done=state.done,value=state.value,subscriber=state.subscriber;return done?void subscriber.complete():(subscriber.next(value),void(subscriber.closed||(state.done=!0,this.schedule(state))))},ScalarObservable.prototype._subscribe=function(subscriber){var value=this.value,scheduler=this.scheduler;return scheduler?scheduler.schedule(ScalarObservable.dispatch,0,{done:!1,value:value,subscriber:subscriber}):(subscriber.next(value),void(subscriber.closed||subscriber.complete()))},ScalarObservable}(Observable_1.Observable);exports.ScalarObservable=ScalarObservable},{"../Observable":401}],560:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),asap_1=require("../scheduler/asap"),isNumeric_1=require("../util/isNumeric"),SubscribeOnObservable=function(_super){function SubscribeOnObservable(source,delayTime,scheduler){void 0===delayTime&&(delayTime=0),void 0===scheduler&&(scheduler=asap_1.asap),_super.call(this),this.source=source,this.delayTime=delayTime,this.scheduler=scheduler,(!isNumeric_1.isNumeric(delayTime)||delayTime<0)&&(this.delayTime=0),scheduler&&"function"==typeof scheduler.schedule||(this.scheduler=asap_1.asap)}return __extends(SubscribeOnObservable,_super),SubscribeOnObservable.create=function(source,delay,scheduler){return void 0===delay&&(delay=0),void 0===scheduler&&(scheduler=asap_1.asap),new SubscribeOnObservable(source,delay,scheduler)},SubscribeOnObservable.dispatch=function(arg){var source=arg.source,subscriber=arg.subscriber;return source.subscribe(subscriber)},SubscribeOnObservable.prototype._subscribe=function(subscriber){var delay=this.delayTime,source=this.source,scheduler=this.scheduler;return scheduler.schedule(SubscribeOnObservable.dispatch,delay,{source:source,subscriber:subscriber})},SubscribeOnObservable}(Observable_1.Observable);exports.SubscribeOnObservable=SubscribeOnObservable},{"../Observable":401,"../scheduler/asap":700,"../util/isNumeric":726}],561:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isNumeric_1=require("../util/isNumeric"),Observable_1=require("../Observable"),async_1=require("../scheduler/async"),isScheduler_1=require("../util/isScheduler"),isDate_1=require("../util/isDate"),TimerObservable=function(_super){function TimerObservable(dueTime,period,scheduler){void 0===dueTime&&(dueTime=0),_super.call(this),this.period=-1,this.dueTime=0,isNumeric_1.isNumeric(period)?this.period=Number(period)<1&&1||Number(period):isScheduler_1.isScheduler(period)&&(scheduler=period),isScheduler_1.isScheduler(scheduler)||(scheduler=async_1.async),this.scheduler=scheduler,this.dueTime=isDate_1.isDate(dueTime)?+dueTime-this.scheduler.now():dueTime}return __extends(TimerObservable,_super),TimerObservable.create=function(initialDelay,period,scheduler){return void 0===initialDelay&&(initialDelay=0),new TimerObservable(initialDelay,period,scheduler)},TimerObservable.dispatch=function(state){var index=state.index,period=state.period,subscriber=state.subscriber,action=this;if(subscriber.next(index),!subscriber.closed){if(period===-1)return subscriber.complete();state.index=index+1,action.schedule(state,period)}},TimerObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,period=_a.period,dueTime=_a.dueTime,scheduler=_a.scheduler;return scheduler.schedule(TimerObservable.dispatch,dueTime,{index:index,period:period,subscriber:subscriber})},TimerObservable}(Observable_1.Observable);exports.TimerObservable=TimerObservable},{"../Observable":401,"../scheduler/async":701,"../util/isDate":724,"../util/isNumeric":726,"../util/isScheduler":729}],562:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber"),UsingObservable=function(_super){function UsingObservable(resourceFactory,observableFactory){_super.call(this),this.resourceFactory=resourceFactory,this.observableFactory=observableFactory}return __extends(UsingObservable,_super),UsingObservable.create=function(resourceFactory,observableFactory){return new UsingObservable(resourceFactory,observableFactory)},UsingObservable.prototype._subscribe=function(subscriber){var resource,_a=this,resourceFactory=_a.resourceFactory,observableFactory=_a.observableFactory;try{return resource=resourceFactory(),new UsingSubscriber(subscriber,resource,observableFactory)}catch(err){subscriber.error(err)}},UsingObservable}(Observable_1.Observable);exports.UsingObservable=UsingObservable;var UsingSubscriber=function(_super){function UsingSubscriber(destination,resource,observableFactory){_super.call(this,destination),this.resource=resource,this.observableFactory=observableFactory,destination.add(resource),this.tryUse()}return __extends(UsingSubscriber,_super),UsingSubscriber.prototype.tryUse=function(){try{var source=this.observableFactory.call(this,this.resource);source&&this.add(subscribeToResult_1.subscribeToResult(this,source))}catch(err){this._error(err)}},UsingSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../Observable":401,"../OuterSubscriber":403,"../util/subscribeToResult":733}],563:[function(require,module,exports){"use strict";var BoundCallbackObservable_1=require("./BoundCallbackObservable");exports.bindCallback=BoundCallbackObservable_1.BoundCallbackObservable.create},{"./BoundCallbackObservable":540}],564:[function(require,module,exports){"use strict";var BoundNodeCallbackObservable_1=require("./BoundNodeCallbackObservable");exports.bindNodeCallback=BoundNodeCallbackObservable_1.BoundNodeCallbackObservable.create},{"./BoundNodeCallbackObservable":541}],565:[function(require,module,exports){"use strict";function combineLatest(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=null,scheduler=null;return isScheduler_1.isScheduler(observables[observables.length-1])&&(scheduler=observables.pop()),"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new combineLatest_1.CombineLatestOperator(project))}var isScheduler_1=require("../util/isScheduler"),isArray_1=require("../util/isArray"),ArrayObservable_1=require("./ArrayObservable"),combineLatest_1=require("../operator/combineLatest");exports.combineLatest=combineLatest},{"../operator/combineLatest":599,"../util/isArray":723,"../util/isScheduler":729,"./ArrayObservable":539}],566:[function(require,module,exports){"use strict";var concat_1=require("../operator/concat");exports.concat=concat_1.concatStatic},{"../operator/concat":600}],567:[function(require,module,exports){"use strict";var DeferObservable_1=require("./DeferObservable");exports.defer=DeferObservable_1.DeferObservable.create},{"./DeferObservable":543}],568:[function(require,module,exports){"use strict";function getCORSRequest(){if(root_1.root.XMLHttpRequest){var xhr=new root_1.root.XMLHttpRequest;return"withCredentials"in xhr&&(xhr.withCredentials=!!this.withCredentials),xhr}if(root_1.root.XDomainRequest)return new root_1.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function getXMLHttpRequest(){if(root_1.root.XMLHttpRequest)return new root_1.root.XMLHttpRequest;var progId=void 0;try{for(var progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=0;i<3;i++)try{if(progId=progIds[i],new root_1.root.ActiveXObject(progId))break}catch(e){}return new root_1.root.ActiveXObject(progId)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}function ajaxGet(url,headers){return void 0===headers&&(headers=null),new AjaxObservable({method:"GET",url:url,headers:headers})}function ajaxPost(url,body,headers){return new AjaxObservable({method:"POST",url:url,body:body,headers:headers})}function ajaxDelete(url,headers){return new AjaxObservable({method:"DELETE",url:url,headers:headers})}function ajaxPut(url,body,headers){return new AjaxObservable({method:"PUT",url:url,body:body,headers:headers})}function ajaxGetJSON(url,headers){return new AjaxObservable({method:"GET",url:url,responseType:"json",headers:headers}).map(function(x){return x.response})}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=require("../../util/root"),tryCatch_1=require("../../util/tryCatch"),errorObject_1=require("../../util/errorObject"),Observable_1=require("../../Observable"),Subscriber_1=require("../../Subscriber");exports.ajaxGet=ajaxGet,exports.ajaxPost=ajaxPost,exports.ajaxDelete=ajaxDelete,exports.ajaxPut=ajaxPut,exports.ajaxGetJSON=ajaxGetJSON;var AjaxObservable=function(_super){function AjaxObservable(urlOrRequest){_super.call(this);var request={async:!0,createXHR:function(){return this.crossDomain?getCORSRequest.call(this):getXMLHttpRequest()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof urlOrRequest)request.url=urlOrRequest;else for(var prop in urlOrRequest)urlOrRequest.hasOwnProperty(prop)&&(request[prop]=urlOrRequest[prop]);this.request=request}return __extends(AjaxObservable,_super),AjaxObservable.prototype._subscribe=function(subscriber){return new AjaxSubscriber(subscriber,this.request)},AjaxObservable.create=function(){var create=function(urlOrRequest){return new AjaxObservable(urlOrRequest)};return create.get=ajaxGet,create.post=ajaxPost,create.delete=ajaxDelete,create.put=ajaxPut,create.getJSON=ajaxGetJSON,create}(),AjaxObservable}(Observable_1.Observable);exports.AjaxObservable=AjaxObservable;var AjaxSubscriber=function(_super){function AjaxSubscriber(destination,request){_super.call(this,destination),this.request=request,this.done=!1;var headers=request.headers=request.headers||{};request.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in headers||root_1.root.FormData&&request.body instanceof root_1.root.FormData||"undefined"==typeof request.body||(headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),request.body=this.serializeBody(request.body,request.headers["Content-Type"]),this.send()}return __extends(AjaxSubscriber,_super),AjaxSubscriber.prototype.next=function(e){this.done=!0;var _a=this,xhr=_a.xhr,request=_a.request,destination=_a.destination,response=new AjaxResponse(e,xhr,request);destination.next(response)},AjaxSubscriber.prototype.send=function(){var _a=this,request=_a.request,_b=_a.request,user=_b.user,method=_b.method,url=_b.url,async=_b.async,password=_b.password,headers=_b.headers,body=_b.body,createXHR=request.createXHR,xhr=tryCatch_1.tryCatch(createXHR).call(request);if(xhr===errorObject_1.errorObject)this.error(errorObject_1.errorObject.e);else{this.xhr=xhr;var result=void 0;if(result=user?tryCatch_1.tryCatch(xhr.open).call(xhr,method,url,async,user,password):tryCatch_1.tryCatch(xhr.open).call(xhr,method,url,async),result===errorObject_1.errorObject)return this.error(errorObject_1.errorObject.e),null;xhr.timeout=request.timeout,xhr.responseType=request.responseType,this.setHeaders(xhr,headers),this.setupEvents(xhr,request),body?xhr.send(body):xhr.send()}return xhr},AjaxSubscriber.prototype.serializeBody=function(body,contentType){if(!body||"string"==typeof body)return body;if(root_1.root.FormData&&body instanceof root_1.root.FormData)return body;if(contentType){var splitIndex=contentType.indexOf(";");splitIndex!==-1&&(contentType=contentType.substring(0,splitIndex))}switch(contentType){case"application/x-www-form-urlencoded":return Object.keys(body).map(function(key){return encodeURI(key)+"="+encodeURI(body[key])}).join("&");case"application/json":return JSON.stringify(body);default:return body}},AjaxSubscriber.prototype.setHeaders=function(xhr,headers){for(var key in headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key])},AjaxSubscriber.prototype.setupEvents=function(xhr,request){var progressSubscriber=request.progressSubscriber;xhr.ontimeout=function xhrTimeout(e){var _a=xhrTimeout,subscriber=_a.subscriber,progressSubscriber=_a.progressSubscriber,request=_a.request;progressSubscriber&&progressSubscriber.error(e),subscriber.error(new AjaxTimeoutError(this,request))},xhr.ontimeout.request=request,xhr.ontimeout.subscriber=this,xhr.ontimeout.progressSubscriber=progressSubscriber,xhr.upload&&"withCredentials"in xhr&&root_1.root.XDomainRequest&&(progressSubscriber&&(xhr.onprogress=function xhrProgress(e){var progressSubscriber=xhrProgress.progressSubscriber;progressSubscriber.next(e)},xhr.onprogress.progressSubscriber=progressSubscriber),xhr.onerror=function xhrError(e){var _a=xhrError,progressSubscriber=_a.progressSubscriber,subscriber=_a.subscriber,request=_a.request;
progressSubscriber&&progressSubscriber.error(e),subscriber.error(new AjaxError("ajax error",this,request))},xhr.onerror.request=request,xhr.onerror.subscriber=this,xhr.onerror.progressSubscriber=progressSubscriber),xhr.onreadystatechange=function xhrReadyStateChange(e){var _a=xhrReadyStateChange,subscriber=_a.subscriber,progressSubscriber=_a.progressSubscriber,request=_a.request;if(4===this.readyState){var status_1=1223===this.status?204:this.status,response="text"===this.responseType?this.response||this.responseText:this.response;0===status_1&&(status_1=response?200:0),200<=status_1&&status_1<300?(progressSubscriber&&progressSubscriber.complete(),subscriber.next(e),subscriber.complete()):(progressSubscriber&&progressSubscriber.error(e),subscriber.error(new AjaxError("ajax error "+status_1,this,request)))}},xhr.onreadystatechange.subscriber=this,xhr.onreadystatechange.progressSubscriber=progressSubscriber,xhr.onreadystatechange.request=request},AjaxSubscriber.prototype.unsubscribe=function(){var _a=this,done=_a.done,xhr=_a.xhr;!done&&xhr&&4!==xhr.readyState&&xhr.abort(),_super.prototype.unsubscribe.call(this)},AjaxSubscriber}(Subscriber_1.Subscriber);exports.AjaxSubscriber=AjaxSubscriber;var AjaxResponse=function(){function AjaxResponse(originalEvent,xhr,request){switch(this.originalEvent=originalEvent,this.xhr=xhr,this.request=request,this.status=xhr.status,this.responseType=xhr.responseType||request.responseType,this.responseType){case"json":"response"in xhr?this.response=xhr.responseType?xhr.response:JSON.parse(xhr.response||xhr.responseText||""):this.response=JSON.parse(xhr.responseText||"");break;case"xml":this.response=xhr.responseXML;break;case"text":default:this.response="response"in xhr?xhr.response:xhr.responseText}}return AjaxResponse}();exports.AjaxResponse=AjaxResponse;var AjaxError=function(_super){function AjaxError(message,xhr,request){_super.call(this,message),this.message=message,this.xhr=xhr,this.request=request,this.status=xhr.status}return __extends(AjaxError,_super),AjaxError}(Error);exports.AjaxError=AjaxError;var AjaxTimeoutError=function(_super){function AjaxTimeoutError(xhr,request){_super.call(this,"ajax timeout",xhr,request)}return __extends(AjaxTimeoutError,_super),AjaxTimeoutError}(AjaxError);exports.AjaxTimeoutError=AjaxTimeoutError},{"../../Observable":401,"../../Subscriber":409,"../../util/errorObject":722,"../../util/root":732,"../../util/tryCatch":735}],569:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../../Subject"),Subscriber_1=require("../../Subscriber"),Observable_1=require("../../Observable"),Subscription_1=require("../../Subscription"),root_1=require("../../util/root"),ReplaySubject_1=require("../../ReplaySubject"),tryCatch_1=require("../../util/tryCatch"),errorObject_1=require("../../util/errorObject"),assign_1=require("../../util/assign"),WebSocketSubject=function(_super){function WebSocketSubject(urlConfigOrSource,destination){if(urlConfigOrSource instanceof Observable_1.Observable)_super.call(this,destination,urlConfigOrSource);else{if(_super.call(this),this.WebSocketCtor=root_1.root.WebSocket,this._output=new Subject_1.Subject,"string"==typeof urlConfigOrSource?this.url=urlConfigOrSource:assign_1.assign(this,urlConfigOrSource),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new ReplaySubject_1.ReplaySubject}}return __extends(WebSocketSubject,_super),WebSocketSubject.prototype.resultSelector=function(e){return JSON.parse(e.data)},WebSocketSubject.create=function(urlConfigOrSource){return new WebSocketSubject(urlConfigOrSource)},WebSocketSubject.prototype.lift=function(operator){var sock=new WebSocketSubject(this,this.destination);return sock.operator=operator,sock},WebSocketSubject.prototype.multiplex=function(subMsg,unsubMsg,messageFilter){var self=this;return new Observable_1.Observable(function(observer){var result=tryCatch_1.tryCatch(subMsg)();result===errorObject_1.errorObject?observer.error(errorObject_1.errorObject.e):self.next(result);var subscription=self.subscribe(function(x){var result=tryCatch_1.tryCatch(messageFilter)(x);result===errorObject_1.errorObject?observer.error(errorObject_1.errorObject.e):result&&observer.next(x)},function(err){return observer.error(err)},function(){return observer.complete()});return function(){var result=tryCatch_1.tryCatch(unsubMsg)();result===errorObject_1.errorObject?observer.error(errorObject_1.errorObject.e):self.next(result),subscription.unsubscribe()}})},WebSocketSubject.prototype._connectSocket=function(){var _this=this,WebSocketCtor=this.WebSocketCtor,socket=this.protocol?new WebSocketCtor(this.url,this.protocol):new WebSocketCtor(this.url);this.socket=socket;var subscription=new Subscription_1.Subscription(function(){_this.socket=null,socket&&1===socket.readyState&&socket.close()}),observer=this._output;socket.onopen=function(e){var openObserver=_this.openObserver;openObserver&&openObserver.next(e);var queue=_this.destination;_this.destination=Subscriber_1.Subscriber.create(function(x){return 1===socket.readyState&&socket.send(x)},function(e){var closingObserver=_this.closingObserver;closingObserver&&closingObserver.next(void 0),e&&e.code?socket.close(e.code,e.reason):observer.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),_this.destination=new ReplaySubject_1.ReplaySubject,_this.socket=null},function(){var closingObserver=_this.closingObserver;closingObserver&&closingObserver.next(void 0),socket.close(),_this.destination=new ReplaySubject_1.ReplaySubject,_this.socket=null}),queue&&queue instanceof ReplaySubject_1.ReplaySubject&&subscription.add(queue.subscribe(_this.destination))},socket.onerror=function(e){return observer.error(e)},socket.onclose=function(e){var closeObserver=_this.closeObserver;closeObserver&&closeObserver.next(e),e.wasClean?observer.complete():observer.error(e)},socket.onmessage=function(e){var result=tryCatch_1.tryCatch(_this.resultSelector)(e);result===errorObject_1.errorObject?observer.error(errorObject_1.errorObject.e):observer.next(result)}},WebSocketSubject.prototype._subscribe=function(subscriber){var _this=this,source=this.source;if(source)return source.subscribe(subscriber);this.socket||this._connectSocket();var subscription=new Subscription_1.Subscription;return subscription.add(this._output.subscribe(subscriber)),subscription.add(function(){var socket=_this.socket;0===_this._output.observers.length&&socket&&1===socket.readyState&&(socket.close(),_this.socket=null)}),subscription},WebSocketSubject.prototype.unsubscribe=function(){var _a=this,source=_a.source,socket=_a.socket;socket&&1===socket.readyState&&(socket.close(),this.socket=null),_super.prototype.unsubscribe.call(this),source||(this.destination=new ReplaySubject_1.ReplaySubject)},WebSocketSubject}(Subject_1.AnonymousSubject);exports.WebSocketSubject=WebSocketSubject},{"../../Observable":401,"../../ReplaySubject":404,"../../Subject":407,"../../Subscriber":409,"../../Subscription":410,"../../util/assign":721,"../../util/errorObject":722,"../../util/root":732,"../../util/tryCatch":735}],570:[function(require,module,exports){"use strict";var AjaxObservable_1=require("./AjaxObservable");exports.ajax=AjaxObservable_1.AjaxObservable.create},{"./AjaxObservable":568}],571:[function(require,module,exports){"use strict";var WebSocketSubject_1=require("./WebSocketSubject");exports.webSocket=WebSocketSubject_1.WebSocketSubject.create},{"./WebSocketSubject":569}],572:[function(require,module,exports){"use strict";var EmptyObservable_1=require("./EmptyObservable");exports.empty=EmptyObservable_1.EmptyObservable.create},{"./EmptyObservable":544}],573:[function(require,module,exports){"use strict";var ForkJoinObservable_1=require("./ForkJoinObservable");exports.forkJoin=ForkJoinObservable_1.ForkJoinObservable.create},{"./ForkJoinObservable":546}],574:[function(require,module,exports){"use strict";var FromObservable_1=require("./FromObservable");exports.from=FromObservable_1.FromObservable.create},{"./FromObservable":549}],575:[function(require,module,exports){"use strict";var FromEventObservable_1=require("./FromEventObservable");exports.fromEvent=FromEventObservable_1.FromEventObservable.create},{"./FromEventObservable":547}],576:[function(require,module,exports){"use strict";var FromEventPatternObservable_1=require("./FromEventPatternObservable");exports.fromEventPattern=FromEventPatternObservable_1.FromEventPatternObservable.create},{"./FromEventPatternObservable":548}],577:[function(require,module,exports){"use strict";var PromiseObservable_1=require("./PromiseObservable");exports.fromPromise=PromiseObservable_1.PromiseObservable.create},{"./PromiseObservable":557}],578:[function(require,module,exports){"use strict";var IfObservable_1=require("./IfObservable");exports._if=IfObservable_1.IfObservable.create},{"./IfObservable":551}],579:[function(require,module,exports){"use strict";var IntervalObservable_1=require("./IntervalObservable");exports.interval=IntervalObservable_1.IntervalObservable.create},{"./IntervalObservable":552}],580:[function(require,module,exports){"use strict";var merge_1=require("../operator/merge");exports.merge=merge_1.mergeStatic},{"../operator/merge":635}],581:[function(require,module,exports){"use strict";var NeverObservable_1=require("./NeverObservable");exports.never=NeverObservable_1.NeverObservable.create},{"./NeverObservable":555}],582:[function(require,module,exports){"use strict";var ArrayObservable_1=require("./ArrayObservable");exports.of=ArrayObservable_1.ArrayObservable.of},{"./ArrayObservable":539}],583:[function(require,module,exports){"use strict";var PairsObservable_1=require("./PairsObservable");exports.pairs=PairsObservable_1.PairsObservable.create},{"./PairsObservable":556}],584:[function(require,module,exports){"use strict";var RangeObservable_1=require("./RangeObservable");exports.range=RangeObservable_1.RangeObservable.create},{"./RangeObservable":558}],585:[function(require,module,exports){"use strict";var ErrorObservable_1=require("./ErrorObservable");exports._throw=ErrorObservable_1.ErrorObservable.create},{"./ErrorObservable":545}],586:[function(require,module,exports){"use strict";var TimerObservable_1=require("./TimerObservable");exports.timer=TimerObservable_1.TimerObservable.create},{"./TimerObservable":561}],587:[function(require,module,exports){"use strict";var UsingObservable_1=require("./UsingObservable");exports.using=UsingObservable_1.UsingObservable.create},{"./UsingObservable":562}],588:[function(require,module,exports){"use strict";var zip_1=require("../operator/zip");exports.zip=zip_1.zipStatic},{"../operator/zip":687}],589:[function(require,module,exports){"use strict";function audit(durationSelector){return this.lift(new AuditOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.audit=audit;var AuditOperator=function(){function AuditOperator(durationSelector){this.durationSelector=durationSelector}return AuditOperator.prototype.call=function(subscriber,source){return source._subscribe(new AuditSubscriber(subscriber,this.durationSelector))},AuditOperator}(),AuditSubscriber=function(_super){function AuditSubscriber(destination,durationSelector){_super.call(this,destination),this.durationSelector=durationSelector,this.hasValue=!1}return __extends(AuditSubscriber,_super),AuditSubscriber.prototype._next=function(value){if(this.value=value,this.hasValue=!0,!this.throttled){var duration=tryCatch_1.tryCatch(this.durationSelector)(value);duration===errorObject_1.errorObject?this.destination.error(errorObject_1.errorObject.e):this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,duration))}},AuditSubscriber.prototype.clearThrottle=function(){var _a=this,value=_a.value,hasValue=_a.hasValue,throttled=_a.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))},AuditSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/errorObject":722,"../util/subscribeToResult":733,"../util/tryCatch":735}],590:[function(require,module,exports){"use strict";function auditTime(duration,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new AuditTimeOperator(duration,scheduler))}function dispatchNext(subscriber){subscriber.clearThrottle()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=require("../scheduler/async"),Subscriber_1=require("../Subscriber");exports.auditTime=auditTime;var AuditTimeOperator=function(){function AuditTimeOperator(duration,scheduler){this.duration=duration,this.scheduler=scheduler}return AuditTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new AuditTimeSubscriber(subscriber,this.duration,this.scheduler))},AuditTimeOperator}(),AuditTimeSubscriber=function(_super){function AuditTimeSubscriber(destination,duration,scheduler){_super.call(this,destination),this.duration=duration,this.scheduler=scheduler,this.hasValue=!1}return __extends(AuditTimeSubscriber,_super),AuditTimeSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,this))},AuditTimeSubscriber.prototype.clearThrottle=function(){var _a=this,value=_a.value,hasValue=_a.hasValue,throttled=_a.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))},AuditTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701}],591:[function(require,module,exports){"use strict";function buffer(closingNotifier){return this.lift(new BufferOperator(closingNotifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.buffer=buffer;var BufferOperator=function(){function BufferOperator(closingNotifier){this.closingNotifier=closingNotifier}return BufferOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferSubscriber(subscriber,this.closingNotifier))},BufferOperator}(),BufferSubscriber=function(_super){function BufferSubscriber(destination,closingNotifier){_super.call(this,destination),this.buffer=[],this.add(subscribeToResult_1.subscribeToResult(this,closingNotifier))}return __extends(BufferSubscriber,_super),BufferSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var buffer=this.buffer;this.buffer=[],this.destination.next(buffer)},BufferSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],592:[function(require,module,exports){"use strict";function bufferCount(bufferSize,startBufferEvery){return void 0===startBufferEvery&&(startBufferEvery=null),this.lift(new BufferCountOperator(bufferSize,startBufferEvery))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.bufferCount=bufferCount;var BufferCountOperator=function(){function BufferCountOperator(bufferSize,startBufferEvery){this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery}return BufferCountOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferCountSubscriber(subscriber,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),BufferCountSubscriber=function(_super){function BufferCountSubscriber(destination,bufferSize,startBufferEvery){_super.call(this,destination),this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery,this.buffers=[[]],this.count=0}return __extends(BufferCountSubscriber,_super),BufferCountSubscriber.prototype._next=function(value){var count=this.count+=1,destination=this.destination,bufferSize=this.bufferSize,startBufferEvery=null==this.startBufferEvery?bufferSize:this.startBufferEvery,buffers=this.buffers,len=buffers.length,remove=-1;count%startBufferEvery===0&&buffers.push([]);for(var i=0;i<len;i++){var buffer=buffers[i];buffer.push(value),buffer.length===bufferSize&&(remove=i,destination.next(buffer))}remove!==-1&&buffers.splice(remove,1)},BufferCountSubscriber.prototype._complete=function(){for(var destination=this.destination,buffers=this.buffers;buffers.length>0;){var buffer=buffers.shift();buffer.length>0&&destination.next(buffer)}_super.prototype._complete.call(this)},BufferCountSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],593:[function(require,module,exports){"use strict";function bufferTime(bufferTimeSpan){var length=arguments.length,scheduler=async_1.async;isScheduler_1.isScheduler(arguments[arguments.length-1])&&(scheduler=arguments[arguments.length-1],length--);var bufferCreationInterval=null;length>=2&&(bufferCreationInterval=arguments[1]);var maxBufferSize=Number.POSITIVE_INFINITY;return length>=3&&(maxBufferSize=arguments[2]),this.lift(new BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler))}function dispatchBufferTimeSpanOnly(state){var subscriber=state.subscriber,prevContext=state.context;prevContext&&subscriber.closeContext(prevContext),subscriber.closed||(state.context=subscriber.openContext(),state.context.closeAction=this.schedule(state,state.bufferTimeSpan))}function dispatchBufferCreation(state){var bufferCreationInterval=state.bufferCreationInterval,bufferTimeSpan=state.bufferTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,context=subscriber.openContext(),action=this;subscriber.closed||(subscriber.add(context.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:subscriber,context:context})),action.schedule(state,bufferCreationInterval))}function dispatchBufferClose(arg){var subscriber=arg.subscriber,context=arg.context;subscriber.closeContext(context)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=require("../scheduler/async"),Subscriber_1=require("../Subscriber"),isScheduler_1=require("../util/isScheduler");exports.bufferTime=bufferTime;var BufferTimeOperator=function(){function BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.maxBufferSize=maxBufferSize,this.scheduler=scheduler}return BufferTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferTimeSubscriber(subscriber,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},BufferTimeOperator}(),Context=function(){function Context(){this.buffer=[]}return Context}(),BufferTimeSubscriber=function(_super){function BufferTimeSubscriber(destination,bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){_super.call(this,destination),this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.maxBufferSize=maxBufferSize,this.scheduler=scheduler,this.contexts=[];var context=this.openContext();if(this.timespanOnly=null==bufferCreationInterval||bufferCreationInterval<0,this.timespanOnly){var timeSpanOnlyState={subscriber:this,context:context,bufferTimeSpan:bufferTimeSpan};this.add(context.closeAction=scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,timeSpanOnlyState))}else{var closeState={subscriber:this,context:context},creationState={bufferTimeSpan:bufferTimeSpan,bufferCreationInterval:bufferCreationInterval,subscriber:this,scheduler:scheduler};this.add(context.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,closeState)),this.add(scheduler.schedule(dispatchBufferCreation,bufferCreationInterval,creationState))}}return __extends(BufferTimeSubscriber,_super),BufferTimeSubscriber.prototype._next=function(value){for(var filledBufferContext,contexts=this.contexts,len=contexts.length,i=0;i<len;i++){var context=contexts[i],buffer=context.buffer;buffer.push(value),buffer.length==this.maxBufferSize&&(filledBufferContext=context)}filledBufferContext&&this.onBufferFull(filledBufferContext)},BufferTimeSubscriber.prototype._error=function(err){this.contexts.length=0,_super.prototype._error.call(this,err)},BufferTimeSubscriber.prototype._complete=function(){for(var _a=this,contexts=_a.contexts,destination=_a.destination;contexts.length>0;){var context=contexts.shift();destination.next(context.buffer)}_super.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.contexts=null},BufferTimeSubscriber.prototype.onBufferFull=function(context){this.closeContext(context);var closeAction=context.closeAction;if(closeAction.unsubscribe(),this.remove(closeAction),this.timespanOnly){context=this.openContext();var bufferTimeSpan=this.bufferTimeSpan,timeSpanOnlyState={subscriber:this,context:context,bufferTimeSpan:bufferTimeSpan};this.add(context.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,timeSpanOnlyState))}},BufferTimeSubscriber.prototype.openContext=function(){var context=new Context;return this.contexts.push(context),context},BufferTimeSubscriber.prototype.closeContext=function(context){this.destination.next(context.buffer);var contexts=this.contexts,spliceIndex=contexts?contexts.indexOf(context):-1;spliceIndex>=0&&contexts.splice(contexts.indexOf(context),1)},BufferTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701,"../util/isScheduler":729}],594:[function(require,module,exports){"use strict";function bufferToggle(openings,closingSelector){return this.lift(new BufferToggleOperator(openings,closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=require("../Subscription"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber");exports.bufferToggle=bufferToggle;var BufferToggleOperator=function(){function BufferToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return BufferToggleOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferToggleSubscriber(subscriber,this.openings,this.closingSelector))},BufferToggleOperator}(),BufferToggleSubscriber=function(_super){function BufferToggleSubscriber(destination,openings,closingSelector){_super.call(this,destination),this.openings=openings,this.closingSelector=closingSelector,this.contexts=[],this.add(subscribeToResult_1.subscribeToResult(this,openings))}return __extends(BufferToggleSubscriber,_super),BufferToggleSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,i=0;i<len;i++)contexts[i].buffer.push(value)},BufferToggleSubscriber.prototype._error=function(err){for(var contexts=this.contexts;contexts.length>0;){var context=contexts.shift();context.subscription.unsubscribe(),context.buffer=null,context.subscription=null}this.contexts=null,_super.prototype._error.call(this,err)},BufferToggleSubscriber.prototype._complete=function(){for(var contexts=this.contexts;contexts.length>0;){var context=contexts.shift();this.destination.next(context.buffer),context.subscription.unsubscribe(),context.buffer=null,context.subscription=null}this.contexts=null,_super.prototype._complete.call(this)},BufferToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){outerValue?this.closeBuffer(outerValue):this.openBuffer(innerValue)},BufferToggleSubscriber.prototype.notifyComplete=function(innerSub){this.closeBuffer(innerSub.context)},BufferToggleSubscriber.prototype.openBuffer=function(value){try{var closingSelector=this.closingSelector,closingNotifier=closingSelector.call(this,value);closingNotifier&&this.trySubscribe(closingNotifier)}catch(err){this._error(err)}},BufferToggleSubscriber.prototype.closeBuffer=function(context){var contexts=this.contexts;if(contexts&&context){var buffer=context.buffer,subscription=context.subscription;this.destination.next(buffer),contexts.splice(contexts.indexOf(context),1),this.remove(subscription),subscription.unsubscribe()}},BufferToggleSubscriber.prototype.trySubscribe=function(closingNotifier){var contexts=this.contexts,buffer=[],subscription=new Subscription_1.Subscription,context={buffer:buffer,subscription:subscription};contexts.push(context);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);!innerSubscription||innerSubscription.closed?this.closeBuffer(context):(innerSubscription.context=context,this.add(innerSubscription),subscription.add(innerSubscription))},BufferToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../Subscription":410,"../util/subscribeToResult":733}],595:[function(require,module,exports){"use strict";function bufferWhen(closingSelector){return this.lift(new BufferWhenOperator(closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=require("../Subscription"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.bufferWhen=bufferWhen;var BufferWhenOperator=function(){function BufferWhenOperator(closingSelector){this.closingSelector=closingSelector}return BufferWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferWhenSubscriber(subscriber,this.closingSelector))},BufferWhenOperator}(),BufferWhenSubscriber=function(_super){function BufferWhenSubscriber(destination,closingSelector){_super.call(this,destination),this.closingSelector=closingSelector,this.subscribing=!1,this.openBuffer()}return __extends(BufferWhenSubscriber,_super),BufferWhenSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferWhenSubscriber.prototype._complete=function(){var buffer=this.buffer;buffer&&this.destination.next(buffer),_super.prototype._complete.call(this)},BufferWhenSubscriber.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},BufferWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openBuffer()},BufferWhenSubscriber.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},BufferWhenSubscriber.prototype.openBuffer=function(){var closingSubscription=this.closingSubscription;closingSubscription&&(this.remove(closingSubscription),closingSubscription.unsubscribe());var buffer=this.buffer;this.buffer&&this.destination.next(buffer),this.buffer=[];var closingNotifier=tryCatch_1.tryCatch(this.closingSelector)();closingNotifier===errorObject_1.errorObject?this.error(errorObject_1.errorObject.e):(closingSubscription=new Subscription_1.Subscription,this.closingSubscription=closingSubscription,this.add(closingSubscription),this.subscribing=!0,closingSubscription.add(subscribeToResult_1.subscribeToResult(this,closingNotifier)),this.subscribing=!1)},BufferWhenSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../Subscription":410,"../util/errorObject":722,"../util/subscribeToResult":733,"../util/tryCatch":735}],596:[function(require,module,exports){"use strict";function cache(bufferSize,windowTime,scheduler){void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY);var subject,outerSub,source=this,refs=0,getSubject=function(){return subject=new ReplaySubject_1.ReplaySubject(bufferSize,windowTime,scheduler)};return new Observable_1.Observable(function(observer){subject||(subject=getSubject(),outerSub=source.subscribe(function(value){return subject.next(value)},function(err){var s=subject;subject=null,s.error(err)},function(){return subject.complete()})),refs++,subject||(subject=getSubject());var innerSub=subject.subscribe(observer);return function(){refs--,innerSub&&innerSub.unsubscribe(),0===refs&&outerSub.unsubscribe()}})}var Observable_1=require("../Observable"),ReplaySubject_1=require("../ReplaySubject");exports.cache=cache},{"../Observable":401,"../ReplaySubject":404}],597:[function(require,module,exports){"use strict";function _catch(selector){var operator=new CatchOperator(selector),caught=this.lift(operator);return operator.caught=caught}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports._catch=_catch;var CatchOperator=function(){function CatchOperator(selector){this.selector=selector}return CatchOperator.prototype.call=function(subscriber,source){return source._subscribe(new CatchSubscriber(subscriber,this.selector,this.caught))},CatchOperator}(),CatchSubscriber=function(_super){function CatchSubscriber(destination,selector,caught){_super.call(this,destination),this.selector=selector,this.caught=caught}return __extends(CatchSubscriber,_super),CatchSubscriber.prototype.error=function(err){if(!this.isStopped){var result=void 0;try{result=this.selector(err,this.caught)}catch(err){return void this.destination.error(err)}this.unsubscribe(),this.destination.remove(this),subscribeToResult_1.subscribeToResult(this,result)}},CatchSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],598:[function(require,module,exports){"use strict";function combineAll(project){return this.lift(new combineLatest_1.CombineLatestOperator(project))}var combineLatest_1=require("./combineLatest");exports.combineAll=combineAll},{"./combineLatest":599}],599:[function(require,module,exports){"use strict";function combineLatest(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=null;return"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),observables.unshift(this),new ArrayObservable_1.ArrayObservable(observables).lift(new CombineLatestOperator(project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArrayObservable_1=require("../observable/ArrayObservable"),isArray_1=require("../util/isArray"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult"),none={};exports.combineLatest=combineLatest;var CombineLatestOperator=function(){function CombineLatestOperator(project){this.project=project}return CombineLatestOperator.prototype.call=function(subscriber,source){return source._subscribe(new CombineLatestSubscriber(subscriber,this.project))},CombineLatestOperator}();exports.CombineLatestOperator=CombineLatestOperator;var CombineLatestSubscriber=function(_super){function CombineLatestSubscriber(destination,project){_super.call(this,destination),this.project=project,this.active=0,this.values=[],this.observables=[]}return __extends(CombineLatestSubscriber,_super),CombineLatestSubscriber.prototype._next=function(observable){this.values.push(none),this.observables.push(observable)},CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{this.active=len,this.toRespond=len;for(var i=0;i<len;i++){var observable=observables[i];this.add(subscribeToResult_1.subscribeToResult(this,observable,observable,i))}}},CombineLatestSubscriber.prototype.notifyComplete=function(unused){0===(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var values=this.values,oldVal=values[outerIndex],toRespond=this.toRespond?oldVal===none?--this.toRespond:this.toRespond:0;values[outerIndex]=innerValue,0===toRespond&&(this.project?this._tryProject(values):this.destination.next(values.slice()))},CombineLatestSubscriber.prototype._tryProject=function(values){var result;try{result=this.project.apply(this,values)}catch(err){return void this.destination.error(err)}this.destination.next(result)},CombineLatestSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.CombineLatestSubscriber=CombineLatestSubscriber},{"../OuterSubscriber":403,"../observable/ArrayObservable":539,"../util/isArray":723,"../util/subscribeToResult":733}],600:[function(require,module,exports){"use strict";function concat(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return concatStatic.apply(void 0,[this].concat(observables))}function concatStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var scheduler=null,args=observables;return isScheduler_1.isScheduler(args[observables.length-1])&&(scheduler=args.pop()),new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new mergeAll_1.MergeAllOperator(1))}var isScheduler_1=require("../util/isScheduler"),ArrayObservable_1=require("../observable/ArrayObservable"),mergeAll_1=require("./mergeAll");exports.concat=concat,exports.concatStatic=concatStatic},{"../observable/ArrayObservable":539,"../util/isScheduler":729,"./mergeAll":636}],601:[function(require,module,exports){"use strict";function concatAll(){return this.lift(new mergeAll_1.MergeAllOperator(1))}var mergeAll_1=require("./mergeAll");exports.concatAll=concatAll},{"./mergeAll":636}],602:[function(require,module,exports){"use strict";function concatMap(project,resultSelector){return this.lift(new mergeMap_1.MergeMapOperator(project,resultSelector,1))}var mergeMap_1=require("./mergeMap");exports.concatMap=concatMap},{"./mergeMap":637}],603:[function(require,module,exports){"use strict";function concatMapTo(innerObservable,resultSelector){return this.lift(new mergeMapTo_1.MergeMapToOperator(innerObservable,resultSelector,1))}var mergeMapTo_1=require("./mergeMapTo");exports.concatMapTo=concatMapTo},{"./mergeMapTo":638}],604:[function(require,module,exports){"use strict";function count(predicate){return this.lift(new CountOperator(predicate,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.count=count;var CountOperator=function(){function CountOperator(predicate,source){this.predicate=predicate,this.source=source}return CountOperator.prototype.call=function(subscriber,source){return source._subscribe(new CountSubscriber(subscriber,this.predicate,this.source))},CountOperator}(),CountSubscriber=function(_super){function CountSubscriber(destination,predicate,source){_super.call(this,destination),this.predicate=predicate,this.source=source,this.count=0,this.index=0}return __extends(CountSubscriber,_super),CountSubscriber.prototype._next=function(value){this.predicate?this._tryPredicate(value):this.count++},CountSubscriber.prototype._tryPredicate=function(value){var result;try{result=this.predicate(value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result&&this.count++},CountSubscriber.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},CountSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],605:[function(require,module,exports){"use strict";function debounce(durationSelector){return this.lift(new DebounceOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.debounce=debounce;var DebounceOperator=function(){function DebounceOperator(durationSelector){this.durationSelector=durationSelector}return DebounceOperator.prototype.call=function(subscriber,source){return source._subscribe(new DebounceSubscriber(subscriber,this.durationSelector))},DebounceOperator}(),DebounceSubscriber=function(_super){function DebounceSubscriber(destination,durationSelector){_super.call(this,destination),this.durationSelector=durationSelector,this.hasValue=!1,this.durationSubscription=null}return __extends(DebounceSubscriber,_super),DebounceSubscriber.prototype._next=function(value){try{var result=this.durationSelector.call(this,value);result&&this._tryNext(value,result)}catch(err){this.destination.error(err)}},DebounceSubscriber.prototype._complete=function(){this.emitValue(),this.destination.complete()},DebounceSubscriber.prototype._tryNext=function(value,duration){var subscription=this.durationSubscription;this.value=value,this.hasValue=!0,subscription&&(subscription.unsubscribe(),this.remove(subscription)),subscription=subscribeToResult_1.subscribeToResult(this,duration),subscription.closed||this.add(this.durationSubscription=subscription)},DebounceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},DebounceSubscriber.prototype.notifyComplete=function(){this.emitValue()},DebounceSubscriber.prototype.emitValue=function(){if(this.hasValue){var value=this.value,subscription=this.durationSubscription;subscription&&(this.durationSubscription=null,subscription.unsubscribe(),this.remove(subscription)),this.value=null,this.hasValue=!1,_super.prototype._next.call(this,value)}},DebounceSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],606:[function(require,module,exports){"use strict";function debounceTime(dueTime,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new DebounceTimeOperator(dueTime,scheduler))}function dispatchNext(subscriber){subscriber.debouncedNext()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async");exports.debounceTime=debounceTime;var DebounceTimeOperator=function(){function DebounceTimeOperator(dueTime,scheduler){this.dueTime=dueTime,this.scheduler=scheduler}return DebounceTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new DebounceTimeSubscriber(subscriber,this.dueTime,this.scheduler))},DebounceTimeOperator}(),DebounceTimeSubscriber=function(_super){function DebounceTimeSubscriber(destination,dueTime,scheduler){_super.call(this,destination),this.dueTime=dueTime,this.scheduler=scheduler,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return __extends(DebounceTimeSubscriber,_super),DebounceTimeSubscriber.prototype._next=function(value){this.clearDebounce(),this.lastValue=value,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},DebounceTimeSubscriber.prototype.clearDebounce=function(){var debouncedSubscription=this.debouncedSubscription;null!==debouncedSubscription&&(this.remove(debouncedSubscription),debouncedSubscription.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701}],607:[function(require,module,exports){"use strict";function defaultIfEmpty(defaultValue){return void 0===defaultValue&&(defaultValue=null),this.lift(new DefaultIfEmptyOperator(defaultValue))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.defaultIfEmpty=defaultIfEmpty;var DefaultIfEmptyOperator=function(){function DefaultIfEmptyOperator(defaultValue){this.defaultValue=defaultValue}return DefaultIfEmptyOperator.prototype.call=function(subscriber,source){return source._subscribe(new DefaultIfEmptySubscriber(subscriber,this.defaultValue))},DefaultIfEmptyOperator}(),DefaultIfEmptySubscriber=function(_super){function DefaultIfEmptySubscriber(destination,defaultValue){_super.call(this,destination),this.defaultValue=defaultValue,this.isEmpty=!0}return __extends(DefaultIfEmptySubscriber,_super),DefaultIfEmptySubscriber.prototype._next=function(value){this.isEmpty=!1,this.destination.next(value)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],608:[function(require,module,exports){"use strict";function delay(delay,scheduler){void 0===scheduler&&(scheduler=async_1.async);var absoluteDelay=isDate_1.isDate(delay),delayFor=absoluteDelay?+delay-scheduler.now():Math.abs(delay);return this.lift(new DelayOperator(delayFor,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=require("../scheduler/async"),isDate_1=require("../util/isDate"),Subscriber_1=require("../Subscriber"),Notification_1=require("../Notification");exports.delay=delay;var DelayOperator=function(){function DelayOperator(delay,scheduler){this.delay=delay,this.scheduler=scheduler}return DelayOperator.prototype.call=function(subscriber,source){return source._subscribe(new DelaySubscriber(subscriber,this.delay,this.scheduler))},DelayOperator}(),DelaySubscriber=function(_super){function DelaySubscriber(destination,delay,scheduler){_super.call(this,destination),this.delay=delay,this.scheduler=scheduler,this.queue=[],this.active=!1,this.errored=!1}return __extends(DelaySubscriber,_super),DelaySubscriber.dispatch=function(state){for(var source=state.source,queue=source.queue,scheduler=state.scheduler,destination=state.destination;queue.length>0&&queue[0].time-scheduler.now()<=0;)queue.shift().notification.observe(destination);if(queue.length>0){var delay_1=Math.max(0,queue[0].time-scheduler.now());this.schedule(state,delay_1)}else source.active=!1},DelaySubscriber.prototype._schedule=function(scheduler){this.active=!0,this.add(scheduler.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:scheduler}))},DelaySubscriber.prototype.scheduleNotification=function(notification){if(this.errored!==!0){var scheduler=this.scheduler,message=new DelayMessage(scheduler.now()+this.delay,notification);this.queue.push(message),this.active===!1&&this._schedule(scheduler)}},DelaySubscriber.prototype._next=function(value){this.scheduleNotification(Notification_1.Notification.createNext(value))},DelaySubscriber.prototype._error=function(err){this.errored=!0,this.queue=[],this.destination.error(err)},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(Notification_1.Notification.createComplete())},DelaySubscriber}(Subscriber_1.Subscriber),DelayMessage=function(){function DelayMessage(time,notification){this.time=time,this.notification=notification}return DelayMessage}()},{"../Notification":400,"../Subscriber":409,"../scheduler/async":701,"../util/isDate":724}],609:[function(require,module,exports){"use strict";function delayWhen(delayDurationSelector,subscriptionDelay){return subscriptionDelay?new SubscriptionDelayObservable(this,subscriptionDelay).lift(new DelayWhenOperator(delayDurationSelector)):this.lift(new DelayWhenOperator(delayDurationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),Observable_1=require("../Observable"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.delayWhen=delayWhen;var DelayWhenOperator=function(){function DelayWhenOperator(delayDurationSelector){this.delayDurationSelector=delayDurationSelector}return DelayWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new DelayWhenSubscriber(subscriber,this.delayDurationSelector))},DelayWhenOperator}(),DelayWhenSubscriber=function(_super){function DelayWhenSubscriber(destination,delayDurationSelector){_super.call(this,destination),this.delayDurationSelector=delayDurationSelector,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return __extends(DelayWhenSubscriber,_super),DelayWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(outerValue),this.removeSubscription(innerSub),this.tryComplete()},DelayWhenSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},DelayWhenSubscriber.prototype.notifyComplete=function(innerSub){var value=this.removeSubscription(innerSub);value&&this.destination.next(value),this.tryComplete()},DelayWhenSubscriber.prototype._next=function(value){try{var delayNotifier=this.delayDurationSelector(value);delayNotifier&&this.tryDelay(delayNotifier,value)}catch(err){this.destination.error(err)}},DelayWhenSubscriber.prototype._complete=function(){this.completed=!0,this.tryComplete()},DelayWhenSubscriber.prototype.removeSubscription=function(subscription){subscription.unsubscribe();var subscriptionIdx=this.delayNotifierSubscriptions.indexOf(subscription),value=null;return subscriptionIdx!==-1&&(value=this.values[subscriptionIdx],this.delayNotifierSubscriptions.splice(subscriptionIdx,1),this.values.splice(subscriptionIdx,1)),value},DelayWhenSubscriber.prototype.tryDelay=function(delayNotifier,value){var notifierSubscription=subscribeToResult_1.subscribeToResult(this,delayNotifier,value);this.add(notifierSubscription),this.delayNotifierSubscriptions.push(notifierSubscription),this.values.push(value)},DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},DelayWhenSubscriber}(OuterSubscriber_1.OuterSubscriber),SubscriptionDelayObservable=function(_super){function SubscriptionDelayObservable(source,subscriptionDelay){_super.call(this),this.source=source,this.subscriptionDelay=subscriptionDelay}return __extends(SubscriptionDelayObservable,_super),SubscriptionDelayObservable.prototype._subscribe=function(subscriber){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber,this.source))},SubscriptionDelayObservable}(Observable_1.Observable),SubscriptionDelaySubscriber=function(_super){function SubscriptionDelaySubscriber(parent,source){_super.call(this),this.parent=parent,this.source=source,this.sourceSubscribed=!1}return __extends(SubscriptionDelaySubscriber,_super),SubscriptionDelaySubscriber.prototype._next=function(unused){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(err){this.unsubscribe(),this.parent.error(err)},SubscriptionDelaySubscriber.prototype._complete=function(){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(Subscriber_1.Subscriber)},{"../Observable":401,"../OuterSubscriber":403,"../Subscriber":409,"../util/subscribeToResult":733}],610:[function(require,module,exports){"use strict";function dematerialize(){return this.lift(new DeMaterializeOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.dematerialize=dematerialize;var DeMaterializeOperator=function(){function DeMaterializeOperator(){}return DeMaterializeOperator.prototype.call=function(subscriber,source){return source._subscribe(new DeMaterializeSubscriber(subscriber))},DeMaterializeOperator}(),DeMaterializeSubscriber=function(_super){function DeMaterializeSubscriber(destination){_super.call(this,destination)}return __extends(DeMaterializeSubscriber,_super),DeMaterializeSubscriber.prototype._next=function(value){value.observe(this.destination)},DeMaterializeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],611:[function(require,module,exports){"use strict";function distinct(compare,flushes){return this.lift(new DistinctOperator(compare,flushes))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.distinct=distinct;var DistinctOperator=function(){function DistinctOperator(compare,flushes){this.compare=compare,this.flushes=flushes}return DistinctOperator.prototype.call=function(subscriber,source){return source._subscribe(new DistinctSubscriber(subscriber,this.compare,this.flushes))},DistinctOperator}(),DistinctSubscriber=function(_super){function DistinctSubscriber(destination,compare,flushes){_super.call(this,destination),this.values=[],"function"==typeof compare&&(this.compare=compare),flushes&&this.add(subscribeToResult_1.subscribeToResult(this,flushes))}return __extends(DistinctSubscriber,_super),DistinctSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values.length=0},DistinctSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},DistinctSubscriber.prototype._next=function(value){var found=!1,values=this.values,len=values.length;try{for(var i=0;i<len;i++)if(this.compare(values[i],value))return void(found=!0)}catch(err){return void this.destination.error(err)}this.values.push(value),this.destination.next(value)},DistinctSubscriber.prototype.compare=function(x,y){return x===y},DistinctSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.DistinctSubscriber=DistinctSubscriber},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],612:[function(require,module,exports){"use strict";function distinctKey(key,compare,flushes){return distinct_1.distinct.call(this,function(x,y){return compare?compare(x[key],y[key]):x[key]===y[key]},flushes)}var distinct_1=require("./distinct");exports.distinctKey=distinctKey},{"./distinct":611}],613:[function(require,module,exports){"use strict";function distinctUntilChanged(compare,keySelector){return this.lift(new DistinctUntilChangedOperator(compare,keySelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject");exports.distinctUntilChanged=distinctUntilChanged;var DistinctUntilChangedOperator=function(){function DistinctUntilChangedOperator(compare,keySelector){this.compare=compare,this.keySelector=keySelector}return DistinctUntilChangedOperator.prototype.call=function(subscriber,source){return source._subscribe(new DistinctUntilChangedSubscriber(subscriber,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),DistinctUntilChangedSubscriber=function(_super){function DistinctUntilChangedSubscriber(destination,compare,keySelector){_super.call(this,destination),this.keySelector=keySelector,this.hasKey=!1,"function"==typeof compare&&(this.compare=compare)}return __extends(DistinctUntilChangedSubscriber,_super),DistinctUntilChangedSubscriber.prototype.compare=function(x,y){return x===y},DistinctUntilChangedSubscriber.prototype._next=function(value){var keySelector=this.keySelector,key=value;if(keySelector&&(key=tryCatch_1.tryCatch(this.keySelector)(value),key===errorObject_1.errorObject))return this.destination.error(errorObject_1.errorObject.e);var result=!1;if(this.hasKey){if(result=tryCatch_1.tryCatch(this.compare)(this.key,key),result===errorObject_1.errorObject)return this.destination.error(errorObject_1.errorObject.e)}else this.hasKey=!0;Boolean(result)===!1&&(this.key=key,this.destination.next(value))},DistinctUntilChangedSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../util/errorObject":722,"../util/tryCatch":735}],614:[function(require,module,exports){"use strict";function distinctUntilKeyChanged(key,compare){return distinctUntilChanged_1.distinctUntilChanged.call(this,function(x,y){return compare?compare(x[key],y[key]):x[key]===y[key]})}var distinctUntilChanged_1=require("./distinctUntilChanged");exports.distinctUntilKeyChanged=distinctUntilKeyChanged},{"./distinctUntilChanged":613}],615:[function(require,module,exports){"use strict";function _do(nextOrObserver,error,complete){return this.lift(new DoOperator(nextOrObserver,error,complete))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports._do=_do;var DoOperator=function(){function DoOperator(nextOrObserver,error,complete){this.nextOrObserver=nextOrObserver,this.error=error,this.complete=complete}return DoOperator.prototype.call=function(subscriber,source){return source._subscribe(new DoSubscriber(subscriber,this.nextOrObserver,this.error,this.complete))},DoOperator}(),DoSubscriber=function(_super){function DoSubscriber(destination,nextOrObserver,error,complete){_super.call(this,destination);var safeSubscriber=new Subscriber_1.Subscriber(nextOrObserver,error,complete);safeSubscriber.syncErrorThrowable=!0,this.add(safeSubscriber),this.safeSubscriber=safeSubscriber}return __extends(DoSubscriber,_super),DoSubscriber.prototype._next=function(value){var safeSubscriber=this.safeSubscriber;safeSubscriber.next(value),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.next(value)},DoSubscriber.prototype._error=function(err){var safeSubscriber=this.safeSubscriber;safeSubscriber.error(err),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.error(err)},DoSubscriber.prototype._complete=function(){var safeSubscriber=this.safeSubscriber;safeSubscriber.complete(),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.complete()},DoSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],616:[function(require,module,exports){"use strict";function elementAt(index,defaultValue){return this.lift(new ElementAtOperator(index,defaultValue))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError");exports.elementAt=elementAt;var ElementAtOperator=function(){function ElementAtOperator(index,defaultValue){if(this.index=index,this.defaultValue=defaultValue,index<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return ElementAtOperator.prototype.call=function(subscriber,source){return source._subscribe(new ElementAtSubscriber(subscriber,this.index,this.defaultValue))},ElementAtOperator}(),ElementAtSubscriber=function(_super){function ElementAtSubscriber(destination,index,defaultValue){_super.call(this,destination),this.index=index,this.defaultValue=defaultValue}return __extends(ElementAtSubscriber,_super),ElementAtSubscriber.prototype._next=function(x){0===this.index--&&(this.destination.next(x),this.destination.complete())},ElementAtSubscriber.prototype._complete=function(){var destination=this.destination;this.index>=0&&("undefined"!=typeof this.defaultValue?destination.next(this.defaultValue):destination.error(new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError)),destination.complete()},ElementAtSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../util/ArgumentOutOfRangeError":712}],617:[function(require,module,exports){"use strict";function every(predicate,thisArg){return this.lift(new EveryOperator(predicate,thisArg,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.every=every;var EveryOperator=function(){function EveryOperator(predicate,thisArg,source){this.predicate=predicate,this.thisArg=thisArg,this.source=source}return EveryOperator.prototype.call=function(observer,source){return source._subscribe(new EverySubscriber(observer,this.predicate,this.thisArg,this.source))},EveryOperator}(),EverySubscriber=function(_super){function EverySubscriber(destination,predicate,thisArg,source){_super.call(this,destination),this.predicate=predicate,this.thisArg=thisArg,this.source=source,this.index=0,this.thisArg=thisArg||this}return __extends(EverySubscriber,_super),EverySubscriber.prototype.notifyComplete=function(everyValueMatch){this.destination.next(everyValueMatch),this.destination.complete()},EverySubscriber.prototype._next=function(value){var result=!1;try{result=this.predicate.call(this.thisArg,value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result||this.notifyComplete(!1)},EverySubscriber.prototype._complete=function(){this.notifyComplete(!0)},EverySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],618:[function(require,module,exports){"use strict";function exhaust(){return this.lift(new SwitchFirstOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.exhaust=exhaust;var SwitchFirstOperator=function(){function SwitchFirstOperator(){}return SwitchFirstOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchFirstSubscriber(subscriber))},SwitchFirstOperator}(),SwitchFirstSubscriber=function(_super){function SwitchFirstSubscriber(destination){_super.call(this,destination),this.hasCompleted=!1,this.hasSubscription=!1}return __extends(SwitchFirstSubscriber,_super),SwitchFirstSubscriber.prototype._next=function(value){this.hasSubscription||(this.hasSubscription=!0,this.add(subscribeToResult_1.subscribeToResult(this,value)))},SwitchFirstSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},SwitchFirstSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},SwitchFirstSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],619:[function(require,module,exports){"use strict";function exhaustMap(project,resultSelector){return this.lift(new SwitchFirstMapOperator(project,resultSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.exhaustMap=exhaustMap;var SwitchFirstMapOperator=function(){function SwitchFirstMapOperator(project,resultSelector){this.project=project,this.resultSelector=resultSelector}return SwitchFirstMapOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchFirstMapSubscriber(subscriber,this.project,this.resultSelector))},SwitchFirstMapOperator}(),SwitchFirstMapSubscriber=function(_super){function SwitchFirstMapSubscriber(destination,project,resultSelector){_super.call(this,destination),this.project=project,this.resultSelector=resultSelector,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return __extends(SwitchFirstMapSubscriber,_super),SwitchFirstMapSubscriber.prototype._next=function(value){this.hasSubscription||this.tryNext(value)},SwitchFirstMapSubscriber.prototype.tryNext=function(value){var index=this.index++,destination=this.destination;try{var result=this.project(value,index);this.hasSubscription=!0,this.add(subscribeToResult_1.subscribeToResult(this,result,value,index))}catch(err){destination.error(err)}},SwitchFirstMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},SwitchFirstMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;resultSelector?this.trySelectResult(outerValue,innerValue,outerIndex,innerIndex):destination.next(innerValue)},SwitchFirstMapSubscriber.prototype.trySelectResult=function(outerValue,innerValue,outerIndex,innerIndex){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;try{var result=resultSelector(outerValue,innerValue,outerIndex,innerIndex);destination.next(result)}catch(err){destination.error(err)}},SwitchFirstMapSubscriber.prototype.notifyError=function(err){this.destination.error(err)},SwitchFirstMapSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},SwitchFirstMapSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],620:[function(require,module,exports){
"use strict";function expand(project,concurrent,scheduler){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),void 0===scheduler&&(scheduler=void 0),concurrent=(concurrent||0)<1?Number.POSITIVE_INFINITY:concurrent,this.lift(new ExpandOperator(project,concurrent,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.expand=expand;var ExpandOperator=function(){function ExpandOperator(project,concurrent,scheduler){this.project=project,this.concurrent=concurrent,this.scheduler=scheduler}return ExpandOperator.prototype.call=function(subscriber,source){return source._subscribe(new ExpandSubscriber(subscriber,this.project,this.concurrent,this.scheduler))},ExpandOperator}();exports.ExpandOperator=ExpandOperator;var ExpandSubscriber=function(_super){function ExpandSubscriber(destination,project,concurrent,scheduler){_super.call(this,destination),this.project=project,this.concurrent=concurrent,this.scheduler=scheduler,this.index=0,this.active=0,this.hasCompleted=!1,concurrent<Number.POSITIVE_INFINITY&&(this.buffer=[])}return __extends(ExpandSubscriber,_super),ExpandSubscriber.dispatch=function(arg){var subscriber=arg.subscriber,result=arg.result,value=arg.value,index=arg.index;subscriber.subscribeToProjection(result,value,index)},ExpandSubscriber.prototype._next=function(value){var destination=this.destination;if(destination.closed)return void this._complete();var index=this.index++;if(this.active<this.concurrent){destination.next(value);var result=tryCatch_1.tryCatch(this.project)(value,index);if(result===errorObject_1.errorObject)destination.error(errorObject_1.errorObject.e);else if(this.scheduler){var state={subscriber:this,result:result,value:value,index:index};this.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,state))}else this.subscribeToProjection(result,value,index)}else this.buffer.push(value)},ExpandSubscriber.prototype.subscribeToProjection=function(result,value,index){this.active++,this.add(subscribeToResult_1.subscribeToResult(this,result,value,index))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this._next(innerValue)},ExpandSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer&&buffer.length>0&&this._next(buffer.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.ExpandSubscriber=ExpandSubscriber},{"../OuterSubscriber":403,"../util/errorObject":722,"../util/subscribeToResult":733,"../util/tryCatch":735}],621:[function(require,module,exports){"use strict";function filter(predicate,thisArg){return this.lift(new FilterOperator(predicate,thisArg))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.filter=filter;var FilterOperator=function(){function FilterOperator(predicate,thisArg){this.predicate=predicate,this.thisArg=thisArg}return FilterOperator.prototype.call=function(subscriber,source){return source._subscribe(new FilterSubscriber(subscriber,this.predicate,this.thisArg))},FilterOperator}(),FilterSubscriber=function(_super){function FilterSubscriber(destination,predicate,thisArg){_super.call(this,destination),this.predicate=predicate,this.thisArg=thisArg,this.count=0,this.predicate=predicate}return __extends(FilterSubscriber,_super),FilterSubscriber.prototype._next=function(value){var result;try{result=this.predicate.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}result&&this.destination.next(value)},FilterSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],622:[function(require,module,exports){"use strict";function _finally(callback){return this.lift(new FinallyOperator(callback))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),Subscription_1=require("../Subscription");exports._finally=_finally;var FinallyOperator=function(){function FinallyOperator(callback){this.callback=callback}return FinallyOperator.prototype.call=function(subscriber,source){return source._subscribe(new FinallySubscriber(subscriber,this.callback))},FinallyOperator}(),FinallySubscriber=function(_super){function FinallySubscriber(destination,callback){_super.call(this,destination),this.add(new Subscription_1.Subscription(callback))}return __extends(FinallySubscriber,_super),FinallySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../Subscription":410}],623:[function(require,module,exports){"use strict";function find(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("predicate is not a function");return this.lift(new FindValueOperator(predicate,this,(!1),thisArg))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.find=find;var FindValueOperator=function(){function FindValueOperator(predicate,source,yieldIndex,thisArg){this.predicate=predicate,this.source=source,this.yieldIndex=yieldIndex,this.thisArg=thisArg}return FindValueOperator.prototype.call=function(observer,source){return source._subscribe(new FindValueSubscriber(observer,this.predicate,this.source,this.yieldIndex,this.thisArg))},FindValueOperator}();exports.FindValueOperator=FindValueOperator;var FindValueSubscriber=function(_super){function FindValueSubscriber(destination,predicate,source,yieldIndex,thisArg){_super.call(this,destination),this.predicate=predicate,this.source=source,this.yieldIndex=yieldIndex,this.thisArg=thisArg,this.index=0}return __extends(FindValueSubscriber,_super),FindValueSubscriber.prototype.notifyComplete=function(value){var destination=this.destination;destination.next(value),destination.complete()},FindValueSubscriber.prototype._next=function(value){var _a=this,predicate=_a.predicate,thisArg=_a.thisArg,index=this.index++;try{var result=predicate.call(thisArg||this,value,index,this.source);result&&this.notifyComplete(this.yieldIndex?index:value)}catch(err){this.destination.error(err)}},FindValueSubscriber.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},FindValueSubscriber}(Subscriber_1.Subscriber);exports.FindValueSubscriber=FindValueSubscriber},{"../Subscriber":409}],624:[function(require,module,exports){"use strict";function findIndex(predicate,thisArg){return this.lift(new find_1.FindValueOperator(predicate,this,(!0),thisArg))}var find_1=require("./find");exports.findIndex=findIndex},{"./find":623}],625:[function(require,module,exports){"use strict";function first(predicate,resultSelector,defaultValue){return this.lift(new FirstOperator(predicate,resultSelector,defaultValue,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),EmptyError_1=require("../util/EmptyError");exports.first=first;var FirstOperator=function(){function FirstOperator(predicate,resultSelector,defaultValue,source){this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source}return FirstOperator.prototype.call=function(observer,source){return source._subscribe(new FirstSubscriber(observer,this.predicate,this.resultSelector,this.defaultValue,this.source))},FirstOperator}(),FirstSubscriber=function(_super){function FirstSubscriber(destination,predicate,resultSelector,defaultValue,source){_super.call(this,destination),this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source,this.index=0,this.hasCompleted=!1}return __extends(FirstSubscriber,_super),FirstSubscriber.prototype._next=function(value){var index=this.index++;this.predicate?this._tryPredicate(value,index):this._emit(value,index)},FirstSubscriber.prototype._tryPredicate=function(value,index){var result;try{result=this.predicate(value,index,this.source)}catch(err){return void this.destination.error(err)}result&&this._emit(value,index)},FirstSubscriber.prototype._emit=function(value,index){return this.resultSelector?void this._tryResultSelector(value,index):void this._emitFinal(value)},FirstSubscriber.prototype._tryResultSelector=function(value,index){var result;try{result=this.resultSelector(value,index)}catch(err){return void this.destination.error(err)}this._emitFinal(result)},FirstSubscriber.prototype._emitFinal=function(value){var destination=this.destination;destination.next(value),destination.complete(),this.hasCompleted=!0},FirstSubscriber.prototype._complete=function(){var destination=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||destination.error(new EmptyError_1.EmptyError):(destination.next(this.defaultValue),destination.complete())},FirstSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../util/EmptyError":713}],626:[function(require,module,exports){"use strict";function groupBy(keySelector,elementSelector,durationSelector){return this.lift(new GroupByOperator(this,keySelector,elementSelector,durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),Subscription_1=require("../Subscription"),Observable_1=require("../Observable"),Subject_1=require("../Subject"),Map_1=require("../util/Map"),FastMap_1=require("../util/FastMap");exports.groupBy=groupBy;var GroupByOperator=function(){function GroupByOperator(source,keySelector,elementSelector,durationSelector){this.source=source,this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector}return GroupByOperator.prototype.call=function(subscriber,source){return source._subscribe(new GroupBySubscriber(subscriber,this.keySelector,this.elementSelector,this.durationSelector))},GroupByOperator}(),GroupBySubscriber=function(_super){function GroupBySubscriber(destination,keySelector,elementSelector,durationSelector){_super.call(this,destination),this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return __extends(GroupBySubscriber,_super),GroupBySubscriber.prototype._next=function(value){var key;try{key=this.keySelector(value)}catch(err){return void this.error(err)}this._group(value,key)},GroupBySubscriber.prototype._group=function(value,key){var groups=this.groups;groups||(groups=this.groups="string"==typeof key?new FastMap_1.FastMap:new Map_1.Map);var element,group=groups.get(key);if(this.elementSelector)try{element=this.elementSelector(value)}catch(err){this.error(err)}else element=value;if(!group){groups.set(key,group=new Subject_1.Subject);var groupedObservable=new GroupedObservable(key,group,this);if(this.destination.next(groupedObservable),this.durationSelector){var duration=void 0;try{duration=this.durationSelector(new GroupedObservable(key,group))}catch(err){return void this.error(err)}this.add(duration.subscribe(new GroupDurationSubscriber(key,group,this)))}}group.closed||group.next(element)},GroupBySubscriber.prototype._error=function(err){var groups=this.groups;groups&&(groups.forEach(function(group,key){group.error(err)}),groups.clear()),this.destination.error(err)},GroupBySubscriber.prototype._complete=function(){var groups=this.groups;groups&&(groups.forEach(function(group,key){group.complete()}),groups.clear()),this.destination.complete()},GroupBySubscriber.prototype.removeGroup=function(key){this.groups.delete(key)},GroupBySubscriber.prototype.unsubscribe=function(){this.closed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&_super.prototype.unsubscribe.call(this))},GroupBySubscriber}(Subscriber_1.Subscriber),GroupDurationSubscriber=function(_super){function GroupDurationSubscriber(key,group,parent){_super.call(this),this.key=key,this.group=group,this.parent=parent}return __extends(GroupDurationSubscriber,_super),GroupDurationSubscriber.prototype._next=function(value){this._complete()},GroupDurationSubscriber.prototype._error=function(err){var group=this.group;group.closed||group.error(err),this.parent.removeGroup(this.key)},GroupDurationSubscriber.prototype._complete=function(){var group=this.group;group.closed||group.complete(),this.parent.removeGroup(this.key)},GroupDurationSubscriber}(Subscriber_1.Subscriber),GroupedObservable=function(_super){function GroupedObservable(key,groupSubject,refCountSubscription){_super.call(this),this.key=key,this.groupSubject=groupSubject,this.refCountSubscription=refCountSubscription}return __extends(GroupedObservable,_super),GroupedObservable.prototype._subscribe=function(subscriber){var subscription=new Subscription_1.Subscription,_a=this,refCountSubscription=_a.refCountSubscription,groupSubject=_a.groupSubject;return refCountSubscription&&!refCountSubscription.closed&&subscription.add(new InnerRefCountSubscription(refCountSubscription)),subscription.add(groupSubject.subscribe(subscriber)),subscription},GroupedObservable}(Observable_1.Observable);exports.GroupedObservable=GroupedObservable;var InnerRefCountSubscription=function(_super){function InnerRefCountSubscription(parent){_super.call(this),this.parent=parent,parent.count++}return __extends(InnerRefCountSubscription,_super),InnerRefCountSubscription.prototype.unsubscribe=function(){var parent=this.parent;parent.closed||this.closed||(_super.prototype.unsubscribe.call(this),parent.count-=1,0===parent.count&&parent.attemptedToUnsubscribe&&parent.unsubscribe())},InnerRefCountSubscription}(Subscription_1.Subscription)},{"../Observable":401,"../Subject":407,"../Subscriber":409,"../Subscription":410,"../util/FastMap":714,"../util/Map":716}],627:[function(require,module,exports){"use strict";function ignoreElements(){return this.lift(new IgnoreElementsOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),noop_1=require("../util/noop");exports.ignoreElements=ignoreElements;var IgnoreElementsOperator=function(){function IgnoreElementsOperator(){}return IgnoreElementsOperator.prototype.call=function(subscriber,source){return source._subscribe(new IgnoreElementsSubscriber(subscriber))},IgnoreElementsOperator}(),IgnoreElementsSubscriber=function(_super){function IgnoreElementsSubscriber(){_super.apply(this,arguments)}return __extends(IgnoreElementsSubscriber,_super),IgnoreElementsSubscriber.prototype._next=function(unused){noop_1.noop()},IgnoreElementsSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../util/noop":730}],628:[function(require,module,exports){"use strict";function isEmpty(){return this.lift(new IsEmptyOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.isEmpty=isEmpty;var IsEmptyOperator=function(){function IsEmptyOperator(){}return IsEmptyOperator.prototype.call=function(observer,source){return source._subscribe(new IsEmptySubscriber(observer))},IsEmptyOperator}(),IsEmptySubscriber=function(_super){function IsEmptySubscriber(destination){_super.call(this,destination)}return __extends(IsEmptySubscriber,_super),IsEmptySubscriber.prototype.notifyComplete=function(isEmpty){var destination=this.destination;destination.next(isEmpty),destination.complete()},IsEmptySubscriber.prototype._next=function(value){this.notifyComplete(!1)},IsEmptySubscriber.prototype._complete=function(){this.notifyComplete(!0)},IsEmptySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],629:[function(require,module,exports){"use strict";function last(predicate,resultSelector,defaultValue){return this.lift(new LastOperator(predicate,resultSelector,defaultValue,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),EmptyError_1=require("../util/EmptyError");exports.last=last;var LastOperator=function(){function LastOperator(predicate,resultSelector,defaultValue,source){this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source}return LastOperator.prototype.call=function(observer,source){return source._subscribe(new LastSubscriber(observer,this.predicate,this.resultSelector,this.defaultValue,this.source))},LastOperator}(),LastSubscriber=function(_super){function LastSubscriber(destination,predicate,resultSelector,defaultValue,source){_super.call(this,destination),this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source,this.hasValue=!1,this.index=0,"undefined"!=typeof defaultValue&&(this.lastValue=defaultValue,this.hasValue=!0)}return __extends(LastSubscriber,_super),LastSubscriber.prototype._next=function(value){var index=this.index++;if(this.predicate)this._tryPredicate(value,index);else{if(this.resultSelector)return void this._tryResultSelector(value,index);this.lastValue=value,this.hasValue=!0}},LastSubscriber.prototype._tryPredicate=function(value,index){var result;try{result=this.predicate(value,index,this.source)}catch(err){return void this.destination.error(err)}if(result){if(this.resultSelector)return void this._tryResultSelector(value,index);this.lastValue=value,this.hasValue=!0}},LastSubscriber.prototype._tryResultSelector=function(value,index){var result;try{result=this.resultSelector(value,index)}catch(err){return void this.destination.error(err)}this.lastValue=result,this.hasValue=!0},LastSubscriber.prototype._complete=function(){var destination=this.destination;this.hasValue?(destination.next(this.lastValue),destination.complete()):destination.error(new EmptyError_1.EmptyError)},LastSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../util/EmptyError":713}],630:[function(require,module,exports){"use strict";function letProto(func){return func(this)}exports.letProto=letProto},{}],631:[function(require,module,exports){"use strict";function map(project,thisArg){if("function"!=typeof project)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new MapOperator(project,thisArg))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.map=map;var MapOperator=function(){function MapOperator(project,thisArg){this.project=project,this.thisArg=thisArg}return MapOperator.prototype.call=function(subscriber,source){return source._subscribe(new MapSubscriber(subscriber,this.project,this.thisArg))},MapOperator}(),MapSubscriber=function(_super){function MapSubscriber(destination,project,thisArg){_super.call(this,destination),this.project=project,this.count=0,this.thisArg=thisArg||this}return __extends(MapSubscriber,_super),MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MapSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],632:[function(require,module,exports){"use strict";function mapTo(value){return this.lift(new MapToOperator(value))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.mapTo=mapTo;var MapToOperator=function(){function MapToOperator(value){this.value=value}return MapToOperator.prototype.call=function(subscriber,source){return source._subscribe(new MapToSubscriber(subscriber,this.value))},MapToOperator}(),MapToSubscriber=function(_super){function MapToSubscriber(destination,value){_super.call(this,destination),this.value=value}return __extends(MapToSubscriber,_super),MapToSubscriber.prototype._next=function(x){this.destination.next(this.value)},MapToSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],633:[function(require,module,exports){"use strict";function materialize(){return this.lift(new MaterializeOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),Notification_1=require("../Notification");exports.materialize=materialize;var MaterializeOperator=function(){function MaterializeOperator(){}return MaterializeOperator.prototype.call=function(subscriber,source){return source._subscribe(new MaterializeSubscriber(subscriber))},MaterializeOperator}(),MaterializeSubscriber=function(_super){function MaterializeSubscriber(destination){_super.call(this,destination)}return __extends(MaterializeSubscriber,_super),MaterializeSubscriber.prototype._next=function(value){this.destination.next(Notification_1.Notification.createNext(value))},MaterializeSubscriber.prototype._error=function(err){var destination=this.destination;destination.next(Notification_1.Notification.createError(err)),destination.complete()},MaterializeSubscriber.prototype._complete=function(){var destination=this.destination;destination.next(Notification_1.Notification.createComplete()),destination.complete()},MaterializeSubscriber}(Subscriber_1.Subscriber)},{"../Notification":400,"../Subscriber":409}],634:[function(require,module,exports){"use strict";function max(comparer){var max="function"==typeof comparer?comparer:function(x,y){return x>y?x:y};return this.lift(new reduce_1.ReduceOperator(max))}var reduce_1=require("./reduce");exports.max=max},{"./reduce":652}],635:[function(require,module,exports){"use strict";function merge(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return observables.unshift(this),mergeStatic.apply(this,observables)}function mergeStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var concurrent=Number.POSITIVE_INFINITY,scheduler=null,last=observables[observables.length-1];return isScheduler_1.isScheduler(last)?(scheduler=observables.pop(),observables.length>1&&"number"==typeof observables[observables.length-1]&&(concurrent=observables.pop())):"number"==typeof last&&(concurrent=observables.pop()),1===observables.length?observables[0]:new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new mergeAll_1.MergeAllOperator(concurrent))}var ArrayObservable_1=require("../observable/ArrayObservable"),mergeAll_1=require("./mergeAll"),isScheduler_1=require("../util/isScheduler");exports.merge=merge,exports.mergeStatic=mergeStatic},{"../observable/ArrayObservable":539,"../util/isScheduler":729,"./mergeAll":636}],636:[function(require,module,exports){"use strict";function mergeAll(concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.lift(new MergeAllOperator(concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.mergeAll=mergeAll;var MergeAllOperator=function(){function MergeAllOperator(concurrent){this.concurrent=concurrent}return MergeAllOperator.prototype.call=function(observer,source){return source._subscribe(new MergeAllSubscriber(observer,this.concurrent))},MergeAllOperator}();exports.MergeAllOperator=MergeAllOperator;var MergeAllSubscriber=function(_super){function MergeAllSubscriber(destination,concurrent){_super.call(this,destination),this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0}return __extends(MergeAllSubscriber,_super),MergeAllSubscriber.prototype._next=function(observable){this.active<this.concurrent?(this.active++,this.add(subscribeToResult_1.subscribeToResult(this,observable))):this.buffer.push(observable)},MergeAllSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeAllSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeAllSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeAllSubscriber=MergeAllSubscriber},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],637:[function(require,module,exports){"use strict";function mergeMap(project,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"number"==typeof resultSelector&&(concurrent=resultSelector,resultSelector=null),this.lift(new MergeMapOperator(project,resultSelector,concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber");exports.mergeMap=mergeMap;var MergeMapOperator=function(){function MergeMapOperator(project,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.project=project,this.resultSelector=resultSelector,this.concurrent=concurrent}return MergeMapOperator.prototype.call=function(observer,source){return source._subscribe(new MergeMapSubscriber(observer,this.project,this.resultSelector,this.concurrent))},MergeMapOperator}();exports.MergeMapOperator=MergeMapOperator;var MergeMapSubscriber=function(_super){function MergeMapSubscriber(destination,project,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),_super.call(this,destination),this.project=project,this.resultSelector=resultSelector,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends(MergeMapSubscriber,_super),MergeMapSubscriber.prototype._next=function(value){this.active<this.concurrent?this._tryNext(value):this.buffer.push(value)},MergeMapSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.active++,this._innerSub(result,value,index)},MergeMapSubscriber.prototype._innerSub=function(ish,value,index){this.add(subscribeToResult_1.subscribeToResult(this,ish,value,index))},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.resultSelector?this._notifyResultSelector(outerValue,innerValue,outerIndex,innerIndex):this.destination.next(innerValue)},MergeMapSubscriber.prototype._notifyResultSelector=function(outerValue,innerValue,outerIndex,innerIndex){var result;try{result=this.resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MergeMapSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeMapSubscriber=MergeMapSubscriber},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],638:[function(require,module,exports){"use strict";function mergeMapTo(innerObservable,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"number"==typeof resultSelector&&(concurrent=resultSelector,resultSelector=null),this.lift(new MergeMapToOperator(innerObservable,resultSelector,concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.mergeMapTo=mergeMapTo;var MergeMapToOperator=function(){function MergeMapToOperator(ish,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.ish=ish,this.resultSelector=resultSelector,this.concurrent=concurrent}return MergeMapToOperator.prototype.call=function(observer,source){return source._subscribe(new MergeMapToSubscriber(observer,this.ish,this.resultSelector,this.concurrent))},MergeMapToOperator}();exports.MergeMapToOperator=MergeMapToOperator;var MergeMapToSubscriber=function(_super){function MergeMapToSubscriber(destination,ish,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),_super.call(this,destination),this.ish=ish,this.resultSelector=resultSelector,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends(MergeMapToSubscriber,_super),MergeMapToSubscriber.prototype._next=function(value){if(this.active<this.concurrent){var resultSelector=this.resultSelector,index=this.index++,ish=this.ish,destination=this.destination;this.active++,this._innerSub(ish,destination,resultSelector,value,index)}else this.buffer.push(value)},MergeMapToSubscriber.prototype._innerSub=function(ish,destination,resultSelector,value,index){this.add(subscribeToResult_1.subscribeToResult(this,ish,value,index))},MergeMapToSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapToSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;resultSelector?this.trySelectResult(outerValue,innerValue,outerIndex,innerIndex):destination.next(innerValue)},MergeMapToSubscriber.prototype.trySelectResult=function(outerValue,innerValue,outerIndex,innerIndex){var result,_a=this,resultSelector=_a.resultSelector,destination=_a.destination;try{result=resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void destination.error(err)}destination.next(result)},MergeMapToSubscriber.prototype.notifyError=function(err){this.destination.error(err)},MergeMapToSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,
buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapToSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeMapToSubscriber=MergeMapToSubscriber},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],639:[function(require,module,exports){"use strict";function mergeScan(project,seed,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.lift(new MergeScanOperator(project,seed,concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber");exports.mergeScan=mergeScan;var MergeScanOperator=function(){function MergeScanOperator(project,seed,concurrent){this.project=project,this.seed=seed,this.concurrent=concurrent}return MergeScanOperator.prototype.call=function(subscriber,source){return source._subscribe(new MergeScanSubscriber(subscriber,this.project,this.seed,this.concurrent))},MergeScanOperator}();exports.MergeScanOperator=MergeScanOperator;var MergeScanSubscriber=function(_super){function MergeScanSubscriber(destination,project,acc,concurrent){_super.call(this,destination),this.project=project,this.acc=acc,this.concurrent=concurrent,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends(MergeScanSubscriber,_super),MergeScanSubscriber.prototype._next=function(value){if(this.active<this.concurrent){var index=this.index++,ish=tryCatch_1.tryCatch(this.project)(this.acc,value),destination=this.destination;ish===errorObject_1.errorObject?destination.error(errorObject_1.errorObject.e):(this.active++,this._innerSub(ish,value,index))}else this.buffer.push(value)},MergeScanSubscriber.prototype._innerSub=function(ish,value,index){this.add(subscribeToResult_1.subscribeToResult(this,ish,value,index))},MergeScanSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var destination=this.destination;this.acc=innerValue,this.hasValue=!0,destination.next(innerValue)},MergeScanSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeScanSubscriber=MergeScanSubscriber},{"../OuterSubscriber":403,"../util/errorObject":722,"../util/subscribeToResult":733,"../util/tryCatch":735}],640:[function(require,module,exports){"use strict";function min(comparer){var min="function"==typeof comparer?comparer:function(x,y){return x<y?x:y};return this.lift(new reduce_1.ReduceOperator(min))}var reduce_1=require("./reduce");exports.min=min},{"./reduce":652}],641:[function(require,module,exports){"use strict";function multicast(subjectOrSubjectFactory,selector){var subjectFactory;return subjectFactory="function"==typeof subjectOrSubjectFactory?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory},selector?new MulticastObservable_1.MulticastObservable(this,subjectFactory,selector):new ConnectableObservable_1.ConnectableObservable(this,subjectFactory)}var MulticastObservable_1=require("../observable/MulticastObservable"),ConnectableObservable_1=require("../observable/ConnectableObservable");exports.multicast=multicast},{"../observable/ConnectableObservable":542,"../observable/MulticastObservable":554}],642:[function(require,module,exports){"use strict";function observeOn(scheduler,delay){return void 0===delay&&(delay=0),this.lift(new ObserveOnOperator(scheduler,delay))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),Notification_1=require("../Notification");exports.observeOn=observeOn;var ObserveOnOperator=function(){function ObserveOnOperator(scheduler,delay){void 0===delay&&(delay=0),this.scheduler=scheduler,this.delay=delay}return ObserveOnOperator.prototype.call=function(subscriber,source){return source._subscribe(new ObserveOnSubscriber(subscriber,this.scheduler,this.delay))},ObserveOnOperator}();exports.ObserveOnOperator=ObserveOnOperator;var ObserveOnSubscriber=function(_super){function ObserveOnSubscriber(destination,scheduler,delay){void 0===delay&&(delay=0),_super.call(this,destination),this.scheduler=scheduler,this.delay=delay}return __extends(ObserveOnSubscriber,_super),ObserveOnSubscriber.dispatch=function(arg){var notification=arg.notification,destination=arg.destination;notification.observe(destination)},ObserveOnSubscriber.prototype.scheduleMessage=function(notification){this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))},ObserveOnSubscriber.prototype._next=function(value){this.scheduleMessage(Notification_1.Notification.createNext(value))},ObserveOnSubscriber.prototype._error=function(err){this.scheduleMessage(Notification_1.Notification.createError(err))},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(Notification_1.Notification.createComplete())},ObserveOnSubscriber}(Subscriber_1.Subscriber);exports.ObserveOnSubscriber=ObserveOnSubscriber;var ObserveOnMessage=function(){function ObserveOnMessage(notification,destination){this.notification=notification,this.destination=destination}return ObserveOnMessage}();exports.ObserveOnMessage=ObserveOnMessage},{"../Notification":400,"../Subscriber":409}],643:[function(require,module,exports){"use strict";function onErrorResumeNext(){for(var nextSources=[],_i=0;_i<arguments.length;_i++)nextSources[_i-0]=arguments[_i];return 1===nextSources.length&&isArray_1.isArray(nextSources[0])&&(nextSources=nextSources[0]),this.lift(new OnErrorResumeNextOperator(nextSources))}function onErrorResumeNextStatic(){for(var nextSources=[],_i=0;_i<arguments.length;_i++)nextSources[_i-0]=arguments[_i];var source=null;return 1===nextSources.length&&isArray_1.isArray(nextSources[0])&&(nextSources=nextSources[0]),source=nextSources.shift(),new FromObservable_1.FromObservable(source,null).lift(new OnErrorResumeNextOperator(nextSources))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},FromObservable_1=require("../observable/FromObservable"),isArray_1=require("../util/isArray"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.onErrorResumeNext=onErrorResumeNext,exports.onErrorResumeNextStatic=onErrorResumeNextStatic;var OnErrorResumeNextOperator=function(){function OnErrorResumeNextOperator(nextSources){this.nextSources=nextSources}return OnErrorResumeNextOperator.prototype.call=function(subscriber,source){return source._subscribe(new OnErrorResumeNextSubscriber(subscriber,this.nextSources))},OnErrorResumeNextOperator}(),OnErrorResumeNextSubscriber=function(_super){function OnErrorResumeNextSubscriber(destination,nextSources){_super.call(this,destination),this.destination=destination,this.nextSources=nextSources}return __extends(OnErrorResumeNextSubscriber,_super),OnErrorResumeNextSubscriber.prototype.notifyError=function(error,innerSub){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.notifyComplete=function(innerSub){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._error=function(err){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._complete=function(){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.subscribeToNextSource=function(){var next=this.nextSources.shift();next?this.add(subscribeToResult_1.subscribeToResult(this,next)):this.destination.complete()},OnErrorResumeNextSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../observable/FromObservable":549,"../util/isArray":723,"../util/subscribeToResult":733}],644:[function(require,module,exports){"use strict";function pairwise(){return this.lift(new PairwiseOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.pairwise=pairwise;var PairwiseOperator=function(){function PairwiseOperator(){}return PairwiseOperator.prototype.call=function(subscriber,source){return source._subscribe(new PairwiseSubscriber(subscriber))},PairwiseOperator}(),PairwiseSubscriber=function(_super){function PairwiseSubscriber(destination){_super.call(this,destination),this.hasPrev=!1}return __extends(PairwiseSubscriber,_super),PairwiseSubscriber.prototype._next=function(value){this.hasPrev?this.destination.next([this.prev,value]):this.hasPrev=!0,this.prev=value},PairwiseSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],645:[function(require,module,exports){"use strict";function partition(predicate,thisArg){return[filter_1.filter.call(this,predicate),filter_1.filter.call(this,not_1.not(predicate,thisArg))]}var not_1=require("../util/not"),filter_1=require("./filter");exports.partition=partition},{"../util/not":731,"./filter":621}],646:[function(require,module,exports){"use strict";function pluck(){for(var properties=[],_i=0;_i<arguments.length;_i++)properties[_i-0]=arguments[_i];var length=properties.length;if(0===length)throw new Error("list of properties cannot be empty.");return map_1.map.call(this,plucker(properties,length))}function plucker(props,length){var mapper=function(x){for(var currentProp=x,i=0;i<length;i++){var p=currentProp[props[i]];if("undefined"==typeof p)return;currentProp=p}return currentProp};return mapper}var map_1=require("./map");exports.pluck=pluck},{"./map":631}],647:[function(require,module,exports){"use strict";function publish(selector){return selector?multicast_1.multicast.call(this,function(){return new Subject_1.Subject},selector):multicast_1.multicast.call(this,new Subject_1.Subject)}var Subject_1=require("../Subject"),multicast_1=require("./multicast");exports.publish=publish},{"../Subject":407,"./multicast":641}],648:[function(require,module,exports){"use strict";function publishBehavior(value){return multicast_1.multicast.call(this,new BehaviorSubject_1.BehaviorSubject(value))}var BehaviorSubject_1=require("../BehaviorSubject"),multicast_1=require("./multicast");exports.publishBehavior=publishBehavior},{"../BehaviorSubject":398,"./multicast":641}],649:[function(require,module,exports){"use strict";function publishLast(){return multicast_1.multicast.call(this,new AsyncSubject_1.AsyncSubject)}var AsyncSubject_1=require("../AsyncSubject"),multicast_1=require("./multicast");exports.publishLast=publishLast},{"../AsyncSubject":397,"./multicast":641}],650:[function(require,module,exports){"use strict";function publishReplay(bufferSize,windowTime,scheduler){return void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),multicast_1.multicast.call(this,new ReplaySubject_1.ReplaySubject(bufferSize,windowTime,scheduler))}var ReplaySubject_1=require("../ReplaySubject"),multicast_1=require("./multicast");exports.publishReplay=publishReplay},{"../ReplaySubject":404,"./multicast":641}],651:[function(require,module,exports){"use strict";function race(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return 1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),observables.unshift(this),raceStatic.apply(this,observables)}function raceStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];if(1===observables.length){if(!isArray_1.isArray(observables[0]))return observables[0];observables=observables[0]}return new ArrayObservable_1.ArrayObservable(observables).lift(new RaceOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isArray_1=require("../util/isArray"),ArrayObservable_1=require("../observable/ArrayObservable"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.race=race,exports.raceStatic=raceStatic;var RaceOperator=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(subscriber,source){return source._subscribe(new RaceSubscriber(subscriber))},RaceOperator}();exports.RaceOperator=RaceOperator;var RaceSubscriber=function(_super){function RaceSubscriber(destination){_super.call(this,destination),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return __extends(RaceSubscriber,_super),RaceSubscriber.prototype._next=function(observable){this.observables.push(observable)},RaceSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{for(var i=0;i<len;i++){var observable=observables[i],subscription=subscribeToResult_1.subscribeToResult(this,observable,observable,i);this.subscriptions&&(this.subscriptions.push(subscription),this.add(subscription))}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==outerIndex){var subscription=this.subscriptions[i];subscription.unsubscribe(),this.remove(subscription)}this.subscriptions=null}this.destination.next(innerValue)},RaceSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.RaceSubscriber=RaceSubscriber},{"../OuterSubscriber":403,"../observable/ArrayObservable":539,"../util/isArray":723,"../util/subscribeToResult":733}],652:[function(require,module,exports){"use strict";function reduce(accumulator,seed){return this.lift(new ReduceOperator(accumulator,seed))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.reduce=reduce;var ReduceOperator=function(){function ReduceOperator(accumulator,seed){this.accumulator=accumulator,this.seed=seed}return ReduceOperator.prototype.call=function(subscriber,source){return source._subscribe(new ReduceSubscriber(subscriber,this.accumulator,this.seed))},ReduceOperator}();exports.ReduceOperator=ReduceOperator;var ReduceSubscriber=function(_super){function ReduceSubscriber(destination,accumulator,seed){_super.call(this,destination),this.accumulator=accumulator,this.hasValue=!1,this.acc=seed,this.accumulator=accumulator,this.hasSeed="undefined"!=typeof seed}return __extends(ReduceSubscriber,_super),ReduceSubscriber.prototype._next=function(value){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(value):(this.acc=value,this.hasValue=!0)},ReduceSubscriber.prototype._tryReduce=function(value){var result;try{result=this.accumulator(this.acc,value)}catch(err){return void this.destination.error(err)}this.acc=result},ReduceSubscriber.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},ReduceSubscriber}(Subscriber_1.Subscriber);exports.ReduceSubscriber=ReduceSubscriber},{"../Subscriber":409}],653:[function(require,module,exports){"use strict";function repeat(count){return void 0===count&&(count=-1),0===count?new EmptyObservable_1.EmptyObservable:count<0?this.lift(new RepeatOperator((-1),this)):this.lift(new RepeatOperator(count-1,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),EmptyObservable_1=require("../observable/EmptyObservable");exports.repeat=repeat;var RepeatOperator=function(){function RepeatOperator(count,source){this.count=count,this.source=source}return RepeatOperator.prototype.call=function(subscriber,source){return source._subscribe(new RepeatSubscriber(subscriber,this.count,this.source))},RepeatOperator}(),RepeatSubscriber=function(_super){function RepeatSubscriber(destination,count,source){_super.call(this,destination),this.count=count,this.source=source}return __extends(RepeatSubscriber,_super),RepeatSubscriber.prototype.complete=function(){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.complete.call(this);count>-1&&(this.count=count-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,source.subscribe(this)}},RepeatSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../observable/EmptyObservable":544}],654:[function(require,module,exports){"use strict";function retry(count){return void 0===count&&(count=-1),this.lift(new RetryOperator(count,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.retry=retry;var RetryOperator=function(){function RetryOperator(count,source){this.count=count,this.source=source}return RetryOperator.prototype.call=function(subscriber,source){return source._subscribe(new RetrySubscriber(subscriber,this.count,this.source))},RetryOperator}(),RetrySubscriber=function(_super){function RetrySubscriber(destination,count,source){_super.call(this,destination),this.count=count,this.source=source}return __extends(RetrySubscriber,_super),RetrySubscriber.prototype.error=function(err){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.error.call(this,err);count>-1&&(this.count=count-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,source.subscribe(this)}},RetrySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],655:[function(require,module,exports){"use strict";function retryWhen(notifier){return this.lift(new RetryWhenOperator(notifier,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../Subject"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.retryWhen=retryWhen;var RetryWhenOperator=function(){function RetryWhenOperator(notifier,source){this.notifier=notifier,this.source=source}return RetryWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new RetryWhenSubscriber(subscriber,this.notifier,this.source))},RetryWhenOperator}(),RetryWhenSubscriber=function(_super){function RetryWhenSubscriber(destination,notifier,source){_super.call(this,destination),this.notifier=notifier,this.source=source}return __extends(RetryWhenSubscriber,_super),RetryWhenSubscriber.prototype.error=function(err){if(!this.isStopped){var errors=this.errors,retries=this.retries,retriesSubscription=this.retriesSubscription;if(retries)this.errors=null,this.retriesSubscription=null;else{if(errors=new Subject_1.Subject,retries=tryCatch_1.tryCatch(this.notifier)(errors),retries===errorObject_1.errorObject)return _super.prototype.error.call(this,errorObject_1.errorObject.e);retriesSubscription=subscribeToResult_1.subscribeToResult(this,retries)}this.unsubscribe(),this.closed=!1,this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,errors.next(err)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var _a=this,errors=_a.errors,retriesSubscription=_a.retriesSubscription;errors&&(errors.unsubscribe(),this.errors=null),retriesSubscription&&(retriesSubscription.unsubscribe(),this.retriesSubscription=null),this.retries=null},RetryWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,errors=_a.errors,retries=_a.retries,retriesSubscription=_a.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.closed=!1,this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,this.source.subscribe(this)},RetryWhenSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../Subject":407,"../util/errorObject":722,"../util/subscribeToResult":733,"../util/tryCatch":735}],656:[function(require,module,exports){"use strict";function sample(notifier){return this.lift(new SampleOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.sample=sample;var SampleOperator=function(){function SampleOperator(notifier){this.notifier=notifier}return SampleOperator.prototype.call=function(subscriber,source){return source._subscribe(new SampleSubscriber(subscriber,this.notifier))},SampleOperator}(),SampleSubscriber=function(_super){function SampleSubscriber(destination,notifier){_super.call(this,destination),this.hasValue=!1,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(SampleSubscriber,_super),SampleSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0},SampleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},SampleSubscriber.prototype.notifyComplete=function(){this.emitValue()},SampleSubscriber.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},SampleSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],657:[function(require,module,exports){"use strict";function sampleTime(period,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new SampleTimeOperator(period,scheduler))}function dispatchNotification(state){var subscriber=state.subscriber,period=state.period;subscriber.notifyNext(),this.schedule(state,period)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async");exports.sampleTime=sampleTime;var SampleTimeOperator=function(){function SampleTimeOperator(period,scheduler){this.period=period,this.scheduler=scheduler}return SampleTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new SampleTimeSubscriber(subscriber,this.period,this.scheduler))},SampleTimeOperator}(),SampleTimeSubscriber=function(_super){function SampleTimeSubscriber(destination,period,scheduler){_super.call(this,destination),this.period=period,this.scheduler=scheduler,this.hasValue=!1,this.add(scheduler.schedule(dispatchNotification,period,{subscriber:this,period:period}))}return __extends(SampleTimeSubscriber,_super),SampleTimeSubscriber.prototype._next=function(value){this.lastValue=value,this.hasValue=!0},SampleTimeSubscriber.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},SampleTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701}],658:[function(require,module,exports){"use strict";function scan(accumulator,seed){return this.lift(new ScanOperator(accumulator,seed))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.scan=scan;var ScanOperator=function(){function ScanOperator(accumulator,seed){this.accumulator=accumulator,this.seed=seed}return ScanOperator.prototype.call=function(subscriber,source){return source._subscribe(new ScanSubscriber(subscriber,this.accumulator,this.seed))},ScanOperator}(),ScanSubscriber=function(_super){function ScanSubscriber(destination,accumulator,seed){_super.call(this,destination),this.accumulator=accumulator,this.index=0,this.accumulatorSet=!1,this.seed=seed,this.accumulatorSet="undefined"!=typeof seed}return __extends(ScanSubscriber,_super),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(value){this.accumulatorSet=!0,this._seed=value},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(value){return this.accumulatorSet?this._tryNext(value):(this.seed=value,void this.destination.next(value))},ScanSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.accumulator(this.seed,value,index)}catch(err){this.destination.error(err)}this.seed=result,this.destination.next(result)},ScanSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],659:[function(require,module,exports){"use strict";function shareSubjectFactory(){return new Subject_1.Subject}function share(){return multicast_1.multicast.call(this,shareSubjectFactory).refCount()}var multicast_1=require("./multicast"),Subject_1=require("../Subject");exports.share=share},{"../Subject":407,"./multicast":641}],660:[function(require,module,exports){"use strict";function single(predicate){return this.lift(new SingleOperator(predicate,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),EmptyError_1=require("../util/EmptyError");exports.single=single;var SingleOperator=function(){function SingleOperator(predicate,source){this.predicate=predicate,this.source=source}return SingleOperator.prototype.call=function(subscriber,source){return source._subscribe(new SingleSubscriber(subscriber,this.predicate,this.source))},SingleOperator}(),SingleSubscriber=function(_super){function SingleSubscriber(destination,predicate,source){_super.call(this,destination),this.predicate=predicate,this.source=source,this.seenValue=!1,this.index=0}return __extends(SingleSubscriber,_super),SingleSubscriber.prototype.applySingleValue=function(value){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=value)},SingleSubscriber.prototype._next=function(value){var predicate=this.predicate;this.index++,predicate?this.tryNext(value):this.applySingleValue(value)},SingleSubscriber.prototype.tryNext=function(value){try{var result=this.predicate(value,this.index,this.source);result&&this.applySingleValue(value)}catch(err){this.destination.error(err)}},SingleSubscriber.prototype._complete=function(){var destination=this.destination;this.index>0?(destination.next(this.seenValue?this.singleValue:void 0),destination.complete()):destination.error(new EmptyError_1.EmptyError)},SingleSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../util/EmptyError":713}],661:[function(require,module,exports){"use strict";function skip(total){return this.lift(new SkipOperator(total))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.skip=skip;var SkipOperator=function(){function SkipOperator(total){this.total=total}return SkipOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipSubscriber(subscriber,this.total))},SkipOperator}(),SkipSubscriber=function(_super){function SkipSubscriber(destination,total){_super.call(this,destination),this.total=total,this.count=0}return __extends(SkipSubscriber,_super),SkipSubscriber.prototype._next=function(x){++this.count>this.total&&this.destination.next(x)},SkipSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],662:[function(require,module,exports){"use strict";function skipUntil(notifier){return this.lift(new SkipUntilOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.skipUntil=skipUntil;var SkipUntilOperator=function(){function SkipUntilOperator(notifier){this.notifier=notifier}return SkipUntilOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipUntilSubscriber(subscriber,this.notifier))},SkipUntilOperator}(),SkipUntilSubscriber=function(_super){function SkipUntilSubscriber(destination,notifier){_super.call(this,destination),this.hasValue=!1,this.isInnerStopped=!1,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(SkipUntilSubscriber,_super),SkipUntilSubscriber.prototype._next=function(value){this.hasValue&&_super.prototype._next.call(this,value)},SkipUntilSubscriber.prototype._complete=function(){this.isInnerStopped?_super.prototype._complete.call(this):this.unsubscribe()},SkipUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.hasValue=!0},SkipUntilSubscriber.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&_super.prototype._complete.call(this)},SkipUntilSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],663:[function(require,module,exports){"use strict";function skipWhile(predicate){return this.lift(new SkipWhileOperator(predicate))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.skipWhile=skipWhile;var SkipWhileOperator=function(){function SkipWhileOperator(predicate){this.predicate=predicate}return SkipWhileOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipWhileSubscriber(subscriber,this.predicate))},SkipWhileOperator}(),SkipWhileSubscriber=function(_super){function SkipWhileSubscriber(destination,predicate){_super.call(this,destination),this.predicate=predicate,this.skipping=!0,this.index=0}return __extends(SkipWhileSubscriber,_super),SkipWhileSubscriber.prototype._next=function(value){var destination=this.destination;this.skipping&&this.tryCallPredicate(value),this.skipping||destination.next(value)},SkipWhileSubscriber.prototype.tryCallPredicate=function(value){try{var result=this.predicate(value,this.index++);this.skipping=Boolean(result)}catch(err){this.destination.error(err)}},SkipWhileSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],664:[function(require,module,exports){"use strict";function startWith(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i-0]=arguments[_i];var scheduler=array[array.length-1];
isScheduler_1.isScheduler(scheduler)?array.pop():scheduler=null;var len=array.length;return 1===len?concat_1.concatStatic(new ScalarObservable_1.ScalarObservable(array[0],scheduler),this):len>1?concat_1.concatStatic(new ArrayObservable_1.ArrayObservable(array,scheduler),this):concat_1.concatStatic(new EmptyObservable_1.EmptyObservable(scheduler),this)}var ArrayObservable_1=require("../observable/ArrayObservable"),ScalarObservable_1=require("../observable/ScalarObservable"),EmptyObservable_1=require("../observable/EmptyObservable"),concat_1=require("./concat"),isScheduler_1=require("../util/isScheduler");exports.startWith=startWith},{"../observable/ArrayObservable":539,"../observable/EmptyObservable":544,"../observable/ScalarObservable":559,"../util/isScheduler":729,"./concat":600}],665:[function(require,module,exports){"use strict";function subscribeOn(scheduler,delay){return void 0===delay&&(delay=0),new SubscribeOnObservable_1.SubscribeOnObservable(this,delay,scheduler)}var SubscribeOnObservable_1=require("../observable/SubscribeOnObservable");exports.subscribeOn=subscribeOn},{"../observable/SubscribeOnObservable":560}],666:[function(require,module,exports){"use strict";function _switch(){return this.lift(new SwitchOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports._switch=_switch;var SwitchOperator=function(){function SwitchOperator(){}return SwitchOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchSubscriber(subscriber))},SwitchOperator}(),SwitchSubscriber=function(_super){function SwitchSubscriber(destination){_super.call(this,destination),this.active=0,this.hasCompleted=!1}return __extends(SwitchSubscriber,_super),SwitchSubscriber.prototype._next=function(value){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,value))},SwitchSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},SwitchSubscriber.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var innerSubscription=this.innerSubscription;innerSubscription&&(innerSubscription.unsubscribe(),this.remove(innerSubscription))},SwitchSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},SwitchSubscriber.prototype.notifyError=function(err){this.destination.error(err)},SwitchSubscriber.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},SwitchSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],667:[function(require,module,exports){"use strict";function switchMap(project,resultSelector){return this.lift(new SwitchMapOperator(project,resultSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.switchMap=switchMap;var SwitchMapOperator=function(){function SwitchMapOperator(project,resultSelector){this.project=project,this.resultSelector=resultSelector}return SwitchMapOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchMapSubscriber(subscriber,this.project,this.resultSelector))},SwitchMapOperator}(),SwitchMapSubscriber=function(_super){function SwitchMapSubscriber(destination,project,resultSelector){_super.call(this,destination),this.project=project,this.resultSelector=resultSelector,this.index=0}return __extends(SwitchMapSubscriber,_super),SwitchMapSubscriber.prototype._next=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(error){return void this.destination.error(error)}this._innerSub(result,value,index)},SwitchMapSubscriber.prototype._innerSub=function(result,value,index){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,result,value,index))},SwitchMapSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;innerSubscription&&!innerSubscription.closed||_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.innerSubscription=null,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.resultSelector?this._tryNotifyNext(outerValue,innerValue,outerIndex,innerIndex):this.destination.next(innerValue)},SwitchMapSubscriber.prototype._tryNotifyNext=function(outerValue,innerValue,outerIndex,innerIndex){var result;try{result=this.resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void this.destination.error(err)}this.destination.next(result)},SwitchMapSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],668:[function(require,module,exports){"use strict";function switchMapTo(innerObservable,resultSelector){return this.lift(new SwitchMapToOperator(innerObservable,resultSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.switchMapTo=switchMapTo;var SwitchMapToOperator=function(){function SwitchMapToOperator(observable,resultSelector){this.observable=observable,this.resultSelector=resultSelector}return SwitchMapToOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchMapToSubscriber(subscriber,this.observable,this.resultSelector))},SwitchMapToOperator}(),SwitchMapToSubscriber=function(_super){function SwitchMapToSubscriber(destination,inner,resultSelector){_super.call(this,destination),this.inner=inner,this.resultSelector=resultSelector,this.index=0}return __extends(SwitchMapToSubscriber,_super),SwitchMapToSubscriber.prototype._next=function(value){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,this.inner,value,this.index++))},SwitchMapToSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;innerSubscription&&!innerSubscription.closed||_super.prototype._complete.call(this)},SwitchMapToSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapToSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.innerSubscription=null,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapToSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;resultSelector?this.tryResultSelector(outerValue,innerValue,outerIndex,innerIndex):destination.next(innerValue)},SwitchMapToSubscriber.prototype.tryResultSelector=function(outerValue,innerValue,outerIndex,innerIndex){var result,_a=this,resultSelector=_a.resultSelector,destination=_a.destination;try{result=resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void destination.error(err)}destination.next(result)},SwitchMapToSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],669:[function(require,module,exports){"use strict";function take(count){return 0===count?new EmptyObservable_1.EmptyObservable:this.lift(new TakeOperator(count))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError"),EmptyObservable_1=require("../observable/EmptyObservable");exports.take=take;var TakeOperator=function(){function TakeOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeSubscriber(subscriber,this.total))},TakeOperator}(),TakeSubscriber=function(_super){function TakeSubscriber(destination,total){_super.call(this,destination),this.total=total,this.count=0}return __extends(TakeSubscriber,_super),TakeSubscriber.prototype._next=function(value){var total=this.total;++this.count<=total&&(this.destination.next(value),this.count===total&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../observable/EmptyObservable":544,"../util/ArgumentOutOfRangeError":712}],670:[function(require,module,exports){"use strict";function takeLast(count){return 0===count?new EmptyObservable_1.EmptyObservable:this.lift(new TakeLastOperator(count))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError"),EmptyObservable_1=require("../observable/EmptyObservable");exports.takeLast=takeLast;var TakeLastOperator=function(){function TakeLastOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeLastOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeLastSubscriber(subscriber,this.total))},TakeLastOperator}(),TakeLastSubscriber=function(_super){function TakeLastSubscriber(destination,total){_super.call(this,destination),this.total=total,this.ring=new Array,this.count=0}return __extends(TakeLastSubscriber,_super),TakeLastSubscriber.prototype._next=function(value){var ring=this.ring,total=this.total,count=this.count++;if(ring.length<total)ring.push(value);else{var index=count%total;ring[index]=value}},TakeLastSubscriber.prototype._complete=function(){var destination=this.destination,count=this.count;if(count>0)for(var total=this.count>=this.total?this.total:this.count,ring=this.ring,i=0;i<total;i++){var idx=count++%total;destination.next(ring[idx])}destination.complete()},TakeLastSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../observable/EmptyObservable":544,"../util/ArgumentOutOfRangeError":712}],671:[function(require,module,exports){"use strict";function takeUntil(notifier){return this.lift(new TakeUntilOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.takeUntil=takeUntil;var TakeUntilOperator=function(){function TakeUntilOperator(notifier){this.notifier=notifier}return TakeUntilOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeUntilSubscriber(subscriber,this.notifier))},TakeUntilOperator}(),TakeUntilSubscriber=function(_super){function TakeUntilSubscriber(destination,notifier){_super.call(this,destination),this.notifier=notifier,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(TakeUntilSubscriber,_super),TakeUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],672:[function(require,module,exports){"use strict";function takeWhile(predicate){return this.lift(new TakeWhileOperator(predicate))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.takeWhile=takeWhile;var TakeWhileOperator=function(){function TakeWhileOperator(predicate){this.predicate=predicate}return TakeWhileOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeWhileSubscriber(subscriber,this.predicate))},TakeWhileOperator}(),TakeWhileSubscriber=function(_super){function TakeWhileSubscriber(destination,predicate){_super.call(this,destination),this.predicate=predicate,this.index=0}return __extends(TakeWhileSubscriber,_super),TakeWhileSubscriber.prototype._next=function(value){var result,destination=this.destination;try{result=this.predicate(value,this.index++)}catch(err){return void destination.error(err)}this.nextOrComplete(value,result)},TakeWhileSubscriber.prototype.nextOrComplete=function(value,predicateResult){var destination=this.destination;Boolean(predicateResult)?destination.next(value):destination.complete()},TakeWhileSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],673:[function(require,module,exports){"use strict";function throttle(durationSelector){return this.lift(new ThrottleOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.throttle=throttle;var ThrottleOperator=function(){function ThrottleOperator(durationSelector){this.durationSelector=durationSelector}return ThrottleOperator.prototype.call=function(subscriber,source){return source._subscribe(new ThrottleSubscriber(subscriber,this.durationSelector))},ThrottleOperator}(),ThrottleSubscriber=function(_super){function ThrottleSubscriber(destination,durationSelector){_super.call(this,destination),this.destination=destination,this.durationSelector=durationSelector}return __extends(ThrottleSubscriber,_super),ThrottleSubscriber.prototype._next=function(value){this.throttled||this.tryDurationSelector(value)},ThrottleSubscriber.prototype.tryDurationSelector=function(value){var duration=null;try{duration=this.durationSelector(value)}catch(err){return void this.destination.error(err)}this.emitAndThrottle(value,duration)},ThrottleSubscriber.prototype.emitAndThrottle=function(value,duration){this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,duration)),this.destination.next(value)},ThrottleSubscriber.prototype._unsubscribe=function(){var throttled=this.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe())},ThrottleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this._unsubscribe()},ThrottleSubscriber.prototype.notifyComplete=function(){this._unsubscribe()},ThrottleSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],674:[function(require,module,exports){"use strict";function throttleTime(duration,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new ThrottleTimeOperator(duration,scheduler))}function dispatchNext(arg){var subscriber=arg.subscriber;subscriber.clearThrottle()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async");exports.throttleTime=throttleTime;var ThrottleTimeOperator=function(){function ThrottleTimeOperator(duration,scheduler){this.duration=duration,this.scheduler=scheduler}return ThrottleTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new ThrottleTimeSubscriber(subscriber,this.duration,this.scheduler))},ThrottleTimeOperator}(),ThrottleTimeSubscriber=function(_super){function ThrottleTimeSubscriber(destination,duration,scheduler){_super.call(this,destination),this.duration=duration,this.scheduler=scheduler}return __extends(ThrottleTimeSubscriber,_super),ThrottleTimeSubscriber.prototype._next=function(value){this.throttled||(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.destination.next(value))},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var throttled=this.throttled;throttled&&(throttled.unsubscribe(),this.remove(throttled),this.throttled=null)},ThrottleTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701}],675:[function(require,module,exports){"use strict";function timeInterval(scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new TimeIntervalOperator(scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async");exports.timeInterval=timeInterval;var TimeInterval=function(){function TimeInterval(value,interval){this.value=value,this.interval=interval}return TimeInterval}();exports.TimeInterval=TimeInterval;var TimeIntervalOperator=function(){function TimeIntervalOperator(scheduler){this.scheduler=scheduler}return TimeIntervalOperator.prototype.call=function(observer,source){return source._subscribe(new TimeIntervalSubscriber(observer,this.scheduler))},TimeIntervalOperator}(),TimeIntervalSubscriber=function(_super){function TimeIntervalSubscriber(destination,scheduler){_super.call(this,destination),this.scheduler=scheduler,this.lastTime=0,this.lastTime=scheduler.now()}return __extends(TimeIntervalSubscriber,_super),TimeIntervalSubscriber.prototype._next=function(value){var now=this.scheduler.now(),span=now-this.lastTime;this.lastTime=now,this.destination.next(new TimeInterval(value,span))},TimeIntervalSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701}],676:[function(require,module,exports){"use strict";function timeout(due,errorToSend,scheduler){void 0===errorToSend&&(errorToSend=null),void 0===scheduler&&(scheduler=async_1.async);var absoluteTimeout=isDate_1.isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return this.lift(new TimeoutOperator(waitFor,absoluteTimeout,errorToSend,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=require("../scheduler/async"),isDate_1=require("../util/isDate"),Subscriber_1=require("../Subscriber");exports.timeout=timeout;var TimeoutOperator=function(){function TimeoutOperator(waitFor,absoluteTimeout,errorToSend,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.errorToSend=errorToSend,this.scheduler=scheduler}return TimeoutOperator.prototype.call=function(subscriber,source){return source._subscribe(new TimeoutSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},TimeoutOperator}(),TimeoutSubscriber=function(_super){function TimeoutSubscriber(destination,absoluteTimeout,waitFor,errorToSend,scheduler){_super.call(this,destination),this.absoluteTimeout=absoluteTimeout,this.waitFor=waitFor,this.errorToSend=errorToSend,this.scheduler=scheduler,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return __extends(TimeoutSubscriber,_super),Object.defineProperty(TimeoutSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutSubscriber.dispatchTimeout=function(state){var source=state.subscriber,currentIndex=state.index;source.hasCompleted||source.previousIndex!==currentIndex||source.notifyTimeout()},TimeoutSubscriber.prototype.scheduleTimeout=function(){var currentIndex=this.index;this.scheduler.schedule(TimeoutSubscriber.dispatchTimeout,this.waitFor,{subscriber:this,index:currentIndex}),this.index++,this._previousIndex=currentIndex},TimeoutSubscriber.prototype._next=function(value){this.destination.next(value),this.absoluteTimeout||this.scheduleTimeout()},TimeoutSubscriber.prototype._error=function(err){this.destination.error(err),this._hasCompleted=!0},TimeoutSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutSubscriber.prototype.notifyTimeout=function(){this.error(this.errorToSend||new Error("timeout"))},TimeoutSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701,"../util/isDate":724}],677:[function(require,module,exports){"use strict";function timeoutWith(due,withObservable,scheduler){void 0===scheduler&&(scheduler=async_1.async);var absoluteTimeout=isDate_1.isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return this.lift(new TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=require("../scheduler/async"),isDate_1=require("../util/isDate"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.timeoutWith=timeoutWith;var TimeoutWithOperator=function(){function TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.withObservable=withObservable,this.scheduler=scheduler}return TimeoutWithOperator.prototype.call=function(subscriber,source){return source._subscribe(new TimeoutWithSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),TimeoutWithSubscriber=function(_super){function TimeoutWithSubscriber(destination,absoluteTimeout,waitFor,withObservable,scheduler){_super.call(this),this.destination=destination,this.absoluteTimeout=absoluteTimeout,this.waitFor=waitFor,this.withObservable=withObservable,this.scheduler=scheduler,this.timeoutSubscription=void 0,this.index=0,this._previousIndex=0,this._hasCompleted=!1,destination.add(this),this.scheduleTimeout()}return __extends(TimeoutWithSubscriber,_super),Object.defineProperty(TimeoutWithSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutWithSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutWithSubscriber.dispatchTimeout=function(state){var source=state.subscriber,currentIndex=state.index;source.hasCompleted||source.previousIndex!==currentIndex||source.handleTimeout()},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var currentIndex=this.index,timeoutState={subscriber:this,index:currentIndex};this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,timeoutState),this.index++,this._previousIndex=currentIndex},TimeoutWithSubscriber.prototype._next=function(value){this.destination.next(value),this.absoluteTimeout||this.scheduleTimeout()},TimeoutWithSubscriber.prototype._error=function(err){this.destination.error(err),this._hasCompleted=!0},TimeoutWithSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutWithSubscriber.prototype.handleTimeout=function(){if(!this.closed){var withObservable=this.withObservable;this.unsubscribe(),this.destination.add(this.timeoutSubscription=subscribeToResult_1.subscribeToResult(this,withObservable))}},TimeoutWithSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../scheduler/async":701,"../util/isDate":724,"../util/subscribeToResult":733}],678:[function(require,module,exports){"use strict";function timestamp(scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new TimestampOperator(scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async");exports.timestamp=timestamp;var Timestamp=function(){function Timestamp(value,timestamp){this.value=value,this.timestamp=timestamp}return Timestamp}();exports.Timestamp=Timestamp;var TimestampOperator=function(){function TimestampOperator(scheduler){this.scheduler=scheduler}return TimestampOperator.prototype.call=function(observer,source){return source._subscribe(new TimestampSubscriber(observer,this.scheduler))},TimestampOperator}(),TimestampSubscriber=function(_super){function TimestampSubscriber(destination,scheduler){_super.call(this,destination),this.scheduler=scheduler}return __extends(TimestampSubscriber,_super),TimestampSubscriber.prototype._next=function(value){var now=this.scheduler.now();this.destination.next(new Timestamp(value,now))},TimestampSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409,"../scheduler/async":701}],679:[function(require,module,exports){"use strict";function toArray(){return this.lift(new ToArrayOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber");exports.toArray=toArray;var ToArrayOperator=function(){function ToArrayOperator(){}return ToArrayOperator.prototype.call=function(subscriber,source){return source._subscribe(new ToArraySubscriber(subscriber))},ToArrayOperator}(),ToArraySubscriber=function(_super){function ToArraySubscriber(destination){_super.call(this,destination),this.array=[]}return __extends(ToArraySubscriber,_super),ToArraySubscriber.prototype._next=function(x){this.array.push(x)},ToArraySubscriber.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},ToArraySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":409}],680:[function(require,module,exports){"use strict";function toPromise(PromiseCtor){var _this=this;if(PromiseCtor||(root_1.root.Rx&&root_1.root.Rx.config&&root_1.root.Rx.config.Promise?PromiseCtor=root_1.root.Rx.config.Promise:root_1.root.Promise&&(PromiseCtor=root_1.root.Promise)),!PromiseCtor)throw new Error("no Promise impl found");return new PromiseCtor(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})}var root_1=require("../util/root");exports.toPromise=toPromise},{"../util/root":732}],681:[function(require,module,exports){"use strict";function window(windowBoundaries){return this.lift(new WindowOperator(windowBoundaries))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../Subject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.window=window;var WindowOperator=function(){function WindowOperator(windowBoundaries){this.windowBoundaries=windowBoundaries}return WindowOperator.prototype.call=function(subscriber,source){var windowSubscriber=new WindowSubscriber(subscriber),sourceSubscription=source._subscribe(windowSubscriber);return sourceSubscription.closed||windowSubscriber.add(subscribeToResult_1.subscribeToResult(windowSubscriber,this.windowBoundaries)),sourceSubscription},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination){_super.call(this,destination),this.window=new Subject_1.Subject,destination.next(this.window)}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow()},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this._complete()},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err)},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete()},WindowSubscriber.prototype._unsubscribe=function(){this.window=null},WindowSubscriber.prototype.openWindow=function(){var prevWindow=this.window;prevWindow&&prevWindow.complete();var destination=this.destination,newWindow=this.window=new Subject_1.Subject;destination.next(newWindow)},WindowSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../Subject":407,"../util/subscribeToResult":733}],682:[function(require,module,exports){"use strict";function windowCount(windowSize,startWindowEvery){return void 0===startWindowEvery&&(startWindowEvery=0),this.lift(new WindowCountOperator(windowSize,startWindowEvery))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=require("../Subscriber"),Subject_1=require("../Subject");exports.windowCount=windowCount;var WindowCountOperator=function(){function WindowCountOperator(windowSize,startWindowEvery){this.windowSize=windowSize,this.startWindowEvery=startWindowEvery}return WindowCountOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowCountSubscriber(subscriber,this.windowSize,this.startWindowEvery))},WindowCountOperator}(),WindowCountSubscriber=function(_super){function WindowCountSubscriber(destination,windowSize,startWindowEvery){_super.call(this,destination),this.destination=destination,this.windowSize=windowSize,this.startWindowEvery=startWindowEvery,this.windows=[new Subject_1.Subject],this.count=0,destination.next(this.windows[0])}return __extends(WindowCountSubscriber,_super),WindowCountSubscriber.prototype._next=function(value){for(var startWindowEvery=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,destination=this.destination,windowSize=this.windowSize,windows=this.windows,len=windows.length,i=0;i<len&&!this.closed;i++)windows[i].next(value);var c=this.count-windowSize+1;if(c>=0&&c%startWindowEvery===0&&!this.closed&&windows.shift().complete(),++this.count%startWindowEvery===0&&!this.closed){var window_1=new Subject_1.Subject;windows.push(window_1),destination.next(window_1)}},WindowCountSubscriber.prototype._error=function(err){var windows=this.windows;if(windows)for(;windows.length>0&&!this.closed;)windows.shift().error(err);this.destination.error(err)},WindowCountSubscriber.prototype._complete=function(){var windows=this.windows;if(windows)for(;windows.length>0&&!this.closed;)windows.shift().complete();this.destination.complete()},WindowCountSubscriber.prototype._unsubscribe=function(){this.count=0,this.windows=null},WindowCountSubscriber;
}(Subscriber_1.Subscriber)},{"../Subject":407,"../Subscriber":409}],683:[function(require,module,exports){"use strict";function windowTime(windowTimeSpan,windowCreationInterval,scheduler){return void 0===windowCreationInterval&&(windowCreationInterval=null),void 0===scheduler&&(scheduler=async_1.async),this.lift(new WindowTimeOperator(windowTimeSpan,windowCreationInterval,scheduler))}function dispatchWindowTimeSpanOnly(state){var subscriber=state.subscriber,windowTimeSpan=state.windowTimeSpan,window=state.window;window&&window.complete(),state.window=subscriber.openWindow(),this.schedule(state,windowTimeSpan)}function dispatchWindowCreation(state){var windowTimeSpan=state.windowTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,windowCreationInterval=state.windowCreationInterval,window=subscriber.openWindow(),action=this,context={action:action,subscription:null},timeSpanState={subscriber:subscriber,window:window,context:context};context.subscription=scheduler.schedule(dispatchWindowClose,windowTimeSpan,timeSpanState),action.add(context.subscription),action.schedule(state,windowCreationInterval)}function dispatchWindowClose(arg){var subscriber=arg.subscriber,window=arg.window,context=arg.context;context&&context.action&&context.subscription&&context.action.remove(context.subscription),subscriber.closeWindow(window)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../Subject"),async_1=require("../scheduler/async"),Subscriber_1=require("../Subscriber");exports.windowTime=windowTime;var WindowTimeOperator=function(){function WindowTimeOperator(windowTimeSpan,windowCreationInterval,scheduler){this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.scheduler=scheduler}return WindowTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowTimeSubscriber(subscriber,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))},WindowTimeOperator}(),WindowTimeSubscriber=function(_super){function WindowTimeSubscriber(destination,windowTimeSpan,windowCreationInterval,scheduler){if(_super.call(this,destination),this.destination=destination,this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.scheduler=scheduler,this.windows=[],null!==windowCreationInterval&&windowCreationInterval>=0){var window_1=this.openWindow(),closeState={subscriber:this,window:window_1,context:null},creationState={windowTimeSpan:windowTimeSpan,windowCreationInterval:windowCreationInterval,subscriber:this,scheduler:scheduler};this.add(scheduler.schedule(dispatchWindowClose,windowTimeSpan,closeState)),this.add(scheduler.schedule(dispatchWindowCreation,windowCreationInterval,creationState))}else{var window_2=this.openWindow(),timeSpanOnlyState={subscriber:this,window:window_2,windowTimeSpan:windowTimeSpan};this.add(scheduler.schedule(dispatchWindowTimeSpanOnly,windowTimeSpan,timeSpanOnlyState))}}return __extends(WindowTimeSubscriber,_super),WindowTimeSubscriber.prototype._next=function(value){for(var windows=this.windows,len=windows.length,i=0;i<len;i++){var window_3=windows[i];window_3.closed||window_3.next(value)}},WindowTimeSubscriber.prototype._error=function(err){for(var windows=this.windows;windows.length>0;)windows.shift().error(err);this.destination.error(err)},WindowTimeSubscriber.prototype._complete=function(){for(var windows=this.windows;windows.length>0;){var window_4=windows.shift();window_4.closed||window_4.complete()}this.destination.complete()},WindowTimeSubscriber.prototype.openWindow=function(){var window=new Subject_1.Subject;this.windows.push(window);var destination=this.destination;return destination.next(window),window},WindowTimeSubscriber.prototype.closeWindow=function(window){window.complete();var windows=this.windows;windows.splice(windows.indexOf(window),1)},WindowTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subject":407,"../Subscriber":409,"../scheduler/async":701}],684:[function(require,module,exports){"use strict";function windowToggle(openings,closingSelector){return this.lift(new WindowToggleOperator(openings,closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../Subject"),Subscription_1=require("../Subscription"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.windowToggle=windowToggle;var WindowToggleOperator=function(){function WindowToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return WindowToggleOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowToggleSubscriber(subscriber,this.openings,this.closingSelector))},WindowToggleOperator}(),WindowToggleSubscriber=function(_super){function WindowToggleSubscriber(destination,openings,closingSelector){_super.call(this,destination),this.openings=openings,this.closingSelector=closingSelector,this.contexts=[],this.add(this.openSubscription=subscribeToResult_1.subscribeToResult(this,openings,openings))}return __extends(WindowToggleSubscriber,_super),WindowToggleSubscriber.prototype._next=function(value){var contexts=this.contexts;if(contexts)for(var len=contexts.length,i=0;i<len;i++)contexts[i].window.next(value)},WindowToggleSubscriber.prototype._error=function(err){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.error(err),context.subscription.unsubscribe()}_super.prototype._error.call(this,err)},WindowToggleSubscriber.prototype._complete=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.complete(),context.subscription.unsubscribe()}_super.prototype._complete.call(this)},WindowToggleSubscriber.prototype._unsubscribe=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.unsubscribe(),context.subscription.unsubscribe()}},WindowToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(outerValue===this.openings){var closingSelector=this.closingSelector,closingNotifier=tryCatch_1.tryCatch(closingSelector)(innerValue);if(closingNotifier===errorObject_1.errorObject)return this.error(errorObject_1.errorObject.e);var window_1=new Subject_1.Subject,subscription=new Subscription_1.Subscription,context={window:window_1,subscription:subscription};this.contexts.push(context);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);innerSubscription.closed?this.closeWindow(this.contexts.length-1):(innerSubscription.context=context,subscription.add(innerSubscription)),this.destination.next(window_1)}else this.closeWindow(this.contexts.indexOf(outerValue))},WindowToggleSubscriber.prototype.notifyError=function(err){this.error(err)},WindowToggleSubscriber.prototype.notifyComplete=function(inner){inner!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(inner.context))},WindowToggleSubscriber.prototype.closeWindow=function(index){if(index!==-1){var contexts=this.contexts,context=contexts[index],window=context.window,subscription=context.subscription;contexts.splice(index,1),window.complete(),subscription.unsubscribe()}},WindowToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../Subject":407,"../Subscription":410,"../util/errorObject":722,"../util/subscribeToResult":733,"../util/tryCatch":735}],685:[function(require,module,exports){"use strict";function windowWhen(closingSelector){return this.lift(new WindowOperator(closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../Subject"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.windowWhen=windowWhen;var WindowOperator=function(){function WindowOperator(closingSelector){this.closingSelector=closingSelector}return WindowOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowSubscriber(subscriber,this.closingSelector))},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination,closingSelector){_super.call(this,destination),this.destination=destination,this.closingSelector=closingSelector,this.openWindow()}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err),this.unsubscribeClosingNotification()},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},WindowSubscriber.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},WindowSubscriber.prototype.openWindow=function(innerSub){void 0===innerSub&&(innerSub=null),innerSub&&(this.remove(innerSub),innerSub.unsubscribe());var prevWindow=this.window;prevWindow&&prevWindow.complete();var window=this.window=new Subject_1.Subject;this.destination.next(window);var closingNotifier=tryCatch_1.tryCatch(this.closingSelector)();if(closingNotifier===errorObject_1.errorObject){var err=errorObject_1.errorObject.e;this.destination.error(err),this.window.error(err)}else this.add(this.closingNotification=subscribeToResult_1.subscribeToResult(this,closingNotifier))},WindowSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../Subject":407,"../util/errorObject":722,"../util/subscribeToResult":733,"../util/tryCatch":735}],686:[function(require,module,exports){"use strict";function withLatestFrom(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var project;"function"==typeof args[args.length-1]&&(project=args.pop());var observables=args;return this.lift(new WithLatestFromOperator(observables,project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.withLatestFrom=withLatestFrom;var WithLatestFromOperator=function(){function WithLatestFromOperator(observables,project){this.observables=observables,this.project=project}return WithLatestFromOperator.prototype.call=function(subscriber,source){return source._subscribe(new WithLatestFromSubscriber(subscriber,this.observables,this.project))},WithLatestFromOperator}(),WithLatestFromSubscriber=function(_super){function WithLatestFromSubscriber(destination,observables,project){_super.call(this,destination),this.observables=observables,this.project=project,this.toRespond=[];var len=observables.length;this.values=new Array(len);for(var i=0;i<len;i++)this.toRespond.push(i);for(var i=0;i<len;i++){var observable=observables[i];this.add(subscribeToResult_1.subscribeToResult(this,observable,observable,i))}}return __extends(WithLatestFromSubscriber,_super),WithLatestFromSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue;var toRespond=this.toRespond;if(toRespond.length>0){var found=toRespond.indexOf(outerIndex);found!==-1&&toRespond.splice(found,1)}},WithLatestFromSubscriber.prototype.notifyComplete=function(){},WithLatestFromSubscriber.prototype._next=function(value){if(0===this.toRespond.length){var args=[value].concat(this.values);this.project?this._tryProject(args):this.destination.next(args)}},WithLatestFromSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},WithLatestFromSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../util/subscribeToResult":733}],687:[function(require,module,exports){"use strict";function zipProto(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return observables.unshift(this),zipStatic.apply(this,observables)}function zipStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=observables[observables.length-1];return"function"==typeof project&&observables.pop(),new ArrayObservable_1.ArrayObservable(observables).lift(new ZipOperator(project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArrayObservable_1=require("../observable/ArrayObservable"),isArray_1=require("../util/isArray"),Subscriber_1=require("../Subscriber"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult"),iterator_1=require("../symbol/iterator");exports.zipProto=zipProto,exports.zipStatic=zipStatic;var ZipOperator=function(){function ZipOperator(project){this.project=project}return ZipOperator.prototype.call=function(subscriber,source){return source._subscribe(new ZipSubscriber(subscriber,this.project))},ZipOperator}();exports.ZipOperator=ZipOperator;var ZipSubscriber=function(_super){function ZipSubscriber(destination,project,values){void 0===values&&(values=Object.create(null)),_super.call(this,destination),this.index=0,this.iterators=[],this.active=0,this.project="function"==typeof project?project:null,this.values=values}return __extends(ZipSubscriber,_super),ZipSubscriber.prototype._next=function(value){var iterators=this.iterators,index=this.index++;isArray_1.isArray(value)?iterators.push(new StaticArrayIterator(value)):"function"==typeof value[iterator_1.$$iterator]?iterators.push(new StaticIterator(value[iterator_1.$$iterator]())):iterators.push(new ZipBufferIterator(this.destination,this,value,index))},ZipSubscriber.prototype._complete=function(){var iterators=this.iterators,len=iterators.length;this.active=len;for(var i=0;i<len;i++){var iterator=iterators[i];iterator.stillUnsubscribed?this.add(iterator.subscribe(iterator,i)):this.active--}},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var iterators=this.iterators,len=iterators.length,destination=this.destination,i=0;i<len;i++){var iterator=iterators[i];if("function"==typeof iterator.hasValue&&!iterator.hasValue())return}for(var shouldComplete=!1,args=[],i=0;i<len;i++){var iterator=iterators[i],result=iterator.next();if(iterator.hasCompleted()&&(shouldComplete=!0),result.done)return void destination.complete();args.push(result.value)}this.project?this._tryProject(args):destination.next(args),shouldComplete&&destination.complete()},ZipSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},ZipSubscriber}(Subscriber_1.Subscriber);exports.ZipSubscriber=ZipSubscriber;var StaticIterator=function(){function StaticIterator(iterator){this.iterator=iterator,this.nextResult=iterator.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var result=this.nextResult;return this.nextResult=this.iterator.next(),result},StaticIterator.prototype.hasCompleted=function(){var nextResult=this.nextResult;return nextResult&&nextResult.done},StaticIterator}(),StaticArrayIterator=function(){function StaticArrayIterator(array){this.array=array,this.index=0,this.length=0,this.length=array.length}return StaticArrayIterator.prototype[iterator_1.$$iterator]=function(){return this},StaticArrayIterator.prototype.next=function(value){var i=this.index++,array=this.array;return i<this.length?{value:array[i],done:!1}:{value:null,done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),ZipBufferIterator=function(_super){function ZipBufferIterator(destination,parent,observable,index){_super.call(this,destination),this.parent=parent,this.observable=observable,this.index=index,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return __extends(ZipBufferIterator,_super),ZipBufferIterator.prototype[iterator_1.$$iterator]=function(){return this},ZipBufferIterator.prototype.next=function(){var buffer=this.buffer;return 0===buffer.length&&this.isComplete?{value:null,done:!0}:{value:buffer.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.buffer.push(innerValue),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(value,index){return subscribeToResult_1.subscribeToResult(this,this.observable,this,index)},ZipBufferIterator}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":403,"../Subscriber":409,"../observable/ArrayObservable":539,"../symbol/iterator":703,"../util/isArray":723,"../util/subscribeToResult":733}],688:[function(require,module,exports){"use strict";function zipAll(project){return this.lift(new zip_1.ZipOperator(project))}var zip_1=require("./zip");exports.zipAll=zipAll},{"./zip":687}],689:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=require("../Subscription"),Action=function(_super){function Action(scheduler,work){_super.call(this)}return __extends(Action,_super),Action.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this},Action}(Subscription_1.Subscription);exports.Action=Action},{"../Subscription":410}],690:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsyncAction_1=require("./AsyncAction"),AnimationFrame_1=require("../util/AnimationFrame"),AnimationFrameAction=function(_super){function AnimationFrameAction(scheduler,work){_super.call(this,scheduler,work),this.scheduler=scheduler,this.work=work}return __extends(AnimationFrameAction,_super),AnimationFrameAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=AnimationFrame_1.AnimationFrame.requestAnimationFrame(scheduler.flush.bind(scheduler,null))))},AnimationFrameAction.prototype.recycleAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0?_super.prototype.recycleAsyncId.call(this,scheduler,id,delay):void(0===scheduler.actions.length&&(AnimationFrame_1.AnimationFrame.cancelAnimationFrame(id),scheduler.scheduled=void 0))},AnimationFrameAction}(AsyncAction_1.AsyncAction);exports.AnimationFrameAction=AnimationFrameAction},{"../util/AnimationFrame":711,"./AsyncAction":694}],691:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsyncScheduler_1=require("./AsyncScheduler"),AnimationFrameScheduler=function(_super){function AnimationFrameScheduler(){_super.apply(this,arguments)}return __extends(AnimationFrameScheduler,_super),AnimationFrameScheduler.prototype.flush=function(){this.active=!0,this.scheduled=void 0;var error,actions=this.actions,index=-1,count=actions.length,action=actions.shift();do if(error=action.execute(action.state,action.delay))break;while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}},AnimationFrameScheduler}(AsyncScheduler_1.AsyncScheduler);exports.AnimationFrameScheduler=AnimationFrameScheduler},{"./AsyncScheduler":695}],692:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Immediate_1=require("../util/Immediate"),AsyncAction_1=require("./AsyncAction"),AsapAction=function(_super){function AsapAction(scheduler,work){_super.call(this,scheduler,work),this.scheduler=scheduler,this.work=work}return __extends(AsapAction,_super),AsapAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=Immediate_1.Immediate.setImmediate(scheduler.flush.bind(scheduler,null))))},AsapAction.prototype.recycleAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0?_super.prototype.recycleAsyncId.call(this,scheduler,id,delay):void(0===scheduler.actions.length&&(Immediate_1.Immediate.clearImmediate(id),scheduler.scheduled=void 0))},AsapAction}(AsyncAction_1.AsyncAction);exports.AsapAction=AsapAction},{"../util/Immediate":715,"./AsyncAction":694}],693:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsyncScheduler_1=require("./AsyncScheduler"),AsapScheduler=function(_super){function AsapScheduler(){_super.apply(this,arguments)}return __extends(AsapScheduler,_super),AsapScheduler.prototype.flush=function(){this.active=!0,this.scheduled=void 0;var error,actions=this.actions,index=-1,count=actions.length,action=actions.shift();do if(error=action.execute(action.state,action.delay))break;while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}},AsapScheduler}(AsyncScheduler_1.AsyncScheduler);exports.AsapScheduler=AsapScheduler},{"./AsyncScheduler":695}],694:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=require("../util/root"),Action_1=require("./Action"),AsyncAction=function(_super){function AsyncAction(scheduler,work){_super.call(this,scheduler,work),this.scheduler=scheduler,this.work=work,this.pending=!1}return __extends(AsyncAction,_super),AsyncAction.prototype.schedule=function(state,delay){if(void 0===delay&&(delay=0),this.closed)return this;this.state=state,this.pending=!0;var id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.delay=delay,this.id=this.id||this.requestAsyncId(scheduler,this.id,delay),this},AsyncAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),root_1.root.setInterval(scheduler.flush.bind(scheduler,this),delay)},AsyncAction.prototype.recycleAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&this.delay===delay?id:root_1.root.clearInterval(id)&&void 0||void 0},AsyncAction.prototype.execute=function(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var error=this._execute(state,delay);return error?error:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},AsyncAction.prototype._execute=function(state,delay){var errored=!1,errorValue=void 0;try{this.work(state)}catch(e){errored=!0,errorValue=!!e&&e||new Error(e)}if(errored)return this.unsubscribe(),errorValue},AsyncAction.prototype._unsubscribe=function(){var id=this.id,scheduler=this.scheduler,actions=scheduler.actions,index=actions.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,index!==-1&&actions.splice(index,1),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null))},AsyncAction}(Action_1.Action);exports.AsyncAction=AsyncAction},{"../util/root":732,"./Action":689}],695:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Scheduler_1=require("../Scheduler"),AsyncScheduler=function(_super){function AsyncScheduler(){_super.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return __extends(AsyncScheduler,_super),AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this.active)return void actions.push(action);var error;this.active=!0;do if(error=action.execute(action.state,action.delay))break;while(action=actions.shift());if(this.active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}},AsyncScheduler}(Scheduler_1.Scheduler);exports.AsyncScheduler=AsyncScheduler},{"../Scheduler":406}],696:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsyncAction_1=require("./AsyncAction"),QueueAction=function(_super){function QueueAction(scheduler,work){_super.call(this,scheduler,work),this.scheduler=scheduler,this.work=work}return __extends(QueueAction,_super),QueueAction.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),delay>0?_super.prototype.schedule.call(this,state,delay):(this.delay=delay,this.state=state,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(state,delay){return delay>0||this.closed?_super.prototype.execute.call(this,state,delay):this._execute(state,delay)},QueueAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):scheduler.flush(this)},QueueAction}(AsyncAction_1.AsyncAction);exports.QueueAction=QueueAction},{"./AsyncAction":694}],697:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsyncScheduler_1=require("./AsyncScheduler"),QueueScheduler=function(_super){function QueueScheduler(){_super.apply(this,arguments)}return __extends(QueueScheduler,_super),QueueScheduler}(AsyncScheduler_1.AsyncScheduler);exports.QueueScheduler=QueueScheduler},{"./AsyncScheduler":695}],698:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsyncAction_1=require("./AsyncAction"),AsyncScheduler_1=require("./AsyncScheduler"),VirtualTimeScheduler=function(_super){function VirtualTimeScheduler(SchedulerAction,maxFrames){var _this=this;void 0===SchedulerAction&&(SchedulerAction=VirtualAction),void 0===maxFrames&&(maxFrames=750),_super.call(this,SchedulerAction,function(){return _this.frame}),this.maxFrames=maxFrames,this.frame=0,this.index=-1}return __extends(VirtualTimeScheduler,_super),VirtualTimeScheduler.prototype.flush=function(){for(var error,action,_a=this,actions=_a.actions,maxFrames=_a.maxFrames;(action=actions.shift())&&(this.frame=action.delay)<=maxFrames&&!(error=action.execute(action.state,action.delay)););if(error){for(;action=actions.shift();)action.unsubscribe();throw error}},VirtualTimeScheduler.frameTimeFactor=10,VirtualTimeScheduler}(AsyncScheduler_1.AsyncScheduler);exports.VirtualTimeScheduler=VirtualTimeScheduler;var VirtualAction=function(_super){function VirtualAction(scheduler,work,index){void 0===index&&(index=scheduler.index+=1),_super.call(this,scheduler,work),this.scheduler=scheduler,this.work=work,this.index=index,this.index=scheduler.index=index}return __extends(VirtualAction,_super),VirtualAction.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this.id?this.add(new VirtualAction(this.scheduler,this.work)).schedule(state,delay):_super.prototype.schedule.call(this,state,delay)},VirtualAction.prototype.requestAsyncId=function(scheduler,id,delay){void 0===delay&&(delay=0),this.delay=scheduler.frame+delay;var actions=scheduler.actions;return actions.push(this),actions.sort(VirtualAction.sortActions),!0},VirtualAction.prototype.recycleAsyncId=function(scheduler,id,delay){void 0===delay&&(delay=0)},VirtualAction.sortActions=function(a,b){return a.delay===b.delay?a.index===b.index?0:a.index>b.index?1:-1:a.delay>b.delay?1:-1},VirtualAction}(AsyncAction_1.AsyncAction);exports.VirtualAction=VirtualAction},{"./AsyncAction":694,"./AsyncScheduler":695}],699:[function(require,module,exports){"use strict";var AnimationFrameAction_1=require("./AnimationFrameAction"),AnimationFrameScheduler_1=require("./AnimationFrameScheduler");exports.animationFrame=new AnimationFrameScheduler_1.AnimationFrameScheduler(AnimationFrameAction_1.AnimationFrameAction)},{"./AnimationFrameAction":690,"./AnimationFrameScheduler":691}],700:[function(require,module,exports){"use strict";var AsapAction_1=require("./AsapAction"),AsapScheduler_1=require("./AsapScheduler");exports.asap=new AsapScheduler_1.AsapScheduler(AsapAction_1.AsapAction)},{"./AsapAction":692,"./AsapScheduler":693}],701:[function(require,module,exports){"use strict";var AsyncAction_1=require("./AsyncAction"),AsyncScheduler_1=require("./AsyncScheduler");exports.async=new AsyncScheduler_1.AsyncScheduler(AsyncAction_1.AsyncAction)},{"./AsyncAction":694,"./AsyncScheduler":695}],702:[function(require,module,exports){"use strict";var QueueAction_1=require("./QueueAction"),QueueScheduler_1=require("./QueueScheduler");exports.queue=new QueueScheduler_1.QueueScheduler(QueueAction_1.QueueAction)},{"./QueueAction":696,"./QueueScheduler":697}],703:[function(require,module,exports){"use strict";var root_1=require("../util/root"),Symbol=root_1.root.Symbol;if("function"==typeof Symbol)Symbol.iterator?exports.$$iterator=Symbol.iterator:"function"==typeof Symbol.for&&(exports.$$iterator=Symbol.for("iterator"));else if(root_1.root.Set&&"function"==typeof(new root_1.root.Set)["@@iterator"])exports.$$iterator="@@iterator";else if(root_1.root.Map)for(var keys=Object.getOwnPropertyNames(root_1.root.Map.prototype),i=0;i<keys.length;++i){
var key=keys[i];if("entries"!==key&&"size"!==key&&root_1.root.Map.prototype[key]===root_1.root.Map.prototype.entries){exports.$$iterator=key;break}}else exports.$$iterator="@@iterator"},{"../util/root":732}],704:[function(require,module,exports){"use strict";function getSymbolObservable(context){var $$observable,Symbol=context.Symbol;return"function"==typeof Symbol?Symbol.observable?$$observable=Symbol.observable:($$observable=Symbol("observable"),Symbol.observable=$$observable):$$observable="@@observable",$$observable}var root_1=require("../util/root");exports.getSymbolObservable=getSymbolObservable,exports.$$observable=getSymbolObservable(root_1.root)},{"../util/root":732}],705:[function(require,module,exports){"use strict";var root_1=require("../util/root"),Symbol=root_1.root.Symbol;exports.$$rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},{"../util/root":732}],706:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),Subscription_1=require("../Subscription"),SubscriptionLoggable_1=require("./SubscriptionLoggable"),applyMixins_1=require("../util/applyMixins"),ColdObservable=function(_super){function ColdObservable(messages,scheduler){_super.call(this,function(subscriber){var observable=this,index=observable.logSubscribedFrame();return subscriber.add(new Subscription_1.Subscription(function(){observable.logUnsubscribedFrame(index)})),observable.scheduleMessages(subscriber),subscriber}),this.messages=messages,this.subscriptions=[],this.scheduler=scheduler}return __extends(ColdObservable,_super),ColdObservable.prototype.scheduleMessages=function(subscriber){for(var messagesLength=this.messages.length,i=0;i<messagesLength;i++){var message=this.messages[i];subscriber.add(this.scheduler.schedule(function(_a){var message=_a.message,subscriber=_a.subscriber;message.notification.observe(subscriber)},message.frame,{message:message,subscriber:subscriber}))}},ColdObservable}(Observable_1.Observable);exports.ColdObservable=ColdObservable,applyMixins_1.applyMixins(ColdObservable,[SubscriptionLoggable_1.SubscriptionLoggable])},{"../Observable":401,"../Subscription":410,"../util/applyMixins":720,"./SubscriptionLoggable":709}],707:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=require("../Subject"),Subscription_1=require("../Subscription"),SubscriptionLoggable_1=require("./SubscriptionLoggable"),applyMixins_1=require("../util/applyMixins"),HotObservable=function(_super){function HotObservable(messages,scheduler){_super.call(this),this.messages=messages,this.subscriptions=[],this.scheduler=scheduler}return __extends(HotObservable,_super),HotObservable.prototype._subscribe=function(subscriber){var subject=this,index=subject.logSubscribedFrame();return subscriber.add(new Subscription_1.Subscription(function(){subject.logUnsubscribedFrame(index)})),_super.prototype._subscribe.call(this,subscriber)},HotObservable.prototype.setup=function(){for(var subject=this,messagesLength=subject.messages.length,i=0;i<messagesLength;i++)!function(){var message=subject.messages[i];subject.scheduler.schedule(function(){message.notification.observe(subject)},message.frame)}()},HotObservable}(Subject_1.Subject);exports.HotObservable=HotObservable,applyMixins_1.applyMixins(HotObservable,[SubscriptionLoggable_1.SubscriptionLoggable])},{"../Subject":407,"../Subscription":410,"../util/applyMixins":720,"./SubscriptionLoggable":709}],708:[function(require,module,exports){"use strict";var SubscriptionLog=function(){function SubscriptionLog(subscribedFrame,unsubscribedFrame){void 0===unsubscribedFrame&&(unsubscribedFrame=Number.POSITIVE_INFINITY),this.subscribedFrame=subscribedFrame,this.unsubscribedFrame=unsubscribedFrame}return SubscriptionLog}();exports.SubscriptionLog=SubscriptionLog},{}],709:[function(require,module,exports){"use strict";var SubscriptionLog_1=require("./SubscriptionLog"),SubscriptionLoggable=function(){function SubscriptionLoggable(){this.subscriptions=[]}return SubscriptionLoggable.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new SubscriptionLog_1.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},SubscriptionLoggable.prototype.logUnsubscribedFrame=function(index){var subscriptionLogs=this.subscriptions,oldSubscriptionLog=subscriptionLogs[index];subscriptionLogs[index]=new SubscriptionLog_1.SubscriptionLog(oldSubscriptionLog.subscribedFrame,this.scheduler.now())},SubscriptionLoggable}();exports.SubscriptionLoggable=SubscriptionLoggable},{"./SubscriptionLog":708}],710:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=require("../Observable"),Notification_1=require("../Notification"),ColdObservable_1=require("./ColdObservable"),HotObservable_1=require("./HotObservable"),SubscriptionLog_1=require("./SubscriptionLog"),VirtualTimeScheduler_1=require("../scheduler/VirtualTimeScheduler"),TestScheduler=function(_super){function TestScheduler(assertDeepEqual){_super.call(this),this.assertDeepEqual=assertDeepEqual,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return __extends(TestScheduler,_super),TestScheduler.prototype.createTime=function(marbles){var indexOf=marbles.indexOf("|");if(indexOf===-1)throw new Error('marble diagram for time should have a completion marker "|"');return indexOf*TestScheduler.frameTimeFactor},TestScheduler.prototype.createColdObservable=function(marbles,values,error){if(marbles.indexOf("^")!==-1)throw new Error('cold observable cannot have subscription offset "^"');if(marbles.indexOf("!")!==-1)throw new Error('cold observable cannot have unsubscription marker "!"');var messages=TestScheduler.parseMarbles(marbles,values,error),cold=new ColdObservable_1.ColdObservable(messages,this);return this.coldObservables.push(cold),cold},TestScheduler.prototype.createHotObservable=function(marbles,values,error){if(marbles.indexOf("!")!==-1)throw new Error('hot observable cannot have unsubscription marker "!"');var messages=TestScheduler.parseMarbles(marbles,values,error),subject=new HotObservable_1.HotObservable(messages,this);return this.hotObservables.push(subject),subject},TestScheduler.prototype.materializeInnerObservable=function(observable,outerFrame){var _this=this,messages=[];return observable.subscribe(function(value){messages.push({frame:_this.frame-outerFrame,notification:Notification_1.Notification.createNext(value)})},function(err){messages.push({frame:_this.frame-outerFrame,notification:Notification_1.Notification.createError(err)})},function(){messages.push({frame:_this.frame-outerFrame,notification:Notification_1.Notification.createComplete()})}),messages},TestScheduler.prototype.expectObservable=function(observable,unsubscriptionMarbles){var _this=this;void 0===unsubscriptionMarbles&&(unsubscriptionMarbles=null);var subscription,actual=[],flushTest={actual:actual,ready:!1},unsubscriptionFrame=TestScheduler.parseMarblesAsSubscriptions(unsubscriptionMarbles).unsubscribedFrame;return this.schedule(function(){subscription=observable.subscribe(function(x){var value=x;x instanceof Observable_1.Observable&&(value=_this.materializeInnerObservable(value,_this.frame)),actual.push({frame:_this.frame,notification:Notification_1.Notification.createNext(value)})},function(err){actual.push({frame:_this.frame,notification:Notification_1.Notification.createError(err)})},function(){actual.push({frame:_this.frame,notification:Notification_1.Notification.createComplete()})})},0),unsubscriptionFrame!==Number.POSITIVE_INFINITY&&this.schedule(function(){return subscription.unsubscribe()},unsubscriptionFrame),this.flushTests.push(flushTest),{toBe:function(marbles,values,errorValue){flushTest.ready=!0,flushTest.expected=TestScheduler.parseMarbles(marbles,values,errorValue,!0)}}},TestScheduler.prototype.expectSubscriptions=function(actualSubscriptionLogs){var flushTest={actual:actualSubscriptionLogs,ready:!1};return this.flushTests.push(flushTest),{toBe:function(marbles){var marblesArray="string"==typeof marbles?[marbles]:marbles;flushTest.ready=!0,flushTest.expected=marblesArray.map(function(marbles){return TestScheduler.parseMarblesAsSubscriptions(marbles)})}}},TestScheduler.prototype.flush=function(){for(var hotObservables=this.hotObservables;hotObservables.length>0;)hotObservables.shift().setup();_super.prototype.flush.call(this);for(var readyFlushTests=this.flushTests.filter(function(test){return test.ready});readyFlushTests.length>0;){var test=readyFlushTests.shift();this.assertDeepEqual(test.actual,test.expected)}},TestScheduler.parseMarblesAsSubscriptions=function(marbles){if("string"!=typeof marbles)return new SubscriptionLog_1.SubscriptionLog(Number.POSITIVE_INFINITY);for(var len=marbles.length,groupStart=-1,subscriptionFrame=Number.POSITIVE_INFINITY,unsubscriptionFrame=Number.POSITIVE_INFINITY,i=0;i<len;i++){var frame=i*this.frameTimeFactor,c=marbles[i];switch(c){case"-":case" ":break;case"(":groupStart=frame;break;case")":groupStart=-1;break;case"^":if(subscriptionFrame!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");subscriptionFrame=groupStart>-1?groupStart:frame;break;case"!":if(unsubscriptionFrame!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");unsubscriptionFrame=groupStart>-1?groupStart:frame;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+c+"'.")}}return unsubscriptionFrame<0?new SubscriptionLog_1.SubscriptionLog(subscriptionFrame):new SubscriptionLog_1.SubscriptionLog(subscriptionFrame,unsubscriptionFrame)},TestScheduler.parseMarbles=function(marbles,values,errorValue,materializeInnerObservables){if(void 0===materializeInnerObservables&&(materializeInnerObservables=!1),marbles.indexOf("!")!==-1)throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var len=marbles.length,testMessages=[],subIndex=marbles.indexOf("^"),frameOffset=subIndex===-1?0:subIndex*-this.frameTimeFactor,getValue="object"!=typeof values?function(x){return x}:function(x){return materializeInnerObservables&&values[x]instanceof ColdObservable_1.ColdObservable?values[x].messages:values[x]},groupStart=-1,i=0;i<len;i++){var frame=i*this.frameTimeFactor+frameOffset,notification=void 0,c=marbles[i];switch(c){case"-":case" ":break;case"(":groupStart=frame;break;case")":groupStart=-1;break;case"|":notification=Notification_1.Notification.createComplete();break;case"^":break;case"#":notification=Notification_1.Notification.createError(errorValue||"error");break;default:notification=Notification_1.Notification.createNext(getValue(c))}notification&&testMessages.push({frame:groupStart>-1?groupStart:frame,notification:notification})}return testMessages},TestScheduler}(VirtualTimeScheduler_1.VirtualTimeScheduler);exports.TestScheduler=TestScheduler},{"../Notification":400,"../Observable":401,"../scheduler/VirtualTimeScheduler":698,"./ColdObservable":706,"./HotObservable":707,"./SubscriptionLog":708}],711:[function(require,module,exports){"use strict";var root_1=require("./root"),RequestAnimationFrameDefinition=function(){function RequestAnimationFrameDefinition(root){root.requestAnimationFrame?(this.cancelAnimationFrame=root.cancelAnimationFrame.bind(root),this.requestAnimationFrame=root.requestAnimationFrame.bind(root)):root.mozRequestAnimationFrame?(this.cancelAnimationFrame=root.mozCancelAnimationFrame.bind(root),this.requestAnimationFrame=root.mozRequestAnimationFrame.bind(root)):root.webkitRequestAnimationFrame?(this.cancelAnimationFrame=root.webkitCancelAnimationFrame.bind(root),this.requestAnimationFrame=root.webkitRequestAnimationFrame.bind(root)):root.msRequestAnimationFrame?(this.cancelAnimationFrame=root.msCancelAnimationFrame.bind(root),this.requestAnimationFrame=root.msRequestAnimationFrame.bind(root)):root.oRequestAnimationFrame?(this.cancelAnimationFrame=root.oCancelAnimationFrame.bind(root),this.requestAnimationFrame=root.oRequestAnimationFrame.bind(root)):(this.cancelAnimationFrame=root.clearTimeout.bind(root),this.requestAnimationFrame=function(cb){return root.setTimeout(cb,1e3/60)})}return RequestAnimationFrameDefinition}();exports.RequestAnimationFrameDefinition=RequestAnimationFrameDefinition,exports.AnimationFrame=new RequestAnimationFrameDefinition(root_1.root)},{"./root":732}],712:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArgumentOutOfRangeError=function(_super){function ArgumentOutOfRangeError(){var err=_super.call(this,"argument out of range");this.name=err.name="ArgumentOutOfRangeError",this.stack=err.stack,this.message=err.message}return __extends(ArgumentOutOfRangeError,_super),ArgumentOutOfRangeError}(Error);exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError},{}],713:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},EmptyError=function(_super){function EmptyError(){var err=_super.call(this,"no elements in sequence");this.name=err.name="EmptyError",this.stack=err.stack,this.message=err.message}return __extends(EmptyError,_super),EmptyError}(Error);exports.EmptyError=EmptyError},{}],714:[function(require,module,exports){"use strict";var FastMap=function(){function FastMap(){this.values={}}return FastMap.prototype.delete=function(key){return this.values[key]=null,!0},FastMap.prototype.set=function(key,value){return this.values[key]=value,this},FastMap.prototype.get=function(key){return this.values[key]},FastMap.prototype.forEach=function(cb,thisArg){var values=this.values;for(var key in values)values.hasOwnProperty(key)&&null!==values[key]&&cb.call(thisArg,values[key],key)},FastMap.prototype.clear=function(){this.values={}},FastMap}();exports.FastMap=FastMap},{}],715:[function(require,module,exports){"use strict";var root_1=require("./root"),ImmediateDefinition=function(){function ImmediateDefinition(root){if(this.root=root,root.setImmediate&&"function"==typeof root.setImmediate)this.setImmediate=root.setImmediate.bind(root),this.clearImmediate=root.clearImmediate.bind(root);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var ci=function clearImmediate(handle){delete clearImmediate.instance.tasksByHandle[handle]};ci.instance=this,this.clearImmediate=ci}}return ImmediateDefinition.prototype.identify=function(o){return this.root.Object.prototype.toString.call(o)},ImmediateDefinition.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},ImmediateDefinition.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},ImmediateDefinition.prototype.canUseReadyStateChange=function(){var document=this.root.document;return Boolean(document&&"onreadystatechange"in document.createElement("script"))},ImmediateDefinition.prototype.canUsePostMessage=function(){var root=this.root;if(root.postMessage&&!root.importScripts){var postMessageIsAsynchronous_1=!0,oldOnMessage=root.onmessage;return root.onmessage=function(){postMessageIsAsynchronous_1=!1},root.postMessage("","*"),root.onmessage=oldOnMessage,postMessageIsAsynchronous_1}return!1},ImmediateDefinition.prototype.partiallyApplied=function(handler){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var fn=function result(){var _a=result,handler=_a.handler,args=_a.args;"function"==typeof handler?handler.apply(void 0,args):new Function(""+handler)()};return fn.handler=handler,fn.args=args,fn},ImmediateDefinition.prototype.addFromSetImmediateArguments=function(args){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,args),this.nextHandle++},ImmediateDefinition.prototype.createProcessNextTickSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.process.nextTick(instance.partiallyApplied(instance.runIfPresent,handle)),handle};return fn.instance=this,fn},ImmediateDefinition.prototype.createPostMessageSetImmediate=function(){var root=this.root,messagePrefix="setImmediate$"+root.Math.random()+"$",onGlobalMessage=function globalMessageHandler(event){var instance=globalMessageHandler.instance;event.source===root&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&instance.runIfPresent(+event.data.slice(messagePrefix.length))};onGlobalMessage.instance=this,root.addEventListener("message",onGlobalMessage,!1);var fn=function setImmediate(){var _a=setImmediate,messagePrefix=_a.messagePrefix,instance=_a.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.postMessage(messagePrefix+handle,"*"),handle};return fn.instance=this,fn.messagePrefix=messagePrefix,fn},ImmediateDefinition.prototype.runIfPresent=function(handle){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,handle),0);else{var task=this.tasksByHandle[handle];if(task){this.currentlyRunningATask=!0;try{task()}finally{this.clearImmediate(handle),this.currentlyRunningATask=!1}}}},ImmediateDefinition.prototype.createMessageChannelSetImmediate=function(){var _this=this,channel=new this.root.MessageChannel;channel.port1.onmessage=function(event){var handle=event.data;_this.runIfPresent(handle)};var fn=function setImmediate(){var _a=setImmediate,channel=_a.channel,instance=_a.instance,handle=instance.addFromSetImmediateArguments(arguments);return channel.port2.postMessage(handle),handle};return fn.channel=channel,fn.instance=this,fn},ImmediateDefinition.prototype.createReadyStateChangeSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,root=instance.root,doc=root.document,html=doc.documentElement,handle=instance.addFromSetImmediateArguments(arguments),script=doc.createElement("script");return script.onreadystatechange=function(){instance.runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script),handle};return fn.instance=this,fn},ImmediateDefinition.prototype.createSetTimeoutSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.setTimeout(instance.partiallyApplied(instance.runIfPresent,handle),0),handle};return fn.instance=this,fn},ImmediateDefinition}();exports.ImmediateDefinition=ImmediateDefinition,exports.Immediate=new ImmediateDefinition(root_1.root)},{"./root":732}],716:[function(require,module,exports){"use strict";var root_1=require("./root"),MapPolyfill_1=require("./MapPolyfill");exports.Map=root_1.root.Map||function(){return MapPolyfill_1.MapPolyfill}()},{"./MapPolyfill":717,"./root":732}],717:[function(require,module,exports){"use strict";var MapPolyfill=function(){function MapPolyfill(){this.size=0,this._values=[],this._keys=[]}return MapPolyfill.prototype.get=function(key){var i=this._keys.indexOf(key);return i===-1?void 0:this._values[i]},MapPolyfill.prototype.set=function(key,value){var i=this._keys.indexOf(key);return i===-1?(this._keys.push(key),this._values.push(value),this.size++):this._values[i]=value,this},MapPolyfill.prototype.delete=function(key){var i=this._keys.indexOf(key);return i!==-1&&(this._values.splice(i,1),this._keys.splice(i,1),this.size--,!0)},MapPolyfill.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},MapPolyfill.prototype.forEach=function(cb,thisArg){for(var i=0;i<this.size;i++)cb.call(thisArg,this._values[i],this._keys[i])},MapPolyfill}();exports.MapPolyfill=MapPolyfill},{}],718:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ObjectUnsubscribedError=function(_super){function ObjectUnsubscribedError(){var err=_super.call(this,"object unsubscribed");this.name=err.name="ObjectUnsubscribedError",this.stack=err.stack,this.message=err.message}return __extends(ObjectUnsubscribedError,_super),ObjectUnsubscribedError}(Error);exports.ObjectUnsubscribedError=ObjectUnsubscribedError},{}],719:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},UnsubscriptionError=function(_super){function UnsubscriptionError(errors){_super.call(this),this.errors=errors;var err=Error.call(this,errors?errors.length+" errors occurred during unsubscription:\n  "+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"");this.name=err.name="UnsubscriptionError",this.stack=err.stack,this.message=err.message}return __extends(UnsubscriptionError,_super),UnsubscriptionError}(Error);exports.UnsubscriptionError=UnsubscriptionError},{}],720:[function(require,module,exports){"use strict";function applyMixins(derivedCtor,baseCtors){for(var i=0,len=baseCtors.length;i<len;i++)for(var baseCtor=baseCtors[i],propertyKeys=Object.getOwnPropertyNames(baseCtor.prototype),j=0,len2=propertyKeys.length;j<len2;j++){var name_1=propertyKeys[j];derivedCtor.prototype[name_1]=baseCtor.prototype[name_1]}}exports.applyMixins=applyMixins},{}],721:[function(require,module,exports){"use strict";var root_1=require("./root"),Object=root_1.root.Object;"function"!=typeof Object.assign&&!function(){Object.assign=function(target){for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];if(void 0===target||null===target)throw new TypeError("cannot convert undefined or null to object");for(var output=Object(target),len=sources.length,index=0;index<len;index++){var source=sources[index];if(void 0!==source&&null!==source)for(var key in source)source.hasOwnProperty(key)&&(output[key]=source[key])}return output}}(),exports.assign=Object.assign},{"./root":732}],722:[function(require,module,exports){"use strict";exports.errorObject={e:{}}},{}],723:[function(require,module,exports){"use strict";exports.isArray=Array.isArray||function(x){return x&&"number"==typeof x.length}},{}],724:[function(require,module,exports){"use strict";function isDate(value){return value instanceof Date&&!isNaN(+value)}exports.isDate=isDate},{}],725:[function(require,module,exports){"use strict";function isFunction(x){return"function"==typeof x}exports.isFunction=isFunction},{}],726:[function(require,module,exports){"use strict";function isNumeric(val){return!isArray_1.isArray(val)&&val-parseFloat(val)+1>=0}var isArray_1=require("../util/isArray");exports.isNumeric=isNumeric},{"../util/isArray":723}],727:[function(require,module,exports){"use strict";function isObject(x){return null!=x&&"object"==typeof x}exports.isObject=isObject},{}],728:[function(require,module,exports){"use strict";function isPromise(value){return value&&"function"!=typeof value.subscribe&&"function"==typeof value.then}exports.isPromise=isPromise},{}],729:[function(require,module,exports){"use strict";function isScheduler(value){return value&&"function"==typeof value.schedule}exports.isScheduler=isScheduler},{}],730:[function(require,module,exports){"use strict";function noop(){}exports.noop=noop},{}],731:[function(require,module,exports){"use strict";function not(pred,thisArg){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=pred,notPred.thisArg=thisArg,notPred}exports.not=not},{}],732:[function(require,module,exports){(function(global){"use strict";var objectTypes={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};exports.root=objectTypes[typeof self]&&self||objectTypes[typeof window]&&window;var freeGlobal=(objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,objectTypes[typeof module]&&module&&!module.nodeType&&module,objectTypes[typeof global]&&global);!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(exports.root=freeGlobal)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],733:[function(require,module,exports){"use strict";function subscribeToResult(outerSubscriber,result,outerValue,outerIndex){var destination=new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex);if(destination.closed)return null;if(result instanceof Observable_1.Observable)return result._isScalar?(destination.next(result.value),destination.complete(),null):result.subscribe(destination);if(isArray_1.isArray(result)){for(var i=0,len=result.length;i<len&&!destination.closed;i++)destination.next(result[i]);destination.closed||destination.complete()}else{if(isPromise_1.isPromise(result))return result.then(function(value){destination.closed||(destination.next(value),destination.complete())},function(err){return destination.error(err)}).then(null,function(err){root_1.root.setTimeout(function(){throw err})}),destination;if("function"==typeof result[iterator_1.$$iterator])for(var iterator=result[iterator_1.$$iterator]();;){var item=iterator.next();if(item.done){destination.complete();break}if(destination.next(item.value),destination.closed)break}else if("function"==typeof result[observable_1.$$observable]){var obs=result[observable_1.$$observable]();if("function"==typeof obs.subscribe)return obs.subscribe(new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex));destination.error(new Error("invalid observable"))}else destination.error(new TypeError("unknown type returned"))}return null}var root_1=require("./root"),isArray_1=require("./isArray"),isPromise_1=require("./isPromise"),Observable_1=require("../Observable"),iterator_1=require("../symbol/iterator"),InnerSubscriber_1=require("../InnerSubscriber"),observable_1=require("../symbol/observable");exports.subscribeToResult=subscribeToResult},{"../InnerSubscriber":399,"../Observable":401,"../symbol/iterator":703,"../symbol/observable":704,"./isArray":723,"./isPromise":728,"./root":732}],734:[function(require,module,exports){"use strict";function toSubscriber(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber_1.Subscriber)return nextOrObserver;if(nextOrObserver[rxSubscriber_1.$$rxSubscriber])return nextOrObserver[rxSubscriber_1.$$rxSubscriber]()}return nextOrObserver||error||complete?new Subscriber_1.Subscriber(nextOrObserver,error,complete):new Subscriber_1.Subscriber}var Subscriber_1=require("../Subscriber"),rxSubscriber_1=require("../symbol/rxSubscriber");exports.toSubscriber=toSubscriber},{"../Subscriber":409,"../symbol/rxSubscriber":705}],735:[function(require,module,exports){"use strict";function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObject_1.errorObject.e=e,errorObject_1.errorObject}}function tryCatch(fn){return tryCatchTarget=fn,tryCatcher}var tryCatchTarget,errorObject_1=require("./errorObject");exports.tryCatch=tryCatch},{"./errorObject":722}],736:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),AboutComponent=function(){function AboutComponent(){}return AboutComponent=__decorate([core_1.Component({selector:"about",template:'\n    <section class="about" id="about"><div class="container"><div class="heading"><h2>About me</h2><p>a small introduction</p></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-7 col-lg-7"><h3>Louw Swart</h3><h4 class="sub-heading">Analyst Programmer, Wellington</h4><p>I have been in <b>Software Development</b> since 2008, with more than half that time spent in <b>agile environments</b>, designing, coding, testing and supporting applications across a <b>variety of technologies</b> and <b>platforms</b>.</p><p>While my background is <b>Java</b>, I have been focusing my attention on <b>JavaScript development</b> in the client layer since June 2014, working with frameworks such as Backbone, Marionette, Underscore and AngularJS.</p><p>I have a strong <b>sense of responsibility</b> and am always driven to <b>deliver on or ahead of deadlines</b>. <b>Front-end</b> or <b>back-end</b>, I\'m equally comfortable performing either or both.</p><h4 class="sub-heading">Hobbies and Interests</h4><p><i class="fa fa-camera-retro"></i>&nbsp;Photography, <i class="fa fa-android"></i>&nbsp;Android, <i class="fa fa-road"></i>&nbsp;travel and <i class="fa fa-plane"></i>&nbsp;plane spotting - not necessarily in that order.</p><a id="cv_request" href="#contact-form" class="btn-normal js_track_link_click">Request CV &amp; References</a></div><figure class="col-xs-12 col-sm-12 col-md-4 col-lg-4 col-md-offset-1 col-lg-offset-1 proPic"><img src="assets/images/profile.jpg" alt="Louw Swart" class="img-circle top-margin" width="295" height="295"></figure></div></div></section>\n  ',styles:["\n    .about{background:#00bdbd;color:#fff;position:relative}.about .container{padding-top:85px;padding-bottom:90px}.about .container .heading{text-align:center;padding-bottom:15px}.about .container .row{margin:0}.btn-normal{color:#eee;background:#474d5d;font-family:Open Sans,sans-serif;font-size:16px;font-weight:700;padding:16px 22px;display:inline-block;margin-bottom:15px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.btn-normal:hover{color:#fff;background:#373d4c;text-decoration:none}@media screen and (max-width:480px){.btn-normal{font-size:13px;padding:16px 14px}}@media screen and (max-width:992px){.profile-pic{text-align:center}}@media screen and (max-width:480px){img{width:100%}}\n    /*# sourceMappingURL=about.css.map */\n  "]}),__metadata("design:paramtypes",[])],AboutComponent)}();exports.AboutComponent=AboutComponent},{"@angular/core":154}],737:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);
return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),common_1=require("@angular/common"),platform_browser_1=require("@angular/platform-browser"),http_1=require("@angular/http"),app_1=require("./app/components/app"),AppModule=function(){function AppModule(){}return AppModule=__decorate([core_1.NgModule({imports:[platform_browser_1.BrowserModule,http_1.HttpModule],declarations:[app_1.AppComponent],providers:[{provide:common_1.APP_BASE_HREF,useValue:"/"}],bootstrap:[app_1.AppComponent]}),__metadata("design:paramtypes",[])],AppModule)}();exports.AppModule=AppModule},{"./app/components/app":738,"@angular/common":1,"@angular/core":154,"@angular/http":285,"@angular/platform-browser":318}],738:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),router_1=require("@angular/router"),app_1=require("../services/app"),header_1=require("../../header/components/header"),about_1=require("../../about/components/about"),skills_1=require("../../skills/components/skills"),experience_1=require("../../experience/components/experience"),education_1=require("../../education/components/education"),contact_1=require("../../contact/components/contact"),footer_1=require("../../footer/components/footer"),delay_1=require("../../shared/common/delay"),element_in_viewport_1=require("../../shared/common/element.in.viewport"),AppComponent=function(){function AppComponent(appService){this._appService=appService}return AppComponent.prototype.ngOnInit=function(){this.initSmoothPageScroll(),this._appService.consoleMessage()},AppComponent.prototype.initSmoothPageScroll=function(){var _this=this;!function($){$('a[href*="#"]:not([href="#"])').click(function(e){if(e.preventDefault(),location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var target=$(this.hash);target=target.length?target:$("[name="+this.hash.slice(1)+"]"),target.length&&$("html,body").animate({scrollTop:target.offset().top-60},500)}}),$("#js_menu_button").click(function(e){e.preventDefault(),_this._timeoutMenuAnimate&&clearTimeout(_this._timeoutMenuAnimate),_this._timeoutMenuAnimate=delay_1.cancelableDelay(500,function(){$("#js_navbar").hasClass("in")&&(element_in_viewport_1.elementInViewport($,$("#js_links_li"))||$("html,body").animate({scrollTop:$("#js_menu_button").offset().top},1e3))})})}(jQuery)},AppComponent=__decorate([core_1.Component({selector:"container",providers:[app_1.AppService],directives:[router_1.ROUTER_DIRECTIVES,header_1.HeaderComponent,about_1.AboutComponent,skills_1.SkillsComponent,experience_1.ExperienceComponent,education_1.EducationComponent,contact_1.ContactComponent,footer_1.FooterComponent],template:'\n    <div class="wrapper"><header></header><main><about></about><skills></skills><experience></experience><education></education><contact></contact></main><footer></footer></div>\n  ',styles:['\n    .wrapper{width:100%}@media screen and (max-width:650px){.wrapper{top:200px!important}}.special-height{padding-top:63px}.top-margin{margin-top:20px}.link{color:#428bca;font-size:12px}.browserupgrade{margin:.2em 0;background:#ccc;color:#000;padding:.2em 0}@media print{*,:after,:before{background:transparent!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}blockquote,pre{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}img{max-width:100%!important}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}}\n    /*# sourceMappingURL=app.css.map */\n  ']}),__metadata("design:paramtypes",[app_1.AppService])],AppComponent)}();exports.AppComponent=AppComponent},{"../../about/components/about":736,"../../contact/components/contact":742,"../../education/components/education":750,"../../experience/components/experience":753,"../../footer/components/footer":756,"../../header/components/header":759,"../../shared/common/delay":763,"../../shared/common/element.in.viewport":764,"../../skills/components/skills":766,"../services/app":739,"@angular/core":154,"@angular/router":376}],739:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),AppService=function(){function AppService(){}return AppService.prototype.consoleMessage=function(){console&&(console.group("On-line Portfolio and CV for Louw Swart"),console.log("\n\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c####%c#%c#%c#%c#%c##%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c#%c#%c##%c##%c#%c#%c#####%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c#%c##%c#%c######%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c###%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c#%c#%c#%c#\n              %c##%c#%c#%c#%c##%c#%c#%c#%c#%c####################%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c#%c#%c##%c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c######%c#%c#%c#%c#%c######%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c##%c#%c#####%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c##%c##%c#%c####%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c##%c#%c###%c###%c#%c#%c#%c####%c###%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c#%c#%c#%c##%c#%c#%c##%c#%c###%c#%c##%c#%c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c#%c###%c#%c####%c#%c#%c#%c#%c#%c#%c#%c##%c#%c#%c#%c##%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c##%c#######%c#%c#%c##%c######%c#%c#%c##%c##%c#%c#%c#%c#%c#%c#%c#\n              %c##%c#%c#%c#%c###%c#%c######%c#%c##%c##%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#%c#\n\n%c             Thanks for checking out my portfolio!\n       Get in touch: %chttp://portfolio.ouq77.kiwi/#contact","color: #26545b","color: #27565d","color: #27585f","color: #295a62","color: #27595f","color: #285b61","color: #2c626a","color: #2c636b","color: #2e676f","color: #2d646c","color: #316e77","color: #326f78","color: #316d75","color: #326f79","color: #33727c","color: #377a84","color: #377b85","color: #397e89","color: #397e89","color: #3b838d","color: #397f8a","color: #3a828d","color: #3a808a","color: #387f89","color: #387e88","color: #3a828d","color: #377a84","color: #377a84","color: #397e89","color: #357781","color: #34747e","color: #367882","color: #357680","color: #326f78","color: #285860","color: #295a62","color: #2a5d65","color: #2b5f67","color: #295b63","color: #2b5f68","color: #2e676f","color: #306b74","color: #2f676f","color: #32717a","color: #33737c","color: #357680","color: #357781","color: #377b85","color: #397e89","color: #3a828d","color: #3a808b","color: #3b8590","color: #39808a","color: #39818b","color: #3d8893","color: #39818b","color: #3a828d","color: #3c8691","color: #3c8590","color: #397e88","color: #3a818c","color: #3a808b","color: #357882","color: #377b86","color: #367982","color: #35767f","color: #34747d","color: #295c63","color: #2a5e66","color: #2c626a","color: #2c636b","color: #2c626a","color: #2f6971","color: #316d76","color: #326f78","color: #34747e","color: #33727b","color: #377a84","color: #387c86","color: #3c1106","color: #3f1206","color: #3c1106","color: #3f1206","color: #3c1106","color: #3f1206","color: #3c1106","color: #3f1206","color: #3c8691","color: #39818b","color: #387d87","color: #367983","color: #357882","color: #377b85","color: #33727c","color: #34757f","color: #316e76","color: #2b6169","color: #2d646d","color: #2e666e","color: #2f6971","color: #316c75","color: #32717a","color: #34747d","color: #34757f","color: #377a84","color: #387d87","color: #3c1106","color: #3f1206","color: #3c1106","color: #3f1206","color: #3c1106","color: #3f1206","color: #3c1106","color: #3f1206","color: #3d8893","color: #387f89","color: #3b838d","color: #367883","color: #357680","color: #34747e","color: #357680","color: #326f77","color: #316c75","color: #2e666e","color: #2f6971","color: #316d76","color: #327079","color: #316e76","color: #35767f","color: #367882","color: #357680","color: #377b85","color: #387d86","color: #3f1206","color: #3c1106","color: #3f1206","color: #3c1106","color: #3f1206","color: #3e1206","color: #3c1106","color: #3f1206","color: #3a838d","color: #3b8590","color: #3a828d","color: #367a84","color: #367883","color: #367882","color: #35767f","color: #33727b","color: #306b73","color: #306b74","color: #316e77","color: #33717b","color: #35767f","color: #33737c","color: #387c86","color: #39808a","color: #3b838e","color: #3c8691","color: #3a838d","color: #3f1206","color: #3c1106","color: #3f1206","color: #3c1106","color: #dfb183","color: #e6b787","color: #dbae81","color: #e6b787","color: #dbae81","color: #e6b787","color: #dbae81","color: #e2b485","color: #3b8490","color: #3a838d","color: #387f89","color: #377a84","color: #377b85","color: #367882","color: #34747d","color: #33717b","color: #326f78","color: #32717a","color: #34747d","color: #367882","color: #377b86","color: #397e89","color: #3b848f","color: #3a828d","color: #3e8b97","color: #3c8692","color: #000000","color: #35767f","color: #33727b","color: #327079","color: #306c74","color: #34757f","color: #377a84","color: #387d87","color: #397e89","color: #3b8590","color: #3d8894","color: #3b8590","color: #3c8692","color: #3d8894","color: #41929e","color: #e6b787","color: #af8b67","color: #e6b787","color: #af8b67","color: #000000","color: #e6b787","color: #dbae81","color: #e6b787","color: #000000","color: #dbae81","color: #e6b787","color: #000000","color: #3c8792","color: #3b838d","color: #387e88","color: #34747e","color: #000000","color: #34747d","color: #306c74","color: #326f78","color: #2f676f","color: #367983","color: #397e89","color: #3a828d","color: #3b8590","color: #3e8a95","color: #3e8b96","color: #408f9b","color: #41929e","color: #3f8d98","color: #41919d","color: #b8926c","color: #dbae81","color: #af8b67","color: #dbae81","color: #000000","color: #e5b686","color: #e6b787","color: #dbae81","color: #e6b787","color: #000000","color: #316e76","color: #326f78","color: #316d76","color: #2d646c","color: #3a808b","color: #3a828d","color: #3d8893","color: #3e8b96","color: #3f8c98","color: #41919d","color: #3f8d98","color: #4497a3","color: #4497a4","color: #459aa6","color: #af8b67","color: #e5b686","color: #af8b67","color: #e6b787","color: #af8b67","color: #e6b787","color: #b8926c","color: #e6b787","color: #b8926c","color: #dbae81","color: #b8926c","color: #dbae81","color: #b8926c","color: #dbae81","color: #39808a","color: #3b848f","color: #367983","color: #34747e","color: #357680","color: #34747e","color: #32717a","color: #316d76","color: #306b74","color: #2d646c","color: #3b8590","color: #3c8792","color: #3f8d99","color: #40909b","color: #42939f","color: #408e99","color: #41919d","color: #42939f","color: #459ba8","color: #469ca9","color: #e6b787","color: #dbae81","color: #b08b67","color: #b9926c","color: #42929e","color: #40909b","color: #3b8490","color: #3a838d","color: #3b8590","color: #377a84","color: #387c86","color: #367982","color: #35767f","color: #33727b","color: #326f78","color: #2e676f","color: #2f6972","color: #2c626b","color: #3e8b97","color: #408e9a","color: #40909b","color: #4294a0","color: #4396a2","color: #459aa7","color: #469ca8","color: #4497a3","color: #479eab","color: #469aa7","color: #e6b787","color: #dbae81","color: #b08b67","color: #b9926c","color: #b08b67","color: #3d8994","color: #3c8590","color: #3d8894","color: #3c8691","color: #3a808b","color: #387c86","color: #377b85","color: #35767f","color: #33737c","color: #306b73","color: #2f6870","color: #306b74","color: #2c626b","color: #2d656d","color: #408e9a","color: #42929e","color: #4396a2","color: #4498a5","color: #469ca9","color: #4395a1","color: #ee382c","color: #dbae81","color: #e6b787","color: #dbae81","color: #e6b787","color: #dbae81","color: #e3352a","color: #ee382c","color: #377a84","color: #357680","color: #33727c","color: #326f78","color: #32717a","color: #2f6971","color: #2e666f","color: #2f6971","color: #2e676f","color: #2b5f68","color: #4294a0","color: #4395a2","color: #4498a5","color: #469ca8","color: #4497a3","color: #469da9","color: #459ba8","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e6b787","color: #dbae81","color: #e6b787","color: #dbae81","color: #ee382c","color: #e3352a","color: #ee382c","color: #387c86","color: #33727c","color: #34757f","color: #316e76","color: #316d76","color: #2f6870","color: #2f6972","color: #2e676f","color: #2b6068","color: #2d646c","color: #4498a5","color: #4498a5","color: #469ca9","color: #48a1ae","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #dbae81","color: #e6b787","color: #e5b686","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #327079","color: #316d76","color: #306a73","color: #2c626b","color: #2c626a","color: #2d646d","color: #2a5d65","color: #4499a5","color: #469ca9","color: #479fac","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #e7362b","color: #e3352a","color: #ee382c","color: #316e77","color: #2e666f","color: #2f6971","color: #2d646c","color: #2d646d","color: #2d646c","color: #2a5d65","color: #479fac","color: #479fac","color: #49a2af","color: #49a3b0","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #e6362a","color: #ee382c","color: #e3352a","color: #ee382c","color: #e3352a","color: #ee382c","color: #306b74","color: #2f6971","color: #2e6770","color: #2b6068","color: #2a5e66","color: #2c626a","color: #2b6169","color: #ee382c","color: #2b6169"),console.groupEnd())},AppService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],AppService)}();exports.AppService=AppService},{"@angular/core":154}],740:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),core_2=require("@angular/core"),forms_1=require("@angular/forms"),contact_1=require("../services/contact"),contact_message_1=require("../definitions/contact.message"),TrimPipe=function(){function TrimPipe(){}return TrimPipe.prototype.transform=function(value){return value.trim()},TrimPipe=__decorate([core_2.Pipe({name:"trim"}),__metadata("design:paramtypes",[])],TrimPipe)}();exports.TrimPipe=TrimPipe;var ContactFormComponent=function(){function ContactFormComponent(contactService,fb){this._contactService=contactService,this.name=new forms_1.FormControl("",forms_1.Validators.required),this.email=new forms_1.FormControl("",forms_1.Validators.required),this.message=new forms_1.FormControl("",forms_1.Validators.required),this.heuning=new forms_1.FormControl(""),this.form=fb.group({name:this.name,email:this.email,message:this.message,heuning:this.heuning}),this.submitClicked=!1,this.submitting=!1,this.sentSuccessfully=!1,this.submitBtnText="Send message"}return ContactFormComponent.prototype.ngOnInit=function(){this.getErrorConfig()},ContactFormComponent.prototype.getErrorConfig=function(){var _this=this;this._contactService.getErrorConfig().subscribe(function(res){return _this.errorConfig=res.errorConfig},function(err){return console.warn("errorConfig not returned")})},ContactFormComponent.prototype.onClick=function(){this.submitClicked=!0},ContactFormComponent.prototype.onSubmit=function(){var _this=this;this.toggleSubmitting(),this.serverErrors="";var submission=new contact_message_1.ContactMessage(this.name.value.trim(),this.email.value.trim(),this.message.value.trim(),this.heuning.value);this._contactService.send(submission).subscribe(function(resp){return _this.handleSuccess()},function(err){return _this.handleErrors(err)})},ContactFormComponent.prototype.handleSuccess=function(){this.toggleSubmitting(),this.sentSuccessfully=!0},ContactFormComponent.prototype.handleErrors=function(err){var _this=this;switch(this.toggleSubmitting(),err.status){case 400:err.content.errors.forEach(function(error){_this.appendError(_this.errorConfig[error].message)});break;case 500:default:this.appendError(this.errorConfig.e_generic.message)}},ContactFormComponent.prototype.appendError=function(error){this.serverErrors&&(this.serverErrors+="<br>"),this.serverErrors+=error},ContactFormComponent.prototype.toggleSubmitting=function(){this.submitting=!this.submitting,this.submitBtnText=this.submitting?"Sending...":"Send message"},ContactFormComponent=__decorate([core_1.Component({selector:"contact-form",providers:[forms_1.FormBuilder,contact_1.ContactService],pipes:[TrimPipe],template:'\n    <div class="col-xs-12 col-sm-9 col-md-8 col-lg-8 contact-form"><h4>Send a message</h4><div *ngIf="sentSuccessfully" class="success-message"><h3>Email Sent Successfully.</h3><p>Thank you <strong>{{name.value | trim}}</strong>, your message has been sent.</p></div><form *ngIf="!sentSuccessfully" (ngSubmit)="onSubmit()" [formGroup]="form"><div id="result"><div *ngIf="errorConfig" [hidden]="!submitClicked || sentSuccessfully" class="error-message"><span [hidden]="name.valid">{{errorConfig.e_name_required.message}}<br></span><span [hidden]="email.valid">{{errorConfig.e_email_required.message}}<br></span><span [hidden]="message.valid">{{errorConfig.e_message_required.message}}</span> <span *ngIf="serverErrors" class="error-message" [innerHtml]="serverErrors"></span></div></div><input formControlName="name" required type="text" class="col-xs-12 col-sm-6 col-md-6 col-lg-6" placeholder="Your name..."> <input formControlName="email" autocapitalize="off" required type="email" class="col-xs-12 col-sm-6 col-md-6 col-lg-6 no-margin" placeholder="Your email..."><textarea formControlName="message" required cols="1" rows="1" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" placeholder="Your message..."></textarea><input formControlName="heuning" type="hidden"> <img *ngIf="submitting" src="assets/images/loading.gif" class="contact-loader" > <input [disabled]="(!form.valid && submitClicked) || submitting" (click)="onClick()" type="submit" name="send" class="btn-submit" value="{{submitBtnText}}"></form></div>\n  ',styles:["\n    .contact-form h4{font-weight:600;text-transform:uppercase;padding-bottom:15px}.contact-form input{background:#585f73;color:#fafafa;padding:15px 30px;border:none;margin-right:3%;margin-bottom:30px;outline:none;font-style:italic}.contact-form input.no-margin{margin-right:0}@media screen and (min-width:767px){.contact-form input.col-lg-6,.contact-form input.col-sm-6{width:48.5%}}@media screen and (max-width:480px){.contact-form input{margin-bottom:20px}}.contact-form textarea{background:#585f73;color:#fafafa;padding:15px 30px;border:none;margin-bottom:40px;outline:none;height:100px;font-style:italic}.contact-form .btn-submit{color:#eee;background:#ff675f;font-family:Open Sans,sans-serif;font-size:16px;font-weight:600;text-align:center;float:right;margin:0;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contact-form .btn-submit:hover{color:#fff;background:#f5534b;text-decoration:none}.contact-form .btn-submit:disabled{background:#f9918c}.contact-form .contact-loader{width:35px;height:35px}.contact-form .success-message{color:#00bdbd;font-weight:500}.contact-form .success-message h3{font-size:17px}.contact-form .error-message{color:#ff675f;padding-bottom:15px;font-weight:500}\n    /*# sourceMappingURL=contact.form.css.map */\n  "],directives:[forms_1.REACTIVE_FORM_DIRECTIVES]}),__metadata("design:paramtypes",[contact_1.ContactService,forms_1.FormBuilder])],ContactFormComponent)}();exports.ContactFormComponent=ContactFormComponent},{"../definitions/contact.message":743,"../services/contact":749,"@angular/core":154,"@angular/forms":246}],741:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},Animation=google.maps.Animation,event=google.maps.event,InfoWindow=google.maps.InfoWindow,LatLng=google.maps.LatLng,Map=google.maps.Map,Marker=google.maps.Marker,Polyline=google.maps.Polyline,core_1=require("@angular/core"),map_config_1=require("../models/map.config"),cities_1=require("../models/cities"),cities_2=require("../models/cities"),airports_1=require("../models/airports"),journeys_1=require("../models/journeys"),points=require("../models/points"),delay_1=require("../../shared/common/delay"),element_in_viewport_1=require("../../shared/common/element.in.viewport"),ContactMapComponent=function(){function ContactMapComponent(){this._tilesLoaded=!1,this._mapMarkersDrawn=!1,this._infoWindow=new InfoWindow,this._journeyLines=[],this._upcomingJourneyLines=[],this._cityMarkers=[],this._airportMarkerDropWait=0,this._journeyLineDrawWait=0,this._additionalMarkerWait=0}return ContactMapComponent.prototype.ngOnInit=function(){this.initializeMap(),this.initScrollListener(),this.initClickListener()},ContactMapComponent.prototype.initializeMap=function(){var _this=this,MAP_MAX_MOBILE_ZOOM_ZERO=768,MAP_MAX_TABLET_ZOOM_ONE=1024;!function($){delay_1.delay(250).then(function(){var mapOptions=Object.assign({},map_config_1.MAP_OPTIONS);$(window).width()<MAP_MAX_MOBILE_ZOOM_ZERO?(mapOptions.zoom=0,mapOptions.minZoom=0):$(window).width()<MAP_MAX_TABLET_ZOOM_ONE&&(mapOptions.zoom=1,mapOptions.minZoom=1),_this.map=new Map(document.getElementById("map-canvas"),mapOptions),journeys_1.JOURNEYS.forEach(function(journey,index){_this._journeyLines[index]=new Polyline({strokeOpacity:.5,strokeColor:"#1b1f29",strokeWeight:2,geodesic:!0,map:_this.map})}),journeys_1.UPCOMING_JOURNEYS.forEach(function(upcomingJourney,index){_this._upcomingJourneyLines[index]=new Polyline({strokeOpacity:0,icons:[{icon:{path:"M 0, -1 0,1",strokeOpacity:.5,strokeWeight:2},offset:"0",repeat:"12px"}],geodesic:!0,map:_this.map})}),_this._tilesLoadedEvent=event.addListener(_this.map,"tilesloaded",function(){event.removeListener(_this._tilesLoadedEvent),_this._tilesLoaded=!0,_this.dropMarkers()})})}(jQuery)},ContactMapComponent.prototype.initScrollListener=function(){var _this=this;!function($){$(document).on("scroll",function(){_this._timeoutScroll&&clearTimeout(_this._timeoutScroll),_this._timeoutScroll=delay_1.cancelableDelay(500,function(){_this._mapMarkersDrawn||_this.dropMarkers(750)})})}(jQuery)},ContactMapComponent.prototype.initClickListener=function(){var _this=this;!function($){$("#js_click_address").click(function(e){if(e.preventDefault(),_this._cityMarkers.length===cities_2.CITIES.length){var cityMarker=_this._cityMarkers[_this._cityMarkers.length-1];cityMarker&&_this.toggleBounce(cityMarker,cities_1.CURRENT_LOCATION.name,cities_1.CURRENT_LOCATION.description)}})}(jQuery)},ContactMapComponent.prototype.dropMarkers=function(wait){var _this=this;void 0===wait&&(wait=1500),this._markerWait=wait,function($){$(".js_trigger_map_marker").each(function(index,val){!_this._mapMarkersDrawn&&element_in_viewport_1.elementInViewport($,$(val))&&_this._tilesLoaded&&(_this._mapMarkersDrawn=!0,delay_1.delay(_this._markerWait).then(function(){airports_1.AIRPORTS.forEach(function(airport){_this._airportMarkerDropWait++,delay_1.delay(135*_this._airportMarkerDropWait).then(function(){var marker=new Marker({position:new LatLng(airport.loc.lat,airport.loc.lng),map:_this.map,draggable:!1,animation:Animation.DROP,zIndex:100,title:airport.iataCode+" // "+airport.name,icon:{url:"assets/images/markerairport.png",size:points.AIRPORT_SIZE}});event.addListener(marker,"click",function(){_this.toggleBounce(marker,airport.iataCode,airport.name+"<br>"+airport.city+", "+airport.country)})})}),journeys_1.JOURNEYS.forEach(function(journey,index){var journeyLine=_this._journeyLines[index];journey.forEach(function(leg){_this._journeyLineDrawWait++,delay_1.delay(65*_this._journeyLineDrawWait).then(function(){journeyLine.getPath().push(new LatLng(leg.loc.lat,leg.loc.lng))})})}),journeys_1.UPCOMING_JOURNEYS.forEach(function(journey,index){var upcomingJourneyLine=_this._upcomingJourneyLines[index];journey.forEach(function(leg){_this._journeyLineDrawWait++,delay_1.delay(65*_this._journeyLineDrawWait).then(function(){upcomingJourneyLine.getPath().push(new LatLng(leg.loc.lat,leg.loc.lng))})})}),_this._additionalMarkerWait=100*(airports_1.AIRPORTS.length-1),cities_2.CITIES.forEach(function(city,index){delay_1.delay(650*index+_this._additionalMarkerWait).then(function(){_this.addMarker(city)})}),delay_1.delay(700*cities_2.CITIES.length+_this._additionalMarkerWait).then(function(){_this.map.panTo(points.WELLINGTON),_this.zoomMap(_this.map.getZoom()+1,$(window).width()>=1e3?11:10)})}))})}(jQuery)},ContactMapComponent.prototype.addMarker=function(city){var _this=this,cityMarker=new Marker({position:new LatLng(city.loc.lat,city.loc.lng),map:this.map,title:city.name,draggable:!1,animation:Animation.DROP,zIndex:200,icon:city.icon});this._cityMarkers.push(cityMarker),event.addListener(cityMarker,"click",function(){_this.toggleBounce(cityMarker,city.name,city.description)})},ContactMapComponent.prototype.zoomMap=function(nextZoomLevel,maxZoom){var _this=this;void 0===nextZoomLevel&&(nextZoomLevel=0),void 0===maxZoom&&(maxZoom=0),nextZoomLevel<maxZoom?(this._tilesLoadedEvent=event.addListener(this.map,"tilesloaded",function(){event.removeListener(_this._tilesLoadedEvent),_this.zoomMap(_this.map.getZoom()+1,maxZoom)}),delay_1.delay(280).then(function(){_this.map.setZoom(nextZoomLevel)})):this.map.setOptions({scrollwheel:!0})},ContactMapComponent.prototype.toggleBounce=function(marker,infoTitle,infoContent){var _this=this;this._timeoutMarkerBounce&&(clearTimeout(this._timeoutMarkerBounce),this._markerBounce&&this._markerBounce.setAnimation(null)),this._markerBounce=marker,this._markerBounce.setAnimation(Animation.BOUNCE),this._infoWindow.close(),this._infoWindow.setContent('\n        <div class="map-info-window">\n          <h3>'+infoTitle+"</h3>\n          <p>"+infoContent+"</p>\n        </div>\n      "),this._infoWindow.open(this.map,this._markerBounce),this._timeoutMarkerBounce=delay_1.cancelableDelay(2e3,function(){_this._markerBounce.setAnimation(null),_this._markerBounce=null})},ContactMapComponent=__decorate([core_1.Component({selector:"googlemap",template:'\n    <div class="row map-area"><div id="map-canvas"></div></div>\n  ',styles:["\n    .map-area{background:transparent url(assets/images/map-bro.png) repeat-x 0 0;padding-top:4px;height:500px;overflow:hidden;width:100%;margin:0}@media screen and (max-width:1200px){.map-area{height:450px}}@media screen and (max-width:810px){.map-area{height:350px}}@media screen and (max-width:767px){.map-area{height:200px}}#map-canvas{width:100%;height:100%}\n    /*# sourceMappingURL=contact.gmap.css.map */\n  "]}),__metadata("design:paramtypes",[])],ContactMapComponent)}();exports.ContactMapComponent=ContactMapComponent},{"../../shared/common/delay":763,"../../shared/common/element.in.viewport":764,"../models/airports":744,"../models/cities":745,"../models/journeys":746,"../models/map.config":747,"../models/points":748,"@angular/core":154}],742:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),contact_gmap_1=require("./contact.gmap"),contact_form_1=require("./contact.form"),ContactComponent=function(){function ContactComponent(){}return ContactComponent=__decorate([core_1.Component({selector:"contact",directives:[contact_gmap_1.ContactMapComponent,contact_form_1.ContactFormComponent],template:'\n    <section class="contact" id="contact"><div class="container top-container"><div class="heading"><h2 class="js_trigger_map_marker">Get In Touch</h2><p>contact me to have a chat</p></div></div><googlemap></googlemap></section><section class="contact-details" id="contact-form"><div class="container"><div class="col-xs-12 col-sm-3 col-md-4 col-lg-4"><h4 class="js_trigger_map_marker">Contact details</h4><p><i class="fa fa-map-marker fa-lg"></i>&nbsp;<a href="#address" id="js_click_address" class="js_track_link_click">Mount Cook, Wellington, New Zealand</a></p><p><i class="fa fa-mobile fa-lg"></i>&nbsp;+64 22 031 3927</p><p><i class="fa fa-link"></i>&nbsp;<a href="http://flavors.ouq77.kiwi" target="_blank" class="js_track_link_click">Flavors.me</a></p><p><i class="fa fa-link"></i>&nbsp;<a href="https://portfolio.ouq77.kiwi" target="_blank" class="js_track_link_click" itemscope="url">portfolio.ouq77.kiwi</a></p></div><contact-form></contact-form></div></section>\n  ',
styles:["\n    .contact{background:#fff}.contact .container{padding-top:85px;padding-bottom:90px}.contact .container .heading{text-align:center;padding-bottom:15px}.contact .container .row{margin:0}.contact h2{color:#ff675f}.contact p{color:#84868d;line-height:18px}.contact .heading p{padding-bottom:41px}.contact h4{font-weight:700}.top-container{padding-bottom:0!important}.contact-details{background:#474d5d url(assets/images/map-bro.png) repeat-x 0 0}.contact-details .container{padding-top:85px;padding-bottom:90px}.contact-details h4{font-weight:600;text-transform:uppercase;padding-bottom:15px}.contact-details p{color:#84868d;font-size:13px;line-height:19px;padding-bottom:14px}.contact-details p a{color:#84868d}.contact-details p a:hover{color:#a9abb0;text-decoration:none}.contact-details i{padding-right:15px}@media screen and (max-width:810px){.contact-details i{padding-right:5px}}\n    /*# sourceMappingURL=contact.css.map */\n  "]}),__metadata("design:paramtypes",[])],ContactComponent)}();exports.ContactComponent=ContactComponent},{"./contact.form":740,"./contact.gmap":741,"@angular/core":154}],743:[function(require,module,exports){"use strict";var ContactMessage=function(){function ContactMessage(name,email,text,heuning){this.name=name,this.email=email,this.text=text,this.heuning=heuning}return ContactMessage}();exports.ContactMessage=ContactMessage},{}],744:[function(require,module,exports){"use strict";var SOUTH_AFRICA="South Africa",NEW_ZEALAND="New Zealand",NORWAY="Norway",JAPAN="Japan",AUSTRALIA="Australia",HONG_KONG="Hong Kong",THAILAND="Thailand",USA="United States",ZAMBIA="Zambia",ZIMBABWE="Zimbabwe";exports.JNB={loc:{lat:-26.136837,lng:28.241157},iataCode:"JNB",name:"OR Tambo International Airport",city:"Johannesburg",country:SOUTH_AFRICA},exports.CPT={loc:{lat:-33.971459,lng:18.602241},iataCode:"CPT",name:"Cape Town International Airport",city:"Cape Town",country:SOUTH_AFRICA},exports.MBD={loc:{lat:-25.807261,lng:25.544465},iataCode:"MBD",name:"Mafikeng International Airport",city:"Mafikeng",country:SOUTH_AFRICA},exports.DUR={loc:{lat:-29.967507,lng:30.947187},iataCode:"DUR",name:"Durban International Airport",city:"Durban",country:SOUTH_AFRICA},exports.KIM={loc:{lat:-28.802682,lng:24.765399},iataCode:"KIM",name:"Kimberley Airport",city:"Kimberley",country:SOUTH_AFRICA},exports.BFN={loc:{lat:-29.095735,lng:26.298145},iataCode:"BFN",name:"Bram Fischer International Airport",city:"Bloemfontein",country:SOUTH_AFRICA},exports.PLZ={loc:{lat:-33.986448,lng:25.61039},iataCode:"PLZ",name:"Port Elizabeth Airport",city:"Port Elizabeth",country:SOUTH_AFRICA},exports.ELS={loc:{lat:-33.038191,lng:27.828955},iataCode:"ELS",name:"East London Airport",city:"East London",country:SOUTH_AFRICA},exports.GRJ={loc:{lat:-34.005193,lng:22.378423},iataCode:"GRJ",name:"George Airport",city:"George",country:SOUTH_AFRICA},exports.MPM={loc:{lat:-25.919804,lng:32.572997},iataCode:"MPM",name:"Maputo International Airport",city:"Maputo",country:"Mozambique"},exports.GBE={loc:{lat:-24.555994,lng:25.918776},iataCode:"GBE",name:"Sir Seretse Khama International Airport",city:"Gaborone",country:"Botswana"},exports.WDH={loc:{lat:-22.480292,lng:17.470903},iataCode:"WDH",name:"Hosea Kutako International Airport",city:"Windhoek",country:"Namibia"},exports.BUQ={loc:{lat:-20.018368,lng:28.624652},iataCode:"BUQ",name:"Joshua Mqabuko Nkomo International Airport",city:"Bulawayo",country:ZIMBABWE},exports.HRE={loc:{lat:-17.918871,lng:31.097359},iataCode:"HRE",name:"Harare International Airport",city:"Harare",country:ZIMBABWE},exports.LVI={loc:{lat:-17.818925,lng:25.818595},iataCode:"LVI",name:"Harry Mwanga Nkumbula International Airport",city:"Livingstone ",country:ZAMBIA},exports.LUN={loc:{lat:-15.330899,lng:28.454393},iataCode:"LUN",name:"Kenneth Kaunda International Airport",city:"Lusaka",country:ZAMBIA},exports.LAD={loc:{lat:-8.848009,lng:13.2349},iataCode:"LAD",name:"Quatro de Fevereiro Airport",city:"Luanda",country:"Angola"},exports.DAR={loc:{lat:-6.872619,lng:39.206986},iataCode:"DAR",name:"Julius Nyerere International Airport",city:"Dar es Salaam",country:"Tanzania"},exports.EBB={loc:{lat:.044929,lng:32.44288},iataCode:"EBB",name:"Entebbe International Airport",city:"Entebbe",country:"Uganda"},exports.NBO={loc:{lat:-1.322705,lng:36.926611},iataCode:"NBO",name:"Jomo Kenyatta International Airport",city:"Nairobi",country:"Kenya"},exports.FIH={loc:{lat:-4.385679,lng:15.444503},iataCode:"FIH",name:"N'djili International Airport",city:"Kinshasa",country:"Congo (DRC)"},exports.LOS={loc:{lat:6.581759,lng:3.321484},iataCode:"LOS",name:"Murtala Muhammed International Airport",city:"Lagos",country:"Nigeria"},exports.ABJ={loc:{lat:5.254863,lng:-3.93287},iataCode:"ABJ",name:"Felix Houphouet Boigny Airport",city:"Abidjan",country:"Cte d'Ivoire"},exports.ACC={loc:{lat:5.606068,lng:-.168107},iataCode:"ACC",name:"Kotoka International Airport",city:"Accra",country:"Ghana"},exports.DKR={loc:{lat:14.744887,lng:-17.490146},iataCode:"DKR",name:"Lopold Sdar Senghor International Airport",city:"Dakar",country:"Senegal"},exports.SID={loc:{lat:16.734608,lng:-22.943608},iataCode:"SID",name:"Amilcar Cabral International Airport",city:"Ilha do Sal",country:"Cape Verde"},exports.MRU={loc:{lat:-20.430714,lng:57.675511},iataCode:"MRU",name:"Sir Seewoosagur Ramgoolam Airport",city:"Plaine Magnien",country:"Mauritius"},exports.GRU={loc:{lat:-23.434617,lng:-46.478013},iataCode:"GRU",name:"Guarulhos International Airport",city:"So Paulo",country:"Brazil"},exports.EZE={loc:{lat:-34.822544,lng:-58.534969},iataCode:"EZE",name:"Ministro Pistarini International Airport",city:"Beunos Aires",country:"Argentina"},exports.MIA={loc:{lat:25.795947,lng:-80.286611},iataCode:"MIA",name:"Miami International Airport",city:"Miami",country:USA},exports.ATL={loc:{lat:33.640795,lng:-84.427223},iataCode:"ATL",name:"HartsfieldJackson Atlanta International Airport",city:"Atlanta",country:USA},exports.IAD={loc:{lat:38.952765,lng:-77.451732},iataCode:"IAD",name:"Washington Dulles International Airport",city:"Washington",country:USA},exports.JFK={loc:{lat:40.641242,lng:-73.777941},iataCode:"JFK",name:"John F. Kennedy International Airport",city:"New York",country:USA},exports.LGA={loc:{lat:40.776992,lng:-73.873376},iataCode:"LGA",name:"LaGuardia Airport",city:"New York",country:USA},exports.YVR={loc:{lat:49.196659,lng:-123.181056},iataCode:"YVR",name:"Vancouver International Airport",city:"Vancouver",country:"Canada"},exports.LHR={loc:{lat:51.469979,lng:-.454044},iataCode:"LHR",name:"London Heathrow Airport",city:"London",country:"United Kingdom"},exports.FRA={loc:{lat:50.037936,lng:8.562608},iataCode:"FRA",name:"Frankfurt Airport",city:"Frankfurt",country:"Germany"},exports.ZRH={loc:{lat:47.458256,lng:8.555717},iataCode:"ZRH",name:"Zurich Airport",city:"Zurich",country:"Switzerland"},exports.CDG={loc:{lat:49.009702,lng:2.548251},iataCode:"CDG",name:"Charles de Gaulle Airport",city:"Paris",country:"France"},exports.CPH={loc:{lat:55.618039,lng:12.651198},iataCode:"CPH",name:"Copenhagen Airport",city:"Copenhagen",country:"Denmark"},exports.AMS={loc:{lat:52.310523,lng:4.76874},iataCode:"AMS",name:"Amsterdam Airport Schiphol",city:"Amsterdam",country:"Netherlands"},exports.BOM={loc:{lat:19.090121,lng:72.868905},iataCode:"BOM",name:"Chhatrapati Shivaji International Airport",city:"Mumbai",country:"India"},exports.BKK={loc:{lat:13.913019,lng:100.604164},iataCode:"BKK",name:"Donmuang Airport (old)",city:"Bangkok",country:THAILAND},exports.BKKN={loc:{lat:13.689084,lng:100.751023},iataCode:"BKK",name:"Suvarnabhumi Airport",city:"Bangkok",country:THAILAND},exports.KIX={loc:{lat:34.432015,lng:135.230817},iataCode:"KIX",name:"Kansai International Airport",city:"Osaka",country:JAPAN},exports.USM={loc:{lat:9.548389,lng:100.063484},iataCode:"USM",name:"Koh Samui Airport",city:"Koh Samui",country:THAILAND},exports.HKG={loc:{lat:22.324767,lng:114.19859},iataCode:"HKG",name:"Kai Tak Airport (old)",city:HONG_KONG,country:HONG_KONG},exports.HKGN={loc:{lat:22.307862,lng:113.922394},iataCode:"HKG",name:"Hong Kong International Airport",city:"Chek Lap Kok",country:HONG_KONG},exports.PER={loc:{lat:-31.938471,lng:115.967523},iataCode:"PER",name:"Perth Airport",city:"Perth",country:AUSTRALIA},exports.DPS={loc:{lat:-8.746727,lng:115.166801},iataCode:"DPS",name:"Ngurah Rai International Airport",city:"Denpasar",country:"Bali"},exports.DRW={loc:{lat:-12.411127,lng:130.878227},iataCode:"DRW",name:"Darwin International Airport",city:"Darwin",country:AUSTRALIA},exports.ADL={loc:{lat:-34.946134,lng:138.533726},iataCode:"ADL",name:"Adelaide Airport",city:"Adelaide",country:AUSTRALIA},exports.SYD={loc:{lat:-33.939953,lng:151.175249},iataCode:"SYD",name:"Kingsford Smith Airport",city:"Sydney",country:AUSTRALIA},exports.HLZ={loc:{lat:-37.86547,lng:175.337267},iataCode:"HLZ",name:"Hamilton International Airport",city:"Hamilton",country:NEW_ZEALAND},exports.CHC={loc:{lat:-43.486456,lng:172.537369},iataCode:"CHC",name:"Christchurch International Airport",city:"Christchurch",country:NEW_ZEALAND},exports.ZQN={loc:{lat:-45.020983,lng:168.740325},iataCode:"ZQN",name:"Queenstown Airport",city:"Queenstown",country:NEW_ZEALAND},exports.AKL={loc:{lat:-37.008227,lng:174.78576},iataCode:"AKL",name:"Auckland Airport",city:"Auckland",country:NEW_ZEALAND},exports.WLG={loc:{lat:-41.327551,lng:174.808308},iataCode:"WLG",name:"Wellington International Airport",city:"Wellington",country:NEW_ZEALAND},exports.NSN={loc:{lat:-41.30002,lng:173.225254},iataCode:"NSN",name:"Nelson Airport",city:"Nelson",country:NEW_ZEALAND},exports.TRG={loc:{lat:-37.672093,lng:176.197666},iataCode:"TRG",name:"Tauranga City Airport",city:"Tauranga",country:NEW_ZEALAND},exports.ROT={loc:{lat:-38.109354,lng:176.317118},iataCode:"ROT",name:"Rotorua International Airport",city:"Rotorua",country:NEW_ZEALAND},exports.RAR={loc:{lat:-21.20231,lng:-159.805334},iataCode:"RAR",name:"Rarotonga International Airport",city:"Avarua",country:"Cook Islands"},exports.NRT={loc:{lat:35.771991,lng:140.3906614},iataCode:"NRT",name:"Narita International Airport",city:"Tokyo",country:JAPAN},exports.SIN={loc:{lat:1.3644256,lng:103.9893421},iataCode:"SIN",name:"Changi Airport Singapore",city:"Singapore",country:"Singapore"},exports.ARN={loc:{lat:59.6497649,lng:17.921592},iataCode:"ARN",name:"Stockholm Arlanda Airport",city:"Stockholm",country:"Sweden"},exports.BGO={loc:{lat:60.2918326,lng:5.2198286},iataCode:"BGO",name:"Bergen Airport",city:"Bergen",country:NORWAY},exports.TRD={loc:{lat:63.4582722,lng:10.9204103},iataCode:"TRD",name:"Trondheim Airport",city:"Trondheim",country:NORWAY},exports.BOO={loc:{lat:67.268313,lng:14.3600464},iataCode:"BOO",name:"Bod Airport",city:"Bod",country:NORWAY},exports.SJV={loc:{lat:68.243335,lng:14.6669783},iataCode:"SJV",name:"Svolvr Airport",city:"Svolvr",country:NORWAY},exports.TOS={loc:{lat:69.6819372,lng:18.914075},iataCode:"TOS",name:"Troms Airport",city:"Troms",country:NORWAY},exports.TIU={loc:{lat:-44.303448,lng:171.2241313},iataCode:"TIU",name:"Richard Pearse Airport",city:"Timaru",country:NEW_ZEALAND},exports.CBR={loc:{lat:-35.3032616,lng:149.1746154},iataCode:"CBR",name:"Canberra Airport",city:"Canberra",country:AUSTRALIA},exports.NPL={loc:{lat:-39.007847,lng:174.1754103},iataCode:"NPL",name:"New Plymouth Airport",city:"New Plymouth",country:NEW_ZEALAND},exports.AIRPORTS=[exports.KIM,exports.PLZ,exports.ELS,exports.JNB,exports.AMS,exports.LHR,exports.NBO,exports.CPT,exports.MBD,exports.DUR,exports.BFN,exports.GRJ,exports.MPM,exports.GBE,exports.WDH,exports.BUQ,exports.HRE,exports.LVI,exports.LUN,exports.LAD,exports.DAR,exports.EBB,exports.FIH,exports.LOS,exports.ABJ,exports.ACC,exports.DKR,exports.SID,exports.MIA,exports.ATL,exports.IAD,exports.JFK,exports.LGA,exports.MRU,exports.HKG,exports.PER,exports.SYD,exports.EZE,exports.GRU,exports.YVR,exports.FRA,exports.ZRH,exports.CDG,exports.CPH,exports.BOM,exports.BKK,exports.KIX,exports.BKKN,exports.USM,exports.HKGN,exports.DPS,exports.DRW,exports.ADL,exports.HLZ,exports.CHC,exports.ZQN,exports.AKL,exports.WLG,exports.NSN,exports.TRG,exports.ROT,exports.RAR,exports.NRT,exports.SIN,exports.ARN,exports.BGO,exports.TRD,exports.BOO,exports.SJV,exports.TOS,exports.TIU,exports.CBR,exports.NPL]},{}],745:[function(require,module,exports){"use strict";var points=require("./points"),lived="I've lived here...",prevIcon={url:"assets/images/markerprev.png",size:points.MARKER_SIZE},curIcon={url:"assets/images/markercur.png",size:points.MARKER_SIZE},HARTSWATER={name:"Hartswater, South Africa",loc:points.HARTSWATER,description:"I was born here...",icon:prevIcon},HEIDELBERG={name:"Heidelberg, South Africa",loc:points.HEIDELBERG,description:"I grew up here...",icon:prevIcon},VRYBURG={name:"Vryburg, South Africa",loc:points.VRYBURG,description:"I went to High School here...",icon:prevIcon},LONDON={name:"London, United Kingdom",loc:points.LONDON,description:lived,icon:prevIcon},JOHANNESBURG={name:"Johannesburg, South Africa",loc:points.BENONI,description:lived,icon:prevIcon},CAPE_TOWN={name:"Cape Town, South Africa",loc:points.CAPE_TOWN,description:"I moved to NZ from here...",icon:prevIcon},HAMILTON={name:"Hamilton, New Zealand",loc:points.HAMILTON,description:lived,icon:prevIcon},AUCKLAND={name:"Auckland, New Zealand",loc:points.AUCKLAND,description:lived,icon:prevIcon},MT_COOK={name:"Mt Cook, Wellington, New Zealand",loc:points.MT_COOK,description:"I currently live in this area...",icon:curIcon};exports.CURRENT_LOCATION=MT_COOK,exports.CITIES=[HARTSWATER,HEIDELBERG,VRYBURG,LONDON,JOHANNESBURG,CAPE_TOWN,HAMILTON,AUCKLAND,MT_COOK]},{"./points":748}],746:[function(require,module,exports){"use strict";var airports=require("./airports");exports.JOURNEYS=[[airports.KIM,airports.PLZ,airports.ELS],[airports.KIM,airports.JNB],[airports.JNB,airports.AMS,airports.LHR],[airports.JNB,airports.NBO,airports.LHR],[airports.JNB,airports.CPT],[airports.JNB,airports.MBD],[airports.JNB,airports.DUR],[airports.JNB,airports.BFN],[airports.JNB,airports.PLZ],[airports.JNB,airports.ELS],[airports.JNB,airports.GRJ],[airports.JNB,airports.MPM],[airports.JNB,airports.GBE],[airports.JNB,airports.WDH],[airports.JNB,airports.BUQ],[airports.JNB,airports.HRE],[airports.JNB,airports.LVI],[airports.JNB,airports.LUN],[airports.JNB,airports.LAD],[airports.JNB,airports.DAR],[airports.JNB,airports.EBB],[airports.JNB,airports.FIH],[airports.JNB,airports.LOS],[airports.JNB,airports.ABJ,airports.ACC,airports.JNB],[airports.JNB,airports.DKR],[airports.JNB,airports.SID,airports.JFK,airports.JNB],[airports.SID,airports.MIA,airports.CPT],[airports.SID,airports.ATL,airports.IAD,airports.LGA,airports.ATL,airports.JNB],[airports.JNB,airports.MRU],[airports.JNB,airports.HKG],[airports.JNB,airports.PER,airports.SYD],[airports.JNB,airports.EZE],[airports.JNB,airports.GRU,airports.EZE,airports.CPT],[airports.LHR,airports.YVR],[airports.JNB,airports.FRA,airports.AMS],[airports.JNB,airports.ZRH,airports.CPH],[airports.ZRH,airports.CDG],[airports.JNB,airports.BOM],[airports.JNB,airports.BKK,airports.KIX],[airports.JNB,airports.HKGN],[airports.BKK,airports.HKGN],[airports.BKK,airports.USM],[airports.JNB,airports.BKKN,airports.USM],[airports.JNB,airports.SYD],[airports.PER,airports.DPS,airports.DRW,airports.ADL,airports.SYD],[airports.CPT,airports.BFN],[airports.CPT,airports.KIM],[airports.CPT,airports.LHR],[airports.CPT,airports.FRA],[airports.CPT,airports.PLZ,airports.DUR],[airports.HKGN,airports.AKL],[airports.AKL,airports.SYD,airports.BKKN],[airports.AKL,airports.WLG],[airports.AKL,airports.CHC],[airports.HLZ,airports.WLG],[airports.HLZ,airports.CHC],[airports.AKL,airports.ZQN],[airports.AKL,airports.NSN],[airports.WLG,airports.TRG],[airports.WLG,airports.ROT],[airports.WLG,airports.CHC],[airports.AKL,airports.RAR],[airports.AKL,airports.NRT,airports.LHR],[airports.LHR,airports.ARN],[airports.BGO,airports.TRD],[airports.BOO,airports.SJV],[airports.TOS,airports.ARN],[airports.LHR,airports.SIN,airports.SYD,airports.WLG],[airports.WLG,airports.TIU],[airports.WLG,airports.NSN]],exports.UPCOMING_JOURNEYS=[[airports.WLG,airports.CBR,airports.SIN,airports.JNB],[airports.WLG,airports.NPL]]},{"./airports":744}],747:[function(require,module,exports){"use strict";var points_1=require("./points");exports.MAP_OPTIONS={scrollwheel:!1,center:points_1.START_POINT,zoom:2,minZoom:2,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#00bdbd"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#f7f1df"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#bde6ab"}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#abce83"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#f5534b"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#f5534b"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ff675f"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"black"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#cfb2db"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#474d5d"}]},{featureType:"transit.line",elementType:"geometry.stroke",stylers:[{color:"#474d5d"}]}]}},{"./points":748}],748:[function(require,module,exports){"use strict";exports.START_POINT={lat:22.4988409,lng:78.471251},exports.LONDON={lat:51.451005,lng:-.14797},exports.CAPE_TOWN={lat:-33.93462,lng:18.406203},exports.BENONI={lat:-26.172906,lng:28.310071},exports.HARTSWATER={lat:-27.746947,lng:24.760681},exports.HEIDELBERG={lat:-34.025956,lng:20.937695},exports.VRYBURG={lat:-26.952586,lng:24.716451},exports.HAMILTON={lat:-37.779755,lng:175.277283},exports.AUCKLAND={lat:-36.847639,lng:174.762473},exports.WELLINGTON={lat:-41.284938,lng:174.762324},exports.MT_COOK={lat:-41.2985754,lng:174.7707331},exports.MARKER_SIZE=new google.maps.Size(20,32),exports.AIRPORT_SIZE=new google.maps.Size(9,12)},{}],749:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),http_1=require("@angular/http");require("rxjs/Rx");var wrap_error_1=require("../../shared/common/wrap.error"),ContactService=function(){function ContactService(http){this._http=http}return ContactService.prototype.getErrorConfig=function(){return this._http.get("/errorconfig").map(function(resp){return resp.json()}).catch(function(err){return wrap_error_1.wrapError(err)})},ContactService.prototype.send=function(message){var body=JSON.stringify(message),options=new http_1.RequestOptions({headers:new http_1.Headers({"Content-Type":"application/json"})});return this._http.post("/send",body,options).map(function(resp){return resp.json()}).catch(function(err){return wrap_error_1.wrapError(err)})},ContactService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],ContactService)}();exports.ContactService=ContactService},{"../../shared/common/wrap.error":765,"@angular/core":154,"@angular/http":285,"rxjs/Rx":405}],750:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),core_2=require("@angular/core"),http_1=require("@angular/http"),education_1=require("../services/education"),BadgeUrlPipe=function(){function BadgeUrlPipe(){}return BadgeUrlPipe.prototype.transform=function(badge){var badgeId=badge.match(/(\/\d{2,3}\/)/);return"https://www.codeschool.com/users/ouq77/badges"+(badgeId&&badgeId[0]||"")},BadgeUrlPipe=__decorate([core_2.Pipe({name:"badgeUrl"}),__metadata("design:paramtypes",[])],BadgeUrlPipe)}();exports.BadgeUrlPipe=BadgeUrlPipe;var MemberDatePipe=function(){function MemberDatePipe(){}return MemberDatePipe.prototype.transform=function(memberDate){return new Date(memberDate).toLocaleDateString()},MemberDatePipe=__decorate([core_2.Pipe({name:"memberDate"}),__metadata("design:paramtypes",[])],MemberDatePipe)}();exports.MemberDatePipe=MemberDatePipe;var ScorePipe=function(){function ScorePipe(){}return ScorePipe.prototype.transform=function(score){return score.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},ScorePipe=__decorate([core_2.Pipe({name:"score"}),__metadata("design:paramtypes",[])],ScorePipe)}();exports.ScorePipe=ScorePipe;var EducationComponent=function(){function EducationComponent(educationService){this._educationService=educationService}return EducationComponent.prototype.ngOnInit=function(){this.getSchools(),this.getCodeSchool()},EducationComponent.prototype.getSchools=function(){var _this=this;this._educationService.getSchools().then(function(schools){return _this.schools=schools})},EducationComponent.prototype.getCodeSchool=function(){var _this=this;this._educationService.getCodeSchool().subscribe(function(codeSchool){return _this.codeSchool=codeSchool})},EducationComponent=__decorate([core_1.Component({selector:"education",providers:[http_1.Jsonp,http_1.JSONP_PROVIDERS,education_1.EducationService],pipes:[BadgeUrlPipe,MemberDatePipe,ScorePipe],template:'\n    <section class="education" id="education"><div class="container"><div class="heading"><h2>Education</h2><p>what I\'ve studied</p></div><div *ngIf="codeSchool && codeSchool.courses" class="row education-details"><div class="col-xs-12 col-sm-3 col-md-2 col-lg-2"><div class="education-year">Continuous<br>improvement</div></div><div class="col-xs-12 col-sm-9 col-md-10 col-lg-10 right-area"><div class="arrow-part"></div><div class="education-container"><h4>Code School <a href="https://www.codeschool.com/users/ouq77" target="_blank" class="link js_track_link_click"><i class="fa fa-link"></i></a></h4><h5>Learn by doing</h5><h5 class="sub-heading"><i>Interactive programming courses and coding challenges</i></h5><section class="content"><p>Member since: <strong><time>{{codeSchool.user.member_since | memberDate}}</time></strong><br>Total score: <strong>{{codeSchool.user.total_score | score}}</strong></p></section><h6>Courses completed</h6><section class="content"><div class="row"><div class="cs-badge col-md-2" *ngFor="let course of codeSchool.courses.completed"><p><a href="{{course.badge | badgeUrl}}" title="{{course.title}}" target="_blank" class="js_track_link_click"><img src="{{course.badge}}" alt="{{course.title}}" width="95px"></a></p></div></div></section><h6 *ngIf="codeSchool.courses.in_progress">Courses in progress</h6><section *ngIf="codeSchool.courses.in_progress" class="content"><div class="row"><div class="cs-badge col-md-2" *ngFor="let course of codeSchool.courses.in_progress"><p><a href="{{course.url}}" title="{{course.title}}" target="_blank" class="js_track_link_click"><img src="{{course.badge}}" alt="{{course.title}}" width="95px"></a></p></div></div></section></div></div></div><div *ngFor="let school of schools" class="row education-details"><div class="col-xs-12 col-sm-3 col-md-2 col-lg-2"><div class="education-year">{{school.year.from}} <i class="fa fa-chevron-circle-right"></i><br>{{school.year.to}}</div></div><div class="col-xs-12 col-sm-9 col-md-10 col-lg-10 right-area"><div class="arrow-part"></div><div class="education-container"><h4>{{school.institution.name}} <a href="{{school.institution.url}}" target="_blank" class="link js_track_link_click"><i class="fa fa-link"></i></a></h4><h5>{{school.qualification}}</h5><h5 class="sub-heading"><i>{{school.institution.location}}</i></h5><section [innerHTML]="school.content" class="content"></section></div></div></div></div></section>\n  ',styles:["\n    .education{background:#eee}.education .container{padding-top:85px;padding-bottom:90px}.education .container .heading{text-align:center;padding-bottom:15px}.education .container .row{margin:0}.education h2{color:#ff675f}.education p{color:#84868d;line-height:18px}.education .heading p{padding-bottom:41px}.education h4{font-weight:700}.education .education-container{width:auto;background:#fafafa;border-bottom:4px solid #e5e4e4;padding:22px 47px 6px;margin-left:15px;text-align:left}.education .education-container h4{color:#474d5d;padding-bottom:3px}.education .education-container h5,.education .education-container h6{color:#474d5d}.education .education-container .content{color:#84868d;line-height:21px}.education .education-container .content .row{padding-top:20px}.education .education-container .content .row .cs-badge{min-height:117px}.education .education-container .content .row .cs-badge p{text-align:center}@media screen and (max-width:767px){.education .education-container{margin-left:0}}.education .education-details .right-area{border-left:1px solid #e5e4e4;padding-bottom:47px}@media screen and (max-width:767px){.education .education-details .right-area{border-left:none}}.education .education-details:last-child .right-area{padding-bottom:0}.education .education-year{font-size:17px;color:#fff;background:#ff675f;text-align:center;width:120px;height:120px;padding:40px 0;border-radius:50%}@media screen and (min-width:1200px){.education .education-year{width:140px;height:140px;padding-top:50px}}@media screen and (max-width:767px){.education .education-year{margin:0 auto}}.education .arrow-part{float:left;width:15px;height:50px;background:transparent url(assets/images/arrow-left-light.png) no-repeat 0 23px}@media screen and (max-width:767px){.education .arrow-part{float:none;width:100%;height:40px;background:transparent url(assets/images/arrow-top-light.png) no-repeat 50% 100%}}\n    /*# sourceMappingURL=education.css.map */\n  "]}),__metadata("design:paramtypes",[education_1.EducationService])],EducationComponent)}();exports.EducationComponent=EducationComponent},{"../services/education":752,"@angular/core":154,"@angular/http":285}],751:[function(require,module,exports){"use strict";exports.SCHOOLS=[{year:{from:2006,to:2007},institution:{name:"CTI",url:"http://www.cti.co.za",location:"Cape Town, South Africa"},qualification:"Comprehensive Programming",content:"<p>Java SE/EE;<br>Linux Red Hat;<br>Processing and Logic concepts;<br>Program Design;<br>Software Engineering;<br>Relational Database &amp; Modelling Design;<br>SQL Server 2000;<br>Linux Administration;</p>"}]},{}],752:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),http_1=require("@angular/http"),schools_1=require("../models/schools"),wrap_error_1=require("../../shared/common/wrap.error"),EducationService=function(){function EducationService(jsonp){this._jsonp=jsonp}return EducationService.prototype.getSchools=function(){return Promise.resolve(schools_1.SCHOOLS)},EducationService.prototype.getCodeSchool=function(){return this._jsonp.request("https://www.codeschool.com/users/ouq77.json?callback=JSONP_CALLBACK").map(function(resp){return resp.json()}).catch(function(err){return wrap_error_1.wrapError(err)})},EducationService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Jsonp])],EducationService)}();exports.EducationService=EducationService},{"../../shared/common/wrap.error":765,"../models/schools":751,"@angular/core":154,"@angular/http":285}],753:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),core_2=require("@angular/core"),platform_browser_1=require("@angular/platform-browser"),experience_1=require("../services/experience"),VideoUrlPipe=function(){function VideoUrlPipe(sanitationService){this._sanitationService=sanitationService}return VideoUrlPipe.prototype.transform=function(videoUrl){return this._sanitationService.bypassSecurityTrustResourceUrl(videoUrl)},VideoUrlPipe=__decorate([core_2.Pipe({name:"videoUrl"}),__metadata("design:paramtypes",[platform_browser_1.DomSanitizationService])],VideoUrlPipe)}();exports.VideoUrlPipe=VideoUrlPipe;var ExperienceComponent=function(){function ExperienceComponent(experienceService){this._experienceService=experienceService}return ExperienceComponent.prototype.ngOnInit=function(){this.getJobs()},ExperienceComponent.prototype.getJobs=function(){var _this=this;this._experienceService.getJobs().then(function(jobs){return _this.jobs=jobs})},ExperienceComponent=__decorate([core_1.Component({selector:"experience",providers:[experience_1.ExperienceService],pipes:[VideoUrlPipe],template:'\n    <section class="experience" id="experience"><div class="container"><div class="heading"><h2>Work Experience</h2><p>what I\'ve done so far</p></div><div *ngFor="let job of jobs" class="row work-details"><div class="col-xs-12 col-sm-3 col-md-2 col-lg-2"><div class="work-year">{{job.year.from}} <i class="fa fa-chevron-circle-right"></i><br>{{job.year.to}}</div></div><div class="col-xs-12 col-sm-9 col-md-10 col-lg-10 right-area"><div class="arrow-part"></div><div class="experience-container"><h4>{{job.institution.name}} <a *ngIf="job.institution.url" href="{{job.institution.url}}" target="_blank" class="link js_track_link_click"><i class="fa fa-link"></i></a></h4><h5>{{job.title}}</h5><h5 class="sub-heading"><i>{{job.institution.location}}</i></h5><section [innerHtml]="job.content" class="content"></section><h6 *ngIf="job.accomplishments">Accomplishments</h6><section *ngIf="job.accomplishments" [innerHtml]="job.accomplishments" class="content"></section><div *ngIf="job.video" class="vid-container"><iframe class="youtube-frame" width="1280" height="720" [src]="job.video | videoUrl" frameborder="0" allowfullscreen></iframe></div></div></div></div></div></section>\n  ',
styles:["\n    .experience{background:#fff}.experience .container{padding-top:85px;padding-bottom:90px}.experience .container .heading{text-align:center;padding-bottom:15px}.experience .container .row{margin:0}.experience h2{color:#ff675f}.experience p{color:#84868d;line-height:18px}.experience .heading p{padding-bottom:41px}.experience h4{font-weight:700}.experience .work-details .right-area{border-left:1px solid #eee;padding-bottom:47px}@media screen and (max-width:767px){.experience .work-details .right-area{border-left:none}}.experience .work-details:last-child .right-area{padding-bottom:0}.experience .work-year{font-size:17px;color:#fff;background:#ff675f;text-align:center;width:120px;height:120px;padding:40px 0;border-radius:50%}@media screen and (min-width:1200px){.experience .work-year{width:140px;height:140px;padding-top:50px}}@media screen and (max-width:767px){.experience .work-year{margin:0 auto}}.experience .arrow-part{float:left;width:15px;height:50px;background:transparent url(assets/images/arrow-left.png) no-repeat 0 23px}@media screen and (max-width:767px){.experience .arrow-part{float:none;width:100%;height:40px;background:transparent url(assets/images/arrow-top.png) no-repeat 50% 100%}}.experience .experience-container{width:auto;background:#f3f3f3;border-bottom:4px solid #eee;padding:22px 47px 6px;margin-left:15px;text-align:left}.experience .experience-container h4{color:#474d5d;padding-bottom:3px}.experience .experience-container h5,.experience .experience-container h6{color:#474d5d}.experience .experience-container .content{color:#84868d;line-height:21px}@media screen and (max-width:767px){.experience .experience-container{margin-left:0}}.experience .saa{padding-top:10px;font-size:30px}.experience .vid-container{position:relative;padding-bottom:50%;padding-top:35px;height:0;overflow:hidden;margin-bottom:18px}.experience .vid-container embed,.experience .vid-container iframe,.experience .vid-container object{position:absolute;top:0;left:0;width:100%;height:100%}.experience .vid-container .youtube-frame{border:0}\n    /*# sourceMappingURL=experience.css.map */\n  "]}),__metadata("design:paramtypes",[experience_1.ExperienceService])],ExperienceComponent)}();exports.ExperienceComponent=ExperienceComponent},{"../services/experience":755,"@angular/core":154,"@angular/platform-browser":318}],754:[function(require,module,exports){"use strict";exports.JOBS=[{year:{from:"Apr 2016",to:"Present"},institution:{name:"Fairfax Media",url:"http://www.fairfaxmedia.co.nz/",location:"Wellington, New Zealand"},title:"Front-end Developer (Contract)",content:"&nbsp;"},{year:{from:"Jun 2014",to:"Mar 2016"},institution:{name:"Westpac New Zealand Ltd",url:"https://www.westpac.co.nz",location:"Wellington, New Zealand"},title:"Analyst Programmer (UI)",content:"<p>Worked as a <b>UI Developer</b> at Westpac NZ, where I was involved in a number of projects, including <b><i>Direct from Account&trade;</i></b>, <b><i>Westpac Exchange&trade;</i></b> and <b><i>Westpac One&reg;</i></b>.</p><p>The server-side development environment was <b>Java</b>, while the client-side was built using a variety of <b>JavaScript technologies</b> and <b>frameworks</b>, most notably <b>RequireJS</b>, <b>Backbone</b>, Marionette, <b>Underscore</b>, <b>AngularJS</b>, SCSS, and, during development, <b>Node.js</b>.</p><p>Build and Testing tools included <b>Grunt</b>, Maven, Jenkins, JUnit, Cucumber, <b>Jasmine</b> and <b>Karma</b>.</p>"},{year:{from:"Jan 2013",to:"Apr 2014"},institution:{name:"EROAD",url:"http://www.eroad.co.nz",location:"Auckland, New Zealand"},title:"Senior Java Developer",content:"<p>Employed as a Java Developer at EROAD, New Zealand's leading transport technology and services company. Worked in an <b>agile environment</b> developing and unit testing existing and new enhancements, which involved user <b>interface</b>, <b>web-services</b> and <b>back-end integration</b> for EROAD's <b>Cloud Based SaaS application</b>.</p><p>The development environment was <b>Java</b>, and frameworks and technologies included <b>Spring MVC</b>, <b>JSP</b>, <b>JQuery</b>, <b>RESTful</b> web-services over <b>HTTP</b>, <b>JAX-WS/JAXB</b> web-services over <b>SOAP</b>, <b>Hibernate</b> and <b>PostgreSQL</b>.</p><p>Mainly functioned within the Tax and Localisation team, which included the <b>GIS</b> and mapping layer.</p>",accomplishments:"<p>Worked alongside the Hardware team on the implementation of a <b>RESTful JSON</b> communication protocol over HTTP for the 2nd Generation On-board Units.</p>"},{year:{from:"Jul 2011",to:"Dec 2012"},institution:{name:"Rockwell",url:"http://nz.rockwellautomation.com",location:"Hamilton, New Zealand"},title:"Software Developer",content:"<p>Worked as a Software Developer at the New Zealand campus of Rockwell Automation. Functioned within an <b>agile team</b> developing <b>user interface</b> elements as well as <b>web-services</b> and <b>back-end integration</b> for a performance management platform used in a variety of industries worldwide. This <b>multi-tier application</b> was deployed in a web environment (<b>Tomcat</b> &amp; <b>JBoss</b>), on the <b>Java EE technology stack</b>.</p><p>The development environment was <b>Java</b>, utilizing third-party technologies such as <b>GWT</b>, to deliver a rich user experience.</p>",accomplishments:"<p>Was involved in a major overhaul of the UI for the PPM System, which, amongst other tasks, involved the implementation of a <b>WYSIWYG editor</b> inside GWT. Worked with my team in New Zealand alongside teams in the US and China to re-build the data collection component.</p>"},{year:{from:"Nov 2008",to:"Apr 2011"},institution:{name:"Quirk",url:"http://www.quirk.biz",location:"Cape Town, South Africa"},title:"Software Engineer",content:"<p>Worked as a Software Engineer at the Cape Town office of Quirk developing <b>Java</b> (<b>Java EE</b>) <b>web based applications</b> to client specifications within specified deadlines. Projects included <b>SEO optimised websites</b> and <b>mobile websites</b>, <b>custom built CMS</b> solutions, <b>Facebook Applications</b>, integrations with <b>Twitter</b> and other <b>3rd party APIs</b>, <b>RSS Feeds</b> (both generating and parsing). The development environment was <b>Java</b>, utilising the <b>MVC WebWork</b> framework and <b>Freemarker Template</b> engine, backed by <b>Spring</b>, <b>MySQL</b> and <b>Hibernate</b>.</p><p>Maintained and supported existing applications. Interfaced with clients regularly for presentations and training. Compiled client facing documentation where required. Performed on-call server monitoring duties.</p>",accomplishments:"<p>Integrated an open source <b>mobile framework</b> (WURFL) into the Quirk software stack enabling development of mobile client solutions. Converted <b>Google's server-side JSP tracking</b> code to fit into the Quirk stack and WebWork framework.</p><p>Developed a <b>live tracking solution</b> of a colleague's mountain bike race via <b>GPS</b>, Vodacom API and <b>Google Maps API</b>.</p>",video:"//www.youtube.com/embed/34Tb79-2ekc?rel=0"},{year:{from:"Feb 2008",to:"Oct 2008"},institution:{name:"Cellsmart",location:"Cape Town, South Africa"},title:"Java Developer",content:"<p>Developed <b>Java ME</b> applications for <b>embedded systems</b>. Was also involved with the server-side software and mobile sites to support the download and installation thereof. Maintained existing software.</p>"},{year:{from:"Dec 1997",to:"Jan 2006"},institution:{name:"South African Airways",location:"Cape Town & Johannesburg, South Africa"},title:"Flight Attendant",content:'<p><br><i class="fa fa-globe fa-2x"></i>&nbsp;&nbsp;&nbsp;<i class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;<i class="fa fa-plane fa-2x"></i></p>'}]},{}],755:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),jobs_1=require("../models/jobs"),ExperienceService=function(){function ExperienceService(){}return ExperienceService.prototype.getJobs=function(){return Promise.resolve(jobs_1.JOBS)},ExperienceService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],ExperienceService)}();exports.ExperienceService=ExperienceService},{"../models/jobs":754,"@angular/core":154}],756:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),footer_1=require("../services/footer"),FooterComponent=function(){function FooterComponent(footerService){this._footerService=footerService,this.currentDate=new Date}return FooterComponent.prototype.ngOnInit=function(){this.getLinks(),this.getLastModified()},FooterComponent.prototype.getLinks=function(){var _this=this;this._footerService.getLinks().then(function(links){return _this.links=links})},FooterComponent.prototype.getLastModified=function(){var _this=this;this._footerService.getLastModified().subscribe(function(lastModified){return _this.lastModified=lastModified})},FooterComponent=__decorate([core_1.Component({selector:"footer",providers:[footer_1.FooterService],template:'\n    <section class="footer" id="links"><div class="container"><div class="heading"><h2>Links</h2><p>social links and page info</p></div><ul><li *ngFor="let link of links"><a href="{{link.url}}" target="_blank" title="{{link.title}}" class="js_track_link_click"><i class="fa fa-{{link.icon}} fa-2x"></i></a></li></ul><div class="footer-info"><p><i class="fa fa-copyright"></i>&nbsp;{{currentDate | date:"yyyy"}} &ndash; HTML Template by <i><a href="http://themeforest.net/user/themeelite" target="_blank" class="js_track_link_click">themeelite</a></i></p><p>Hosted on the <i><a href="http://heroku.com" target="_blank" class="js_track_link_click">heroku.com</a></i> cloud platform</p><p>Angular 2, TypeScript, SCSS, (jQuery, Underscore)</p><p>Node.js server code <a href="https://github.com/feross/standard" target="_blank"><img class="js-standard-style" src="https://cdn.rawgit.com/feross/standard/master/badge.svg" alt="JS Standard style"></a>&nbsp;compliant</p><p><i class="fa fa-git"></i>&nbsp;Deployed from <a href="https://github.com/ouq77/portfolio-web/tree/portfolio-web-ng2-heroku" target="_blank" class="js_track_link_click">this repo</a></p><p><i class="fa fa-file-code-o"></i>&nbsp;Docs <a href="/docs/index.html" target="_blank" class="js_track_link_click">hosted here</a></p></div></div><div *ngIf="lastModified" class="last-modified"><p><sup>Last updated: <time>{{lastModified.last_modified}}</time></sup></p></div></section>\n  ',styles:["\n    .footer{background:#00bdbd}.footer .container{padding-top:85px;padding-bottom:90px}.footer .container .heading{text-align:center;padding-bottom:15px}.footer .container .row{margin:0}.footer ul{margin:0 auto;text-align:center;list-style-type:none}.footer ul li{display:inline-block;text-align:center;background:#fff;color:#00bdbd;line-height:42px;margin:0 6px;width:42px!important;height:42px!important;border-radius:50%;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.footer ul li:hover{background:#0a9f9f}.footer ul li:hover a{color:#fff}.footer ul li a{color:#00bdbd;width:42px!important;height:42px!important}.footer ul li a i{line-height:42px!important}.footer .footer-info{text-align:center;padding-top:15px}.footer .footer-info p{padding-bottom:5px}.footer .footer-info .js-standard-style{height:22px}.footer .last-modified{text-align:right}.footer .last-modified p{padding-bottom:5px;padding-right:20px}\n    /*# sourceMappingURL=footer.css.map */\n  "]}),__metadata("design:paramtypes",[footer_1.FooterService])],FooterComponent)}();exports.FooterComponent=FooterComponent},{"../services/footer":758,"@angular/core":154}],757:[function(require,module,exports){"use strict";exports.LINKS=[{url:"https://nz.linkedin.com/in/louwswart/",title:"See my LinkedIn here",icon:"linkedin"},{url:"https://github.com/ouq77",title:"See examples of my code here",icon:"github"},{url:"https://plus.google.com/u/0/+LouwSwart/about?rel=author",title:"See my Google+ here",icon:"google-plus"},{url:"https://instagram.com/ouq77",title:"See my Instagram here",icon:"instagram"},{url:"https://www.facebook.com/ouq77",title:"See my Facebook here",icon:"facebook"},{url:"https://www.codeschool.com/users/819219",title:"See my Code School progress here",icon:"code"}]},{}],758:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),http_1=require("@angular/http"),links_1=require("../models/links"),wrap_error_1=require("../../shared/common/wrap.error"),FooterService=function(){function FooterService(http){this._http=http}return FooterService.prototype.getLinks=function(){return Promise.resolve(links_1.LINKS)},FooterService.prototype.getLastModified=function(){return this._http.get("/lastmodified").map(function(resp){return resp.json()}).catch(function(err){return wrap_error_1.wrapError(err)})},FooterService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],FooterService)}();exports.FooterService=FooterService},{"../../shared/common/wrap.error":765,"../models/links":757,"@angular/core":154,"@angular/http":285}],759:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),header_1=require("../services/header"),header_config_1=require("../models/header.config"),delay_1=require("../../shared/common/delay"),HeaderComponent=function(){function HeaderComponent(_headerService){this._headerService=_headerService}return HeaderComponent.prototype.ngOnInit=function(){this.initImageIds(),this.initResizeListener()},HeaderComponent.prototype.initImageIds=function(){var _this=this;this._headerService.getImageIds().subscribe(function(resp){return _this.initGridRotator(resp.imageIds)},function(err){return console.warn("imageIds not returned")})},HeaderComponent.prototype.initResizeListener=function(){var _this=this;!function($){$(window).on("resize",function(){_this.setBannerSize(_this._previousWidth,_this._previousHeight)})}(jQuery)},HeaderComponent.prototype.initGridRotator=function(imageIds){var _this=this;this.imageIds=imageIds,function($){delay_1.delay(250).then(function(){_this.setBannerSize(_this._previousWidth,_this._previousHeight),$("#ri-grid").gridrotator(header_config_1.GRID_ROTATOR_CONFIG),_this.initNavigation()})}(jQuery)},HeaderComponent.prototype.initNavigation=function(){!function($){$(document).ready(function(){$(".navbar-wrapper").stickUp(header_config_1.MENU_CONFIG),$(".navbar.navbar-inverse.navbar-static-top a").click(function(){return $(".navbar-collapse").addClass("hide-class").addClass("collapse").removeClass("in")}),$(".navbar-toggle").click(function(){return $(".navbar-collapse").removeClass("hide-class")})})}(jQuery)},HeaderComponent.prototype.setBannerSize=function(previousWidth,previousHeight){var _this=this;void 0===previousWidth&&(previousWidth=0),void 0===previousHeight&&(previousHeight=0),function($,previousWidth,previousHeight){var windowWidth=$(window).width(),windowHeight=$(window).height(),widthChanged=previousWidth!==windowWidth,heightChanged=!1;windowHeight-previousHeight>60&&(heightChanged=!0),windowHeight-previousHeight<-60&&(heightChanged=!0),(widthChanged||heightChanged)&&($(".banner").css({width:windowWidth,height:windowHeight-60}),_this.setDynamicCssValues(),_this._previousWidth=windowWidth,_this._previousHeight=windowHeight)}(jQuery,previousWidth,previousHeight)},HeaderComponent.prototype.setDynamicCssValues=function(){!function($){var bannerText=$(".banner-text");bannerText.css("top",($(window).height()-bannerText.height())/2-63)}(jQuery)},HeaderComponent=__decorate([core_1.Component({selector:"header",providers:[header_1.HeaderService],template:'\n    <div class="banner row" id="home"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 no-padding"><div id="ri-grid" class="ri-grid-loading ri-grid ri-grid-size-2"><img class="ri-loading-image" src="assets/images/loading.gif" alt="Loading..."><ul id="js_cb_slideshow" class="cb-slideshow"><li *ngFor="let imageId of imageIds"><a href="#"><img src="//instagram.com/p/{{imageId}}/media/?size=m" alt=" Louw Swart"></a></li></ul></div></div></div><div class="banner-text container"><h1>Louw Swart</h1><h2>ex-flight attendant turned programmer</h2></div><div class="menu"><div class="navbar-wrapper"><div class="container"><div class="nav-wrapper"><div class="navbar navbar-inverse navbar-static-top"><div class="container"><div id="mss" class="navbar-header"><button id="js_menu_button" type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#">Menu</a></div><div id="js_navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class="menu-item active"><a href="#home" class="js_track_link_click">Home</a></li><li class="menu-item"><a href="#about" class="js_track_link_click">About</a></li><li class="menu-item"><a href="#skills" class="js_track_link_click">Skills</a></li><li class="menu-item"><a href="#experience" class="js_track_link_click">Experience</a></li><li class="menu-item"><a href="#education" class="js_track_link_click">Education</a></li><li class="menu-item"><a href="#contact" class="js_track_link_click">Contact</a></li><li class="menu-item" id="js_links_li"><a href="#links" class="js_track_link_click">Links</a></li></ul></div></div></div></div></div></div></div>\n  ',styles:["\n    header{position:relative}@media screen and (max-width:810px){header{font-size:38px}header span{font-size:16px}}.banner{overflow:hidden;margin:0 auto!important;background:#262b37;height:3000px}.banner .no-padding{padding:0!important}.banner-text{position:absolute;left:0;right:0;text-align:center;padding:30px 0;max-width:835px;border:1px solid #fff;background:rgba(0,0,0,.5);zoom:1}.banner-text h1{text-transform:uppercase}.banner-text h2{font-size:34px;text-transform:none}@media screen and (max-width:992px){.banner-text{padding-left:25px;padding-right:25px}.banner-text h1{font-size:65px;line-height:71px}.banner-text h2{font-size:28px}}@media screen and (max-width:650px){.banner-text{padding-top:15px;padding-bottom:15px}.banner-text h1{font-size:42px;line-height:48px}.banner-text h2{font-size:18px;line-height:24px}}.cb-slideshow{background:#1b1f2b}.cb-slideshow li{opacity:.7}.ri-grid{margin:0 auto;position:relative;height:auto}.ri-grid ul{list-style:none;display:block;width:100%;margin:0;padding:0;zoom:1}.ri-grid ul:after,.ri-grid ul:before{content:'';display:table}.ri-grid ul:after{clear:both}.ri-grid ul li{-webkit-perspective:400px;-o-perspective:400px;perspective:400px;margin:0;padding:0;float:left;position:relative;display:block;overflow:hidden;background:#000}.ri-grid ul li a{display:block;outline:none;position:absolute;left:0;top:0;width:100%;height:100%;background:#333 no-repeat 50%;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;background-size:100% 100%;-o-box-sizing:content-box;box-sizing:content-box}.ri-grid-size-1{width:55%}.ri-grid-size-2{width:100%}.ri-grid-size-3{width:100%;margin-top:0}.ri-shadow:after,.ri-shadow:before{content:\"\";position:absolute;z-index:-2;bottom:15px;left:10px;width:50%;height:20%;max-width:300px;max-height:100px;box-shadow:0 15px 10px rgba(0,0,0,.7);-webkit-transform:rotate(-3deg);transform:rotate(-3deg)}.ri-shadow:after{right:10px;left:auto;-webkit-transform:rotate(3deg);transform:rotate(3deg)}.ri-grid-loading:after,.ri-grid-loading:before,.ri-loading-image{display:none}.ri-grid-loading .ri-loading-image{position:relative;width:40px;height:40px;left:50%;margin:50px 0 50px -15px;display:block}.is-stuck{left:0;width:100%}.menu{margin-top:0;position:static;left:0;right:0}.nav-wrapper .container{padding:0;width:auto}@media screen and (max-width:767px){.nav-wrapper .container{padding-right:15px;padding-left:15px}}.navbar-header{display:none}@media screen and (max-width:767px){.navbar-header{display:block}}.nav>li>a{display:inline-block}.navbar-nav>li{float:none;display:inline}.navbar-nav{margin:0 auto;text-align:center;float:none}.navbar-toggle{margin-top:14px}.navbar-wrapper{margin-top:0;position:relative;z-index:15;background:#262b37}.navbar-wrapper .container{padding:0}@media screen and (max-width:767px){.navbar-wrapper .container{padding-right:15px;padding-left:15px}}.navbar-collapse{padding:0}.navbar-collapse.in{max-height:100%}.navbar.navbar-inverse.navbar-static-top{margin:2px auto;background:#262b37;color:#c3c8d6;border:none;font-family:Open Sans,sans-serif;font-size:14px;text-transform:uppercase}.navbar.navbar-inverse.navbar-static-top a{padding:22px 25px;line-height:18px;text-align:center;-webkit-transition:all .2s ease;transition:all .2s ease}.navbar.navbar-inverse.navbar-static-top a:hover{color:#fff}@media screen and (max-width:992px){.navbar.navbar-inverse.navbar-static-top a{padding-left:18px;padding-right:18px}}@media screen and (max-width:810px){.navbar.navbar-inverse.navbar-static-top a{padding-left:17px}}@media screen and (max-width:480px){.navbar.navbar-inverse.navbar-static-top a{line-height:17px;padding-top:20px;padding-bottom:11px}}.navbar-inverse .navbar-nav>.active>a{background:#1b1f29;color:#c3c8d6}.navbar-inverse .navbar-nav>.active>a:focus{color:#c3c8d6}.navbar-inverse .navbar-nav>.active>a:hover{color:#fff}@media screen and (max-width:767px){ul.navbar-nav li a{display:block}}.hide-class{display:none}.carousel-caption{z-index:10}.carousel .item{height:600px;background-color:#0a64a4}.carousel-inner>.item>img{position:absolute;top:0;left:0;min-width:100%}\n    /*# sourceMappingURL=header.css.map */\n  "]}),__metadata("design:paramtypes",[header_1.HeaderService])],HeaderComponent)}();exports.HeaderComponent=HeaderComponent},{"../../shared/common/delay":763,"../models/header.config":760,"../services/header":761,"@angular/core":154}],760:[function(require,module,exports){"use strict";exports.MENU_CONFIG={parts:{0:"home",1:"about",2:"skills",3:"experience",4:"education",5:"contact",6:"links"},itemClass:"menu-item",itemHover:"active",topMargin:"auto"},exports.GRID_ROTATOR_CONFIG={container:"#home",columns:8,animType:"rotateBottom",animSpeed:300,step:"random",maxStep:3,preventClick:!0,onhover:!0,w1024:{columns:6},w768:{columns:4},w480:{columns:3},w320:{columns:2}}},{}],761:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),http_1=require("@angular/http"),wrap_error_1=require("../../shared/common/wrap.error"),HeaderService=function(){function HeaderService(http){this._http=http}return HeaderService.prototype.getImageIds=function(){return this._http.get("/imageids").map(function(resp){return resp.json()}).catch(function(err){return wrap_error_1.wrapError(err)})},HeaderService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],HeaderService)}();exports.HeaderService=HeaderService},{"../../shared/common/wrap.error":765,"@angular/core":154,"@angular/http":285}],762:[function(require,module,exports){var core_1=require("@angular/core"),platform_browser_dynamic_1=require("@angular/platform-browser-dynamic"),forms_1=require("@angular/forms"),app_module_1=require("./app.module");core_1.enableProdMode(),platform_browser_dynamic_1.platformBrowserDynamic().bootstrapModule(app_module_1.AppModule,{modules:[forms_1.FormsModule]})},{"./app.module":737,"@angular/core":154,"@angular/forms":246,"@angular/platform-browser-dynamic":307}],763:[function(require,module,exports){"use strict";exports.delay=function(duration){return new Promise(function(resolve){return setTimeout(resolve,duration)})},exports.cancelableDelay=function(duration,callback){return setTimeout(callback,duration)}},{}],764:[function(require,module,exports){"use strict";exports.elementInViewport=function($,el){var viewportWidth=$(window).width(),viewportHeight=$(window).height(),minTop=$(document).scrollTop(),maxTop=minTop+viewportHeight,minLeft=$(document).scrollLeft(),maxLeft=minLeft+viewportWidth,elementOffset=el.offset();return elementOffset.top>minTop&&elementOffset.top<maxTop&&elementOffset.left>minLeft&&elementOffset.left<maxLeft}},{}],765:[function(require,module,exports){"use strict";function wrapError(err){var wrappedError;try{wrappedError={status:err.status,content:err.json()}}catch(jsonError){wrappedError={status:err.status,content:err.text()||jsonError.message}}return console.warn(wrappedError.status+": "+(wrappedError.content&&JSON.stringify(wrappedError.content)||"-")),Observable_1.Observable.throw(wrappedError)}var Observable_1=require("rxjs/Observable");exports.wrapError=wrapError},{"rxjs/Observable":401}],766:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),skills_1=require("../services/skills"),delay_1=require("../../shared/common/delay"),element_in_viewport_1=require("../../shared/common/element.in.viewport"),SkillsComponent=function(){function SkillsComponent(skillService){this._skillService=skillService,this._skillChartDrawn=!1}return SkillsComponent.prototype.ngOnInit=function(){this.getSkills(),this.initScrollListener()},SkillsComponent.prototype.getSkills=function(){var _this=this;this._skillService.getSkills().then(function(skills){_this.skills=skills,_this.drawChart()})},SkillsComponent.prototype.initScrollListener=function(){var _this=this;!function($){$(document).on("scroll",function(){_this._timeoutScroll&&clearTimeout(_this._timeoutScroll),_this._timeoutScroll=delay_1.cancelableDelay(500,function(){_this._skillChartDrawn||_this.drawChart()})})}(jQuery),this._skillChartDrawn||this.drawChart()},SkillsComponent.prototype.drawChart=function(){var _this=this;!function($){$(".js_trigger_skills").each(function(index,val){!_this._skillChartDrawn&&element_in_viewport_1.elementInViewport($,$(val))&&(_this._skillChartDrawn=!0,$(".chart").easyPieChart({onStep:function(from,to,percent){$(this.el).find(".percent").text(Math.round(percent))}}))})}(jQuery)},SkillsComponent=__decorate([core_1.Component({selector:"skills",providers:[skills_1.SkillService],template:'\n    <section class="skills" id="skills"><div class="container"><div class="heading"><h2>Technical Skills</h2><p>my level of confidence</p></div><div class="row"><div *ngFor="let skill of skills, let i=index" class="col-xs-12 col-sm-4 col-md-4 col-lg-4 skills-area"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 skills"><span class="chart skill-background" [attr.data-percent]="skill.level"><span class="percent"></span></span><h4 class="js_trigger_skills">{{skill.name}}</h4><p>{{skill.content}}</p></div></div></div></div></section>\n  ',styles:["\n    .add-space{height:60px;background:#eee}.skills{background:#eee;color:#474d5d}.skills .container{padding-top:85px;padding-bottom:70px}.skills .container .heading{text-align:center;padding-bottom:15px}.skills .container .row{margin:0}.skills p{color:#474d5d}.skills h2{color:#ff675f}.skills .skills-area{padding:0}.skills .skills{margin:0 auto 23px;text-align:center;float:none;padding:0;width:200px}.skills .skills p{color:#84868d;font-size:13px;line-height:18px;text-align:center}.skills .skills img{margin:0 auto 33px;width:100%;max-width:152px}.skills .skills h4{font-weight:700;text-transform:uppercase}.skill-background{background:transparent url(assets/images/skills.png) no-repeat 0 0}.chart{position:relative;width:152px;height:152px;margin-bottom:26px;text-align:center}.chart,.percent{display:inline-block}.percent{font-size:21px;color:#474d5d;line-height:152px;z-index:1}.percent:after{content:'%';margin-left:.1em;font-size:.8em}.angular{margin-top:100px}.angular .chart{margin-top:0}\n    /*# sourceMappingURL=skills.css.map */\n  "]}),__metadata("design:paramtypes",[skills_1.SkillService])],SkillsComponent)}();exports.SkillsComponent=SkillsComponent},{"../../shared/common/delay":763,"../../shared/common/element.in.viewport":764,"../services/skills":768,"@angular/core":154}],767:[function(require,module,exports){"use strict";exports.SKILLS=[{name:"Scripting",level:90,content:"AngularJS; Backbone; Node.js;"},{name:"Web Markup",level:80,content:"HTML5; CSS3; SCSS;"},{name:"Java",level:90,content:"Java EE; Java SE 6/7; Java ME;"},{name:"Web Services",level:85,content:"JAX-WS; JAXB; RESTful Web Services;"},{name:"Databases",level:85,content:"PostgreSQL; PostGIS; MySQL/MSSQL; Hibernate;"},{name:"Version Control",level:90,content:"GIT; Mercurial; SVN;"}]},{}],768:[function(require,module,exports){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){
var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},core_1=require("@angular/core"),skills_1=require("../models/skills"),SkillService=function(){function SkillService(){}return SkillService.prototype.getSkills=function(){return Promise.resolve(skills_1.SKILLS)},SkillService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],SkillService)}();exports.SkillService=SkillService},{"../models/skills":767,"@angular/core":154}]},{},[762]);